---
title: "อัพเกรดการทดสอบการโยกย้าย"
description: "หัวข้อนี้อธิบายวิธีการทดสอบงานที่เกิดขึ้นหลังจากที่คุณปิด AX 2012 แต่ก่อนที่คุณเปิด Dynamics 365 สำหรับการเงินและการดำเนินงาน รุ่น Enterprise"
author: tariqbell
manager: AnnBe
ms.date: 05/29/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations, UnifiedOperations, Platform
ms.search.region: Global
ms.author: tabell
ms.search.validFrom: 2017-06-16
ms.dyn365.ops.version: Platform update 8
ms.translationtype: Human Translation
ms.sourcegitcommit: 6816e3820ab77c71bbf9bde4a068375448331671
ms.openlocfilehash: 711ad5cc3aafacf209704349effb4e08019205ac
ms.contentlocale: th-th
ms.lasthandoff: 06/15/2017

---

# <a name="upgrade-cutover-testing"></a>อัพเกรดการทดสอบการโยกย้าย

[!include[banner](../includes/banner.md)]

[!include[upgrade banner](../includes/upgrade-banner.md)]

*การโยกย้าย* เป็นคำที่เราใช้สำหรับกระบวนการขั้นสุดท้ายในการใช้งานระบบใหม่จริง กระบวนการโยกย้ายนี้ประกอบด้วย งานที่เกิดขึ้นหลังจากปิด Microsoft Dynamics AX 2012 แต่ก่อน Microsoft Dynamics 365 สำหรับการเงินและการดำเนินงาน รุ่น Enterprise จะถูกเปิด วัตถุประสงค์ของการทดสอบการโยกย้ายของการอัพเกรดคือ เพื่อฝึกกระบวนการโยกย้าย เพื่อช่วยรับประกันประสบการณ์ที่ราบรื่นสำหรับทุกคนที่เกี่ยวข้องในระหว่างการโยกย้ายจริงเพื่อการเริ่มใช้งานจริง

มีสองสตรีมหลักในระหว่างการโยกย้าย:

- **สตรีมงานทางเทคนิค** – สตรีมงานนี้ประกอบด้วยกระบวนการดำเนินการอัพเกรดข้อมูล ธุรกิจของคุณจะบังคับใช้ขีดจำกัดจำนวนการหยุดทำงานที่ได้รับอนุญาต ในระหว่างการหยุดทำงานนี้ ทั้ง AX 2012 หรือการเงินและการดำเนินงานจะไม่พร้อมใช้งาน สตรีมงานนี้อาจต้องปรับแต่งกระบวนการอัพเกรดข้อมูล เพื่อให้ตรงกับขีดจำกัดการหยุดทำงานของธุรกิจ
- **สตรีมงานด้านการทำงาน** – สตรีมงานนี้รวมงานการตั้งค่าคอนฟิก ที่ดำเนินการหลังจากการอัพเกรดข้อมูลเสร็จสมบูรณ์ งานเหล่านี้ทั้งหมดต้องถูกจัดทำเอกสารและแสดงปริมาณ และทรัพยากรต้องถูกมอบหมาย เนื่องจากทั้งสตรีมงานด้านการทำงานและสตรีมงานทางเทคนิคต้องพอดีกับขีดจำกัดการหยุดทำงานของธุรกิจ

ภาพประกอบต่อไปนี้แสดงกระบวนการโดยรวมสำหรับการโยกย้ายไปยังการใช้งานจริง เนื่องจากจะเกิดขึ้นในสภาพแวดล้อมการผลิต

![กระบวนการโยกย้าย](./media/cutover_1.png)

กระบวนการโยกย้ายนี้แตกต่างจากการอัพเกรดข้อมูลพื้นฐานในสภาพแวดล้อม sandbox ในลักษณะต่อไปนี้:

- ฐานข้อมูล AX 2012 ไม่ถูกคัดลอก แต่ถูกสำรองเท่านั้น และจากนั้นจะมีการปรับเปลี่ยนฐานข้อมูลต้นฉบับ วิธีการนี้จะเร็วขึ้น และการสำรองข้อมูลให้ย้อนกลับ ถ้าจำเป็นต้องย้อนกลับ
- เนื่องจากสภาพแวดล้อมการผลิตสำหรับการเงินและการดำเนินงานได้จำกัดการเข้าถึง ภารกิจที่ได้กระทำบนอินสแตนซ์ sandbox ของ Application Object Server (AOS) ก่อนหน้านี้ ขณะนี้ได้ถูกดำเนินการโดยทีม Microsoft DSE งานเหล่านี้ประกอบด้วย การดาวน์โหลดและการนำเข้าไฟล์ bacpac และการเรียกใช้แพคเกจ MajorversionDataUpgrade.zip
- เราเพิ่มงานต่อไปนี้:

    - ทำการทดสอบ smoke
    - ดำเนินงานการตั้งค่าแอพลิเคชันให้เสร็จสมบูรณ์ ขั้นตอนนี้อาจมีขนาดใหญ่ ขึ้นอยู่กับฟังก์ชันที่จะใช้ ในระหว่างขั้นตอนนี้ ทีมงานตั้งค่าคอนฟิกฟังก์ชันแอพลิเคชันใหม่ เพื่อที่ว่าจะได้พร้อมที่จะใช้ในระบบที่อัพเกรด
    - อนุญาตให้ผู้ใช้กลับเข้ามา แจ้งฐานผู้ใช้ของคุณว่า การอัพเกรดเสร็จสมบูรณ์ และพวกเขาสามารถใช้ระบบได้อีกครั้ง

## <a name="technical-workstream"></a>สตรีมงานทางเทคนิค

สตรีมงานทางเทคนิคเกี่ยวข้องกับสมาชิกของทีมงานด้านเทคนิคต่าง ๆ: ผู้ดูแลฐานข้อมูล (DBA) ผู้ดูแลระบบ AX 2012 ผู้ดูแลเซิร์ฟเวอร์ และนักพัฒนาที่คุ้นเคยกับ AX 2012 และงการเงินและการดำเนินงาน หัวข้อนี้จะอธิบายว่างานใดเกี่ยวข้องกับบทบาทใด

ในระหว่างการทดสอบการโยกย้าย ทีมงานด้านเทคนิคจะเน้นเกี่ยวกับประสิทธิภาพและการทดสอบความน่าเชื่อถือของกระบวนการอัพเกรดข้อมูล เพื่อให้แน่ใจว่าเป็นไปตามขีดจำกัดการหยุดทำงานของธุรกิจ องค์ประกอบมากมายของฮาร์ดแวร์และซอฟต์แวร์เกี่ยวข้องในกระบวนการนี้ บางองค์ประกอบเหล่านี้อยู่ในสถานที่ ในขณะที่ผู้อื่นอยู่ใน Microsoft cloud นอกจากนี้ องค์ประกอบมากมายของรหัสแอพลิเคชันที่กำหนดเองและรหัสมาตรฐานจะมีความเกี่ยวข้อง ผลลัพธ์ของการทดสอบนี้ควรจะมั่นใจในกระบวนการโยกย้ายสำหรับสภาพแวดล้อมของคุณ

### <a name="turn-off-the-ax-2012-aos-instances"></a>ปิดอินสแตนซ์ AOS ของ AX 2012

งานนี้เกี่ยวข้องกับผู้ดูแลระบบ AX 2012 และผู้ดูแลเซิร์ฟเวอร์

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- **ชุดงานที่กำลังรันอยู่ในขณะโยกย้าย** – ชุดงานรันเป็นเวลานานที่เริ่มการรันแล้วจะป้องกันไม่ให้ระบบหยุดทำงาน วางแผนล่วงหน้า เพื่อให้คุณสามารถหยุดอินสแตนซ์ AOS ของคุณได้ในขณะที่ต้องการ คุณอาจต้องจัดกำหนดการชุดงาน เพื่อให้เสร็จสมบูรณ์ในเวลาก่อนที่คุณจะปิด AX 2012
- **ระบบรวม** – คุณอาจมีระบบอื่น ๆ ที่ถูกรวมกับสภาพแวดล้อม AX 2012 คุณต้องใส่ระบบเหล่านี้ไปยังแผนของคุณ เพื่อปิดการใช้งาน AX 2012 ตัวอย่างเช่น คุณอาจต้องปิดระบบรวมสักครั้ง ก่อนที่คุณจะปิด AX 2012 เอง เพื่อให้สามารถกระทำธุรกรรม in-flight ใด ๆ ที่เหลือเสร็จสมบูรณ์ได้ ความต้องการสำหรับระบบรวมแปรผันอย่างมากจากธุรกิจสู่ธุรกิจ ดังนั้น ทีมผู้เชี่ยวชาญของคุณต้องวางแผนสำหรับสถานการณ์จำลองนี้แยกต่างหาก

### <a name="create-a-backup-of-the-ax-2012-database"></a>สร้างสำเนาสำรองของฐานข้อมูล AX 2012

งานนี้เกี่ยวข้องกับ DBA การสำรองข้อมูลจะถูกใช้ ถ้าจำเป็นต้องมีการย้อนกลับ ยังจะใช้เป็นจุดอ้างอิงที่จะเก็บไว้สำหรับรอบระยะเวลา และแสดงสถานะของระบบ ณ เวลาการโยกย้ายอีกด้วย

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- เรียกดูกำหนดเวลารูปธรรมสำหรับกระบวนการสำรองข้อมูล
- ปรับเปลี่ยนตัวเลือกสำรองที่จะใช้ (ตัวอย่างเช่น การบีบอัดและไม่บีบอัด) เพื่อช่วยรับประกันการสำรองข้อมูลที่เป็นไปได้เร็วที่สุด

### <a name="export-the-database-to-bacpac"></a>ส่งออกฐานข้อมูลไปที่ bacpac

งานนี้เกี่ยวข้องกับ DBA ผลลัพธ์ของงานนี้คือ ไฟล์ส่งออกที่จะถูกอัพโหลดไปที่ Microsoft Azure สำหรับระบบใหม่

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- เรียกดูกำหนดเวลารูปธรรมสำหรับกระบวนการสำรองข้อมูล
- ปรับกระบวนการส่งออกให้เหมาะสม เพื่อช่วยรับประกันประสบการณ์ที่เร็วที่สุดที่เป็นไปได้ การเพิ่มประสิทธิภาพอาจต้องใช้งานต่อไปนี้:

    - ทรัพยากรของระบบหน่วยวัดในระหว่างการส่งออก เช่น CPU ดิสก์ I/O และหน่วยความจำ
    - หากพบปัญหาการขาดแคลนทรัพยากร สร้างแผนเพื่อลดจำนวนลง โดยทั่วไป คุณจะลดปัญหาการขาดแคลนเหล่านี้ โดยการมอบหมายทรัพยากรจำเป็นมากขึ้น

### <a name="upload-the-bacpac-file-to-azure-storage"></a>อัพโหลดไฟล์ bacpac ไปยังที่จัดเก็บ Azure

งานนี้เกี่ยวข้องกับการ DBA หรือผู้ดูแลเซิร์ฟเวอร์ ในระหว่างภารกิจ ไฟล์ bacpac จะถูกย้ายเข้าใน Azure

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- เลือกเครื่องที่จะใช้สำหรับการอัพโหลด และทำให้แน่ใจว่าเครื่องมือสำรวจ Azure Storage ถูกตั้งค่าคอนฟิก และพร้อมที่จะใช้งาน
- ได้รับการกำหนดเวลารูปธรรม สำหรับการประมวลผลการอัพโหลดโดยการวัดหลายครั้ง เวลาในการอัพโหลดจะแตกต่างกัน ขึ้นอยู่กับความเร็วของการเชื่อมต่ออินเทอร์เน็ตของคุณและที่ตั้งทางภูมิศาสตร์ของ Azure datacenter ที่สัมพันธ์กับที่ตั้งของคุณ

### <a name="download-and-import-the-bacpac-file-to-the-azure-sql-database"></a>ดาวน์โหลด และนำเข้าไฟล์ bacpac ไปยังฐานข้อมูล Azure SQL

เมื่องานนี้เกิดขึ้นในขณะใช้งานจริง จะมีการดำเนินการโดยทีม Microsoft DSE อย่างไรก็ตาม ในระหว่างการทดสอบการโยกย้าย จะเกี่ยวข้องกับ DBA ของคุณ ผลลัพธ์ของงานนี้คือ ไฟล์ส่งออกที่จะอัพโหลดไปที่ Microsoft Azure สำหรับระบบใหม่

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- เรียกดูการกำหนดเวลารูปธรรมสำหรับกระบวนการนำเข้า
- ปรับกระบวนการส่งออกให้เหมาะสม เพื่อช่วยรับประกันประสบการณ์ที่เร็วที่สุดที่เป็นไปได้ การเพิ่มประสิทธิภาพอาจต้องใช้งานต่อไปนี้:

    - วัดทรัพยากรของระบบในระหว่างการส่งออก ยกตัวอย่างเช่น

        - **บนเครื่อง AOS:** CPU ดิสก์ I/O และหน่วยความจำ
        - **บนอินสแตนซ์ฐานข้อมูล SQL Azure:** ปริมาณที่สามารถประมวลผลได้ของฐานข้อมูล SQL (DTU) คุณสามารถตรวจสอบ Azure SQL DTU ได้จาก Microsoft SQL Server Management Studio บนเครื่อง AOS โดยดูที่มุมมองระบบ sys.dm_resource_stats

    - หากพบปัญหาการขาดแคลนทรัพยากร สร้างแผนเพื่อลดจำนวนลง โดยทั่วไป คุณจะลดปัญหาการขาดแคลนเหล่านี้ โดยการมอบหมายทรัพยากรจำเป็นมากขึ้น เนื่องจากเครื่องนี้เป็นโฮสต์ Microsoft คุณต้องนำส่งคำขอไปยัง Microsoft เพื่อเพิ่มทรัพยากร ถ้าคุณระบุว่าขาดแคลน

### <a name="run-the-majorversiondataupgradezip-package"></a>รันแพคเกจ MajorVersionDataUpgrade.zip

เมื่องานนี้เกิดขึ้นในขณะใช้งานจริง จะมีการดำเนินการโดยทีม Microsoft DSE อย่างไรก็ตาม ในระหว่างการทดสอบการโยกย้าย จะเกี่ยวข้องกับนักพัฒนาของคุณ ในระหว่างภารกิจนี้ มีการแปลงโครงสร้างฐานข้อมูลเก่าเป็นโครงสร้างของระบบใหม่

รันกระบวนการซิงโครไนส์ฐานข้อมูล เนื่องจากเป็นส่วนหนึ่งของงานนี้ การซิงโครไนส์ฐานข้อมูลอาจใช้เวลามากในบางกรณี เช่น เมื่อเป็นดัชนีคลัสเตอร์มีการเปลี่ยนแปลงในตาราง เนื่องจากการดำเนินงานนี้เป็นการดำเนินงานที่มีค่าใช้จ่ายสูงใน SQL

เราขอแนะนำให้ คุณทำการวิเคราะห์ของคุณและการดีบักกระบวนการในสภาพแวดล้อมการพัฒนาเป็นลำดับแรก ในสภาพแวดล้อม sandbox ตัวเลือกการดีบักและการวิเคราะห์จะถูกจำกัดมากขึ้น เป้าหมายจะมีปัญหาเพียงเล็กน้อยหรือไม่มีเลย ที่ต้องถูกจัดการเมื่อคุณทำการทดสอบการโยกย้าย

ควรมีการตรวจสอบพื้นที่ต่อไปนี้

- เรียกดูการกำหนดเวลารูปธรรมสำหรับกระบวนการนำเข้า
- ปรับกระบวนการให้เหมาะสม เพื่อช่วยรับประกันประสบการณ์ที่เร็วที่สุดที่เป็นไปได้ การเพิ่มประสิทธิภาพอาจต้องใช้งานต่อไปนี้:

    - ตรวจสอบประสิทธิภาพของสคริปต์การอัพเกรดแต่ละสคริปต์ โดยใช้ตาราง ReleaseUpdateScriptsExecution
    - ปรับปรุงสคริปต์เพื่อปรับปรุงประสิทธิภาพ งานนี้อาจต้องการให้คุณกำหนดรหัส X ++ ของสคริปต์ เพื่อปรับให้เหมาะสมสำหรับชุดข้อมูลของคุณ
    - ตรวจสอบ Azure SQL DTU โดยใช้การตรวจสอบ Microsoft Dynamics Lifecycle Services หรือมุมมองระบบ sys.dm_resources_stats ใน Management Studio ถ้าทรัพยากรถูกใช้เต็มขีดจำกัด คุณอาจต้องร้องขอระดับฐานข้อมูลที่สูงกว่าจากทีม Microsoft DSE

### <a name="roll-back-to-ax-2012"></a>ย้อนกลับไปยัง AX 2012

เป้าหมายของงานนี้คือ การคืนสภาพฐานข้อมูลโดยใช้ข้อมูลสำรองที่ได้ดำเนินการเมื่อมีการปิด AX 2012 และจากนั้นเปิด AX 2012 กลับคืน สถานะของระบบรวมอาจจะต้องถูกเรียกคืน อย่างไรก็ตาม เนื่องจากระบบแบบรวมเปลี่ยนแปลงจากธุรกิจถึงธุรกิจ คุณต้องวางแผนสำหรับสถานการณ์จำลองนี้โดยอิสระ โดยยึดตามสถานการณ์เฉพาะของคุณ แม้ว่าคุณไม่น่าจะต้องย้อนกลับ จำเป็นอย่างยิ่งว่าคุณมีกระบวนการที่ทดสอบแล้ว เผื่อในกรณีที่คุณต้องการใช้

## <a name="functional-workstream"></a>สตรีมงานด้านการทำงาน

หลังจากการอัพเกรดข้อมูล จำเป็นต้องมีงานการตั้งค่าคอนฟิกหลายงานในสภาพแวดล้อมใหม่ เป้าหมายของสตรีมงานนี้คือ เพื่อจัดทำเอกสารและกำหนดปริมาณงานการตั้งค่าคอนฟิกทั้งหมด และเพื่อมอบหมายทรัพยากรให้กับงานแต่ละงาน เพื่อช่วยในการรับประกันว่า งานเหล่านี้สามารถถูกดำเนินการได้พร้อมกับสตรีมงานทางเทคนิคระหว่างกรอบเวลาการหยุดทำงาน

โดยปกติ งานด้านหน้าที่เกี่ยวข้องกับการเปลี่ยนแปลงค่าของพารามิเตอร์ระบบเฉพาะ หรือข้อมูลการตั้งค่าคอนฟิกอื่น ๆ งานเหล่านี้จะถูกระบุโดยการผ่านการทดสอบทำงานแบบเต็มรูปแบบ ซึ่งเป็นกิจกรรมที่แยกต่างหากจากการทดสอบการโยกย้าย เมื่อมีระบุงานชนิดนี้ จึงควรจะถูกตรวจทานพร้อมกับทรัพยากรด้านการทำงานและนักพัฒนาของคุณ

การเปลี่ยนแปลงที่มีขนาดใหญ่ขึ้นอาจต้องการให้สคริปต์การอัพเกรดข้อมูลที่กำหนดเองใหม่ ถูกเขียนเพื่ออัพเดตข้อมูลในระหว่างกระบวนการอัพเกรดข้อมูล อย่างไรก็ตาม ทรัพยากรด้านการทำงานสามารถรันการเปลี่ยนแปลงที่น้อยกว่า ผ่านระบบใหม่หลังจากการอัพเกรดข้อมูล

ต้องมีทดสอบการเปลี่ยนแปลงที่ใหญ่ขึ้นที่มีสคริปต์การอัพเกรดข้อมูลใหม่ ดังนั้น การเกิดซ้ำเพิ่มเติมอย่างน้อยหนึ่งครั้งของแพคเกจ MajorVersionDataUpgrade.zip จะต้องถูกรัน เป็นเรื่องสำคัญที่คุณต้องชั่งน้ำหนักต้นทุนของการรันแพคเกจอีกครั้ง เทียบกับต้นทุนของการป้อนข้อมูลด้วยตนเอง

สำหรับการเปลี่ยนแปลงแต่ละรายการด้วยตนเอง งานต้องถูกเพิ่มไปยังเอกสารแผนการโยกย้ายนั้น งานนี้ต้องแสดงรายละเอียดต่อไปนี้:

-   งานคืออะไร และสิ่งที่ต้องทำคืออะไร?
-   ใครต้องทำ?
-   ใช้ระยะเวลานานแค่ไหน?

