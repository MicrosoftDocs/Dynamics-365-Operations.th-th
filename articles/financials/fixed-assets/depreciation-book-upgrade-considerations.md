---
title: ภาพรวมการอัพเกรดของสมุดบัญชีค่าเสื่อมราคา
description: ในรุ่นก่อนหน้า มีแนวคิดการคิดมูลค่าสองรายการสำหรับสินทรัพย์ถาวร - รูปแบบมูลค่าและสมุดบัญชีค่าเสื่อมราคา ใน Microsoft Dynamics 365 for Operations (1611) ฟังก์ชันแบบจำลองค่าและฟังก์ชันหนังสือการคิดค่าเสื่อมราคาได้ถูกผสานเป็นแนวคิดเดียวซึ่งรู้จักกันว่าเป็นหนังสือ หัวข้อนี้อธิบายสิ่งที่ควรพิจารณาสำหรับการอัพเกรด
author: ShylaThompson
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User, Developer
ms.reviewer: roschlom
ms.search.scope: Core, Operations
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: ef906393ef07661ecd3ceefdbe62310de5ceff21
ms.sourcegitcommit: 8b4b6a9226d4e5f66498ab2a5b4160e26dd112af
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/01/2019
ms.locfileid: "1840660"
---
# <a name="depreciation-book-upgrade-overview"></a>ภาพรวมการอัพเกรดของสมุดบัญชีค่าเสื่อมราคา

[!include [banner](../includes/banner.md)]

ในรุ่นก่อนหน้า มีแนวคิดการคิดมูลค่าสองรายการสำหรับสินทรัพย์ถาวร - รูปแบบมูลค่าและสมุดบัญชีค่าเสื่อมราคา ใน Microsoft Dynamics 365 for Operations (1611) ฟังก์ชันแบบจำลองค่าและฟังก์ชันหนังสือการคิดค่าเสื่อมราคาได้ถูกผสานเป็นแนวคิดเดียวซึ่งรู้จักกันว่าเป็นหนังสือ หัวข้อนี้อธิบายสิ่งที่ควรพิจารณาสำหรับการอัพเกรด 

กระบวนการอัพเกรดจะเปลี่ยนการตั้งค่าที่มีอยู่และธุรกรรมที่มีอยู่ทั้งหมดไปยังโครงสร้างสมุดบัญชีใหม่ รูปแบบมูลค่าจะยังคงเป็นเช่นปัจจุบัน โดยเป็นสมุดบัญชีที่ลงรายการบัญชีในบัญชีแยกประเภททั่วไป สมุดบัญชีค่าเสื่อมราคาจะถูกย้ายไปยังสมุดบัญชีที่มีตัวเลือก **การลงรายการบัญชีในบัญชีแยกประเภททั่วไป** ที่ตั้งค่าเป็น **ไม่ใช่** ชื่อสมุดรายวันสมุดบัญชีค่าเสื่อมราคาจะถูกเปลี่ยนชื่อสมุดรายวันบัญชีแยกประเภททั่วไปที่มีชั้นของการลงรายการบัญชีที่ตั้งค่าเป็น **ไม่มี** ธุรกรรมสมุดบัญชีค่าเสื่อมราคาจะถูกย้ายไปยังธุรกรรมสินทรัพย์ถาวร 

ก่อนที่จะรันการอัพเกรดข้อมูล คุณควรทำความเข้าใจตัวเลือกสองรายการที่พร้อมใช้งานสำหรับการอัพเกรดรายการสมุดรายวันบัญชีค่าเสื่อมราคาเป็นใบสำคัญธุรกรรม และลำดับหมายเลขที่จะใช้สำหรับชุดใบสำคัญ 

ตัวเลือกที่ 1: **ลำดับหมายเลขที่กำหนดโดยระบบ** - นี่คือตัวเลือกเริ่มต้นเพื่อปรับปรุงประสิทธิภาพของการอัพเกรด การอัพเกรดจะไม่ใช้กรอบงานลำดับหมายเลข แต่จะปันส่วนใบสำคัญที่มีวิธีการตามการตั้งค่าแทน หลังจากการอัพเกรด ลำดับหมายเลขใหม่จะถูกสร้างขึ้นโดยมี **การตั้งค่าหมายเลขถัดไป** อย่างเหมาะสมตามธุรกรรมที่อัพเกรด โดยค่าเริ่มต้น ลำดับหมายเลขที่ใช้จะอยู่ในรูปแบบ FADBUpgr\#\#\#\#\#\#\#\#\# มีพารามิเตอร์ไม่กี่รายการที่คุณสามารถใช้ได้ในการปรับปรุงรูปแบบเมื่อใช้วิธีการนี้:

-   **รหัสลำดับหมายเลข** – รหัสเพื่อระบุลำดับหมายเลข ไม่สามารถมีรหัสลำดับหมายเลขนี้อยู่ได้เนื่องจากจะถูกสร้างขึ้นโดยการอัพเกรด
    -   ชื่อค่าคงที่: **NumberSequenceDefaultCode**
    -   ค่าเริ่มต้น: "FADBUpgr"
-   **คำนำหน้า** – ค่าสตริงที่คงที่จะถูกใช้เป็นคำนำหน้าสำหรับหมายเลขใบสำคัญ
    -   ชื่อค่าคงที่: **NumberSequenceDefaultParameterPrefix**
    -   ค่าเริ่มต้น: "FADBUpgr"
-   **ความยาวของตัวอักษรและตัวเลข** – ความยาวของเซ็กเมนต์ตัวอักษรและตัวเลขของลำดับหมายเลข
    -   ชื่อค่าคงที่: **NumberSequenceDefaultParameterAlpanumericLength **
    -   ค่าเริ่มต้น: 9
-   **หมายเลขเริ่มต้น** - หมายเลขเริ่มต้นที่จะใช้ในลำดับหมายเลข
    -   ชื่อค่าคงที่: **NumberSequenceDefaultParameterStartNumber**
    -   ค่าเริ่มต้น: 1

ตัวเลือกที่ 2: **ลำดับหมายเลขที่ผู้ใช้กำหนดที่มีอยู่** -ตัวเลือกนี้จะช่วยให้คุณสามารถกำหนดลำดับหมายเลขที่จะใช้สำหรับการอัพเกรด พิจารณาการใช้ตัวเลือกนี้ถ้าคุณต้องการการตั้งค่าคอนฟิกลำดับหมายเลขขั้นสูง เมื่อต้องการใช้ลำดับหมายเลข คุณต้องแก้ไขคลาสการอัพเกรด ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans กับข้อมูลต่อไปนี้:

-   **รหัสลำดับหมายเลข** – รหัสของลำดับหมายเลข
    -   ชื่อค่าคงที่: **NumberSequenceExistingCode **
    -   ค่าเริ่มต้น: ไม่มีค่าเริ่มต้น ต้จะต้องอัพเดตเป็นรหัสลำดับหมายเลข
-   **ลำดับหมายเลขที่ใช้ร่วมกัน** – ค่าบูลีนเพื่อระบุขอบเขตของลำดับหมายเลข ใช้ "จริง" สำหรับลำดับหมายเลขที่ใช้ร่วมกันทั่วทั้งบริษัท และ "เท็จ" สำหรับขอบเขตเฉพาะบริษัท เมื่อใช้ "เท็จ" ลำดับหมายเลขที่มีชื่อที่ระบุจะต้องมีอยู่ในบริษัททั้งหมดที่มีธุรกรรมสมุดบัญชีค่าเสื่อมราคา ลำดับหมายเลขที่ใช้ร่วมกันจะอยู่ในทุกพาร์ติชันที่มีธุรกรรมสมุดบัญชีค่าเสื่อมราคา
    -   ชื่อค่าคงที่: **NumberSequenceExistingIsShared **
    -   ค่าเริ่มต้น: จริง

พารามิเตอร์อยู่ที่จุดเริ่มต้นของคลาส ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans 

*// ระบุวิธีการที่ต้องการสำหรับการปันส่วนใบสำคัญ* 
 *// จริง ถ้าคุณต้องการใช้รหัสลำดับหมายเลขที่มีอยู่* 
 *// เท็จ ถ้าคุณต้องการใช้ลำดับหมายเลขที่ระบบกำหนด (ค่าเริ่มต้น)* const boolean NumberSequenceUseExistingCode = false;  

*// ถ้าใช้วิธีการของลำดับหมายเลขที่ระบบกำหนด ให้ระบุพารามิเตอร์สำหรับลำดับหมายเลข*
 *// จะมีการสร้างลำดับหมายเลขใหม่โดยใช้พารามิเตอร์เหล่านี้* const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;   

*// ถ้าใช้วิธีการของลำดับหมายเลขที่มีอยู่ ให้ระบุรหัสลำดับหมายเลขที่มีอยู่* 
 *// การปันส่วนใบสำคัญจะดำเนินการทีละแถวสำหรับลำดับหมายเลขที่มีอยู่* const str NumberSequenceExistingCode = ''; *// ระบุขอบเขตของรหัสลำดับหมายเลขที่มีอยู่* 
 *// จริง ถ้ามีการใช้ลำดับหมายเลขที่ระบุร่วมกัน* 
 *// เท็จ ถ้าลำดับหมายเลขที่ระบุสำหรับแต่ละบริษัท* 
 *// ลำดับหมายเลขที่ระบบกำหนดเริ่มต้นจะถูกใช้ถ้าไม่พบรหัสลำดับหมายเลขที่มีขอบเขตที่ระบุ* const boolean NumberSequenceExistingIsShared = true; 

สร้างโครงการที่มีคลาสใหม่หลังจากที่มีการแก้ไขค่าคงที่ 

เมื่อใช้วิธีการของลำดับหมายเลขที่ระบบสร้าง (ตัวเลือกที่ 1) การอัพเกรดจะใช้การประมวลผลตามการตั้งค่าในการปันส่วนหมายเลขใบสำคัญตามที่ระบุในพารามิเตอร์สคริปต์การอัพเกรด ซึ่งจะสร้างลำดับหมายเลขใหม่ที่มีพารามิเตอร์ที่ระบุหลังจากการปันส่วน 

เมื่อใช้วิธีการของลำดับหมายเลขที่มีอยู่ที่ผู้ใช้กำหนด (ตัวเลือกที่ 2) การอัพเกรดข้อมูลจะตรวจสอบว่าลำดับหมายเลขที่มีขอบเขตที่ระบุอยู่ในฐานข้อมูลสำหรับแต่ละพาร์ติชันและบริษัทที่มีธุรกรรมสมุดบัญชีค่าเสื่อมราคาหรือไม่ ถ้าไม่มี การอัพเกรดจะใช้การประมวลผลทีละแถวในการปันส่วนหมายเลขใบสำคัญที่ระบุไว้ตามลำดับหมายเลขโดยใช้กรอบงานลำดับหมายเลข ถ้าไม่มีลำดับหมายเลขที่มีขอบเขตที่ระบุ การอัพเกรดจะใช้วิธีการของลำดับหมายเลขที่ระบบกำหนดเริ่มต้นในการปันส่วนหมายเลขใบสำคัญ และจะสร้างลำดับหมายเลขใหม่ที่มีพารามิเตอร์เริ่มต้นที่ระบุหลังจากการปันส่วน

ไม่ว่าจะด้วยวิธีการใด สคริปต์การอัพเกรดข้อมูลจะใช้ลำดับหมายเลขสำหรับฟิลด์ **ชุดใบสำคัญ** ในชื่อใหม่ของสมุดรายวันบัญชีแยกประเภททั่วไปซึ่งสร้างขึ้นสำหรับชื่อสมุดรายวันสมุดบัญชีค่าเสื่อมราคาก่อนหน้านี้



