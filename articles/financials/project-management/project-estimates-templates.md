---
title: "ซิงโครไนส์การประเมินโครงการจาก Project Service Automation โดยตรง ไปยังการคาดการณ์โครงการใน Finance and Operations"
description: "หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์การประมาณการชั่วโมงของโครงการและการประมาณการค่าใช้จ่ายของโครงการโดยตรงจาก Microsoft Dynamics 365 for Project Service Automation ไปยัง Microsoft Dynamics 365 for Finance and Operations"
author: KimANelson
manager: AnnBe
ms.date: 04/02/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2016-11-28
ms.dyn365.ops.version: AX 7.3.0
ms.translationtype: HT
ms.sourcegitcommit: bd8feff598cf80ca675c7d2b5dda636799b19e29
ms.openlocfilehash: 90501f40da0fdc66ad087b3bd746c908cc25711b
ms.contentlocale: th-th
ms.lasthandoff: 05/29/2018

---
# <a name="synchronize-project-estimates-from-project-service-automation-directly-to-project-forecasts-in-finance-and-operations"></a><span data-ttu-id="ee3d1-103">ซิงโครไนส์การประเมินโครงการจาก Project Service Automation โดยตรง ไปยังการคาดการณ์โครงการใน Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-103">Synchronize project estimates from Project Service Automation directly to project forecasts in Finance and Operations</span></span>

<span data-ttu-id="ee3d1-104">หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์การประมาณการชั่วโมงของโครงการและการประมาณการค่าใช้จ่ายของโครงการโดยตรงจาก Microsoft Dynamics 365 for Project Service Automation ไปยัง Microsoft Dynamics 365 for Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-104">This topic describes the templates and underlying tasks that are used to synchronize project hour estimates and project expense estimates directly from Microsoft Dynamics 365 for Project Service Automation to Dynamics 365 for Finance and Operations.</span></span>

> [!NOTE]
> <span data-ttu-id="ee3d1-105">การรวมงานโครงการ ประเภทธุรกรรมค่าใช้จ่าย การประเมินชั่วโมง การประเมินค่าใช้จ่าย และการล็อคฟังก์ชัน พร้อมใช้งานใน Dynamics 365 for Finance and Operations รุ่น 8.0</span><span class="sxs-lookup"><span data-stu-id="ee3d1-105">Project tasks integration, expense transaction categories, hour estimates, expense estimates, and functionality locking is available in Dynamics 365 for Finance and Operations version 8.0.</span></span>


## <a name="data-flow-for-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="ee3d1-106">โฟลว์ข้อมูลสำหรับ Project Service Automation ไปยัง Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-106">Data flow for Project Service Automation to Finance and Operations</span></span>

<span data-ttu-id="ee3d1-107">โซลูชันการรวม Project Service Automation ไปยัง Finance and Operations ใช้คุณลักษณะการรวมข้อมูล เพื่อซิงโครไนส์ข้อมูลระหว่างอินสแตนซ์ของ Project Service Automation และ Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-107">The Project Service Automation to Finance and Operations integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance and Operations.</span></span> <span data-ttu-id="ee3d1-108">เท็มเพลตการรวมที่พร้อมใช้งานกับคุณลักษณะการรวมข้อมูล เปิดใช้งานโฟลว์ของข้อมูลเกี่ยวกับการประมาณการชั่วโมงของโครงการและการประมาณการค่าใช้จ่ายของโครงการจาก Project Service Automation ไปยัง Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-108">The integration templates that are available with the Data integration feature enable the flow of data about project hour estimates and project expense estimates from Project Service Automation to Finance and Operations.</span></span>

<span data-ttu-id="ee3d1-109">ภาพประกอบต่อไปนี้แสดงวิธีการซิงโครไนส์ข้อมูลระหว่าง Project Service Automation และ Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-109">The following illustration shows how the data is synchronized between Project Service Automation and Finance and Operations.</span></span>

<span data-ttu-id="ee3d1-110">[![โฟลว์ข้อมูลสำหรับการรวม Project Service Automation กับ Finance and Operations](./media/ProjectEstimatesFlow.png)](./media/ProjectEstimatesFlow.png)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-110">[![Data flow for Project Service Automation integration with Finance and Operations](./media/ProjectEstimatesFlow.png)](./media/ProjectEstimatesFlow.png)</span></span>


## <a name="templates-and-tasks"></a><span data-ttu-id="ee3d1-111">เท็มเพลตและงาน</span><span class="sxs-lookup"><span data-stu-id="ee3d1-111">Templates and tasks</span></span>

<span data-ttu-id="ee3d1-112">เมื่อต้องการเข้าถึงเท็มเพลตที่พร้อมใช้งาน ในศูนย์การจัดการ Microsoft PowerApps เลือก **โครงการ** และจากนั้น ในมุมบนด้านขวา เลือก **โครงการใหม่** เพื่อเลือกเท็มเพลตสาธารณะ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-112">To access the available templates, in the Microsoft PowerApps Admin Center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="ee3d1-113">เท็มเพลตและงานพื้นฐานต่อไปนี้จะถูกใช้ในการซิงโครไนส์การประมาณการชั่วโมงของโครงการจาก Project Service Automation ไปยัง Finance and Operations:</span><span class="sxs-lookup"><span data-stu-id="ee3d1-113">The following template and underlying tasks are used to synchronize project hour estimates from Project Service Automation to Finance and Operations:</span></span>

-  <span data-ttu-id="ee3d1-114">**ชื่อของเท็มเพลตในการรวมข้อมูล:** การประมาณการชั่วโมงของโครงการ (PSA ไปยัง Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-114">**Name of the template in Data integration:** Project hour estimates (PSA to Fin and Ops)</span></span>

-  <span data-ttu-id="ee3d1-115">**ชื่อของงานในโครงการ:**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-115">**Name of the tasks in the project:**</span></span> 
    - <span data-ttu-id="ee3d1-116">ความสัมพันธ์ของธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-116">Transaction relationships</span></span> 
    - <span data-ttu-id="ee3d1-117">การประเมินค่าใช้จ่าย</span><span class="sxs-lookup"><span data-stu-id="ee3d1-117">Expense estimates</span></span>

## <a name="entity-set"></a><span data-ttu-id="ee3d1-118">การตั้งค่าเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-118">Entity set</span></span>

| <span data-ttu-id="ee3d1-119">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee3d1-119">Project Service Automation</span></span>      | <span data-ttu-id="ee3d1-120">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-120">Finance and Operations</span></span>                          |
|---------------------------------|-------------------------------------------------|
| <span data-ttu-id="ee3d1-121">งานโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-121">Project tasks</span></span>                   | <span data-ttu-id="ee3d1-122">เอนทิตี้การรวมสำหรับประมาณการชั่วโมงของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-122">Integration entity for project hour estimates</span></span>   |

## <a name="entity-flow"></a><span data-ttu-id="ee3d1-123">ขั้นตอนเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-123">Entity flow</span></span>

<span data-ttu-id="ee3d1-124">มีการจัดการการประมาณการชั่วโมงของโครงการใน Project Service Automation และมีการซิงโครไนส์ไปยัง Finance and Operations เป็นการคาดการณ์ชั่วโมงของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-124">Project hour estimates are managed in Project Service Automation, and they are synchronized to Finance and Operations as project hour forecasts.</span></span>

## <a name="preconditions"></a><span data-ttu-id="ee3d1-125">เงื่อนไขเบื้องต้น</span><span class="sxs-lookup"><span data-stu-id="ee3d1-125">Preconditions</span></span>

<span data-ttu-id="ee3d1-126">ก่อนที่การซิงโครไนส์ของการประมาณการชั่วโมงของโครงการจะสามารถเกิดขึ้นได้ คุณต้องซิงโครไนส์โครงการ งานโครงการ และประเภทธุรกรรมค่าใช้จ่ายโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-126">Before synchronization of project hour estimates can occur, you must synchronize projects, project tasks, and project expense transaction categories.</span></span>

## <a name="power-query"></a><span data-ttu-id="ee3d1-127">Power Query</span><span class="sxs-lookup"><span data-stu-id="ee3d1-127">Power Query</span></span>

<span data-ttu-id="ee3d1-128">คุณต้องใช้ Microsoft Power Query ในเท็มเพลตที่การประเมินชั่วโมงโครงการกับ:</span><span class="sxs-lookup"><span data-stu-id="ee3d1-128">You must use Microsoft Power Query in the project hour estimates template to:</span></span>
- <span data-ttu-id="ee3d1-129">ตั้งค่า **รหัสแบบจำลองการคาดการณ์** ที่จะใช้เมื่อการรวมสร้างการคาดการณ์ชั่วโมงใหม่</span><span class="sxs-lookup"><span data-stu-id="ee3d1-129">Set the **Forecast model ID** that will be used when the integration creates new hour forecasts.</span></span>
- <span data-ttu-id="ee3d1-130">กรองเรกคอร์ดเฉพาะของทรัพยากรใดๆ ออก ภายในงานที่จะไม่รวมในการคาดการณ์ชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-130">Filter out any resource specific records within the task that will fail the integration into hour forecasts</span></span>
- <span data-ttu-id="ee3d1-131">กรองแถวของประเภทธุรกรรมว่างใดๆ ออก</span><span class="sxs-lookup"><span data-stu-id="ee3d1-131">Filter out any empty transaction category rows.</span></span> <span data-ttu-id="ee3d1-132">ความล้มเหลวในการทำเช่นนี้อาจส่งผลต่อการคาดการณ์ชั่วโมงที่ไม่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-132">Failure to do this may result in incorrect hour forecasts.</span></span>

### <a name="forecast-model-id"></a><span data-ttu-id="ee3d1-133">รหัสแบบจำลองการคาดการณ์</span><span class="sxs-lookup"><span data-stu-id="ee3d1-133">Forecast model ID</span></span>
<span data-ttu-id="ee3d1-134">ในการอัพเดตรหัสแบบจำลองการคาดการณ์เริ่มต้นในเท็มเพลต คลิกลูกศร **แม็ป** เพื่อเปิดการแม็ป</span><span class="sxs-lookup"><span data-stu-id="ee3d1-134">To update the default forecast model ID in the template, click the **Map** arrow to open the mapping.</span></span> <span data-ttu-id="ee3d1-135">เลือกที่จะเปิดการกรองข้อมูลและแบบสอบถามขั้นสูง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-135">Select to open the Advanced Query and Filtering.</span></span>
- <span data-ttu-id="ee3d1-136">ถ้าคุณกำลังใช้เท็มเพลตการประเมินชั่วโมง Microsoft Project (PSA ไปยัง Fin and Ops) เริ่มต้น เลือกส่วน **เงื่อนไขที่แทรก** ใน **ขั้นตอนที่ใช้**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-136">If you are using the default Microsoft Project hour estimates (PSA to Fin and Ops) template, select the **Inserted Condition** in the **Applied Steps** section.</span></span> <span data-ttu-id="ee3d1-137">ในรายการ **ฟังก์ชัน** แทนที่ **O_forecast** ด้วยชื่อของ **รหัสแบบจำลองการคาดการณ์** ที่ควรจะใช้กับการรวม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-137">In the **Function** entry, replace **O_forecast** with the name of the **Forecast model ID** that should be used with the integration.</span></span> <span data-ttu-id="ee3d1-138">เท็มเพลตเริ่มต้นมีรหัสแบบจำลองการคาดการณ์จากข้อมูลสาธิต</span><span class="sxs-lookup"><span data-stu-id="ee3d1-138">The default template has a forecast model ID from the demo data.</span></span>
- <span data-ttu-id="ee3d1-139">ถ้าคุณกำลังสร้างเท็มเพลตใหม่ คุณต้องเพิ่มคอลัมน์นี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-139">If you are creating a new template, you must add this column.</span></span> <span data-ttu-id="ee3d1-140">เลือก **เพิ่มคอลัมน์แบบมีเงื่อนไข** และตั้งชื่อคอลัมน์ เช่น ModelID</span><span class="sxs-lookup"><span data-stu-id="ee3d1-140">Select **Add Conditional Column** and give the column a name, such as ModelID.</span></span> <span data-ttu-id="ee3d1-141">ป้อนเงื่อนไขสำหรับคอลัมน์ที่ถ้าภารกิจของโครงการไม่ใช่ null แล้ว <enter the forecast model ID>; อื่นเป็น null</span><span class="sxs-lookup"><span data-stu-id="ee3d1-141">Enter the condition for the column where if Project task is not null, then<enter the forecast model ID>; else null.</span></span>

### <a name="filter-out-resource-specific-records"></a><span data-ttu-id="ee3d1-142">กรองเรกคอร์ดเฉพาะของทรัพยากรออก</span><span class="sxs-lookup"><span data-stu-id="ee3d1-142">Filter out resource specific records</span></span>
<span data-ttu-id="ee3d1-143">เท็มเพลตการประมาณการชั่วโมงของโครงการ (PSA ไปยัง Fin and Ops) มีตัวกรองเริ่มต้นที่ลบเรกคอร์ดเฉพาะของทรัพยากรใดๆ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-143">The Project hour estimates (PSA to Fin and Ops) template has a default filter that removes any resource specific records.</span></span> <span data-ttu-id="ee3d1-144">ถ้าคุณสร้างเท็มเพลตของคุณเอง คุณต้องเพิ่มตัวกรองนี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-144">If you create your own template, you must add this filter.</span></span> <span data-ttu-id="ee3d1-145">ในแบบฟอร์มการสอบถามขั้นสูงและการกรอง เลือกที่จะกรองในคอลัมน์ **msdyn_islinetask** เพื่อรวมเฉพาะเรกคอร์ด **เท็จ**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-145">In the Advanced Query and Filtering form, select to filter on the column **msdyn_islinetask** to only include **False** records.</span></span>

### <a name="filter-out-empty-transaction-category-rows"></a><span data-ttu-id="ee3d1-146">กรองแถวของประเภทธุรกรรมว่างออก</span><span class="sxs-lookup"><span data-stu-id="ee3d1-146">Filter out empty transaction category rows</span></span>
<span data-ttu-id="ee3d1-147">คุณต้องเพิ่มตัวกรองข้อมูลเพื่อลบแถวใดๆ ด้วยประเภทธุรกรรมว่างเปล่า</span><span class="sxs-lookup"><span data-stu-id="ee3d1-147">You must add a filter to remove any rows with empty transaction categories.</span></span> <span data-ttu-id="ee3d1-148">ซึ่งจำเป็น โดยไม่คำนึงถึงว่าคุณกำลังใช้เท็มเพลตเริ่มต้น หรือกำลังสร้างเท็มเพลตของคุณเอง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-148">This is needed regardless if you are using the default template or creating your own template.</span></span> <span data-ttu-id="ee3d1-149">ตัวกรองข้อมูลนี้จะลบแถวสรุปใดๆ ที่มาจาก Project Service Automation ที่อาจทำให้การคาดการณ์ชั่วโมงใน Finance and Operations ไม่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-149">This filter will remove any summary rows coming from Project Service Automation that could cause the hour forecasts in Finance and Operations to be incorrect.</span></span> <span data-ttu-id="ee3d1-150">ในแบบฟอร์มการสอบถามขั้นสูงและการกรอง เลือกเพื่อกรองข้อมูลเรกคอร์ด null ออก ในคอลัมน์ **msdyn_transactioncategory_value**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-150">In the Advanced Query and Filtering form, select to filter out the null records in the column **msdyn_transactioncategory_value**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="ee3d1-151">การแม็ปเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee3d1-151">Template mapping in Data integration</span></span>

<span data-ttu-id="ee3d1-152">ภาพประกอบต่อไปนี้แสดงตัวอย่างของการแม็ปงานเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee3d1-152">The following illustration shows an example of the template task mapping in Data integration.</span></span> <span data-ttu-id="ee3d1-153">การแม็ปแสดงข้อมูลฟิลด์ที่จะถูกซิงโครไนส์จาก Project Service Automation ไปยัง Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-153">The mapping shows the field information that will be synchronized from Project Service Automation to Finance and Operations.</span></span>

<span data-ttu-id="ee3d1-154">[![การแม็ปเท็มเพลต](./media/ProjectHourEstimatesMapping.jpg)](./media/ProjectHourEstimatesMapping.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-154">[![Template mapping](./media/ProjectHourEstimatesMapping.jpg)](./media/ProjectHourEstimatesMapping.jpg)</span></span>

<span data-ttu-id="ee3d1-155">เท็มเพลตและงานพื้นฐานต่อไปนี้จะถูกใช้ในการซิงโครไนส์การประมาณการค่าใช้จ่ายของโครงการจาก Project Service Automation ไปยัง Finance and Operations:</span><span class="sxs-lookup"><span data-stu-id="ee3d1-155">The following template and underlying task is used to synchronize project expense estimates from Project Service Automation to Finance and Operations:</span></span>

-  <span data-ttu-id="ee3d1-156">**ชื่อของเท็มเพลตในการรวมข้อมูล:** การประมาณการค่าใช้จ่ายของโครงการ (PSA ไปยัง Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-156">**Name of the template in Data integration:** Project expense estimates (PSA to Fin and Ops)</span></span>
-  <span data-ttu-id="ee3d1-157">**ชื่อของงานในโครงการ:**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-157">**Name of the tasks in the project:**</span></span> 
     - <span data-ttu-id="ee3d1-158">ความสัมพันธ์ของธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-158">Transaction relationships</span></span> 
     - <span data-ttu-id="ee3d1-159">การประเมินค่าใช้จ่าย</span><span class="sxs-lookup"><span data-stu-id="ee3d1-159">Expense estimates</span></span>

## <a name="entity-set"></a><span data-ttu-id="ee3d1-160">การตั้งค่าเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-160">Entity set</span></span>

| <span data-ttu-id="ee3d1-161">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee3d1-161">Project Service Automation</span></span>      | <span data-ttu-id="ee3d1-162">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-162">Finance and Operations</span></span>                                     |
|---------------------------------|------------------------------------------------------------|
| <span data-ttu-id="ee3d1-163">การเชื่อมต่อธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-163">Transaction Connections</span></span>         | <span data-ttu-id="ee3d1-164">เอนทิตีการรวมสำหรับความสัมพันธ์ของธุรกรรมของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-164">Integration entity for project transaction relationships.</span></span>   |
| <span data-ttu-id="ee3d1-165">รายการประเมิน</span><span class="sxs-lookup"><span data-stu-id="ee3d1-165">Estimate Lines</span></span>                  | <span data-ttu-id="ee3d1-166">เอนทิตีการรวมสำหรับการประมาณการค่าใช้จ่ายของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-166">Integration entity for project expense estimates.</span></span>           |

## <a name="entity-flow"></a><span data-ttu-id="ee3d1-167">ขั้นตอนเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-167">Entity flow</span></span>

<span data-ttu-id="ee3d1-168">มีการจัดการการประมาณการค่าใช้จ่ายของโครงการใน Project Service Automation และมีการซิงโครไนส์ไปยัง Finance and Operations เป็นการคาดการณ์ค่าใช้จ่ายของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-168">Project expense estimates are managed in Project Service Automation, and they are synchronized to Finance and Operations as project expense forecasts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ee3d1-169">ข้อกำหนดเบื้องต้น</span><span class="sxs-lookup"><span data-stu-id="ee3d1-169">Prerequisites</span></span>

<span data-ttu-id="ee3d1-170">ก่อนที่การซิงโครไนส์ของการประมาณค่าใช้จ่ายของโครงการจะสามารถเกิดขึ้นได้ คุณต้องซิงโครไนส์โครงการ งานโครงการ และประเภทธุรกรรมค่าใช้จ่ายโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee3d1-170">Before synchronization of project expense estimates can occur, you must synchronize Projects, Project tasks and Project expense transaction categories.</span></span>

## <a name="power-query"></a><span data-ttu-id="ee3d1-171">Power Query</span><span class="sxs-lookup"><span data-stu-id="ee3d1-171">Power Query</span></span>

<span data-ttu-id="ee3d1-172">คุณต้องใช้ Microsoft Power Query ในเท็มเพลตการประเมินค่าใช้จ่ายของโครงการกับ:</span><span class="sxs-lookup"><span data-stu-id="ee3d1-172">You must use Microsoft Power Query in the project expense estimates template to:</span></span>
- <span data-ttu-id="ee3d1-173">กรองเพื่อรวมเฉพาะเรกคอร์ดรายการประเมินค่าใช้จ่ายเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="ee3d1-173">Filter to include only expense estimate line records</span></span>
- <span data-ttu-id="ee3d1-174">ตั้งค่า **รหัสแบบจำลองการคาดการณ์** ที่จะใช้เมื่อการรวมสร้างการคาดการณ์ชั่วโมงใหม่</span><span class="sxs-lookup"><span data-stu-id="ee3d1-174">Set the **Forecast model ID** that will be used when the integration creates new hour forecasts.</span></span>
- <span data-ttu-id="ee3d1-175">แปลงชนิดการเรียกเก็บเงิน</span><span class="sxs-lookup"><span data-stu-id="ee3d1-175">Transform the billing types.</span></span>
- <span data-ttu-id="ee3d1-176">แปลงชนิดธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-176">Transform the transaction types.</span></span>

### <a name="filter-to-include-only-expense-estimate-lines"></a><span data-ttu-id="ee3d1-177">กรองเพื่อรวมเฉพาะรายการประเมินค่าใช้จ่ายเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="ee3d1-177">Filter to include only expense estimate lines</span></span>
<span data-ttu-id="ee3d1-178">การประมาณการค่าใช้จ่ายของโครงการ (PSA ไปยัง Fin and Ops) มีตัวกรองข้อมูลเริ่มต้น เพื่อรวมรายการค่าใช้จ่ายในการรวมเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="ee3d1-178">The Project expense estimates (PSA to Fin and Ops) template has a default filter to only include expense lines in the integration.</span></span> <span data-ttu-id="ee3d1-179">ถ้าคุณสร้างเท็มเพลตของคุณเอง คุณต้องเพิ่มตัวกรองนี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-179">If you create your own template, you must add this filter.</span></span> <span data-ttu-id="ee3d1-180">เลือกภารกิจความสัมพันธ์ของธุรกรรม และคลิกลูกศร **แม็ป**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-180">Select the Transaction relationships task and click the **Map** arrow.</span></span> <span data-ttu-id="ee3d1-181">เลือก **การกรองข้อมูลและแบบสอบถามขั้นสูง**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-181">Select **Advanced Query and filtering**.</span></span> <span data-ttu-id="ee3d1-182">กรองคอลัมน์ **msdyn_transactiontype1** เพื่อให้รวมเฉพาะ **msdyn_estimateline**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-182">Filter the **msdyn_transactiontype1** column to include only **msdyn_estimateline**.</span></span>

### <a name="forecast-model-id"></a><span data-ttu-id="ee3d1-183">รหัสแบบจำลองการคาดการณ์</span><span class="sxs-lookup"><span data-stu-id="ee3d1-183">Forecast model ID</span></span>
<span data-ttu-id="ee3d1-184">ในการอัพเดตรหัสแบบจำลองการคาดการณ์เริ่มต้นในเท็มเพลต สำหรับงานการประเมินค่าใช้จ่าย คลิกลูกศร **แม็ป** เพื่อเปิดการแม็ป</span><span class="sxs-lookup"><span data-stu-id="ee3d1-184">To update the default forecast model ID in the template, for the Expense estimates task, click the **Map** arrow to open the mapping.</span></span> <span data-ttu-id="ee3d1-185">เลือกที่จะเปิดการกรองข้อมูลและแบบสอบถามขั้นสูง</span><span class="sxs-lookup"><span data-stu-id="ee3d1-185">Select to open the Advanced Query and Filtering.</span></span>
- <span data-ttu-id="ee3d1-186">ถ้าคุณกำลังใช้เท็มเพลตการประเมินค่าใช้จ่าย Microsoft Project (PSA ไปยัง Fin and Ops) เริ่มต้น เลือก **เงื่อนไขที่แทรก** แรก ในส่วน **ขั้นตอนที่ใช้**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-186">If you are using the default Microsoft Project expense estimates (PSA to Fin and Ops) template, select the first **Inserted Condition** in the **Applied Steps** section.</span></span> <span data-ttu-id="ee3d1-187">ในรายการ **ฟังก์ชัน** แทนที่ **O_forecast** ด้วยชื่อของ **รหัสแบบจำลองการคาดการณ์** ที่ควรจะใช้กับการรวม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-187">In the **Function** entry, replace **O_forecast** with the name of the **Forecast model ID** that should be used with the integration.</span></span> <span data-ttu-id="ee3d1-188">เท็มเพลตเริ่มต้นมีรหัสแบบจำลองการคาดการณ์จากข้อมูลสาธิต</span><span class="sxs-lookup"><span data-stu-id="ee3d1-188">The default template has a forecast model ID from the demo data.</span></span>
- <span data-ttu-id="ee3d1-189">ถ้าคุณกำลังสร้างเท็มเพลตใหม่ คุณต้องเพิ่มคอลัมน์นี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-189">If you are creating a new template, you must add this column.</span></span> <span data-ttu-id="ee3d1-190">เลือก **เพิ่มคอลัมน์แบบมีเงื่อนไข** และตั้งชื่อคอลัมน์ เช่น ModelID</span><span class="sxs-lookup"><span data-stu-id="ee3d1-190">Select **Add Conditional Column** and give the column a name, such as ModelID.</span></span> <span data-ttu-id="ee3d1-191">ป้อนเงื่อนไขสำหรับคอลัมน์ที่ถ้ารหัสรายการประเมินไม่ใช่ null แล้ว < enter the forecast model ID >; อื่นเป็น null</span><span class="sxs-lookup"><span data-stu-id="ee3d1-191">Enter the condition for the column where if Estimate line ID is not null, then < enter the forecast model ID >; else null.</span></span>

### <a name="transform-the-billing-types"></a><span data-ttu-id="ee3d1-192">แปลงชนิดการเรียกเก็บเงิน</span><span class="sxs-lookup"><span data-stu-id="ee3d1-192">Transform the billing types</span></span>
<span data-ttu-id="ee3d1-193">เท็มเพลตการประมาณการค่าใช้จ่ายของโครงการ (PSA ไปยัง Fin and Ops) มีคอลัมน์แบบมีเงื่อนไขที่เพิ่มเข้าไปเพื่อแปลงชนิดการเรียกเก็บเงินที่ได้รับจาก Project Service Automation ในระหว่างการรวม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-193">The Project expense estimates (PSA to Fin and Ops) template has a conditional column added to transform the billing types received from Project Service Automation during the integration.</span></span>
- <span data-ttu-id="ee3d1-194">ถ้าคุณสร้างเท็มเพลตของคุณเอง คุณต้องเพิ่มคอลัมน์แบบมีเงื่อนไขนี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-194">If you create your own template, you must add this conditional column.</span></span> <span data-ttu-id="ee3d1-195">ในแบบฟอร์มการสอบถามขั้นสูงและการกรอง เลือก **เพิ่มคอลัมน์แบบมีเงื่อนไข**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-195">In the Advanced Query and Filtering form, select **Add Conditional Column**.</span></span> <span data-ttu-id="ee3d1-196">ตั้งชื่อคอลัมน์ เช่น "BillingType"</span><span class="sxs-lookup"><span data-stu-id="ee3d1-196">Give the column a name, such as "BillingType".</span></span> <span data-ttu-id="ee3d1-197">เงื่อนไขที่จะป้อนมีดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ee3d1-197">The condition to enter is as follows:</span></span>

    <span data-ttu-id="ee3d1-198">ถ้า **msdyn_billingtype** = 192350000 แล้ว **NonChargeable** หรือถ้า **msdyn_billingtype** = 192350001 แล้ว **คิดค่าธรรมเนียมได้** หรือถ้า **msdyn_billingtype** =192350002 แล้ว **คำลงท้าย** หรือ **NotAvailable**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-198">If **msdyn_billingtype** = 192350000, then **NonChargeable** else if **msdyn_billingtype** = 192350001, then **Chargeable** else if **msdyn_billingtype** = 192350002, then **Complimentary** else **NotAvailable**</span></span>

### <a name="transform-the-transaction-types"></a><span data-ttu-id="ee3d1-199">แปลงชนิดธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-199">Transform the transaction types</span></span>
<span data-ttu-id="ee3d1-200">เท็มเพลตการประมาณการค่าใช้จ่ายของโครงการ (PSA ไปยัง Fin and Ops) มีคอลัมน์แบบมีเงื่อนไขที่เพิ่มเข้าไปเพื่อแปลงชนิดธุรกรรมที่ได้รับจาก Project Service Automation ในระหว่างการรวม</span><span class="sxs-lookup"><span data-stu-id="ee3d1-200">The Project expense estimates (PSA to Fin and Ops) template has a conditional column added to transform the transaction types received from Project Service Automation during the integration.</span></span>
- <span data-ttu-id="ee3d1-201">ถ้าคุณสร้างเท็มเพลตของคุณเอง คุณต้องเพิ่มคอลัมน์แบบมีเงื่อนไขนี้</span><span class="sxs-lookup"><span data-stu-id="ee3d1-201">If you create your own template, you must add this conditional column.</span></span> <span data-ttu-id="ee3d1-202">ในแบบฟอร์มการสอบถามขั้นสูงและการกรอง เลือก **เพิ่มคอลัมน์แบบมีเงื่อนไข**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-202">In the Advanced Query and Filtering form, select **Add Conditional Column**.</span></span> <span data-ttu-id="ee3d1-203">ตั้งชื่อคอลัมน์ เช่น "TransactionType"</span><span class="sxs-lookup"><span data-stu-id="ee3d1-203">Give the column a name, such as "TransactionType".</span></span> <span data-ttu-id="ee3d1-204">ให้ป้อนเงื่อนไขดังต่อไปนี้: ถ้า **msdyn_transactiontypecode** = 192350000 แล้ว **ต้นทุน** หรือถ้า **msdyn_transactiontypecode** = 192350005 แล้ว **การขาย** หรือ **null**</span><span class="sxs-lookup"><span data-stu-id="ee3d1-204">The condition to enter is as follows: If **msdyn_transactiontypecode** = 192350000, then **Cost** else if **msdyn_transactiontypecode** = 192350005, then **Sales** else **null**</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="ee3d1-205">การแม็ปเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee3d1-205">Template mapping in Data integration</span></span>

<span data-ttu-id="ee3d1-206">ภาพประกอบต่อไปนี้แสดงตัวอย่างของการแม็ปงานเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee3d1-206">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="ee3d1-207">การแม็ปแสดงข้อมูลฟิลด์ที่จะถูกซิงโครไนส์จาก Project Service Automation ไปยัง Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee3d1-207">The mapping shows the field information that will be synchronized from Project Service Automation to Finance and Operations.</span></span>

<span data-ttu-id="ee3d1-208">[![การแม็ปเท็มเพลต](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-208">[![Template mapping](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)</span></span>

<span data-ttu-id="ee3d1-209">[![การแม็ปเท็มเพลต](./media/ExpenseEstimatesMapping.jpg)](./media/ExpenseEstimatesMapping.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee3d1-209">[![Template mapping](./media/ExpenseEstimatesMapping.jpg)](./media/ExpenseEstimatesMapping.jpg)</span></span>




