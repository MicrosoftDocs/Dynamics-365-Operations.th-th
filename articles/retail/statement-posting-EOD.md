---
title: "การปรับปรุงไปยังการลงรายการบัญชีใบแจ้งยอดจากธนาคาร"
description: "หัวข้อนี้อธิบายถึงการปรับปรุงที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด"
author: josaw1
manager: AnnBe
ms.date: 04/26/2016
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.translationtype: HT
ms.sourcegitcommit: 4961ee7fcc56af0646e421c9e040e2129cc322c4
ms.openlocfilehash: e6d6ede65764c0b35c9ce0985af0d9f2cd6653c0
ms.contentlocale: th-th
ms.lasthandoff: 06/12/2018

---

# <a name="improvements-to-statement-posting"></a><span data-ttu-id="cecce-103">การปรับปรุงไปยังการลงรายการบัญชีใบแจ้งยอดจากธนาคาร</span><span class="sxs-lookup"><span data-stu-id="cecce-103">Improvements to statement posting</span></span>

[!include[banner](includes/banner.md)]

<span data-ttu-id="cecce-104">หัวข้อนี้อธิบายถึงการปรับปรุงชุดแรกที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="cecce-105">การปรับปรุงเหล่านี้จะพร้อมใช้งานใน Microsoft Dynamics 365 for Finance and Operations 7.3.2</span><span class="sxs-lookup"><span data-stu-id="cecce-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="cecce-106">การเปิดใช้งาน</span><span class="sxs-lookup"><span data-stu-id="cecce-106">Activation</span></span>

<span data-ttu-id="cecce-107">โดยค่าเริ่มต้น ในขณะปรับใช้ Finance and Operations 7.3.2 โปรแกรมจะถูกตั้งค่าเพื่อใช้ลักษณะการทำงานแบบดั้งเดิมสำหรับการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="cecce-108">ในการเปิดใช้งานคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว คุณต้องเปิดคีย์การตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="cecce-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="cecce-109">ไปที่ **การดูแลระบบ** \> **ตั้งค่า** \> **การตั้งค่าคอนฟิกลิขสิทธิ์** และจากนั้น ภายใต้โหนด **การขายปลีก** ล้างกล่องกาเครื่องหมาย **ใบแจ้งยอดการขายปลีก (ดั้งเดิม)** และเลือกกล่องกาเครื่องหมาย **ใบแจ้งยอดการขายปลีก**</span><span class="sxs-lookup"><span data-stu-id="cecce-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail** node, clear the **Retail statements (legacy)** check box, and select the **Retail statements** check box.</span></span>

<span data-ttu-id="cecce-110">เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก** ใหม่ ถูกเปิด รายการเมนูใหม่ที่ชื่อ **ใบแจ้งยอดการขายปลีก** จะพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="cecce-110">When the new **Retail statements** configuration key is turned on, a new menu item that is named **Retail statements** is available.</span></span> <span data-ttu-id="cecce-111">รายการเมนูนี้ช่วยให้คุณสามารถสร้าง คำนวณ และลงรายการบัญชีใบแจ้งยอด ด้วยตนเองได้</span><span class="sxs-lookup"><span data-stu-id="cecce-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="cecce-112">ใบแจ้งยอดใดๆ ที่ทำให้เกิดข้อผิดพลาด เมื่อมีการใช้กระบวนการลงรายการบัญชีชุดงาน จะพร้อมใช้งานโดยใช้รายการเมนูนี้ด้วย</span><span class="sxs-lookup"><span data-stu-id="cecce-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="cecce-113">(เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก (ดั้งเดิม)** ใหม่ ถูกเปิด รายการเมนูจะมีชื่อว่า **เปิดใบแจ้งยอด**)</span><span class="sxs-lookup"><span data-stu-id="cecce-113">(When the **Retail statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="cecce-114">Finance and Operations มีการตรวจสอบต่อไปนี้ที่เกี่ยวข้องกับคีย์การตั้งค่าคอนฟิกเหล่านี้:</span><span class="sxs-lookup"><span data-stu-id="cecce-114">Finance and Operations includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="cecce-115">คีย์การตั้งค่าคอนฟิกทั้งสองไม่ได้เปิดในเวลาเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="cecce-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="cecce-116">ต้องใช้คีย์การตั้งค่าคอนฟิกเดียวกันสำหรับการดำเนินการทั้งหมดที่กระทำกับคำสั่งที่กำหนดในระหว่างวัฏจักร (สร้าง คำนวณ ยกเลิกการเลือก ลงรายการบัญชี ฯลฯ)</span><span class="sxs-lookup"><span data-stu-id="cecce-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="cecce-117">ตัวอย่างเช่น คุณไม่สามารถสร้างและคำนวณใบแจ้งยอดได้ ขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก (ดั้งเดิม)** จะถูกเปิด และจากนั้น พยายามลงรายการบัญชีใบแจ้งยอดเดียวกัน ขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก** จะถูกเปิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="cecce-117">For example, you can't create and calculate a statement while the **Retail statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Retail statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="cecce-118">เราขอแนะนำให้ คุณใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก** สำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว เว้นแต่ว่าคุณมีเหตุผลที่น่าสนใจในการใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอดการขายปลีก (ดั้งเดิม)** แทน</span><span class="sxs-lookup"><span data-stu-id="cecce-118">We recommend that you use the **Retail statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Retail statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="cecce-119">Microsoft จะยังคงลงทุนในคำสั่งใหม่และคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วต่อไป และเป็นเรื่องสำคัญว่า คุณสลับไปที่โอกาสที่เร็วที่สุดจะได้รับประโยชน์จากรายการนั้น</span><span class="sxs-lookup"><span data-stu-id="cecce-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="cecce-120">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่สืบทอดมาจะไม่สนับสนุนในรุ่นต่อไป</span><span class="sxs-lookup"><span data-stu-id="cecce-120">The legacy statement posting feature will be deprecated in a future release.</span></span>

## <a name="setup"></a><span data-ttu-id="cecce-121">การตั้งค่า</span><span class="sxs-lookup"><span data-stu-id="cecce-121">Setup</span></span>

<span data-ttu-id="cecce-122">ในฐานะที่เป็นส่วนหนึ่งของการปรับปรุงไปยังคุณลักษณะการลงรายการบัญชีใบแจ้งยอด พารามิเตอร์ใหม่สามตัวได้ถูกนำไปใช้ใน FastTab **ใบแจ้งยอด** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การขายปลีก** :</span><span class="sxs-lookup"><span data-stu-id="cecce-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Retail parameters** page:</span></span>

- <span data-ttu-id="cecce-123">**ปิดใช้งานการล้างข้อมูลใบแจ้งยอด** – ตัวเลือกนี้จะใช้ได้เฉพาะสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="cecce-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="cecce-124">เราขอแนะนำให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่** เพื่อป้องกันผู้ใช้จากเคลียริ่งคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="cecce-125">ถ้าคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชีจะถูกล้างข้อมูล ข้อมูลจะได้รับความเสียหาย</span><span class="sxs-lookup"><span data-stu-id="cecce-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="cecce-126">คุณควรตั้งค่าตัวเลือกนี้เป็น **ใช่** ในสถานการณ์ยกเว้นเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="cecce-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="cecce-127">**จองสินค้าคงคลังในระหว่างการคำนวณ** – เราขอแนะนำให้คุณใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** สำหรับการจองสินค้าคงคลัง และให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่**</span><span class="sxs-lookup"><span data-stu-id="cecce-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="cecce-128">เมื่อการตั้งค่าตัวเลือกนี้เป็น **ไม่ใช่** คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วจะไม่พยายามที่จะสร้างรายการการจองสินค้าคงคลังในเวลาของการคำนวณ (ถ้ารายการไม่ได้ถูกสร้างขึ้นแล้วโดยใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** )</span><span class="sxs-lookup"><span data-stu-id="cecce-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="cecce-129">คุณลักษณะจะสร้างรายการการจองสินค้าคงคลัง เฉพาะในขณะลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="cecce-130">การใช้งานนี้มีตัวเลือกการออกแบบ และเป็นไปตามข้อเท็จจริงที่ว่า กรอบเวลาระหว่างกระบวนการคำนวณและกระบวนการการลงรายการบัญชีโดยทั่วไปจะมีขนาดเล็ก</span><span class="sxs-lookup"><span data-stu-id="cecce-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="cecce-131">อย่างไรก็ตาม ถ้าคุณต้องการจองสินค้าคงคลังในเวลาของการคำนวณ คุณสามารถกำหนดตัวเลือกนี้เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="cecce-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="cecce-132">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิมจะจองสินค้าคงคลังในระหว่างกระบวนการคำนวณใบแจ้งยอดเสมอ (ถ้าการจองยังไม่สำเร็จผ่านทางชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** ) โดยไม่คำนึงถึงการตั้งค่าของตัวเลือกนี้</span><span class="sxs-lookup"><span data-stu-id="cecce-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="cecce-133">**ปิดใช้งานการตรวจนับที่จำเป็น** – เมื่อตัวเลือกนี้ถูกตั้งค่าเป็น **ใช่** กระบวนการลงรายการบัญชีสำหรับใบแจ้งยอดดำเนินต่อไป แม้ว่าผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรมในใบแจ้งยอดจะอยู่นอกขีดจำกัดที่กำหนดไว้ใน FastTab **ใบแจ้งยอด** สำหรับร้านค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="cecce-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for Retail stores.</span></span>

<span data-ttu-id="cecce-134">นอกจากนี้ ฟิลด์ **จำนวนสูงสุดของการลงรายการบัญชีใบแจ้งยอดคู่ขนาน** ได้ถูกนำมาใช้ FastTab **การประมวลผลชุดงาน**</span><span class="sxs-lookup"><span data-stu-id="cecce-134">Additionally, the **Maximum number of parallel statement posting** field has been introduced on the **Batch processing** FastTab.</span></span> <span data-ttu-id="cecce-135">ฟิลด์นี้กำหนดจำนวนของชุดงานควรจะรันพร้อมกัน</span><span class="sxs-lookup"><span data-stu-id="cecce-135">This field defines the number of batch tasks should be run at the same time.</span></span> <span data-ttu-id="cecce-136">ในปัจจุบัน คุณต้องตั้งค่าของฟิลด์นี้ด้วยตนเอง</span><span class="sxs-lookup"><span data-stu-id="cecce-136">Currently, you must manually set the value of this field.</span></span>

<span data-ttu-id="cecce-137">นอกจากนี้ ด้วยกระบวนการลงรายการบัญชีใหม่ จำเป็นต้องกำหนด **ผลิตภัณฑ์ในบัตรของขวัญ**  บน FastTab **บัตรของขวัญ** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การขายปลีก**</span><span class="sxs-lookup"><span data-stu-id="cecce-137">Also, with the new posting process, it is required to define a **Gift card product**  on the **Gift card** FastTab on the **Posting** tab of the **Retail parameters** page.</span></span> <span data-ttu-id="cecce-138">นี่เป็นจริง แม้ว่าจะไม่มีการใช้บัตรของขวัญโดยองค์กร</span><span class="sxs-lookup"><span data-stu-id="cecce-138">This is true even if no Gift cards are used by the organization.</span></span> 

<span data-ttu-id="cecce-139">โปรดทราบว่า การตั้งค่าและพารามิเตอร์ทั้งหมดที่เกี่ยวข้องกับการลงรายการบัญชีใบแจ้งยอด และที่ถูกกำหนดไว้ในร้านค้าปลีก และในหน้า **พารามิเตอร์การขายปลีก** สามารถใช้ได้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-139">Note that all settings and parameters that are related to statement postings, and that are defined on Retail stores and on the **Retail parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="cecce-140">การประมวลผล</span><span class="sxs-lookup"><span data-stu-id="cecce-140">Processing</span></span>
<span data-ttu-id="cecce-141">คำสั่งสามารถถูกคำนวณและลงรายการบัญชีได้ในชุดงาน โดยใช้รายการเมนู **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน**</span><span class="sxs-lookup"><span data-stu-id="cecce-141">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="cecce-142">อีกทางหนึ่งคือ ใบแจ้งยอดสามารถถูกคำนวณและลงรายการบัญชีได้ด้วยตนเอง โดยใช้รายการ **ใบแจ้งยอดการขายปลีก** ที่คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วมีให้</span><span class="sxs-lookup"><span data-stu-id="cecce-142">Alternatively, statements can be manually calculated and posted by using the **Retail statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="cecce-143">กระบวนการและขั้นตอนสำหรับการคำนวณ และการลงรายการบัญชีใบแจ้งยอดในชุดงาน เท่ากันกับที่อยู่ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="cecce-143">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="cecce-144">อย่างไรก็ตาม การปรับปรุงที่สำคัญได้ถูกดำเนินการในการประมวลผล back-end หลักของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-144">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="cecce-145">การปรับปรุงเหล่านี้ทำให้กระบวนการยืดหยุ่นมากขึ้น และให้การมองเห็นที่ดีขึ้นในสถานะและข้อมูลข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-145">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="cecce-146">ดังนั้น ผู้ใช้สามารถจัดการรากที่เกิดจากข้อผิดพลาด และจากนั้นดำเนินการกระบวนการลงรายการบัญชีต่อ โดยไม่ก่อให้เกิดความเสียหายในข้อมูล และไม่ทำให้เกิดข้อมูลที่ต้องซ่อมแซม</span><span class="sxs-lookup"><span data-stu-id="cecce-146">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="cecce-147">ส่วนต่อไปนี้อธิบายของการปรับปรุงหลักบางอย่างสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรากฏในอินเทอร์เฟสผู้ใช้ สำหรับใบแจ้งยอดการขายปลีกและใบแจ้งยอดที่ลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-147">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for retail statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="cecce-148">รายละเอียดสถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-148">Status details</span></span>
<span data-ttu-id="cecce-149">แบบจำลองสถานะใหม่ได้ถูกนำมาใช้ในใบแจ้งยอดที่ลงรายการบัญชีตามปกติ ระหว่างกระบวนการการคำนวณและการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-149">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="cecce-150">ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="cecce-150">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="cecce-151">ใบสั่งสถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-151">State order</span></span> | <span data-ttu-id="cecce-152">สถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-152">State</span></span>      | <span data-ttu-id="cecce-153">คำอธิบาย</span><span class="sxs-lookup"><span data-stu-id="cecce-153">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="cecce-154">1</span><span class="sxs-lookup"><span data-stu-id="cecce-154">1</span></span>           | <span data-ttu-id="cecce-155">เริ่มต้นแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-155">Started</span></span>    | <span data-ttu-id="cecce-156">ใบแจ้งยอดถูกสร้างขึ้น และพร้อมที่จะถูกคำนวณ</span><span class="sxs-lookup"><span data-stu-id="cecce-156">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="cecce-157">2</span><span class="sxs-lookup"><span data-stu-id="cecce-157">2</span></span>           | <span data-ttu-id="cecce-158">ที่ทำเครื่องหมาย</span><span class="sxs-lookup"><span data-stu-id="cecce-158">Marked</span></span>     | <span data-ttu-id="cecce-159">ธุรกรรมที่อยู่ในขอบเขตสำหรับใบแจ้งยอด จะถูกระบุตามพารามิเตอร์ใบแจ้งยอด และจะมีการทำเครื่องหมายด้วยรหัสใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-159">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="cecce-160">3</span><span class="sxs-lookup"><span data-stu-id="cecce-160">3</span></span>           | <span data-ttu-id="cecce-161">คำนวณได้</span><span class="sxs-lookup"><span data-stu-id="cecce-161">Calculated</span></span> | <span data-ttu-id="cecce-162">รายการใบแจ้งยอดจะได้รับการคำนวณ และแสดงขึ้น</span><span class="sxs-lookup"><span data-stu-id="cecce-162">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="cecce-163">ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-163">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="cecce-164">ใบสั่งสถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-164">State order</span></span> | <span data-ttu-id="cecce-165">สถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-165">State</span></span>                   | <span data-ttu-id="cecce-166">คำอธิบาย</span><span class="sxs-lookup"><span data-stu-id="cecce-166">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="cecce-167">1</span><span class="sxs-lookup"><span data-stu-id="cecce-167">1</span></span>           | <span data-ttu-id="cecce-168">ตรวจสอบแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-168">Checked</span></span>                 | <span data-ttu-id="cecce-169">การตรวจสอบหลายรายการเสร็จสิ้นแล้ว โดยเกี่ยวข้องกับพารามิเตอร์ (ตัวอย่างเช่น ค่าธรรมเนียมการโอนการครอบครอง) และใบแจ้งยอดและรายการใบแจ้งยอด (ตัวอย่างเช่น ผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรม)</span><span class="sxs-lookup"><span data-stu-id="cecce-169">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="cecce-170">2</span><span class="sxs-lookup"><span data-stu-id="cecce-170">2</span></span>           | <span data-ttu-id="cecce-171">รวม</span><span class="sxs-lookup"><span data-stu-id="cecce-171">Aggregated</span></span>              | <span data-ttu-id="cecce-172">ธุรกรรมการขายสำหรับลูกค้าที่มีชื่อและไม่มีชื่อ จะถูกรวมไว้ตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="cecce-172">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="cecce-173">ในขั้นสุดท้าย ธุรกรรมแบบรวมทุกรายการจะถูกแปลงเป็นใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-173">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="cecce-174">3</span><span class="sxs-lookup"><span data-stu-id="cecce-174">3</span></span>           | <span data-ttu-id="cecce-175">ใบสั่งของลูกค้าที่สร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="cecce-175">Customer order created</span></span>  | <span data-ttu-id="cecce-176">โดยยึดตามธุรกรรมแบบรวม ใบสั่งขายถูกใช้เพื่อสร้างในระบบ</span><span class="sxs-lookup"><span data-stu-id="cecce-176">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="cecce-177">4 ชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="cecce-177">4</span></span>           | <span data-ttu-id="cecce-178">ใบสั่งของลูกค้าที่แแกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="cecce-178">Customer order invoiced</span></span> | <span data-ttu-id="cecce-179">ใบสั่งขายถูกออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="cecce-179">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="cecce-180">5</span><span class="sxs-lookup"><span data-stu-id="cecce-180">5</span></span>           | <span data-ttu-id="cecce-181">ลงรายการบัญชีส่วนลด</span><span class="sxs-lookup"><span data-stu-id="cecce-181">Discounts posted</span></span>        | <span data-ttu-id="cecce-182">สมุดรายวันส่วนลดประจำงวดถูกลงรายการบัญชีตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="cecce-182">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="cecce-183">6 ชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="cecce-183">6</span></span>           | <span data-ttu-id="cecce-184">รายได้/ค่าใช้จ่ายที่ลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-184">Income/expense posted</span></span>   | <span data-ttu-id="cecce-185">มีการลงรายบัญชีธุรกรรมรายได้/ค่าใช้จ่ายเป็นใบสำคัญ</span><span class="sxs-lookup"><span data-stu-id="cecce-185">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="cecce-186">7</span><span class="sxs-lookup"><span data-stu-id="cecce-186">7</span></span>           | <span data-ttu-id="cecce-187">เชื่อมโยงใบสำคัญแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-187">Vouchers linked</span></span>         | <span data-ttu-id="cecce-188">มีการสร้างสมุดรายวันการชำระเงิน และเชื่อมโยงกับใบแจ้งหนี้ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="cecce-188">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="cecce-189">8</span><span class="sxs-lookup"><span data-stu-id="cecce-189">8</span></span>           | <span data-ttu-id="cecce-190">ลงรายการบัญชีการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="cecce-190">Payments posted</span></span>         | <span data-ttu-id="cecce-191">สมุดรายวันการชำระเงินถูกลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-191">Payment journals are posted.</span></span> |
| <span data-ttu-id="cecce-192">9</span><span class="sxs-lookup"><span data-stu-id="cecce-192">9</span></span>           | <span data-ttu-id="cecce-193">ลงรายการบัญชีบัตรของขวัญ</span><span class="sxs-lookup"><span data-stu-id="cecce-193">Gift cards posted</span></span>       | <span data-ttu-id="cecce-194">มีการลงรายบัญชีธุรกรรมบัตรของขวัญเป็นใบสำคัญ</span><span class="sxs-lookup"><span data-stu-id="cecce-194">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="cecce-195">10</span><span class="sxs-lookup"><span data-stu-id="cecce-195">10</span></span>          | <span data-ttu-id="cecce-196">ประกาศแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-196">Posted</span></span>                  | <span data-ttu-id="cecce-197">ใบแจ้งยอดถูกทำเครื่องหมายเป็นลงรายการบัญชีแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-197">The statement is marked as posted.</span></span> |

<span data-ttu-id="cecce-198">ทุกๆ สถานะในตารางข้างต้นไม่ขึ้นอยู่กับลักษณะ และการขึ้นต่อกันแบบลำดับชั้นถูกสร้างขึ้นระหว่างสถานะ</span><span class="sxs-lookup"><span data-stu-id="cecce-198">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="cecce-199">การขึ้นต่อกันนี้ไหลจากบนลงล่าง</span><span class="sxs-lookup"><span data-stu-id="cecce-199">This dependency flows from top to bottom.</span></span> <span data-ttu-id="cecce-200">ถ้าระบบตรวจพบข้อผิดพลาดขณะกำลังประมวลผลสถานะ สถานะของใบแจ้งยอดจะถูกแปลงกลับไปเป็นสถานะก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="cecce-200">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="cecce-201">ความพยายามซ้ำในเวลาต่อมาใดๆ ของกระบวนการ ดำเนินต่อจากสถานะที่ล้มเหลว และดำเนินต่อไปข้างหน้า</span><span class="sxs-lookup"><span data-stu-id="cecce-201">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="cecce-202">วิธีการนี้มีประโยชน์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="cecce-202">This approach has the following benefits:</span></span>

- <span data-ttu-id="cecce-203">ผู้ใช้มีความสามารถฝนการมองเห็นในสถานะที่ซึ่งเกิดข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-203">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="cecce-204">มีการหลีกเลี่ยงความเสียหายของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="cecce-204">Data corruption is avoided.</span></span> <span data-ttu-id="cecce-205">ตัวอย่างเช่น ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีอินสแตนซ์ที่ซึ่งมีการออกใบแจ้งหนี้ใบสั่งขายบางรายการ แต่รายการอื่นๆ ถูกเปิดทิ้งไว้</span><span class="sxs-lookup"><span data-stu-id="cecce-205">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="cecce-206">นอกจากนี้ ยังมีอินสแตนซ์ที่สมุดรายวันการชำระเงินบางรายการไม่มีใบแจ้งหนี้ที่สอดคล้องกันเพื่อชำระ เนื่องจากการลงรายการบัญชีใบแจ้งหนี้มีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-206">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="cecce-207">ผู้ใช้สามารถดูสถานะปัจจุบันของใบแจ้งยอดได้โดยใช้ปุ่ม **รายละเอียดสถานะ** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-207">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="cecce-208">หน้ารายละเอียดสถานะมีสามส่วน:</span><span class="sxs-lookup"><span data-stu-id="cecce-208">The status details page has three sections:</span></span>

    - <span data-ttu-id="cecce-209">ส่วนแรกแสดงสถานะปัจจุบันของใบแจ้งยอด พร้อมด้วยรหัสข้อผิดพลาดและข้อความแสดงข้อผิดพลาดโดยละเอียด ถ้ามีข้อผิดพลาดเกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="cecce-209">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="cecce-210">ส่วนที่สองจะแสดงสถานะต่างๆ ของกระบวนการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="cecce-210">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="cecce-211">สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการรันเรียบร้อยแล้ว กล่าวว่าไม่สามารถรันได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการรัน</span><span class="sxs-lookup"><span data-stu-id="cecce-211">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="cecce-212">ส่วนที่สามจะแสดงสถานะต่างๆ ของกระบวนการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-212">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="cecce-213">สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการรันเรียบร้อยแล้ว กล่าวว่าไม่สามารถรันได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการรัน</span><span class="sxs-lookup"><span data-stu-id="cecce-213">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="cecce-214">นอกจากนี้ ส่วนหัวของส่วนที่สองและที่สามแสดงสถานะทั้งหมดของกระบวนการที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="cecce-214">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="cecce-215">ล็อกเหตุการณ์</span><span class="sxs-lookup"><span data-stu-id="cecce-215">Event logs</span></span>
<span data-ttu-id="cecce-216">ใบแจ้งยอดจะผ่านการดำเนินงานต่างๆ (ตัวอย่างเช่น สร้าง คำนวณ ยกเลิกการเลือก และลงรายการบัญชี) และอินสแตนซ์หลายรายการของการดำเนินงานเดียวกันอาจถูกเรียก ในระหว่างวงจรชีวิตของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-216">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="cecce-217">ตัวอย่างเช่น หลังจากที่มีการสร้างและการคำนวณใบแจ้งยอด ผู้ใช้สามารถยกเลิกการเลือกใบแจ้งยอด และคำนวณอีกครั้งได้</span><span class="sxs-lookup"><span data-stu-id="cecce-217">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="cecce-218">ปุ่ม **ล็อกเหตุการณ์** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดให้บันทึกการตรวจสอบที่เสร็จสมบูรณ์ของการดำเนินงานต่างๆ ที่ถูกเรียกบนใบแจ้งยอด พร้อมด้วยข้อมูลเกี่ยวกับเวลาที่มีการเรียกการดำเนินการดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="cecce-218">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="cecce-219">ธุรกรรมที่รวม</span><span class="sxs-lookup"><span data-stu-id="cecce-219">Aggregated transactions</span></span>
<span data-ttu-id="cecce-220">ในระหว่างกระบวนการลงรายการบัญชี ธุรกรรมการขายจะถูกรวมไว้ตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="cecce-220">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="cecce-221">ธุรกรรมแบบรวมเหล่านี้ถูกจัดเก็บในระบบ และถูกใช้เพื่อสร้างใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-221">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="cecce-222">ธุรกรรมแบบรวมทุกรายการสร้างใบสั่งขายที่สอดคล้องกันในระบบ</span><span class="sxs-lookup"><span data-stu-id="cecce-222">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="cecce-223">คุณสามารถดูธุรกรรมแบบรวมได้โดยใช้ปุ่ม **ธุรกรรมแบบรวม** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดได้</span><span class="sxs-lookup"><span data-stu-id="cecce-223">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="cecce-224">แท็บ **รายละเอียดของใบสั่งขาย** ของธุรกรรมแบบรวมแสดงข้อมูลต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="cecce-224">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="cecce-225">**รหัสเรกคอร์ด** – รหัสของธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="cecce-225">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="cecce-226">**หมายเลขใบแจ้งยอด** – ใบแจ้งยอดที่มีธุรกรรมแบบรวมอยู่</span><span class="sxs-lookup"><span data-stu-id="cecce-226">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="cecce-227">**วันที่** – วันที่ที่มีการสร้างธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="cecce-227">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="cecce-228">**รหัสการขาย** – เมื่อมีการสร้างใบสั่งขายจากธุรกรรมแบบรวม รหัสใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-228">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="cecce-229">ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบสั่งขายที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="cecce-229">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="cecce-230">**จำนวนของรายการแบบวม** – จำนวนรวมของรายการสำหรับธุรกรรมแบบรวมและใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-230">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="cecce-231">**สถานะ** – สถานะล่าสุดของธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="cecce-231">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="cecce-232">**รหัสใบแจ้งหนี้** – เมื่อออกใบแจ้งหนี้ใบสั่งขายสำหรับธุรกรรมแบบรวม รหัสใบแจ้งหนี้การขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-232">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="cecce-233">ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบแจ้งหนี้สำหรับใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-233">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="cecce-234">แท็บ **รายละเอียดธุรกรรม** ของธุรกรรมแบบรวม แสดงธุรกรรมการขายปลีกทั้งหมดที่ถูกดึงลงในธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="cecce-234">The **Transaction details** tab of an aggregated transaction shows all the retail transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="cecce-235">รายการแบบรวมในธุรกรรมแบบรวมแสดงเรกคอร์ดแบบรวมทั้งหมดจากธุรกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="cecce-235">The aggregated lines on the aggregated transaction show all the aggregated records from the retail transactions.</span></span> <span data-ttu-id="cecce-236">รายการแบบรวมยังจะแสดงรายละเอียดต่างๆ ด้วย เช่น สินค้า ตัวแปร ปริมาณ ราคา ยอดเงินสุทธิ หน่วย และคลังสินค้า</span><span class="sxs-lookup"><span data-stu-id="cecce-236">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="cecce-237">โดยทั่วไป รายการแบบรวมแต่ละรายการจะเกี่ยวข้องกับรายการใบสั่งขายหนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="cecce-237">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="cecce-238">จากหน้า **ธุรกรรมแบบรวม** คุณสามารถดาวน์โหลด XML สำหรับธุรกรรมแบบรวมเฉพาะ โดยใช้ปุ่ม **ส่งออกใบสั่งขาย XML** ได้</span><span class="sxs-lookup"><span data-stu-id="cecce-238">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="cecce-239">คุณสามารถใช้ XML เพื่อดีบักปัญหาที่เกี่ยวข้องกับการสร้างใบสั่งขายและลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-239">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="cecce-240">เพียงดาวน์โหลด XML อัพโหลดไปยังสภาพแวดล้อมการทดสอบ และดีบักปัญหาในสภาพแวดล้อมการทดสอบ</span><span class="sxs-lookup"><span data-stu-id="cecce-240">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="cecce-241">ฟังก์ชันสำหรับการดาวน์โหลด XML สำหรับธุรกรรมแบบรวม ไม่พร้อมใช้งานสำหรับใบแจ้งยอดที่ถูกลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-241">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="cecce-242">มุมมองธุรกรรมแบบรวมแสดงผลประโยชน์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="cecce-242">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="cecce-243">ผู้ใช้มีความสามารถในการมองเห็นในธุรกรรมแบบรวมที่ล้มเหลวในระหว่างการสร้างใบสั่งขาย และใบสั่งขายที่ล้มเหลวในระหว่างการออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="cecce-243">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="cecce-244">ผู้ใช้มีความสามารถในการมองเห็นในวิธีการรวมธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="cecce-244">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="cecce-245">ผู้ใช้มีบันทึกการตรวจสอบบัญชีที่สมบูรณ์ จากธุรกรรมการขายปลีก ไปยังใบสั่งขาย ไปยังใบแจ้งหนี้การขาย</span><span class="sxs-lookup"><span data-stu-id="cecce-245">The user has a complete audit trail, from retail transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="cecce-246">บันทึกการตรวจสอบนี้ไม่พร้อมใช้งานในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="cecce-246">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="cecce-247">ไฟล์ XML แบบรวมจะช่วยให้สามารถระบุปัญหาได้ง่ายขึ้นในระหว่างการสร้างใบสั่งขายและการออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="cecce-247">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="cecce-248">ใบสำคัญสมุดรายวัน</span><span class="sxs-lookup"><span data-stu-id="cecce-248">Journal vouchers</span></span>
<span data-ttu-id="cecce-249">ปุ่ม **ใบสำคัญสมุดรายวัน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงธุรกรรมใบสำคัญต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด และที่เกี่ยวข้องกับส่วนลด บัญชีรายได้/ค่าใช้จ่าย บัตรของขวัญ และอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="cecce-249">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="cecce-250">ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="cecce-250">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="cecce-251">สมุดรายวันการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="cecce-251">Payment journals</span></span>
<span data-ttu-id="cecce-252">ปุ่ม **สมุดรายวันการชำระเงิน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงสมุดรายวันการชำระเงินต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-252">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="cecce-253">ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="cecce-253">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="cecce-254">การปรับปรุงอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="cecce-254">Other improvements</span></span>

<span data-ttu-id="cecce-255">อื่นๆ การปรับปรุง back-end ที่ผู้ใช้สามารถดูได้ ได้ถูกทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-255">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="cecce-256">ยกตัวอย่างเช่น</span><span class="sxs-lookup"><span data-stu-id="cecce-256">Here are some examples:</span></span>

- <span data-ttu-id="cecce-257">การรวมไม่พิจารณาพนักงาน เทอร์มินัล และเอนทิตี้ของกะ</span><span class="sxs-lookup"><span data-stu-id="cecce-257">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="cecce-258">เนื่องจากมีพารามิเตอร์การรวมน้อย ระบบต้องประมวลผลรายการใบสั่งขายน้อย</span><span class="sxs-lookup"><span data-stu-id="cecce-258">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="cecce-259">การเกิดขึ้นของการชะงักงันในตารางธุรกรรมขายปลีกจะลดลงโดยการแนะนำตารางการขยายเพิ่มเติม และโดยทำการดำเนินการแทรก แทนการดำเนินการอัพเดตในตารางธุรกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="cecce-259">The occurrence of deadlock on retail transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the retail transaction tables.</span></span>
- <span data-ttu-id="cecce-260">จำนวนของการรันงานในชุดงานได้ถูกทำให้เป็นพารามิเตอร์ และถูกจำกัด</span><span class="sxs-lookup"><span data-stu-id="cecce-260">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="cecce-261">ดังนั้น จำนวนนี้สามารถปรับแต่งได้ง่ายขึ้น โดยเฉพาะกับสภาพแวดล้อมของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="cecce-261">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="cecce-262">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีการสร้างจำนวนของชุดงานที่ไม่จำกัดในเวลาเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="cecce-262">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="cecce-263">ผลลัพธ์เป็นจำนวนงานที่ไม่สามารถจัดการได้ ค่าโสหุ้ย และปัญหาคอขวดบนเซิร์ฟเวอร์ชุดงาน</span><span class="sxs-lookup"><span data-stu-id="cecce-263">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="cecce-264">คำสั่งต่างๆ ถูกจัดคิวสำหรับการประมวลผลได้อย่างมีประสิทธิภาพ โดยการจัดระดับความสำคัญของใบแจ้งยอดที่มีจำนวนของธุรกรรมสูงสุด</span><span class="sxs-lookup"><span data-stu-id="cecce-264">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="cecce-265">กระบวนการชุดงาน เช่น **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน** ถูกรันในโหมดชุดงานเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="cecce-265">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="cecce-266">ในคุณลักษณะการลงรายการบัญชีคำสั่งดั้งเดิม ผู้ใช้สามารถเลือกเพื่อรันกระบวนการชุดงานเหล่านี้ในโหมดการโต้ตอบซึ่งเป็นการดำเนินงานเธรดเดียวแบบ s ไม่เหมือนกับกระบวนการชุดงานที่เป็นแบบหลายเธรด</span><span class="sxs-lookup"><span data-stu-id="cecce-266">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="cecce-267">ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม ความล้มเหลวใดๆ ของงานในชุดงานทำให้ชุดงานทั้งหมดอยู่ในสถานะข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-267">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="cecce-268">ในคุณลักษณะที่ปรับปรุงแล้ว ความล้มเหลวของภารกิจชุดงานไม่ทำให้ชุดงานอยู่ในสถานะข้อผิดพลาด ถ้าชุดงานอื่นๆ เสร็จเรียบร้อยแล้ว</span><span class="sxs-lookup"><span data-stu-id="cecce-268">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="cecce-269">คุณควรประเมินสถานะการลงรายการบัญชีสำหรับการดำเนินการชุดงาน ที่รันโดยใช้หน้า **ใบแจ้งยอดการขายปลีก** ซึ่งคุณสามารถดูใบแจ้งยอดใดๆ ที่ไม่ได้ลงรายการบัญชีได้เนื่องจากมีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-269">You should assess the posting status for a batch execution run by using the **Retail statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="cecce-270">ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม การเกิดขึ้นครั้งแรกของความล้มเหลวในการรายงานทำให้ชุดงานทั้งหมดล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="cecce-270">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="cecce-271">ใบแจ้งยอดที่เหลือไม่ได้รับการประมวลผล</span><span class="sxs-lookup"><span data-stu-id="cecce-271">The remaining statements aren't processed.</span></span> <span data-ttu-id="cecce-272">ในคุณลักษณะที่ปรับปรุง กระบวนการชุดงานดำเนินต่อไปเพื่อประมวลผลรายงานทั้งหมด แม้ว่าบางคำสั่งจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="cecce-272">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="cecce-273">สวัสดิการหนึ่งรายการคือ ผู้ใช้สามารถมองเห็นได้ในจำนวนที่แน่นอนของใบแจ้งยอดที่มีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="cecce-273">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="cecce-274">ดังนั้น ผู้ใช้ไม่จำเป็นต้องติดอยู่ในลูปแบบต่อเนื่องของการแก้ไขข้อผิดพลาด และการรันกระบวนการลงรายการบัญชีใบแจ้งยอด จนกระทั่งคำสั่งทั้งหมดถูกลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="cecce-274">Therefore, users don't have to be stuck in a continous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="cecce-275">คำแนะนำทั่วไปเกี่ยวกับใบแจ้งยอดที่ลงรายการบัญชีกระบวนการ</span><span class="sxs-lookup"><span data-stu-id="cecce-275">General guidance about the statement posting process</span></span>

- <span data-ttu-id="cecce-276">เราขอแนะนำให้ คุณรันกระบวนการลงรายการบัญชีใบแจ้งยอดในชุดงาน เนื่องจากชุดงานจะรันโดยใช้ประโยชน์จากความชำนาญของกรอบงานชุดงานในแง่ของมัลติเธรด</span><span class="sxs-lookup"><span data-stu-id="cecce-276">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="cecce-277">จำเป็นต้องใช้มัลติเธรดเพื่อจัดการกับไดรฟ์ข้อมูลขนาดใหญ่ของธุรกรรม ซึ่งโดยปกติแล้วจะปรากฏในการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-277">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="cecce-278">เราขอแนะนำให้ คุณเปิดสินค้าคงคลังทางกายภาพค่าลบในกลุ่มแบบจำลองสินค้า เพื่อให้คุณมีประสบการณ์การลงรายการบัญชีที่ราบรื่น</span><span class="sxs-lookup"><span data-stu-id="cecce-278">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="cecce-279">ในบางสถานการณ์ ใบแจ้งยอดค่าลบอาจไม่สามารถจะลงรายการบัญชีได้ ถ้าไม่มีสินค้าคงคลังทางกายภาพที่เป็นค่าลบ</span><span class="sxs-lookup"><span data-stu-id="cecce-279">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="cecce-280">ตัวอย่างเช่น ในทฤษฎี ถ้าไม่มีหน่วยของสินค้าในสินค้าคงคลังเพียงหนึ่งหน่วย และมีธุรกรรมการขายและธุรกรรมการส่งคืนสำหรับสินค้า ธุรกรรมควรจะสามารถลงรายการบัญชี แม้ว่าสินค้าคงคลังค่าลบไม่ได้ถูกเปิดใช้งาน</span><span class="sxs-lookup"><span data-stu-id="cecce-280">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="cecce-281">อย่างไรก็ตาม เนื่องจากกระบวนการลงรายการบัญชีใบแจ้งยอดจะดึงทั้งธุรกรรมการขายและธุรกรรมการส่งคืนสินค้าในใบสั่งของลูกค้ารายเดียว ไม่มีการรับประกันว่ารายการขายจะถูกลงรายการบัญชีก่อน ซึ่งตามด้วยรายการส่งคืน</span><span class="sxs-lookup"><span data-stu-id="cecce-281">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="cecce-282">ดังนั้น ข้อผิดพลาดอาจเกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="cecce-282">Therefore, errors can occur.</span></span> <span data-ttu-id="cecce-283">ถ้าสินค้าคงคลังค่าลบถูกเปิดในสถานการณ์นี้ การลงรายการบัญชีธุรกรรมจะไม่ได้รับผลกระทบในทางลบ และระบบจะสะท้อนถึงสินค้าคงคลังอย่างถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="cecce-283">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="cecce-284">เราขอแนะนำให้ คุณใช้การรวม ในขณะที่คุณคำนวณและลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="cecce-284">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="cecce-285">ดังนั้น การตั้งค่าต่อไปนี้จะได้รับการแนะนำสำหรับพารามิเตอร์การรวมบางตัว:</span><span class="sxs-lookup"><span data-stu-id="cecce-285">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="cecce-286">ไปที่ **การขายปลีก** \> **การตั้งค่าศูนย์ควบคุม** \> **พารามิเตอร์** \> **พารามิเตอร์การขายปลีก**</span><span class="sxs-lookup"><span data-stu-id="cecce-286">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="cecce-287">จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การปรับปรุงสินค้าคงคลัง** ในฟิลด์ **ระดับรายละเอียด** เลือก **สรุป**</span><span class="sxs-lookup"><span data-stu-id="cecce-287">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="cecce-288">ไปที่ **การขายปลีก** \> **การตั้งค่าศูนย์ควบคุม** \> **พารามิเตอร์** \> **พารามิเตอร์การขายปลีก**</span><span class="sxs-lookup"><span data-stu-id="cecce-288">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="cecce-289">จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การรวม** ตั้งค่าตัวเลือก **ธุรกรรมใบสำคัญ** เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="cecce-289">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>

