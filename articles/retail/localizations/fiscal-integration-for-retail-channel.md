---
title: ภาพรวมของการรวมทางบัญชีสำหรับช่องทาง Retail
description: หัวข้อนี้อธิบายภาพรวมของความสามารถของการรวมทางบัญชีที่พร้อมใช้งานใน Microsoft Dynamics 365 for Retail
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: c6fcc93cfed35d73ae749856f33857ba84dbfd82
ms.sourcegitcommit: 70aeb93612ccd45ee88c605a1a4b87c469e3ff57
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 03/01/2019
ms.locfileid: "773288"
---
# <a name="overview-of-fiscal-integration-for-retail-channels"></a><span data-ttu-id="69f7f-103">ภาพรวมของการรวมทางบัญชีสำหรับช่องทาง Retail</span><span class="sxs-lookup"><span data-stu-id="69f7f-103">Overview of fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="69f7f-104">คำนำ</span><span class="sxs-lookup"><span data-stu-id="69f7f-104">Introduction</span></span>

<span data-ttu-id="69f7f-105">หัวข้อนี้เป็นภาพรวมของความสามารถของการรวมทางบัญชีที่พร้อมใช้งานใน Microsoft Dynamics 365 for Retail</span><span class="sxs-lookup"><span data-stu-id="69f7f-105">This topic is an overview of the fiscal integration capabilities that are available in Microsoft Dynamics 365 for Retail.</span></span> <span data-ttu-id="69f7f-106">การรวมทางบัญชีรวมการรวมที่มีอุปกรณ์และบริการทางบัญชีที่หลากหลาย ที่เปิดใช้งานการลงทะเบียนทางบัญชีของการขายปลีกที่เกี่ยวข้องกับกฎหมายทางบัญชีท้องถิ่น ที่มีเป้าหมายที่การป้องกันการฉ้อโกงภาษีในอุตสาหกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="69f7f-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of retail sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="69f7f-107">นี่คือสถานการณ์จำลองทั่วไปบางส่วนที่สามารถครอบคลุมได้โดยใช้การรวมทางบัญชี:</span><span class="sxs-lookup"><span data-stu-id="69f7f-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="69f7f-108">ลงทะเบียนการขายปลีกในอุปกรณ์ทางบัญชีที่ถูกเชื่อมต่อกับ Retail point of sale (POS) เช่น เครื่องพิมพ์ทางบัญชี และพิมพ์ใบเสร็จทางบัญชีสำหรับลูกค้า</span><span class="sxs-lookup"><span data-stu-id="69f7f-108">Register a retail sale on a fiscal device that is connected to Retail point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="69f7f-109">ส่งข้อมูลอย่างปลอดภัยซึ่งเกี่ยวข้องกับการขายและการส่งคืนที่เสร็จสมบูรณ์ใน Retail POS ไปยัง Web Service ภายนอกที่ถูกดำเนินการโดยหน่วยงานภาษี</span><span class="sxs-lookup"><span data-stu-id="69f7f-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="69f7f-110">ช่วยรับประกันความไม่เปลี่ยนแปลงของข้อมูลธุรกรรมการขายผ่านลายเซ็นดิจิทัล</span><span class="sxs-lookup"><span data-stu-id="69f7f-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="69f7f-111">ฟังก์ชันการรวมทางบัญชีใน Retail คือกรอบงานที่ให้โซลูชันทั่วไปสำหรับการพัฒนาและการแก้ไข/ปรับปรุงตามคำสั่งเพิ่มเติมของการรวมระหว่าง Retail POS และอุปกรณ์และบริการทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-111">The fiscal integration functionality in Retail is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="69f7f-112">นอกจากนี้ ฟังก์ชันยังสนับสนุนตัวอย่างการรวมทางบัญชีที่สนับสนุนสถานการณ์จำลองการขายปลีกพื้นฐานสำหรับประเทศหรือเขตเฉพาะ และทำงานกับอุปกรณ์และบริการทางบัญชีเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="69f7f-112">The functionality also includes fiscal integration samples that support basic retail scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="69f7f-113">ตัวอย่างการรวมทางบัญชีประกอบด้วยส่วนขยายที่หลากหลายขององค์ประกอบ Retail และถูกรวมในชุดสินค้าการพัฒนาซอฟท์แวร์ (SDK) ของ Retail</span><span class="sxs-lookup"><span data-stu-id="69f7f-113">A fiscal integration sample consists of several extensions of Retail components and is included in the Retail software development kit (SDK).</span></span> <span data-ttu-id="69f7f-114">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับตัวอย่างการรวมทางบัญชีที่พร้อมใช้งานใน Retail SDK ดู [ตัวอย่างการรวมทางบัญชีใน Retail SDK](#fiscal-integration-samples-in-the-retail-sdk)</span><span class="sxs-lookup"><span data-stu-id="69f7f-114">For more information about the fiscal integration samples that are available in the Retail SDK, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="69f7f-115">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการติดตั้ง และใช้ Retail SDK ดู [ภาพรวม SDK ของการขายปลีก](../dev-itpro/retail-sdk/retail-sdk-overview.md)</span><span class="sxs-lookup"><span data-stu-id="69f7f-115">For information about how to install and use the Retail SDK, see [Retail SDK overview](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="69f7f-116">เพื่อสนับสนุนสถานการณ์จำลองอื่นๆ ที่ไม่ได้รับการสนับสนุนโดยตัวอย่างการรวมทางบัญชี เพื่อรวม Retail POS กับอุปกรณ์และบริการทางบัญชีอื่นๆ เพื่อครอบคลุมความต้องการของประเทศหรือเขตอื่นๆ คุณต้องขยายตัวอย่างการรวมทางบัญชีที่มีอยู่ หรือสร้างตัวอย่างใหม่โดยใช้ตัวอย่างที่มีอยู่เป็นตัวอย่าง</span><span class="sxs-lookup"><span data-stu-id="69f7f-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="69f7f-117">กระบวนการลงทะเบียนทางบัญชีและตัวอย่างการรวมทางบัญชีสำหรับอุปกรณ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="69f7f-118">กระบวนการลงทะเบียนทางบัญชีใน Retail POS สามารถประกอบด้วยขั้นตอนอย่างน้อยหนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="69f7f-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="69f7f-119">แต่ละขั้นตอนเกี่ยวข้องกับการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์การขายปลีกเฉพาะในอุปกรณ์และบริการทางบัญชีหนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="69f7f-119">Each step involves fiscal registration of specific retail transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="69f7f-120">ส่วนประกอบของโซลูชันต่อไปนี้มีส่วนร่วมในการลงทะเบียนทางบัญชีในอุปกรณ์ทางบัญชีที่เชื่อมต่อกับสถานีฮาร์ดแวร์:</span><span class="sxs-lookup"><span data-stu-id="69f7f-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="69f7f-121">**ส่วนขยายรันไทม์ของ Commerce (CRT)** – องค์ประกอบนี้ทำให้ข้อมูลธุรกรรมขายปลีก/เหตุการณ์เป็นอนุกรมในรูปแบบที่ยังใช้เพื่อโต้ตอบกับอุปกรณ์ทางบัญชี แยกวิเคราะห์การตอบสนองจากอุปกรณ์ทางบัญชี และจัดเก็บการตอบสนองในฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="69f7f-121">**Commerce runtime (CRT) extension** – This component serializes retail transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="69f7f-122">ส่วนขยายยังกำหนดธุรกรรมและเหตุการณ์เฉพาะที่ต้องถูกตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="69f7f-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="69f7f-123">องค์ประกอบนี้มักจะถูกอ้างอิงถึง *ผู้ให้บริการเอกสารทางบัญชี*</span><span class="sxs-lookup"><span data-stu-id="69f7f-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="69f7f-124">**ส่วนขยายสถานีฮาร์ดแวร์** – องค์ประกอบนี้เริ่มต้นการสื่อสารกับอุปกรณ์ทางบัญชี ส่งคำขอและคำสั่งโดยตรงไปยังอุปกรณ์ทางบัญชีที่ขึ้นกับข้อมูลธุรกรรม/เหตุการณ์การขายปลีก ซึ่งถูกแยกจากเอกสารทางบัญชีและรับการตอบสนองจากอุปกรณ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the retail transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="69f7f-125">องค์ประกอบนี้มักจะถูกอ้างอิงเป็น *ตัวเชื่อมต่อทางบัญชี*</span><span class="sxs-lookup"><span data-stu-id="69f7f-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="69f7f-126">ตัวอย่างการรวมทางบัญชีสำหรับอุปกรณ์ทางบัญชีประกอบด้วยส่วนขยาย CRT และสถานีฮาร์ดแวร์สำหรับผู้ให้บริการเอกสารทางบัญชีและตัวเชื่อมต่อทางบัญชี ตามลำดับ</span><span class="sxs-lookup"><span data-stu-id="69f7f-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="69f7f-127">นอกจากนี้ ยังประกอบด้วยการตั้งค่าคอนฟิกส่วนประกอบต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="69f7f-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="69f7f-128">**การตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางบัญชี** – การตั้งค่าคอนฟิกนี้กำหนดวิธีการเอาต์พุตและรูปแบบสำหรับเอกสารทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="69f7f-129">นอกจากนี้ ยังประกอบด้วยการแม็ปข้อมูลสำหรับภาษีและวิธีการการชำระเงิน เพื่อทำให้ข้อมูลจาก Retail POS เข้ากันได้กับค่าที่ถูกกำหนดไว้ล่วงหน้าในเฟิร์มแวร์ของอุปกรณ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="69f7f-130">**การตั้งค่าคอนฟิกตัวเชื่อมต่อทางบัญชี** – การตั้งค่าคอนฟิกนี้กำหนดการสื่อสารทางกายภาพกับอุปกรณ์ทางการเงินเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="69f7f-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="69f7f-131">กระบวนการลงทะเบียนทางบัญชีสำหรับการลงทะเบียน POS เฉพาะ ถูกกำหนดโดยการตั้งค่าที่สอดคล้องกันในโพรไฟล์ฟังก์ชัน POS</span><span class="sxs-lookup"><span data-stu-id="69f7f-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="69f7f-132">สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางบัญชี อัปโหลดผู้ให้บริการเอกสารทางบัญชีและการตั้งค่าคอนฟิกตัวเชื่อมต่อทางบัญชี และเปลี่ยนแปลงพารามิเตอร์ ดู [ตั้งค่ากระบวนการลงทะเบียนทางบัญชี](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="69f7f-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="69f7f-133">ตัวอย่างต่อไปนี้แสดงโฟลว์การดำเนินการลงทะเบียนทางบัญชีสำหรับอุปกรณ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="69f7f-134">โฟลว์เริ่มต้นด้วยเหตุการณ์ใน POS (ตัวอย่างเช่น การสรุปของธุรกรรมการขาย) และการใช้งานลำดับของขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="69f7f-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="69f7f-135">POS ร้องขอเอกสารทางบัญชีจาก CRT</span><span class="sxs-lookup"><span data-stu-id="69f7f-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="69f7f-136">CRT กำหนดว่าเหตุการณ์ปัจจุบันต้องการการลงทะเบียนทางบัญชีหรือไม่</span><span class="sxs-lookup"><span data-stu-id="69f7f-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="69f7f-137">โดยขึ้นกับการตั้งค่ากระบวนการลงทะเบียนทางบัญชี CRT ระบุตัวเชื่อมต่อทางบัญชีและผู้ให้บริการเอกสารทางบัญชีที่สอดคล้องกันเพื่อใช้สำหรับการลงทะเบียนทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="69f7f-138">CRT รันผู้ให้บริการเอกสารทางบัญชีที่สร้างเอกสารทางบัญชี (ตัวอย่างเช่น เอกสาร XML) ที่แสดงธุรกรรมหรือเหตุการณ์การขายปลีก</span><span class="sxs-lookup"><span data-stu-id="69f7f-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the retail transaction or event.</span></span>
5. <span data-ttu-id="69f7f-139">POS ส่งเอกสารทางบัญชีที่ CRT เตรียมให้กับสถานีฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="69f7f-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="69f7f-140">สถานีฮาร์ดแวร์รันตัวเชื่อมต่อทางบัญชีที่ประมวลผลเอกสารทางบัญชีและสื่อสารกับอุปกรณ์หรือบริการทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="69f7f-141">POS วิเคราะห์การตอบสนองจากอุปกรณ์หรือบริการทางบัญชี เพื่อกำหนดว่าการลงทะเบียนทางบัญชีสำเร็จหรือไม่</span><span class="sxs-lookup"><span data-stu-id="69f7f-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="69f7f-142">CRT บันทึกการตอบสนองต่อฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="69f7f-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="69f7f-143">![schema โซลูชัน](media/emea-fiscal-integration-solution.png "schema โซลูชัน")</span><span class="sxs-lookup"><span data-stu-id="69f7f-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="69f7f-144">การจัดการข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="69f7f-144">Error handling</span></span>

<span data-ttu-id="69f7f-145">กรอบงานการรวมทางบัญชีให้ตัวเลือกต่อไปนี้เพื่อจัดการความล้มเหลว ในระหว่างการลงทะเบียนทางบัญชี:</span><span class="sxs-lookup"><span data-stu-id="69f7f-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="69f7f-146">**ลองอีกครั้ง** – ตัวดำเนินการสามารถใช้ตัวเลือกนี้ได้ เมื่อความล้มเหลวถูกแก้ปัญหาอย่างรวดเร็ว และการลงทะเบียนทางบัญชีสามารถรันซ้ำได้</span><span class="sxs-lookup"><span data-stu-id="69f7f-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="69f7f-147">ตัวอย่างเช่น ตัวเลือกนี้สามารถใช้ได้เมื่ออุปกรณ์ทางบัญชีไม่ได้ถูกเชื่อมต่อ เครื่องพิมพ์ทางบัญชีไม่มีกระดาษ หรือมีกระดาษติดในเครื่องพิมพ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="69f7f-148">**ยกเลิก** – ตัวเลือกนี้อนุญาตให้ตัวดำเนินการเลื่อนการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์ปัจจุบัน ถ้าล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="69f7f-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="69f7f-149">หลังจากการลงทะเบียนถูกเลื่อน ตัวดำเนินการสามารถทพงานต่อได้ใน POS และสามารถทำให้การดำเนินการใดๆ เสร็จสมบูรณ์ ซึ่งการลงทะเบียนทางบัญชีไม่ได้ถูกร้องขอ</span><span class="sxs-lookup"><span data-stu-id="69f7f-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="69f7f-150">เมื่อเหตุการณ์ใดๆ ที่ต้องการการลงทะเบียนทางบัญชีเกิดขึ้นใน POS (ตัวอย่างเช่น ธุรกรรมใหม่ถูกเปิด กล่องโต้ตอบการจัดการข้อผิดพลาด) ปรากฏโดยอัตโนมัติเพื่อแจ้งเตือนตัวดำเนินการว่า ธุรกรรมก่อนหน้าไม่ไดุ้ถูกลงทะเบียนอย่างถูกต้อง และให้ตัวเลือกการจัดการข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="69f7f-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="69f7f-151">**ข้าม** – ตัวดำเนินการสามารถใช้ตัวเลือกนี้ได้ เมื่อการลงทะเบียนทางบัญชีสามารถละเว้นได้ภายใต้เงื่อนไขเฉพาะ และตัวดำเนินการปกติสามารถดำเนินการต่อได้ใน POS</span><span class="sxs-lookup"><span data-stu-id="69f7f-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="69f7f-152">ตัวอย่างเช่น ตัวเลือกนี้สามารถใช้ได้เมื่อธุรกรรมการขายที่การลงทะเบียนทางบัญชีที่ล้มเหลว สามารถลงทะเบียนได้ในสมุดรายวันกระดาษพิเศษ</span><span class="sxs-lookup"><span data-stu-id="69f7f-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="69f7f-153">**ทำเครื่องหมายเป็นลงทะเบียนแล้ว** – ตัวดำเนินการสามารถใช้ตัวเลือกนี้ได้ เมื่อมีการลงทะเบียนธุรกรรมจริงๆ ในอุปกรณ์ทางบัญชี (ตัวอย่างเช่น ใบเสร็จทางบัญชีถูกพิมพ์) แต่ความล้มเหลวที่เกิดขึ้นเมื่อการตอบสนองทางบัญขีถูกบันทึกลงในฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="69f7f-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="69f7f-154">ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ต้องถูกเปิดใช้งานในกระบวนการลงทะเบียนทางบัญชี ก่อนที่จะมีการใช้</span><span class="sxs-lookup"><span data-stu-id="69f7f-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="69f7f-155">นอกจากนั้น ต้องมีการมอบสิทธิ์ที่สอดคล้องกันให้กับตัวดำเนินการ</span><span class="sxs-lookup"><span data-stu-id="69f7f-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="69f7f-156">ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** เปิดใช้งานรหัสข้อมูลให้บันทึกข้อมูลเฉพาะบางอย่างเกี่ยวกับความล้มเหลว เช่น เหตุผลสำหรับความล้มเหลว หรือการให้เหตุผลสำหรับการข้ามการลงทะเบียนทางบัญชี หรือการทำเครื่องหมายธุรกรรมเป็นลงทะเบียนแล้ว</span><span class="sxs-lookup"><span data-stu-id="69f7f-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="69f7f-157">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าพารามิเตอร์การจัดการข้อผิดพลาด ดู [ตั้งการตั้งค่าการจัดการข้อผิดพลาด](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings)</span><span class="sxs-lookup"><span data-stu-id="69f7f-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="69f7f-158">การจัดเก็บการตอบสนองทางบัญชีในธุรกรรมทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-158">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="69f7f-159">เมื่อการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์สำเร็จ ธุรกรรมทางบัญชีถูกสร้างขึ้นในฐานข้อมูลช่องทางและเชื่อมโยงไปยังธุรกรรมหรือเหตุการณ์ดั้งเดิม</span><span class="sxs-lookup"><span data-stu-id="69f7f-159">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="69f7f-160">ในทำนองเดียวกัน ถ้าตัวเลือก **ข้าม** หรือ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ถูกเลือกสำหรับการลงทะเบียนทางบัญชีที่ล้มเหลว ข้อมูลนี้ถูกจัดเก็บในธุรกรรมทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-160">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="69f7f-161">ธุรกรรมทางบัญชีเก็บการตอบสนองทางบัญชีของอุปกรณ์หรือบริการทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-161">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="69f7f-162">ถ้ากระบวนการลงทะเบียนทางบัญชีประกอบด้วยขั้นตอนหลายขั้นตอน ธุรกรรมทางบัญชีจะถูกสร้างขึ้นสำหรับแต่ละขั้นตอนของกระบวนการที่ส่งผลต่อการลงทะเบียนที่สำเร็จหรือล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="69f7f-162">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="69f7f-163">ธุรกรรมทางบัญชีถูกโอนย้ายไปยังสำนักงานใหญ่ของ Retail โดย *P-job* พร้อมกับธุรกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="69f7f-163">Fiscal transactions are transferred to Retail Headquarters by the *P-job*, together with retail transactions.</span></span> <span data-ttu-id="69f7f-164">บน FastTab **ธุรกรรมทางบัญชี** ของหน้า **ธุรกรรมร้านค้าปลีก** คุณสามารถดูธุรกรรมทางบัญชีที่เชื่อมโยงกับธุรกรรมการขายปลีกได้</span><span class="sxs-lookup"><span data-stu-id="69f7f-164">On the **Fiscal transactions** FastTab of the **Retail store transactions** page, you can view the fiscal transactions that are linked to retail transactions.</span></span>


<span data-ttu-id="69f7f-165">ธุรกรรมทางบัญชีจัดเก็บรายละเอียดต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="69f7f-165">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="69f7f-166">รายละเอียดกระบวนการลงทะเบียนทางบัญชี (กระบวนการ กลุ่มตัวเชื่อมต่อ ตัวเชื่อมต่อ และอื่นๆ)</span><span class="sxs-lookup"><span data-stu-id="69f7f-166">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="69f7f-167">นอกจากนี้ ยังจัดเก็บหมายเลขประจำสินค้าของอุปกรณ์ทางบัญชีในฟิลด์ **ลงทะเบียนหมายเลข** ถ้าข้อมูลนี้ถูกรวมในการตอบสนองทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-167">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="69f7f-168">สถานะของการลงทะเบียนทางบัญชี: **เสร็จสมบูรณ์** สำหรับการลงทะเบียนที่สำเร็จ **ข้าม** ถ้าตัวดำเนินการเลือกตัวเลือก **ข้าม** สำหรับการลงทะเบียนที่ล้มเหลว หรือ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ถ้าตัวดำเนินการเลือกตัวเลือก **ทำเครื่องหมายเป็นลงทะเบียนแล้ว**</span><span class="sxs-lookup"><span data-stu-id="69f7f-168">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="69f7f-169">ธุรกรรมรหัสข้อมูลที่เกี่ยวข้องกับธุรกรรมทางบัญชีที่เลือก</span><span class="sxs-lookup"><span data-stu-id="69f7f-169">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="69f7f-170">ในการดูธุรกรรมรหัสข้อมูล บน FastTab **ธุรกรรมทางบัญชี** เลือกธุรกรรมทางบัญชีที่มีสถานะเป็น **ข้าม** or **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** และจากนั้นเลือก **Iธุรกรรมรหัสข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="69f7f-170">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="69f7f-171">ข้อความทางบัญชีสำหรับส่วนลด</span><span class="sxs-lookup"><span data-stu-id="69f7f-171">Fiscal texts for discounts</span></span>

<span data-ttu-id="69f7f-172">บางประเทศหรือบางเขตมีความต้องการพิเศษเกี่ยวกับข้อความเพิ่มเติมที่ต้องถูกพิมพ์ในใบเสร็จทางบัญชี เมื่อมีการนำชนิดของส่วนลดที่แตกต่างกันไปใช้</span><span class="sxs-lookup"><span data-stu-id="69f7f-172">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="69f7f-173">ฟังก์ชันการรวมทางการเงินอนุญาตให้คุณตั้งค่าข้อความพิเศษสำหรับส่วนลดที่ถูกพิมพ์ หลังจากรายการส่วนลดหรือใบเสร็จทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-173">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="69f7f-174">สำหรับส่วนลดแบบกำหนดเอง คุณสามารถตั้งค่าคอนฟิกข้อความทางการเงินสำหรับรหัสข้อมูลที่ถูกระบุเป็นรหัสข้อมูล **ส่วนลดผลิตภัณฑ์** ในโพรไฟล์ฟังก์ชัน POS</span><span class="sxs-lookup"><span data-stu-id="69f7f-174">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="69f7f-175">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าข้อความทางบัญชีสำหรับส่วนลด ดู [ตั้งค่าข้อความทางบัญชีสำหรับส่วนลด](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts)</span><span class="sxs-lookup"><span data-stu-id="69f7f-175">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="69f7f-176">การพิมพ์รายงาน X ทางบัญชี และ Z ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-176">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="69f7f-177">ฟังก์ชันการรวมทางบัญชีสนับสนุนการสร้างของใบแจ้งยอดสิ้นสุดวันที่เฉพาะเจาะจงกับอุปกรณ์และบริการทางบัญชีแบบรวม:</span><span class="sxs-lookup"><span data-stu-id="69f7f-177">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="69f7f-178">ปุ่มใหม่ที่รันการดำเนินการที่สอดคล้องกัน ควรถูกเพิ่มไปยังโครงร่างหน้าจอ POS</span><span class="sxs-lookup"><span data-stu-id="69f7f-178">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="69f7f-179">สำหรับรายละเอียดเพิ่มเติม ดู [ตั้งค่ารายงาน X/Z ทางบัญชีจาก POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos)</span><span class="sxs-lookup"><span data-stu-id="69f7f-179">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="69f7f-180">ในตัวอย่างการรวมทางบัญชี การดำเนินการเหล่านี้ควรถูกจับคู่กับการดำเนินการที่สอดคล้องกันของอุปกรณ์ทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-180">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="69f7f-181">ตัวอย่างการรวมทางบัญชีใน Retail SDK</span><span class="sxs-lookup"><span data-stu-id="69f7f-181">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="69f7f-182">ตัวอย่างการรวมทางบัญชีต่อไปนี้พร้อมใช้งานในขณะนี้ใน Retail SDK ที่ถูกนำออกใช้งานกับ Retail:</span><span class="sxs-lookup"><span data-stu-id="69f7f-182">The following fiscal integration samples are currently available in the Retail SDK that is released with Retail:</span></span>

- [<span data-ttu-id="69f7f-183">ตัวอย่างการรวมเครื่องพิมพ์ทางบัญชีสำหรับอิตาลี</span><span class="sxs-lookup"><span data-stu-id="69f7f-183">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="69f7f-184">ตัวอย่างการรวมเครื่องพิมพ์ทางบัญชีสำหรับโปแลนด์</span><span class="sxs-lookup"><span data-stu-id="69f7f-184">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)

<span data-ttu-id="69f7f-185">ฟังก์ชันการรวมทางบัญชีต่อไปนี้ยังพร้อมใช้งานใน Retail SDK ด้วย แต่ขณะนี้ไม่ใช้ประโยชน์จากกรอบงานการรวมทางบัญชี</span><span class="sxs-lookup"><span data-stu-id="69f7f-185">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="69f7f-186">การย้ายของฟังก์ชันไปยังกรอบงานการรวมทางบัญชีถูกวางแผนไว้สำหรับการปรับปรุงในภายหลัง</span><span class="sxs-lookup"><span data-stu-id="69f7f-186">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>

- [<span data-ttu-id="69f7f-187">ลายเซ็นดิจิทัลสำหรับฝรั่งเศส</span><span class="sxs-lookup"><span data-stu-id="69f7f-187">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="69f7f-188">ลายเซ็นดิจิทัลสำหรับนอร์เวย์</span><span class="sxs-lookup"><span data-stu-id="69f7f-188">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)
- [<span data-ttu-id="69f7f-189">ตัวอย่างการรวมหน่วยควบคุมสำหรับสวีเดน</span><span class="sxs-lookup"><span data-stu-id="69f7f-189">Control unit integration sample for Sweden</span></span>](./retail-sdk-control-unit-sample.md)

