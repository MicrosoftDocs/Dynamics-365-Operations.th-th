---
title: "กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด"
description: "เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด เมื่อยอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ เช่น โดยทั่วไปส่วนลดการขายปลีก 'ซื้อ 1 แถม 1 X เปอร์เซ็นต์ส่วนลด' (BOGO) กระบวนการนี้กลายเป็นปัญหาของการปรับให้เหมาะสมแบบรวม"
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations, Retail
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.translationtype: Human Translation
ms.sourcegitcommit: e5d079ad711b45060eb4548efdedf2c0efb04d60
ms.openlocfilehash: 3d678d19fd59b34089996ea54e65a5cd1a1fcca5
ms.contentlocale: th-th
ms.lasthandoff: 06/14/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด

[!include[banner](includes/banner.md)]


เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด เมื่อยอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ เช่น โดยทั่วไป "ซื้อ 1 แถม 1 X เปอร์เซ็นต์ส่วนลด" (BOGO) ส่วนลดการขายปลีก การกระบวนการนี้กลายเป็นปัญหาของการปรับให้เหมาะสมแบบรวม

บทความนี้ใช้กับ Microsoft Dynamics AX 2012 R3 ที่มี KB 3105973 (การนำออกใช้วันที่ 2 พฤศจิกายน 2015) หรือรุ่นที่ใหม่กว่า และ Microsoft Dynamics 365 for Retail เพื่อกำหนดชุดของส่วนลดที่ซ้อนทับกันให้ใช้ในเวลาเหมาะสม เราได้แนะนำวิธีการสำหรับการใช้ส่วนลดที่ทับซ้อนกัน เราเรียกวิธีการใหม่นี้ว่า **การจัดอันดับมูลค่ากำไร** การจัดอันดับมูลค่ากำไรจะใช้เมื่อเวลาที่ต้องใช้ในการประเมินชุดของส่วนลดที่ซ้อนทับกันที่เป็นไปได้เกินขีดจำกัดที่สามารถตั้งค่าคอนฟิกได้ในหน้า **พารามิเตอร์การขายปลีก** ในวิธีการจัดอันดับมูลค่ากำไร มูลค่าจะถูกคำนวณสำหรับแต่ละส่วนลดที่ซ้อนทับกันโดยใช้มูลค่าของส่วนลดในผลิตภัณฑ์ที่ใช้ร่วมกัน จากนั้นจะมีการใช้ส่วนลดที่ซ้อนทับกันจากมูลค่าที่สัมพันธ์กันสูงสุดกับมูลค่าที่สัมพันธ์กันต่ำสุด สำหรับรายละเอียดเกี่ยวกับวิธีการใหม่ ให้ดูที่ส่วน "มูลค่ากำไร" ในบทความนี้ การจัดอันดับมูลค่ากำไรไม่ได้ถูกนำมาใช้เมื่อยอดเงินส่วนลดสำหรับผลิตภัณฑ์ไม่ได้รับผลกระทบจากผลิตภัณฑ์อื่นในธุรกรรม ตัวอย่างเช่น วิธีการนี้ไม่ได้ใช้สำหรับส่วนลดปกติสองรายการ หรือสำหรับส่วนลดปกติและส่วนลดปริมาณผลิตภัณฑ์เดียว

## <a name="discount-examples"></a>ตัวอย่างส่วนลด
คุณสามารถสร้างส่วนลดการขายปลีกได้ไม่จำกัดจำนวนบนชุดทั่วไปของผลิตภัณฑ์ อย่างไรก็ตาม เนื่องจากไม่มีข้อจำกัด ทำให้อาจมีปัญหาด้านประสิทธิภาพเมื่อคุณพยายามที่จะคำนวณส่วนลดที่ควรจะใช้กับผลิตภัณฑ์ต่าง ๆ ตัวอย่างต่อไปนี้แสดงให้เห็นถึงปัญหานี้โดยมีรายละเอียดเพิ่มเติม ในตัวอย่างที่ 1 เราเริ่มต้นด้วยผลิตภัณฑ์สองรายการและส่วนลดที่ซ้อนทับกันสองรายการ จากนั้น ในตัวอย่างที่ 2 เราแสดงให้เห็นถึงปัญหาเมื่อมีการเพิ่มผลิตภัณฑ์เพิ่มเติม

### <a name="example-1-two-products-and-two-discounts"></a>ตัวอย่างที่ 1: ผลิตภัณฑ์สองรายการและส่วนลดสองรายการ

ในตัวอย่างนี้ จำเป็นต้องมีผลิตภัณฑ์สองรายการเพื่อที่จะได้รับส่วนลดแต่ละรายการ และไม่สามารถรวมส่วนลดได้ ส่วนลดในตัวอย่างนี้คือส่วนลด **ราคาที่ดีที่สุด** ผลิตภัณฑ์ทั้งสองมีสิทธิ์ได้รับส่วนลดทั้งสองรายการ ต่อไปนี้เป็นส่วนลดสองรายการดังกล่าว
![ชุดคอมโบ 001 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-01.jpg)

สำหรับผลิตภัณฑ์ใด ๆ สองรายการ ส่วนลดสองรายการเหล่านี้ที่ดีกว่าขึ้นอยู่กับราคาของผลิตภัณฑ์ทั้งสองรายการ เมื่อราคาของผลิตภัณฑ์ทั้งสองเท่ากันหรือใกล้เคียงกัน ส่วนลดที่ 1 จะดีกว่า เมื่อราคาของผลิตภัณฑ์หนึ่งน้อยกว่าราคาของอีกผลิตภัณฑ์หนึ่งอย่างมาก ส่วนลดที่ 2 จะดีกว่า นี่คือกฎเชิงคณิตศาสตร์สำหรับการประเมินส่วนลดทั้งสองเหล่านี้โดยเชื่อมโยงกันใน: ![ชุดคอมโบ 02 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-02.jpg)

**หมายเหตุ:** เมื่อราคาของผลิตภัณฑ์ 1 เท่ากับสองในสามของราคาของผลิตภัณฑ์ 2 ส่วนลดทั้งสองจะมีค่าเท่ากัน ในตัวอย่างนี้ เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 จะแตกต่างกันตั้งแต่เพียงไม่กี่เปอร์เซ็นต์ (เมื่อราคาของผลิตภัณฑ์ทั้งสองแตกต่างกัน) จนถึงสูงสุด 25 เปอร์เซ็นต์ (เมื่อผลิตภัณฑ์ทั้งสองมีราคาเดียวกัน) เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 2 ได้รับการแก้ไขแล้ว ซึ่งจะเท่ากับ 20 เปอร์เซ็นต์เสมอ เนื่องจากเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 มีช่วงที่อาจมากกว่าหรือน้อยกว่าส่วนลด 2 ส่วนลดที่ดีที่สุดขึ้นอยู่กับราคาของผลิตภัณฑ์ทั้งสองที่จะต้องได้รับส่วนลด ในตัวอย่างนี้ การคำนวณเสร็จสมบูรณ์ได้อย่างรวดเร็วเนื่องจากส่วนลดทั้งสองจะถูกนำไปใช้ในผลิตภัณฑ์สองรายการเท่านั้น มีเพียงสองชุดที่เป็นไปได้: แอพลิเคชันหนึ่งของส่วนลด 1 หรืออีกหนึ่งแอพลิเคชันของส่วนลด 2 ไม่มีการเปลี่ยนลำดับที่จะคำนวณ ค่าของส่วนลดแต่ละจะถูกคำนวณโดยใช้ผลิตภัณฑ์ทั้งสองและใช้ส่วนลดที่ดีที่สุด

### <a name="example-2-four-products-and-two-discounts"></a>ตัวอย่างที่ 2: ผลิตภัณฑ์สี่รายการและส่วนลดสองรายการ

ถัดไป เราจะใช้ผลิตภัณฑ์สี่รายการและส่วนลดสองรายการเหมือนเดิม ผลิตภัณฑ์ทั้งสี่มีสิทธิ์ได้รับส่วนลดทั้งสองรายการ มีชุดที่เป็นไปได้สิบสองแบบ ในตอนท้าย ส่วนลดสองรายการจะถูกนำมาใช้กับธุรกรรมในหนึ่งในสามชุด: แอพลิเคชันสองรายการของส่วนลด 1 แอพลิเคชันสองรายการของส่วนลด 2 หรือแอพลิเคชันหนึ่งรายการของส่วนลด 1 และแอพลิเคชันหนึ่งรายการของส่วนลด 2 เมื่อต้องการแสดงชุดที่เป็นไปได้ เราจะดูที่ผลิตภัณฑ์สี่รายการสองชุดที่มีราคาที่แตกต่างกัน:

-   ผลิตภัณฑ์ทั้งสี่มีราคาเดียวกันคือ $15.00 ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ แอพลิเคชันสองรายการของส่วนลด 1 ผลิตภัณฑ์สองรายการจะมีราคาเต็ม และอีกสองรายการจะได้รับส่วนลด 50 เปอร์เซ็นต์ ส่วนลดรวมสำหรับธุรกรรมคือ $45 (15 + 15 + 7.50 + 7.50) ซึ่งก็คือ $15 (25 เปอร์เซ็นต์) จากจำนวนรวมที่ยังไม่ได้ลดคือ $60 ส่วนลด 2 คือ $12 เท่านั้น (20 เปอร์เซ็นต์)
-   ผลิตภัณฑ์สองรายการได้รับส่วนลดรายการละ $20 ผลิตภัณฑ์หนึ่งได้รับ $15 และอีกผลิตภัณฑ์หนึ่งได้รับ $5 ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ แอพลิเคชันหนึ่งรายการของส่วนลด 2 และแอพลิเคชันหนึ่งรายการของส่วนลด 1 ตารางต่อไปนี้แสดงส่วนลด

เมื่อต้องการอ่านตาราง ให้ใช้จากผลิตภัณฑ์หนึ่งจากแถวและอีกหนึ่งผลิตภัณฑ์จากคอลัมน์ ตัวอย่างเช่น ในตารางส่วนลด 1 เมื่อคุณรวมผลิตภัณฑ์ $20 ทั้งสอง คุณจะได้รับส่วนลด $10 ในตารางส่วนลด 2 เมื่อคุณรวมผลิตภัณฑ์ $15 และผลิตภัณฑ์ $5 คุณจะได้รับส่วนลด $4
![ชุดคอมโบ 03 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-03.jpg)

ก่อนอื่น เราจะค้นหาส่วนลดที่มากที่สุดที่พร้อมใช้งานจากผลิตภัณฑ์ใด ๆ สองรายการโดยใช้ส่วนลดอย่างใดอย่างหนึ่ง ตารางทั้งสองแสดงยอดเงินส่วนลดสำหรับชุดทั้งหมดของผลิตภัณฑ์สองรายการ ส่วนที่แรเงาของตารางแสดงให้เห็นถึงกรณีที่ผลิตภัณฑ์ถูกจับคู่กับตัวเอง ซึ่งเราไม่สามารถทำได้ หรือย้อนกลับการจับคู่ของผลิตภัณฑ์สองรายการนั้นที่ให้ยอดเงินส่วนลดที่เหมือนกัน และสามารถละเว้นได้ เมื่อดูที่ตาราง คุณจะเห็นว่าส่วนลด 1 สำหรับสินค้าสองรายการราคา $20 คือส่วนลดที่มากที่สุดที่มีสำหรับส่วนลดของผลิตภัณฑ์ทั้งสี่ (ส่วนลดนี้จะถูกเน้นเป็นสีเขียวในตารางแรก) ที่ให้เฉพาะผลิตภัณฑ์ $15 และผลิตภัณฑ์ $5 เมื่อดูที่สองตารางนี้อีกครั้ง คุณจะเห็นว่าสำหรับผลิตภัณฑ์สองรายการนี้ ส่วนลด 1 จะให้ส่วนลด $2.50 ในขณะที่ส่วนลด 2 ให้ส่วนลด $4 ดังนั้น เราจะเลือกส่วนลด 2 ยอดรวมส่วนลดเท่ากับ $14 เพื่อให้มองเห็นภาพของการสนทนานี้ง่ายขึ้น ต่อไปนี้เป็นตารางเพิ่มเติมสองรายการที่แสดงเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับชุดของผลิตภัณฑ์สองรายการที่เป็นไปได้ทั้งหมดสำหรับทั้งส่วนลด 1 และส่วนลด 2 มีรวมอยู่เพียงครึ่งหนึ่งของรายการของชุด เนื่องจากสำหรับส่วนลดสองรายการนี้ ไม่สำคัญว่าผลิตภัณฑ์ทั้งสองจะอยู่ในลำดับใดในส่วนลด ส่วนลดที่มีผลบังคับใช้สูงสุด (25 เปอร์เซ็นต์) จะถูกเน้นเป็นสีเขียว และส่วนลดที่มีผลบังคับใช้ต่ำสุด (10 เปอร์เซ็นต์) จะถูกเน้นเป็นสีแดง 

![ชุดคอมโบ 04 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-04.jpg)

**หมายเหตุ:** เมื่อราคาแตกต่างกัน และมีส่วนลดอย่างน้อยสองรายการที่ดีกว่า วิธีเดียวที่จะรับประกันชุดของส่วนลดที่ดีที่สุดคือการประเมินส่วนลดทั้งสองรายการและนำมาเปรียบเทียบกัน

## <a name="total-possible-combinations"></a>ชุดที่เป็นไปได้ทั้งหมด
ส่วนนี้ยังคงเป็นตัวอย่างจากส่วนก่อนหน้า เราจะเพิ่มผลิตภัณฑ์เพิ่มเติมและส่วนลดอีกหนึ่งรายการ และดูว่าจำต้องคำนวณและเปรียบเทียบกี่ชุด ตารางต่อไปนี้แสดงหมายเลขของชุดส่วนลดที่เป็นไปได้โดยเป็นการเพิ่มปริมาณผลิตภัณฑ์ ตารางแสดงสิ่งที่จะเกิดขึ้นทั้งสองกรณีเมื่อมีส่วนลดที่ซ้อนทับกันสองรายการ ดังในตัวอย่างก่อนหน้านี้ และเมื่อมีส่วนลดที่ซ้อนทับกันสามรายการ จำนวนของชุดส่วนลดที่เป็นไปได้ที่จะต้องมีการประเมินในเร็ว ๆ นี้มีมากกว่าจำนวนที่แม้แต่คอมพิวเตอร์ที่รวดเร็วสามารถคำนวณและเปรียบเทียบได้อย่างรวดเร็วเพียงพอที่จะยอมรับได้สำหรับธุรกรรมการขายปลีก

![ชุดคอมโบ 05 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-05.jpg)

เมื่อมีการใช้จำนวนที่มากกว่าหรือส่วนลดที่ซ้อนทับกันที่มากกว่า จำนวนรวมของชุดส่วนลดที่เป็นไปได้สามารถเพิ่มขึ้นถึงหลายล้านได้อย่างรวดเร็ว และเวลาที่ต้องใช้ในการประเมินและเลือกชุดที่เป็นไปได้ที่ดีที่สุดได้จะเพิ่มขึ้นอย่างเห็นได้ชัด มีการทำการปรับให้เหมาะสมบางอย่างในกลไกจัดการราคาขายปลีกเพื่อลดจำนวนรวมของชุดที่ต้องมีการประเมิน อย่างไรก็ตาม เนื่องจากจำนวนของส่วนลดที่ซ้อนทับกันและปริมาณในธุรกรรมไม่ได้ถูกจำกัด ชุดจำนวนมากจะต้องได้รับกรประเมินเมื่อใดก็ตามที่มีส่วนลดที่ซ้อนทับกันเสมอ ปัญหานี้เป็นปัญหาที่ระบุถึงวิธีการจัดอันดับมูลค่ากำไร

## <a name="marginal-value-method"></a>วิธีคิดมูลค่ากำไร
เมื่อต้องการแก้ไขปัญหาของการเพิ่มขึ้นแบบยกกำลังของจำนวนชุดที่ต้องมีการประเมิน การปรับให้เหมาะสมมีการคำนวณมูลค่าต่อผลิตภัณฑ์ที่ใช้ร่วมกันของส่วนลดแต่ละรายการบนชุดของผลิตภัณฑ์ที่สามารถใช้กับส่วนลดอย่างน้อยสองรายการ เราอ้างอิงถึงมูลค่านี้เป็น **มูลค่ากำไร** ของส่วนลดสำหรับผลิตภัณฑ์ที่ใช้ร่วมกัน มูลค่ากำไรเป็นค่าเฉลี่ยต่อการเพิ่มของผลิตภัณฑ์ในยอดเงินส่วนลดรวมเมื่อผลิตภัณฑ์ที่ใช้ร่วมกันมีอยู่ในส่วนลดแต่ละรายการ มูลค่ากำไรถูกคำนวณด้วยการหักยอดเงินส่วนลดรวม (DTotal) โดยหักยอดเงินส่วนลดโดยไม่มีผลิตภัณฑ์ที่ใช้ร่วมกัน (DMinus\\ ใช้ร่วมกัน) และหารผลต่างนั้นด้วยจำนวนของผลิตภัณฑ์ที่ใช้ร่วมกัน (ProductsShared) 
![ชุดคอมโบ 06 ของส่วนลดที่ซ้อนทับกัน](./media/overlapping-discount-combo-06.jpg)

หลังจากที่มีการคำนวณมูลค่ากำไรของแต่ละส่วนลดบนชุดของผลิตภัณฑ์ที่ใช้ร่วมกัน ส่วนลดจะถูกนำไปใช้กับผลิตภัณฑ์ที่ใช้ร่วมกันตามใบสั่งจากมูลค่ากำไรสูงสุดถึงมูลค่ากำไรต่ำสุดอย่างละเอียดถี่ถ้วน สำหรับวิธีการนี้ ความเป็นไปได้ของส่วนลดที่เหลืออยู่ทั้งหมดจะไม่ถูกเปรียบเทียบทุกครั้งหลังจากที่มีการใช้อินสแตนซ์เดียวของส่วนลด แต่ส่วนลดที่ซ้อนทับกันจะถูกเปรียบเทียบหนึ่งครั้ง และถูกนำไปใช้ตามลำดับ ไม่มีการดำเนินการเปรียบเทียบเพิ่มเติม คุณสามารถตั้งค่าคอนฟิกขีดจำกัดให้สลับไปยังวิธีการคิดมูลค่ากำไรบนแท็บ **ส่วนลด** ของหน้า **พารามิเตอร์การขายปลีก** เวลาที่ยอมรับได้ในการคำนวณส่วนลดรวมแตกต่างกันตามแต่อุตสาหกรรมการขายปลีก อย่างไรก็ตาม โดยทั่วไปเวลานี้จะอยู่ในช่วงของมิลลิวินาทีหลักสิบถึงหนึ่งวินาที




