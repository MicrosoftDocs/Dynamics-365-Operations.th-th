---
title: กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด
description: เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด เมื่อยอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ เช่น โดยทั่วไปส่วนลดการขายปลีก 'ซื้อ 1 แถม 1 X เปอร์เซ็นต์ส่วนลด' (BOGO) กระบวนการนี้กลายเป็นปัญหาของการปรับให้เหมาะสมแบบรวม
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailParameters, RetailPeriodicDiscount,
audience: Application User, IT Pro
ms.reviewer: josaw
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: fee9289820d3df821036412147994e227d68d1dc
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/15/2021
ms.locfileid: "5257182"
---
# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="95ffc-104">กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด</span><span class="sxs-lookup"><span data-stu-id="95ffc-104">Determine the optimal combination of overlapping discounts</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="95ffc-105">เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด</span><span class="sxs-lookup"><span data-stu-id="95ffc-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="95ffc-106">เมื่อยอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ เช่น โดยทั่วไปส่วนลดการขายปลีก "ซื้อ 1 รับ 1 ส่วนลด X เปอร์เซ็นต์" (BOGO) กระบวนการนี้กลายเป็นปัญหาของการปรับให้เหมาะสมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="95ffc-106">When the discount amount varies according to the price of the products that are purchased, such as in the common "Buy 1, get 1 X percent off" (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="95ffc-107">บทความนี้นำไปใช้กับ Microsoft Dynamics AX 2012 R3 ที่มี KB 3105973 (ถูกนำออกใช้ในวันที่ 2 พฤศจิกายน 2015) หรือใหม่กว่า และใช้กับ Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="95ffc-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Dynamics 365 Commerce.</span></span> <span data-ttu-id="95ffc-108">เพื่อกำหนดชุดของส่วนลดที่ซ้อนทับกันให้ใช้ในเวลาเหมาะสม เราได้แนะนำวิธีการสำหรับการใช้ส่วนลดที่ทับซ้อนกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="95ffc-109">เราเรียกวิธีการใหม่นี้ว่า **การจัดอันดับมูลค่ากำไร**</span><span class="sxs-lookup"><span data-stu-id="95ffc-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="95ffc-110">การจัดอันดับค่าส่วนเพิ่ม จะใช้เมื่อเวลาที่ต้องการเพื่อประเมินชุดค่าผสมที่เป็นไปได้ของส่วนลดที่ทับซ้อนกันเกินกว่าค่าเกณฑ์ที่กำหนดบนหน้า **พารามิเตอร์การค้า** </span><span class="sxs-lookup"><span data-stu-id="95ffc-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Commerce parameters** page.</span></span> <span data-ttu-id="95ffc-111">ในวิธีการจัดอันดับมูลค่ากำไร มูลค่าจะถูกคำนวณสำหรับส่วนลดที่ซ้อนทับกันแต่ละรายการโดยใช้มูลค่าของส่วนลดในผลิตภัณฑ์ที่ใช้ร่วมกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount's value on the shared products.</span></span> <span data-ttu-id="95ffc-112">จากนั้นจะมีการใช้ส่วนลดที่ซ้อนทับกันจากมูลค่าที่สัมพันธ์กันสูงสุดกับมูลค่าที่สัมพันธ์กันต่ำสุด</span><span class="sxs-lookup"><span data-stu-id="95ffc-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="95ffc-113">สำหรับรายละเอียดเกี่ยวกับวิธีการใหม่ ให้ดูที่ส่วน "มูลค่ากำไร" ภายหลังในบทความนี้</span><span class="sxs-lookup"><span data-stu-id="95ffc-113">For details about the new method, see the "Marginal value" section, later in this article.</span></span> <span data-ttu-id="95ffc-114">การจัดอันดับมูลค่ากำไรไม่ได้ถูกนำมาใช้ เมื่อยอดเงินส่วนลดสำหรับผลิตภัณฑ์ไม่ได้รับผลกระทบจากผลิตภัณฑ์อื่นในธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="95ffc-114">Marginal value ranking isn't used when the discount amounts for a product aren't affected by another product in the transaction.</span></span> <span data-ttu-id="95ffc-115">ตัวอย่างเช่น วิธีการนี้ไม่ได้ใช้สำหรับส่วนลดปกติสองรายการ หรือสำหรับส่วนลดปกติและส่วนลดปริมาณผลิตภัณฑ์เดียว</span><span class="sxs-lookup"><span data-stu-id="95ffc-115">For example, this method isn't used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="95ffc-116">ตัวอย่างส่วนลด</span><span class="sxs-lookup"><span data-stu-id="95ffc-116">Discount examples</span></span>

<span data-ttu-id="95ffc-117">คุณสามารถสร้างส่วนลดได้ไม่จำกัดจำนวนในชุดผลิตภัณฑ์ทั่วไป</span><span class="sxs-lookup"><span data-stu-id="95ffc-117">You can create an unlimited number of discounts on a common set of products.</span></span> <span data-ttu-id="95ffc-118">อย่างไรก็ตาม เนื่องจากไม่มีข้อจำกัด ทำให้อาจมีปัญหาด้านประสิทธิภาพเมื่อคุณพยายามที่จะคำนวณส่วนลดที่ควรจะใช้กับผลิตภัณฑ์ต่าง ๆ</span><span class="sxs-lookup"><span data-stu-id="95ffc-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="95ffc-119">ตัวอย่างต่อไปนี้แสดงให้เห็นถึงปัญหานี้โดยมีรายละเอียดเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="95ffc-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="95ffc-120">ในตัวอย่างที่ 1 เราเริ่มต้นด้วยผลิตภัณฑ์สองรายการและส่วนลดที่ซ้อนทับกันสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="95ffc-121">จากนั้น ในตัวอย่างที่ 2 เราแสดงให้เห็นถึงปัญหาเมื่อมีการเพิ่มผลิตภัณฑ์เพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="95ffc-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="95ffc-122">ตัวอย่างที่ 1: ผลิตภัณฑ์สองรายการและส่วนลดสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="95ffc-123">ในตัวอย่างนี้ จำเป็นต้องมีผลิตภัณฑ์สองรายการเพื่อที่จะได้รับส่วนลดแต่ละรายการ และไม่สามารถรวมส่วนลดได้</span><span class="sxs-lookup"><span data-stu-id="95ffc-123">In this example, two products are required in order to qualify for each discount, and the discounts can't be combined.</span></span> <span data-ttu-id="95ffc-124">ส่วนลดในตัวอย่างนี้คือส่วนลด **ราคาที่ดีที่สุด**</span><span class="sxs-lookup"><span data-stu-id="95ffc-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="95ffc-125">ผลิตภัณฑ์ทั้งสองมีสิทธิ์ได้รับส่วนลดทั้งสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="95ffc-126">ต่อไปนี้เป็นส่วนลดสองรายการดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="95ffc-126">Here are the two discounts.</span></span>

![ตัวอย่างของส่วนลดราคาที่ดีที่สุดสองรายการ](./media/overlapping-discount-combo-01.jpg)

<span data-ttu-id="95ffc-128">สำหรับผลิตภัณฑ์ใด ๆ สองรายการ ส่วนลดสองรายการเหล่านี้ที่ดีกว่าขึ้นอยู่กับราคาของผลิตภัณฑ์ทั้งสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="95ffc-129">เมื่อราคาของผลิตภัณฑ์ทั้งสองเท่ากันหรือใกล้เคียงกัน ส่วนลดที่ 1 จะดีกว่า</span><span class="sxs-lookup"><span data-stu-id="95ffc-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="95ffc-130">เมื่อราคาของผลิตภัณฑ์หนึ่งน้อยกว่าราคาของอีกผลิตภัณฑ์หนึ่งอย่างมาก ส่วนลดที่ 2 จะดีกว่า</span><span class="sxs-lookup"><span data-stu-id="95ffc-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="95ffc-131">นี่คือกฎเชิงคณิตศาสตร์สำหรับการประเมินส่วนลดทั้งสองเหล่านี้เทียบกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-131">Here is the mathematical rule for evaluating these two discounts against each other.</span></span>

![กฎสำหรับการประเมินส่วนลด](./media/overlapping-discount-combo-02.jpg)

> [!NOTE]
> <span data-ttu-id="95ffc-133">เมื่อราคาของผลิตภัณฑ์ 1 เท่ากับสองในสามของราคาของผลิตภัณฑ์ 2 ส่วนลดทั้งสองจะมีค่าเท่ากัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-133">When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="95ffc-134">ในตัวอย่างนี้ เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 จะแตกต่างกันตั้งแต่เพียงไม่กี่เปอร์เซ็นต์ (เมื่อราคาของผลิตภัณฑ์ทั้งสองแตกต่างกัน) จนถึงสูงสุด 25 เปอร์เซ็นต์ (เมื่อผลิตภัณฑ์ทั้งสองมีราคาเดียวกัน)</span><span class="sxs-lookup"><span data-stu-id="95ffc-134">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="95ffc-135">เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 2 ได้รับการแก้ไขแล้ว</span><span class="sxs-lookup"><span data-stu-id="95ffc-135">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="95ffc-136">ซึ่งจะเท่ากับ 20 เปอร์เซ็นต์เสมอ</span><span class="sxs-lookup"><span data-stu-id="95ffc-136">It's always 20 percent.</span></span> <span data-ttu-id="95ffc-137">เนื่องจากเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 มีช่วงที่อาจมากกว่าหรือน้อยกว่าส่วนลด 2 ส่วนลดที่ดีที่สุดขึ้นอยู่กับราคาของผลิตภัณฑ์ทั้งสองที่จะต้องได้รับส่วนลด</span><span class="sxs-lookup"><span data-stu-id="95ffc-137">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="95ffc-138">ในตัวอย่างนี้ การคำนวณเสร็จสมบูรณ์ได้อย่างรวดเร็วเนื่องจากส่วนลดทั้งสองจะถูกนำไปใช้ในผลิตภัณฑ์สองรายการเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="95ffc-138">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="95ffc-139">มีเพียงสองชุดที่เป็นไปได้: แอพลิเคชันหนึ่งของส่วนลด 1 หรืออีกหนึ่งแอพลิเคชันของส่วนลด 2</span><span class="sxs-lookup"><span data-stu-id="95ffc-139">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="95ffc-140">ไม่มีการเปลี่ยนลำดับที่จะคำนวณ</span><span class="sxs-lookup"><span data-stu-id="95ffc-140">There are no permutations to calculate.</span></span> <span data-ttu-id="95ffc-141">ค่าของส่วนลดแต่ละจะถูกคำนวณโดยใช้ผลิตภัณฑ์ทั้งสองและใช้ส่วนลดที่ดีที่สุด</span><span class="sxs-lookup"><span data-stu-id="95ffc-141">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="95ffc-142">ตัวอย่างที่ 2: ผลิตภัณฑ์สี่รายการและส่วนลดสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-142">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="95ffc-143">ถัดไป เราจะใช้ผลิตภัณฑ์สี่รายการและส่วนลดสองรายการเหมือนเดิม</span><span class="sxs-lookup"><span data-stu-id="95ffc-143">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="95ffc-144">ผลิตภัณฑ์ทั้งสี่มีสิทธิ์ได้รับส่วนลดทั้งสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-144">All four products qualify for both discounts.</span></span> <span data-ttu-id="95ffc-145">มีชุดที่เป็นไปได้สิบสองแบบ</span><span class="sxs-lookup"><span data-stu-id="95ffc-145">There are twelve possible combinations.</span></span> <span data-ttu-id="95ffc-146">ในตอนท้าย ส่วนลดสองรายการจะถูกนำมาใช้กับธุรกรรมในหนึ่งในสามชุด: แอพลิเคชันสองรายการของส่วนลด 1 แอพลิเคชันสองรายการของส่วนลด 2 หรือแอพลิเคชันหนึ่งรายการของส่วนลด 1 และแอพลิเคชันหนึ่งรายการของส่วนลด 2</span><span class="sxs-lookup"><span data-stu-id="95ffc-146">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="95ffc-147">เมื่อต้องการแสดงชุดที่เป็นไปได้ เราจะดูที่ผลิตภัณฑ์สี่รายการสองชุดที่มีราคาที่แตกต่างกัน:</span><span class="sxs-lookup"><span data-stu-id="95ffc-147">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

- <span data-ttu-id="95ffc-148">ผลิตภัณฑ์ทั้งสี่มีราคาเดียวกันคือ $15.00</span><span class="sxs-lookup"><span data-stu-id="95ffc-148">All four products have the same price, $15.00.</span></span> <span data-ttu-id="95ffc-149">ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ แอพลิเคชันสองรายการของส่วนลด 1</span><span class="sxs-lookup"><span data-stu-id="95ffc-149">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="95ffc-150">ผลิตภัณฑ์สองรายการจะมีราคาเต็ม และอีกสองรายการจะได้รับส่วนลด 50 เปอร์เซ็นต์</span><span class="sxs-lookup"><span data-stu-id="95ffc-150">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="95ffc-151">ส่วนลดรวมสำหรับธุรกรรมคือ $45 (15 + 15 + 7.50 + 7.50) ซึ่งก็คือ $15 (25 เปอร์เซ็นต์) จากจำนวนรวมที่ยังไม่ได้ลดคือ $60</span><span class="sxs-lookup"><span data-stu-id="95ffc-151">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="95ffc-152">ส่วนลด 2 คือ $12 เท่านั้น (20 เปอร์เซ็นต์)</span><span class="sxs-lookup"><span data-stu-id="95ffc-152">Discount 2 is only $12 (20 percent).</span></span>
- <span data-ttu-id="95ffc-153">ผลิตภัณฑ์สองรายการได้รับส่วนลดรายการละ $20 ผลิตภัณฑ์หนึ่งได้รับ $15 และอีกผลิตภัณฑ์หนึ่งได้รับ $5</span><span class="sxs-lookup"><span data-stu-id="95ffc-153">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="95ffc-154">ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ แอพลิเคชันหนึ่งรายการของส่วนลด 2 และแอพลิเคชันหนึ่งรายการของส่วนลด 1</span><span class="sxs-lookup"><span data-stu-id="95ffc-154">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="95ffc-155">ตารางต่อไปนี้แสดงส่วนลด</span><span class="sxs-lookup"><span data-stu-id="95ffc-155">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="95ffc-156">เมื่อต้องการอ่านตาราง ให้ใช้จากผลิตภัณฑ์หนึ่งจากแถวและอีกหนึ่งผลิตภัณฑ์จากคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="95ffc-156">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="95ffc-157">ตัวอย่างเช่น ในตารางส่วนลด 1 เมื่อคุณรวมผลิตภัณฑ์ $20 ทั้งสอง คุณจะได้รับส่วนลด $10</span><span class="sxs-lookup"><span data-stu-id="95ffc-157">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="95ffc-158">ในตารางส่วนลด 2 เมื่อคุณรวมผลิตภัณฑ์ $15 และผลิตภัณฑ์ $5 คุณจะได้รับส่วนลด $4</span><span class="sxs-lookup"><span data-stu-id="95ffc-158">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>

![ตัวอย่างที่ใช้ผลิตภัณฑ์สี่รายการสำหรับส่วนลดสองรายการที่เหมือนกัน](./media/overlapping-discount-combo-03.jpg)

<span data-ttu-id="95ffc-160">ก่อนอื่น เราจะค้นหาส่วนลดที่มากที่สุดที่พร้อมใช้งานจากผลิตภัณฑ์ใด ๆ สองรายการโดยใช้ส่วนลดอย่างใดอย่างหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="95ffc-160">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="95ffc-161">ตารางทั้งสองแสดงยอดเงินส่วนลดสำหรับชุดทั้งหมดของผลิตภัณฑ์สองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-161">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="95ffc-162">ส่วนที่แรเงาของตารางแสดงให้เห็นถึงกรณีที่ผลิตภัณฑ์ถูกจับคู่กับตัวเอง ซึ่งเราไม่สามารถทำได้ หรือย้อนกลับการจับคู่ของผลิตภัณฑ์สองรายการที่ให้ยอดเงินส่วนลดที่เหมือนกัน และสามารถละเว้นได้</span><span class="sxs-lookup"><span data-stu-id="95ffc-162">The shaded portions of the tables represent either cases where a product is paired with itself, which we can't do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="95ffc-163">เมื่อดูที่ตาราง คุณจะเห็นว่าส่วนลด 1 สำหรับสินค้าสองรายการราคา $20 คือส่วนลดที่มากที่สุดที่มีสำหรับส่วนลดของผลิตภัณฑ์ทั้งสี่</span><span class="sxs-lookup"><span data-stu-id="95ffc-163">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="95ffc-164">(ส่วนลดนี้จะถูกเน้นเป็นสีเขียวในตารางแรก) ที่ให้เฉพาะผลิตภัณฑ์ $15 และผลิตภัณฑ์ $5</span><span class="sxs-lookup"><span data-stu-id="95ffc-164">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="95ffc-165">เมื่อดูที่สองตารางนี้อีกครั้ง คุณจะเห็นว่าสำหรับผลิตภัณฑ์สองรายการนี้ ส่วนลด 1 จะให้ส่วนลด $2.50 ในขณะที่ส่วนลด 2 ให้ส่วนลด $4</span><span class="sxs-lookup"><span data-stu-id="95ffc-165">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="95ffc-166">ดังนั้น เราจะเลือกส่วนลด 2</span><span class="sxs-lookup"><span data-stu-id="95ffc-166">Therefore, we select discount 2.</span></span> <span data-ttu-id="95ffc-167">ยอดรวมส่วนลดเท่ากับ $14</span><span class="sxs-lookup"><span data-stu-id="95ffc-167">The total discount is $14.</span></span> <span data-ttu-id="95ffc-168">เพื่อให้มองเห็นภาพของการสนทนานี้ง่ายขึ้น ต่อไปนี้เป็นตารางเพิ่มเติมสองรายการที่แสดงเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับชุดของผลิตภัณฑ์สองรายการที่เป็นไปได้ทั้งหมดสำหรับทั้งส่วนลด 1 และส่วนลด 2</span><span class="sxs-lookup"><span data-stu-id="95ffc-168">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="95ffc-169">มีการรวมเพียงครึ่งหนึ่งของรายการของชุด เนื่องจากสำหรับส่วนลดสองรายการเหล่านี้ ไม่สำคัญว่าผลิตภัณฑ์ทั้งสองจะอยู่ในลำดับใดในส่วนลด</span><span class="sxs-lookup"><span data-stu-id="95ffc-169">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn't matter.</span></span> <span data-ttu-id="95ffc-170">ส่วนลดที่มีผลบังคับใช้สูงสุด (25 เปอร์เซ็นต์) จะถูกเน้นเป็นสีเขียว และส่วนลดที่มีผลบังคับใช้ต่ำสุด (10 เปอร์เซ็นต์) จะถูกเน้นเป็นสีแดง</span><span class="sxs-lookup"><span data-stu-id="95ffc-170">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span>

![เปอร์เซ็นต์ส่วนลดที่มีผลบังคับสำหรับชุดผลิตภัณฑ์ทั้งหมดสองชุดสำหรับส่วนลดทั้งสองรายการ](./media/overlapping-discount-combo-04.jpg)

> [!NOTE]
> <span data-ttu-id="95ffc-172">เมื่อราคาแตกต่างกัน และมีส่วนลดอย่างน้อยสองรายการที่ดีกว่า วิธีเดียวที่จะรับประกันชุดของส่วนลดที่ดีที่สุดคือการประเมินส่วนลดทั้งสองรายการและนำมาเปรียบเทียบกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-172">When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="95ffc-173">ชุดที่เป็นไปได้ทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="95ffc-173">Total possible combinations</span></span>

<span data-ttu-id="95ffc-174">ส่วนนี้ยังคงเป็นตัวอย่างจากส่วนก่อนหน้า</span><span class="sxs-lookup"><span data-stu-id="95ffc-174">This section continues the example from the previous section.</span></span> <span data-ttu-id="95ffc-175">เราจะเพิ่มผลิตภัณฑ์เพิ่มเติมและส่วนลดอีกหนึ่งรายการ และดูว่าจำต้องคำนวณและเปรียบเทียบกี่ชุด</span><span class="sxs-lookup"><span data-stu-id="95ffc-175">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="95ffc-176">ตารางต่อไปนี้แสดงหมายเลขของชุดส่วนลดที่เป็นไปได้โดยเป็นการเพิ่มปริมาณผลิตภัณฑ์</span><span class="sxs-lookup"><span data-stu-id="95ffc-176">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="95ffc-177">ตารางแสดงสิ่งที่จะเกิดขึ้นทั้งสองกรณีเมื่อมีส่วนลดที่ซ้อนทับกันสองรายการ ดังในตัวอย่างก่อนหน้านี้ และเมื่อมีส่วนลดที่ซ้อนทับกันสามรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-177">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="95ffc-178">จำนวนของชุดส่วนลดที่เป็นไปได้ที่จะต้องมีการประเมินในเร็ว ๆ นี้มีมากกว่าจำนวนที่แม้แต่คอมพิวเตอร์ที่รวดเร็วสามารถคำนวณและเปรียบเทียบได้อย่างรวดเร็วเพียงพอที่จะยอมรับได้สำหรับธุรกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="95ffc-178">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![หมายเลขของชุดส่วนลดที่เป็นไปได้ เมื่อปริมาณผลิตภัณฑ์เพิ่มขึ้น](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="95ffc-180">เมื่อมีการใช้จำนวนที่มากกว่าหรือส่วนลดที่ซ้อนทับกันที่มากกว่า จำนวนรวมของชุดส่วนลดที่เป็นไปได้สามารถเพิ่มขึ้นถึงหลายล้านได้อย่างรวดเร็ว และเวลาที่ต้องใช้ในการประเมินและเลือกชุดที่เป็นไปได้ที่ดีที่สุดได้จะเพิ่มขึ้นอย่างเห็นได้ชัด</span><span class="sxs-lookup"><span data-stu-id="95ffc-180">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="95ffc-181">การเพิ่มประสิทธิภาพบางอย่างเกิดขึ้นในเอ็นจินราคาเพื่อลดจำนวนชุดค่าผสมทั้งหมดที่ต้องได้รับการประเมิน</span><span class="sxs-lookup"><span data-stu-id="95ffc-181">Some optimizations have been done in the price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="95ffc-182">อย่างไรก็ตาม เนื่องจากจำนวนของส่วนลดที่ซ้อนทับกันและปริมาณในธุรกรรมไม่ได้ถูกจำกัด ชุดจำนวนมากจะต้องได้รับการประเมินเสมอ เมื่อใดก็ตามที่มีส่วนลดที่ซ้อนทับกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-182">However, because the number overlapping discounts and the quantities in a transaction aren't limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="95ffc-183">ปัญหานี้เป็นปัญหาที่ระบุถึงวิธีการจัดอันดับมูลค่ากำไร</span><span class="sxs-lookup"><span data-stu-id="95ffc-183">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="95ffc-184">วิธีคิดมูลค่ากำไร</span><span class="sxs-lookup"><span data-stu-id="95ffc-184">Marginal value method</span></span>

<span data-ttu-id="95ffc-185">เมื่อต้องการแก้ไขปัญหาของการเพิ่มขึ้นแบบยกกำลังของจำนวนชุดที่ต้องมีการประเมิน การปรับให้เหมาะสมมีการคำนวณมูลค่าต่อผลิตภัณฑ์ที่ใช้ร่วมกันของส่วนลดแต่ละรายการบนชุดของผลิตภัณฑ์ที่สามารถใช้กับส่วนลดอย่างน้อยสองรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-185">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="95ffc-186">เราอ้างอิงถึงมูลค่านี้เป็น **มูลค่ากำไร** ของส่วนลดสำหรับผลิตภัณฑ์ที่ใช้ร่วมกัน</span><span class="sxs-lookup"><span data-stu-id="95ffc-186">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="95ffc-187">มูลค่ากำไรเป็นค่าเฉลี่ยต่อการเพิ่มของผลิตภัณฑ์ในยอดเงินส่วนลดรวมเมื่อผลิตภัณฑ์ที่ใช้ร่วมกันมีอยู่ในส่วนลดแต่ละรายการ</span><span class="sxs-lookup"><span data-stu-id="95ffc-187">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="95ffc-188">มูลค่ากำไรถูกคำนวณด้วยการหักยอดเงินส่วนลดรวม (DTotal) โดยหักยอดเงินส่วนลดโดยไม่มีผลิตภัณฑ์ที่ใช้ร่วมกัน (DMinus\\ ใช้ร่วมกัน) และหารผลต่างนั้นด้วยจำนวนของผลิตภัณฑ์ที่ใช้ร่วมกัน (ProductsShared)</span><span class="sxs-lookup"><span data-stu-id="95ffc-188">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span>

![สูตรสำหรับการคำนวณมูลค่ากำไร](./media/overlapping-discount-combo-06.jpg)

<span data-ttu-id="95ffc-190">หลังจากที่มีการคำนวณมูลค่ากำไรของแต่ละส่วนลดบนชุดของผลิตภัณฑ์ที่ใช้ร่วมกัน ส่วนลดจะถูกนำไปใช้กับผลิตภัณฑ์ที่ใช้ร่วมกันตามใบสั่งจากมูลค่ากำไรสูงสุดถึงมูลค่ากำไรต่ำสุดอย่างละเอียดถี่ถ้วน</span><span class="sxs-lookup"><span data-stu-id="95ffc-190">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="95ffc-191">สำหรับวิธีการนี้ ความเป็นไปได้ของส่วนลดที่เหลืออยู่ทั้งหมดจะไม่ถูกเปรียบเทียบทุกครั้งหลังจากที่มีการใช้อินสแตนซ์เดียวของส่วนลด</span><span class="sxs-lookup"><span data-stu-id="95ffc-191">For this method, all remaining discount possibilities aren't compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="95ffc-192">แต่ส่วนลดที่ซ้อนทับกันจะถูกเปรียบเทียบหนึ่งครั้ง และถูกนำไปใช้ตามลำดับ</span><span class="sxs-lookup"><span data-stu-id="95ffc-192">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="95ffc-193">ไม่มีการดำเนินการเปรียบเทียบเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="95ffc-193">No additional comparisons are done.</span></span> <span data-ttu-id="95ffc-194">คุณสามารถกำหนดค่าเกณฑ์เพื่อเปลี่ยนเป็นวิธีใช้ค่าส่วนเพิ่มบนแท็บ **ลดราคา** ของหน้า **พารามิเตอร์การค้า**</span><span class="sxs-lookup"><span data-stu-id="95ffc-194">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="95ffc-195">เวลาที่ยอมรับได้ในการคำนวณส่วนลดรวมแตกต่างกันตามแต่อุตสาหกรรมการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="95ffc-195">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="95ffc-196">อย่างไรก็ตาม โดยทั่วไปเวลานี้จะอยู่ในช่วงของมิลลิวินาทีหลักสิบถึงหนึ่งวินาที</span><span class="sxs-lookup"><span data-stu-id="95ffc-196">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]