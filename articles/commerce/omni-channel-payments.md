---
title: ภาพรวมการชำระเงินผ่านช่องทาง Omni
description: หัวข้อนี้แสดงภาพรวมของการชำระเงินผ่านช่องทาง omni ใน Dynamics 365 Commerce
author: rubendel
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 07d8e740e8f20533272c403446d5e8294c9f37a1
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 03/31/2021
ms.locfileid: "5791137"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="da1b5-103">ภาพรวมการชำระเงินผ่านช่องทาง Omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="da1b5-104">หัวข้อนี้แสดงภาพรวมของการชำระเงินผ่านช่องทาง omni ใน Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="da1b5-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="da1b5-105">ซึ่งรวมถึงรายการที่ครอบคลุมของสถานการณ์จำลองที่สนับสนุน ข้อมูลเกี่ยวกับฟังก์ชัน การตั้งค่า และการแก้ไขปัญหาเบื้องต้น และคำอธิบายเกี่ยวกับปัญหาทั่วไปบางอย่าง</span><span class="sxs-lookup"><span data-stu-id="da1b5-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="da1b5-106">เงื่อนไขสำคัญ</span><span class="sxs-lookup"><span data-stu-id="da1b5-106">Key terms</span></span>

| <span data-ttu-id="da1b5-107">เงื่อนไข</span><span class="sxs-lookup"><span data-stu-id="da1b5-107">Term</span></span> | <span data-ttu-id="da1b5-108">คำอธิบาย</span><span class="sxs-lookup"><span data-stu-id="da1b5-108">Description</span></span> |
|---|---|
| <span data-ttu-id="da1b5-109">โทเคน</span><span class="sxs-lookup"><span data-stu-id="da1b5-109">Token</span></span> | <span data-ttu-id="da1b5-110">สตริงของข้อมูลที่ตัวประมวลผลการชำระเงินให้เป็นการอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="da1b5-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="da1b5-111">โทเคนสามารถแสดงหมายเลขบัตรชำระเงิน การอนุมัติการชำระเงิน และบันทึกการชำระเงินก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="da1b5-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="da1b5-112">โทเคนมีความสำคัญ เนื่องจากช่วยเก็บรักษาข้อมูลที่เป็นความลับออกจากระบบการขายหน้าร้าน (POS)</span><span class="sxs-lookup"><span data-stu-id="da1b5-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="da1b5-113">บางครั้ง อาจเรียกได้อีกอย่างว่า *การอ้างอิง*</span><span class="sxs-lookup"><span data-stu-id="da1b5-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="da1b5-114">โทเคนบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-114">Card token</span></span> | <span data-ttu-id="da1b5-115">โทเคนที่ตัวประมวลผลการชำระเงินจัดเตรียมไว้สำหรับการจัดเก็บในระบบ POS</span><span class="sxs-lookup"><span data-stu-id="da1b5-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="da1b5-116">คุณสามารถใช้โทเคนบัตรได้โดยร้านค้าที่รับเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="da1b5-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="da1b5-117">บางครั้ง อาจเรียกโทเคนบัตรได้อีกอย่างว่า *การอ้างอิงบัตร*</span><span class="sxs-lookup"><span data-stu-id="da1b5-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="da1b5-118">โทเคนการตรวจสอบ (auth)</span><span class="sxs-lookup"><span data-stu-id="da1b5-118">Authorization (auth) token</span></span> | <span data-ttu-id="da1b5-119">รหัสเฉพาะที่กระบวนการชำระเงินให้ไว้เป็นส่วนหนึ่งของการตอบสนองที่ส่งไปยังระบบ POS หลังจากที่ระบบ POS ทำการร้องขอการตรวจสอบ</span><span class="sxs-lookup"><span data-stu-id="da1b5-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="da1b5-120">โทเคนการตรวจสอบสามารถใช้ได้ในภายหลัง ถ้าตัวประมวลผลถูกเรียกให้ทำการดำเนินการ เช่น การกลับรายการ หรือการยกเลิกการตรวจสอบ</span><span class="sxs-lookup"><span data-stu-id="da1b5-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="da1b5-121">อย่างไรก็ตาม บ่อยครั้งที่ใช้ในบันทึกเงินทุน เมื่อมีการเติมสินค้าตามใบสั่งหรือธุรกรรมได้รับการดำเนินการขั้นสุดท้าย</span><span class="sxs-lookup"><span data-stu-id="da1b5-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="da1b5-122">บางครั้ง อาจเรียกโทเคนการตรวจสอบได้อีกอย่างว่า *การอ้างอิงการตรวจสอบ*</span><span class="sxs-lookup"><span data-stu-id="da1b5-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="da1b5-123">โทเคนบันทึก</span><span class="sxs-lookup"><span data-stu-id="da1b5-123">Capture token</span></span> | <span data-ttu-id="da1b5-124">การอ้างอิงที่ตัวประมวลผลการชำระเงินให้แก่ระบบ POS เมื่อการชำระเงินได้รับการดำเนินการขั้นสุดท้ายหรือถูกบันทึก</span><span class="sxs-lookup"><span data-stu-id="da1b5-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="da1b5-125">สามารถใช้โทเคนบันทึกเพื่ออ้างอิงการบันทึกการชำระเงินในการดำเนินงานในเวลาต่อมา เช่น การร้องขอการขอคืนเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="da1b5-126">การไม่แสดงบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-126">Card not present</span></span> | <span data-ttu-id="da1b5-127">เงื่อนไขที่อ้างอิงถึงธุรกรรมการชำระเงินที่ไม่มีการแสดงบัตรจริง</span><span class="sxs-lookup"><span data-stu-id="da1b5-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="da1b5-128">ตัวอย่างเช่น ธุรกรรมเหล่านี้อาจเกิดขึ้นในสถานการณ์จำลอง e-commerce หรือสถานการณ์จำลองศูนย์บริการ</span><span class="sxs-lookup"><span data-stu-id="da1b5-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="da1b5-129">สำหรับธุรกรรมเหล่านี้ จะมีการป้อนข้อมูลที่เกี่ยวข้องกับการชำระเงินด้วยตนเองบนเว็บไซต์ e-commerce ในโฟลว์ศูนย์บริการ หรือใน POS หรือเทอร์มินัลการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="da1b5-130">การแสดงบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-130">Card present</span></span> | <span data-ttu-id="da1b5-131">เงื่อนไขที่อ้างอิงถึงธุรกรรมการชำระเงินที่มีการแสดงบัตรจริง และที่ใช้บนเทอร์มินัลการชำระเงินที่เชื่อมโยงกับระบบ POS ของ Microsoft Dynamics 365</span><span class="sxs-lookup"><span data-stu-id="da1b5-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="da1b5-132">ภาพรวม</span><span class="sxs-lookup"><span data-stu-id="da1b5-132">Overview</span></span>

<span data-ttu-id="da1b5-133">โดยทั่วไป *การชำระเงินผ่านช่องทาง Omni* จะอธิบายความสามารถในการสร้างใบสั่งในหนึ่งช่องทาง และเติมเต็มในช่องทางอื่น</span><span class="sxs-lookup"><span data-stu-id="da1b5-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="da1b5-134">กุญแจสำคัญในการสนับสนุนการชำระเงินผ่านช่องทาง Omni คือ การเก็บรักษารายละเอียดการชำระเงินพร้อมกับรายละเอียดของใบสั่งที่เหลือ แล้วใช้รายละเอียดการชำระเงินเหล่านั้นเมื่อมีการเรียกคืนใบสั่งหรือประมวลผลในช่องทางอื่น</span><span class="sxs-lookup"><span data-stu-id="da1b5-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="da1b5-135">ตัวอย่างแบบคลาสสิคคือ สถานการณ์ "ซื้อออนไลน์ เบิกสินค้าในร้านค้า"</span><span class="sxs-lookup"><span data-stu-id="da1b5-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="da1b5-136">ในสถานการณ์สมมตินี้ รายละเอียดการชำระเงินจะถูกเพิ่มเมื่อมีการสร้างใบสั่งออนไลน์</span><span class="sxs-lookup"><span data-stu-id="da1b5-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="da1b5-137">หลังจากนั้น จะมีการเรียกคืนจากที่ POS เพื่อคิดค่าธรรมเนียมบัตรชำระเงินของลูกค้าในขณะที่เบิกสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="da1b5-138">สถานการณ์ทั้งหมดที่อธิบายไว้ในหัวข้อนี้สามารถนำมาใช้ได้โดยใช้ชุดสินค้าพัฒนาซอฟต์แวร์มาตรฐานการชำระเงิน (SDK) ที่มีอยู่ในการค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="da1b5-139">[ตัวเชื่อมต่อการชำระเงิน Dynamics 365 สำหรับ Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) ให้การใช้งานแบบสำเร็จรูปของสถานการณ์จำลองทุกสถานการณ์ที่อธิบายไว้ที่นี่</span><span class="sxs-lookup"><span data-stu-id="da1b5-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="da1b5-140">ข้อกำหนดเบื้องต้น</span><span class="sxs-lookup"><span data-stu-id="da1b5-140">Prerequisites</span></span>

<span data-ttu-id="da1b5-141">สถานการณ์จำลองทั้งหมดที่อธิบายไว้ในหัวข้อนี้ ต้องใช้ตัวเชื่อมต่อการชำระเงินที่สนับสนุนการชำระเงินผ่านช่องทาง Omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="da1b5-142">นอกจากนี้ คุณยังสามารถใช้ตัวเชื่อมต่อ Adyen แบบสำเร็จรูปได้ เนื่องจากสนับสนุนสถานการณ์ที่ถูกทำให้พร้อมใช้งานโดยผ่าน SDK ของการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="da1b5-143">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการใช้ตัวเชื่อมต่อการชำระเงิน และเกี่ยวกับ Retail SDK โดยทั่วไป โปรดเยี่ยมชม [โฮมเพจ Retail สำหรับผู้เชี่ยวชาญและนักพัฒนาด้าน IT](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors)</span><span class="sxs-lookup"><span data-stu-id="da1b5-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="da1b5-144">รุ่นที่สนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-144">Supported versions</span></span>

<span data-ttu-id="da1b5-145">ความสามารถในการชำระเงินผ่านช่องทาง Omni ที่อธิบายไว้ในหัวข้อนี้ ถูกนำออกใช้โดยเป็นส่วนหนึ่งของ Microsoft Dynamics 365 for Retail รุ่น 8.1.3</span><span class="sxs-lookup"><span data-stu-id="da1b5-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="da1b5-146">ตัวเชื่อมต่อ "การแสดงบัตร" และ "การไม่แสดงบัตร"</span><span class="sxs-lookup"><span data-stu-id="da1b5-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="da1b5-147">SDK ของการชำระเงินขึ้นอยู่กับชุดสองชุดของ application programming interfaces (APIs) สำหรับการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="da1b5-148">ชุดแรกของ APIs ถูกตั้งชื่อว่า **iPaymentProcessor**</span><span class="sxs-lookup"><span data-stu-id="da1b5-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="da1b5-149">ซึ่งใช้ในการใช้ตัวเชื่อมต่อการชำระเงิน "การไม่แสดงบัตร" ที่สามารถใช้ในศูนย์บริการ และกับแพลตฟอร์ม e-Commerce ของ Microsoft Dynamics</span><span class="sxs-lookup"><span data-stu-id="da1b5-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="da1b5-150">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับอินเทอร์เฟส **iPaymentProcessor** ให้ดูเอกสาร [ใช้ตัวเชื่อมต่อการชำระเงินและอุปกรณ์การชำระเงิน](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) ซึ่งครอบคลุมการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="da1b5-151">ชุดที่สองของ APIs ถูกตั้งชื่อว่า **iNamedRequestHandler**</span><span class="sxs-lookup"><span data-stu-id="da1b5-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="da1b5-152">ซึ่งสนับสนุนการใช้งานของการรวมการชำระเงินที่มี "การแสดงบัตร " ซึ่งใช้เทอร์มินัลการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="da1b5-153">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับอินเทอร์เฟส **iNamedRequestHandler** ให้ดูที่ [สร้างการรวมการชำระเงินสำหรับเทอร์มินัลการชำระเงิน](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension)</span><span class="sxs-lookup"><span data-stu-id="da1b5-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="da1b5-154">การตั้งค่าและการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="da1b5-154">Setup and configuration</span></span>

<span data-ttu-id="da1b5-155">ต้องใช้ส่วนประกอบและขั้นตอนการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="da1b5-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="da1b5-156">**การรวม eCommerce:** การรวมกับการค้าจะต้องสนับสนุนสถานการณ์ที่มีใบสั่งซื้อมาจากในหน้าร้านออนไลน์</span><span class="sxs-lookup"><span data-stu-id="da1b5-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="da1b5-157">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ Retail e-Commerce SDK โปรดดู [ชุดพัฒนาซอฟต์แวร์ (SDK) ของแพลตฟอร์มe-Commerce platform](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk)</span><span class="sxs-lookup"><span data-stu-id="da1b5-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="da1b5-158">ในสภาพแวดล้อมสาธิต หน้าร้านอ้างอิงสนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="da1b5-159">**การตั้งค่าคอนฟิกการชำระเงินออนไลน์:** การตั้งค่าของช่องทางออนไลน์ต้องมีตัวเชื่อมต่อการชำระเงินที่ได้รับการปรับปรุงเพื่อสนับสนุนการชำระเงินตามช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="da1b5-160">อีกทางหนึ่งคือ คุณสามารถใช้ตัวเชื่อมต่อการชำระเงินแบบสำเร็จรูป</span><span class="sxs-lookup"><span data-stu-id="da1b5-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="da1b5-161">สำหรับข้อมูลเกี่ยวกับวิธีการตั้งค่าคอนฟิกตัวเชื่อมต่อการชำระเงิน Adyen สำหรับร้านค้าออนไลน์ ให้ดูที่ [ตัวเชื่อมต่อการชำระเงิน Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce)</span><span class="sxs-lookup"><span data-stu-id="da1b5-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="da1b5-162">นอกจากขั้นตอนการตั้งค่า eCommerce ที่อธิบายไว้ในหัวข้อนั้นแล้ว จะต้องตั้งค่าพารามิเตอร์ **อนุญาตให้บันทึกข้อมูลการชำระเงินใน e-commerce** เป็น **จริง** ในการตั้งค่าสำหรับตัวเชื่อมต่อ Adyen</span><span class="sxs-lookup"><span data-stu-id="da1b5-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="da1b5-163">**การกำหนดค่าการชำระเงินช่องทาง Omni :** ในแผนกสนับสนุน ไปที่ **การขายปลีกและการค้า \> การตั้งค่าสำนักงานใหญ่ \> พารามิเตอร์ \> พารามิเตอร์ที่ใช้ทางการค้าร่วมกัน**</span><span class="sxs-lookup"><span data-stu-id="da1b5-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="da1b5-164">จากนั้น บนแท็บ **การชำระเงินผ่านช่องทาง Omni** ตั้งค่าตัวเลือก **ใช้การชำระเงินผ่านช่องทาง Omni** เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="da1b5-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="da1b5-165">ใน Commerce รุ่น10.0.12 และใหม่กว่า การตั้งค่านี้จะอยู่ในพื้นที่ทำงาน **การจัดการคุณลักษณะ**</span><span class="sxs-lookup"><span data-stu-id="da1b5-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="da1b5-166">เลือกคุณลักษณะ **ชำระเงินตามช่องทาง Omni** และคลิก **เปิดใช้งานเดี๋ยวนี้**</span><span class="sxs-lookup"><span data-stu-id="da1b5-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="da1b5-167">**บริการชำระเงิน:** ศูนย์บริการจะใช้ตัวเชื่อมต่อการชำระเงินเริ่มต้น บนหน้า **บริการชำระเงิน** เพื่อประมวลผลการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="da1b5-168">เมื่อต้องการสนับสนุนสถานการณ์จำลอง เช่น "ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า" ตัวเชื่อมต่อการชำระเงินเริ่มต้นนี้จะต้องเป็นตัวเชื่อมต่อการชำระเงิน Adyen หรือตัวเชื่อมต่อการชำระเงินที่ตรงกับความต้องการในการใช้งานสำหรับการชำระเงินผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="da1b5-169">**บริการ EFT:** การชำระเงินผ่านเทอร์มินัลการชำระเงินต้องมีการตั้งค่าบน FastTab **บริการ EFT** ของโพรไฟล์ฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="da1b5-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="da1b5-170">ตัวเชื่อมต่อ Adyen สนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง Omni แบบสำเร็จรูป</span><span class="sxs-lookup"><span data-stu-id="da1b5-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="da1b5-171">นอกจากนี้ คุณยังสามารถใช้ตัวเชื่อมต่อการชำระเงินอื่นๆ ที่สนับสนุนอินเทอร์เฟส **iNamedRequestHandler** ถ้ารายการเหล่านั้นสนับสนุนการชำระเงินผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="da1b5-172">**ความพร้อมใช้งานของตัวเชื่อมต่อการชำระเงิน:** เมื่อมีการเรียกคืนใบสั่ง รายการการชำระเงินที่ถูกเรียกคืนพร้อมกับใบสั่งจะรวมถึงชื่อของตัวเชื่อมต่อการชำระเงินที่ใช้ในการสร้างการตรวจสอบที่เกี่ยวข้องกับใบสั่งนั้น</span><span class="sxs-lookup"><span data-stu-id="da1b5-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="da1b5-173">เมื่อมีการเติมสินค้าตามใบสั่ง SDK ของการชำระเงินจะพยายามใช้ตัวเชื่อมต่อเดียวกันกับที่ใช้ในการสร้างการตรวจสอบความถูกต้องดั้งเดิม</span><span class="sxs-lookup"><span data-stu-id="da1b5-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="da1b5-174">ดังนั้น ตัวเชื่อมต่อการชำระเงินที่มีคุณสมบัติร้านค้าเดียวกันต้องพร้อมใช้งานสำหรับการบันทึก</span><span class="sxs-lookup"><span data-stu-id="da1b5-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="da1b5-175">**ชนิดของบัตร** สำหรับสถานการณ์จำลองช่องทาง omni ที่จะทำงานได้อย่างถูกต้อง แต่ละช่องทางต้องมีการตั้งค่าเดียวกันสำหรับชนิดการชำระเงินที่สามารถใช้สำหรับช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="da1b5-176">การตั้งค่านี้รวมถึงรหัสวิธีการชำระเงินและรหัสชนิดบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="da1b5-177">ตัวอย่างเช่น ถ้าชนิดการชำระเงินด้วย **บัตร** มีรหัสเป็น **2** ในการตั้งค่าร้านค้าออนไลน์ ควรจะมีรหัสเดียวกันในการตั้งค่าร้านค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="da1b5-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="da1b5-178">ข้อกำหนดเดียวกันใช้กับรหัสชนิดบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="da1b5-179">ถ้ามีการตั้งค่าหมายเลขบัตร **12** เป็น **VISA** ในร้านค้าออนไลน์ ควรตั้งค่ารหัสเดียวกันสำหรับร้านค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="da1b5-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="da1b5-180">Retail Modern POS สำหรับ Windows หรือ Android ที่มีสถานีฮาร์ดแวร์ในตัว หรือ</span><span class="sxs-lookup"><span data-stu-id="da1b5-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="da1b5-181">POS สมัยใหม่สำหรับ iOS หรือ Cloud POS พร้อมกับสถานีฮาร์ดแวร์ที่ใช้ร่วมกันและเชื่อมต่อกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="da1b5-182">หลักการพื้นฐานที่สนับสนุนการชำระเงินผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="da1b5-183">ตัวเชื่อมต่อการชำระเงินและตัวประมวลผลการชำระเงินจะใช้โทเคน หรือการอ้างอิง เพื่ออ้างอิงการโต้ตอบที่เกี่ยวข้องกับการชำระเงินด้วยบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="da1b5-184">ตัวอย่างเช่น เมื่อมีการร้องขอการตรวจสอบการชำระเงิน จะมีการอ้างอิงไปยังการตรวจสอบนั้น</span><span class="sxs-lookup"><span data-stu-id="da1b5-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="da1b5-185">ดังนั้น จึงสามารถอ้างอิงการตรวจสอบได้ในเวลาต่อมา เมื่อมีการบันทึกเงินทุนในขณะที่เติมสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="da1b5-186">การตรวจสอบนี้มีความเฉพาะเจาะจงสำหรับผู้ค้า ตัวเชื่อมต่อการชำระเงิน และตัวประมวลผล</span><span class="sxs-lookup"><span data-stu-id="da1b5-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="da1b5-187">ถ้าใบสั่งที่สร้างขึ้นออนไลน์กำลังถูกเบิกสินค้าในร้านค้า รายละเอียดการชำระเงินเดียวกันสำหรับใบสั่งนั้นต้องถูกเรียกคืนและถูกใช้</span><span class="sxs-lookup"><span data-stu-id="da1b5-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="da1b5-188">เมื่อมีการกำหนดรายละเอียดดั้งเดิมไว้เป็นส่วนหนึ่งของการร้องขอให้บันทึกการชำระเงินเทียบกับการตรวจสอบดั้งเดิม ตัวประมวลผลการชำระเงินจะสามารถจัดการการร้องขอและบันทึกการชำระเงินได้</span><span class="sxs-lookup"><span data-stu-id="da1b5-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="da1b5-189">เมื่อต้องการอ้างอิงใบสั่งออนไลน์อย่างถูกต้อง ตัวเชื่อมต่อการชำระเงิน "การไม่แสดงบัตร" ซึ่งสนับสนุนตัวประมวลผลเดียวกันต้องพร้อมใช้งานด้วยเช่นกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="da1b5-190">ด้วยวิธีนี้ ระบบ POS อาจมีโปรเซสเซอร์หนึ่งตัวสำหรับการชำระเงินที่มี "การแสดงบัตร" แต่ยังสามารถมีการเข้าถึงไปยังตัวเชื่อมต่อการชำระเงินอื่นๆ เพื่อให้สามารถตอบสนองใบสั่งที่สร้างขึ้นในช่องทางอื่นได้โดยใช้ตัวประมวลผลการชำระเงินที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="da1b5-191">สถานการณ์จำลองที่ได้รับการสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-191">Supported scenarios</span></span>

<span data-ttu-id="da1b5-192">มีการสนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง omni ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="da1b5-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="da1b5-193">ซื้อออนไลน์ เบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="da1b5-194">ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="da1b5-195">ซื้อในร้านค้า A เบิกสินค้าในร้านค้า B</span><span class="sxs-lookup"><span data-stu-id="da1b5-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="da1b5-196">ซื้อในร้านค้า A จัดส่งไปที่ลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="da1b5-197">การชำระเงินในศูนย์การผลิตที่แม็ปกับฟังก์ชันการชำระเงิน "Normal" ต้องทำเครื่องหมายเป็นการชำระเงิน **ล่วงหน้า** = **ใช่** เพื่อให้สะท้อนในยอดเงินที่ต้องชำระเมื่อเรียกคืนใบสั่งใน POS</span><span class="sxs-lookup"><span data-stu-id="da1b5-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="da1b5-198">การชำระเงินที่ไม่มีการชำระเงินล่วงหน้าของประเภท "ปกติ" จะไม่เป็นที่รู้จักเมื่อเรียกคืนใบสั่งใน POS</span><span class="sxs-lookup"><span data-stu-id="da1b5-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="da1b5-199">การเปลี่ยนแปลงของสถานการณ์เหล่านี้ได้รับการสนับสนุนด้วยเช่นกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="da1b5-200">ตัวอย่างเช่น ใบสั่งออนไลน์อาจประกอบด้วยทั้งรายการที่จะถูกจัดส่งไปยังลูกค้า และรายการที่จะถูกเบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="da1b5-201">ตัวเลือกการเติมสินค้าตามใบสั่งทั้งหมดได้รับการสนับสนุนผ่านการชำระเงินผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="da1b5-202">ส่วนต่อไปนี้อธิบายขั้นตอนต่างๆ สำหรับสถานการณ์จำลองแต่ละสถานการณ์ และแสดงวิธีการรันสถานการณ์จำลองโดยใช้ข้อมูลสาธิต</span><span class="sxs-lookup"><span data-stu-id="da1b5-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="da1b5-203">ซื้อออนไลน์ เบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-203">Buy online, pick up in store</span></span>

<span data-ttu-id="da1b5-204">ก่อนที่คุณจะเริ่มต้น ต้องแน่ใจว่ามีการทำตามข้อกำหนดเบื้องต้นดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="da1b5-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="da1b5-205">คุณมีหน้าร้านอ้างอิงที่ซึ่งมีการตั้งค่าคอนฟิกตัวเชื่อมต่อ Adyen</span><span class="sxs-lookup"><span data-stu-id="da1b5-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="da1b5-206">ตัวเลือก **การชำระเงินช่องทาง Omni** ในหน้า **พารามิเตอร์ที่ใช้ทางการค้าร่วมกัน** ได้รับการกำหนดเป็น **จริง**</span><span class="sxs-lookup"><span data-stu-id="da1b5-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="da1b5-207">ในรุ่นที่ใหม่กว่า การตั้งค่านี้ถูกย้ายไปยังพื้นที่ทำงาน **การจัดการคุณลักษณะ** ที่คุณสามารถเลือกคุณลักษณะ **การชำระเงินของช่องทาง Omni** แล้วคลิก **เปิดใช้งานทันที**</span><span class="sxs-lookup"><span data-stu-id="da1b5-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="da1b5-208">มีการตั้งค่าคอนฟิกตัวเชื่อมต่อการชำระเงิน Adyen สำหรับเครื่องบันทึกเงินสด POS ของ Houston</span><span class="sxs-lookup"><span data-stu-id="da1b5-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="da1b5-209">Retail Modern POS สำหรับ Windows หรือ Android ที่มีสถานีฮาร์ดแวร์ในตัว หรือ</span><span class="sxs-lookup"><span data-stu-id="da1b5-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="da1b5-210">POS สมัยใหม่สำหรับ iOS หรือ Cloud POS พร้อมกับสถานีฮาร์ดแวร์ที่ใช้ร่วมกันและเชื่อมต่อกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="da1b5-211">ทำตามขั้นตอนเหล่านี้เพื่อรันสถานการณ์จำลอง</span><span class="sxs-lookup"><span data-stu-id="da1b5-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="da1b5-212">ในหน้าร้านอ้างอิง สร้างใบสั่งสำหรับการเบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="da1b5-213">ตรวจสอบให้แน่ใจว่าได้เลือกร้านค้า **Houston**</span><span class="sxs-lookup"><span data-stu-id="da1b5-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="da1b5-214">ไปที่ขั้นตอนการชำระเงิน และชำระเงินโดยใช้หมายเลขบัตรเครดิตสำหรับการทดสอบ</span><span class="sxs-lookup"><span data-stu-id="da1b5-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="da1b5-215">คุณสามารถค้นหาหมายเลขบัตรเครดิตสำหรับการทดสอบได้ใน [หน้าหมายเลขบัตรสำหรับการทดสอบ Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description)</span><span class="sxs-lookup"><span data-stu-id="da1b5-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="da1b5-216">ในการค้า ให้ใช้ชุดงาน **ทำข้อมูลใบสั่งให้ตรงกัน** และตารางการแจกจ่าย **P-001** เพื่อสร้างใบสั่งซื้อในแผนกสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="da1b5-217">ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="da1b5-218">เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**</span><span class="sxs-lookup"><span data-stu-id="da1b5-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="da1b5-219">ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="da1b5-220">เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="da1b5-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="da1b5-221">เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="da1b5-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="da1b5-222">รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์)</span><span class="sxs-lookup"><span data-stu-id="da1b5-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="da1b5-223">เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์</span><span class="sxs-lookup"><span data-stu-id="da1b5-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="da1b5-224">เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="da1b5-225">ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="da1b5-226">ในการค้า บนหน้า **ส่วนบริการลูกค้า** ให้ป้อน **อรอนงค์ ภัสราพิทักษ์** ในแถบค้นหา จากนั้นเลือก **ค้นหา**</span><span class="sxs-lookup"><span data-stu-id="da1b5-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="da1b5-227">เลือก **Karen Berg** ในผลการค้นหา</span><span class="sxs-lookup"><span data-stu-id="da1b5-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="da1b5-228">หลังจากที่มีการโหลด Karen ลงบนหน้า **บริการลูกค้า** ให้เลือก **ใบสั่งขายใหม่**</span><span class="sxs-lookup"><span data-stu-id="da1b5-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="da1b5-229">บนหน้าใบสั่งขายใหม่ ให้เลือก **ส่วนหัว** เพื่อดูส่วนหัวของใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="da1b5-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="da1b5-230">บนหน้า **ส่วนหัวของใบสั่ง** ให้ตั้งค่าไซต์เป็น **Central** และคลังสินค้าเป็น **Houston**</span><span class="sxs-lookup"><span data-stu-id="da1b5-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="da1b5-231">บนแท็บ **จัดส่ง** ให้ตั้งค่าฟิลด์ **โหมดการจัดส่ง** เป็น **60** สำหรับการเบิกสินค้าของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="da1b5-232">เลือก **รายการ** แล้วจากนั้นเพิ่มรายการหนึ่งรายการขึ้นไปในใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="da1b5-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="da1b5-233">เลือก **เสร็จสมบูรณ์** เพื่อป้อนโฟลว์การดำเนินการใบสั่งให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="da1b5-234">เลื่อนลงไปที่ส่วนการชำระเงิน เลือก **เพิ่ม** แล้วเลือกรายการที่มีการตั้งค่าชนิดวิธีการชำระเงินเป็น **บัตร**</span><span class="sxs-lookup"><span data-stu-id="da1b5-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="da1b5-235">เลือกเครื่องหมายบวก (**+**) เพื่อเพิ่มการชำระเงินด้วยบัตร</span><span class="sxs-lookup"><span data-stu-id="da1b5-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="da1b5-236">ป้อนรายละเอียดสำหรับหมายเลขบัตรเครดิตสำหรับการทดสอบที่คุณพบบน [หน้าหมายเลขบัตรสำหรับการทดสอบ Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) แล้วจากนั้นเลือก **ตกลง**</span><span class="sxs-lookup"><span data-stu-id="da1b5-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="da1b5-237">ถ้าแบรนด์บัตรสำหรับหมายเลขบัตรที่คุณป้อนแตกต่างจากแบรนด์ซึ่งเลือกไว้เมื่อเริ่มต้นการชำระเงิน การชำระเงินจะยังคงดำเนินการต่อไปได้</span><span class="sxs-lookup"><span data-stu-id="da1b5-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="da1b5-238">อย่างไรก็ตาม จะมีการลงรายการบัญไปยังบัญชีซึ่งแม็ปกับแบรนด์บัตรที่คุณเลือกไว้ในขั้นตอนที่ 10</span><span class="sxs-lookup"><span data-stu-id="da1b5-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="da1b5-239">เลือก **ตกลง** อีกครั้ง เพื่อปิดกล่องโต้ตอบ **การดำเนินการการชำระเงินให้เสร็จสมบูรณ์ตามใบสั่ง**</span><span class="sxs-lookup"><span data-stu-id="da1b5-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="da1b5-240">บนหน้า **สรุปใบสั่งขาย** ให้เลือก **ส่ง**</span><span class="sxs-lookup"><span data-stu-id="da1b5-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="da1b5-241">ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="da1b5-242">เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**</span><span class="sxs-lookup"><span data-stu-id="da1b5-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="da1b5-243">ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="da1b5-244">เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="da1b5-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="da1b5-245">เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="da1b5-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="da1b5-246">รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์)</span><span class="sxs-lookup"><span data-stu-id="da1b5-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="da1b5-247">เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์</span><span class="sxs-lookup"><span data-stu-id="da1b5-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="da1b5-248">เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="da1b5-249">ซื้อในร้านค้า A เบิกสินค้าในร้านค้า B</span><span class="sxs-lookup"><span data-stu-id="da1b5-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="da1b5-250">เริ่มต้น POS สำหรับร้านค้า Houston</span><span class="sxs-lookup"><span data-stu-id="da1b5-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="da1b5-251">บนหน้า **ธุรกรรม** ให้เพิ่ม Karen Berg ไปยังธุรกรรม โดยใช้แผ่นหมายเลขเพื่อป้อน **2001**</span><span class="sxs-lookup"><span data-stu-id="da1b5-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="da1b5-252">เพิ่มรายการหนึ่งรายการขึ้นไปในธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="da1b5-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="da1b5-253">เลือก **ใบสั่ง** เพื่อดูตัวเลือกใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="da1b5-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="da1b5-254">เลือก **เบิกสินค้าทั้งหมด** แล้วจากนั้น เมื่อคุณถูกพร้อมต์ ให้เลือก **ใบสั่งของลูกค้า**</span><span class="sxs-lookup"><span data-stu-id="da1b5-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="da1b5-255">ในแถบค้นหา ให้ป้อน **Seattle** แล้วเลือกร้านค้า **Seattle** สำหรับการเบิกสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="da1b5-256">เลือก **ตกลง** เพื่อยอมรับวันที่ปัจจุบันเป็นวันที่เบิกสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="da1b5-257">เลือก **ชำระด้วยบัตร** เพื่อเริ่มการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="da1b5-258">ทำการชำระเงินด้วยบัตรสำหรับยอดเงินที่ครบกำหนดสำหรับการฝาก</span><span class="sxs-lookup"><span data-stu-id="da1b5-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="da1b5-259">ดำเนินการชำระเงินฝากบนเทอร์มินัลการชำระเงินให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="da1b5-260">หลังจากชำระเงินฝากแล้ว ให้เลือกตัวเลือกที่จะใช้บัตรเดียวกันสำหรับการเติมสินค้า และรอให้ใบสั่งเสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="da1b5-261">เริ่มต้น POS สำหรับร้านค้า Seattle</span><span class="sxs-lookup"><span data-stu-id="da1b5-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="da1b5-262">ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="da1b5-263">เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**</span><span class="sxs-lookup"><span data-stu-id="da1b5-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="da1b5-264">ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="da1b5-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="da1b5-265">เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="da1b5-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="da1b5-266">เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="da1b5-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="da1b5-267">รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์)</span><span class="sxs-lookup"><span data-stu-id="da1b5-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="da1b5-268">เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์</span><span class="sxs-lookup"><span data-stu-id="da1b5-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="da1b5-269">เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="da1b5-270">ซื้อในร้านค้า A จัดส่งไปที่ลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="da1b5-271">เริ่มต้น POS สำหรับร้านค้า Houston</span><span class="sxs-lookup"><span data-stu-id="da1b5-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="da1b5-272">บนหน้า **ธุรกรรม** ให้เพิ่ม Karen Berg ไปยังธุรกรรม โดยใช้แผ่นหมายเลขเพื่อป้อน **2001**</span><span class="sxs-lookup"><span data-stu-id="da1b5-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="da1b5-273">เพิ่มรายการหนึ่งรายการขึ้นไปในธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="da1b5-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="da1b5-274">เลือก **ใบสั่ง** เพื่อดูตัวเลือกใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="da1b5-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="da1b5-275">เลือก **ส่งสินค้าทั้งหมด** แล้วจากนั้น เมื่อคุณถูกพร้อมต์ ให้เลือก **ใบสั่งของลูกค้า**</span><span class="sxs-lookup"><span data-stu-id="da1b5-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="da1b5-276">ในหน้าวิธีการจัดส่ง เลือก **ส่งข้ามคืนแบบมาตรฐาน** เลือก **ตกลง** เพื่อยอมรับวันที่ของวันนี้เป็นวันที่จัดส่ง</span><span class="sxs-lookup"><span data-stu-id="da1b5-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="da1b5-277">เลือก **ตกลง** เพื่อยอมรับวันที่ปัจจุบันเป็นวันที่เบิกสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="da1b5-278">เลือก **ชำระด้วยบัตร** เพื่อเริ่มการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="da1b5-279">ทำการชำระเงินด้วยบัตรสำหรับยอดเงินที่ครบกำหนดสำหรับการฝาก</span><span class="sxs-lookup"><span data-stu-id="da1b5-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="da1b5-280">ดำเนินการชำระเงินฝากบนเทอร์มินัลการชำระเงินให้เสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="da1b5-281">หลังจากชำระเงินฝากแล้ว ให้เลือกตัวเลือกที่จะใช้บัตรเดียวกันสำหรับการเติมสินค้า และรอให้ใบสั่งเสร็จสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="da1b5-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="da1b5-282">เมื่อใบสั่งถูกเบิกสินค้า ถูกบรรจุ และถูกออกใบแจ้งหนี้ในฝ่ายสนับสนุน รายละเอียดการชำระเงินที่ระบุไว้ที่ POS จะใช้เพื่อบันทึกเงินทุนของสินค้าที่กำลังถูกจัดส่งไปยังลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="da1b5-283">รายละเอียดของสถานการณ์จำลอง</span><span class="sxs-lookup"><span data-stu-id="da1b5-283">Scenario details</span></span>

<span data-ttu-id="da1b5-284">นอกจากสถานการณ์จำลองพื้นฐานที่เพิ่งถูกอธิบายไว้ มีการเพิ่มประสิทธิภาพการทำงานหลายอย่างไปยัง SDK ของการชำระเงิน เพื่อสนับสนุนการชำระเงินตามช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="da1b5-285">POS</span><span class="sxs-lookup"><span data-stu-id="da1b5-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="da1b5-286">รูด/จุ่มครั้งเดียวสำหรับใบสั่งของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="da1b5-287">ก่อนที่จะมีการใช้คุณลักษณะการชำระเงินผ่านช่องทาง omni เมื่อมีการสร้างใบสั่งของลูกค้าที่มีเงินฝากที่ POS ลูกค้าจำเป็นต้องรูด (หรือจุ่ม) บัตรของตนสองครั้ง: หนึ่งครั้งเพื่อชำระเงินฝาก และหนึ่งครั้งเพื่อดำเนินกระบวนการทางโทเค็นของบัตรสำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา</span><span class="sxs-lookup"><span data-stu-id="da1b5-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="da1b5-288">เมื่อมีการเปิดใช้งานคุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni ลูกค้าต้องรูดบัตรของตนเพียงครั้งเดียวเพื่อทั้งชำระเงินฝากและอนุมัติยอดเงินที่ครบกำหนดชำระสำหรับสินค้าที่จะมีการเติมสินค้าในภายหลัง</span><span class="sxs-lookup"><span data-stu-id="da1b5-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="da1b5-289">ณ เวลาของการเติมสินค้า เงินทุนที่ได้รับอนุมัติจะถูกบันทึก</span><span class="sxs-lookup"><span data-stu-id="da1b5-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="da1b5-290">ก่อนที่จะมีการใช้คุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni เฉพาะโทเคนบัตรที่เกิดซ้ำเท่านั้นที่ถูกสร้างขึ้นสำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา</span><span class="sxs-lookup"><span data-stu-id="da1b5-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="da1b5-291">ดังนั้น เงินทุนสำหรับการเติมสินค้าที่ค้างอยู่จะไม่ได้รับอนุญาต และเพราะเงินทุนเหล่านั้นไม่ได้รับการจัดเก็บไว้สำหรับการซื้อนั้นๆ จึงเป็นไปได้น้อยที่จะถูกบันทึกในภายหลัง</span><span class="sxs-lookup"><span data-stu-id="da1b5-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="da1b5-292">การรูดแบบครั้งเดียวไม่ได้รับการสนับสนุนใน Retail รุ่น 8.1.3</span><span class="sxs-lookup"><span data-stu-id="da1b5-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="da1b5-293">ใบสั่งของลูกค้าในรุ่น 8.1.3 ใช้โฟลว์เดียวกันกับที่ใช้ก่อนที่จะมีการใช้งานคุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni</span><span class="sxs-lookup"><span data-stu-id="da1b5-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="da1b5-294">บัตรที่ไม่สามารถออกโทเคนของบัตรที่เกิดซ้ำได้</span><span class="sxs-lookup"><span data-stu-id="da1b5-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="da1b5-295">ไม่สามารถใช้บัตรบางประเภทสำหรับการชำระเงินผ่านช่องทาง omni ได้ เนื่องจากไม่สนับสนุนการออกโทเคนของบัตรที่เกิดซ้ำ</span><span class="sxs-lookup"><span data-stu-id="da1b5-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="da1b5-296">เมื่อมีการสร้างใบสั่งที่ POS ถ้ามีการชำระเงินฝากโดยใช้บัตรที่ไม่สนับสนุนโทเคนของบัตรที่เกิดซ้ำ จะมีการใช้โฟลว์กระบวนการทางโทเค็นของบัตรก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="da1b5-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="da1b5-297">ดังนั้น ลูกค้าที่ต้องการให้การชำระเงินที่จะใช้สำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา ต้องแสดงบัตรที่สอง</span><span class="sxs-lookup"><span data-stu-id="da1b5-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="da1b5-298">ถ้าบัตรใบที่สองไม่สนับสนุนโทเคนบัตรที่เกิดซ้ำ การดำเนินการกระบวนการทางโทเค็นจะถูกปฏิเสธ และพนักงานเก็บเงินจะได้รับพร้อมต์ให้ร้องขอลูกค้าให้ใช้บัตรอื่น</span><span class="sxs-lookup"><span data-stu-id="da1b5-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="da1b5-299">การใช้บัตรอื่น</span><span class="sxs-lookup"><span data-stu-id="da1b5-299">Using a different card</span></span>

<span data-ttu-id="da1b5-300">ลูกค้าที่มาถึงร้านค้าสำหรับการเบิกสินค้าตามใบสั่ง มีตัวเลือกที่จะใช้บัตรอื่น</span><span class="sxs-lookup"><span data-stu-id="da1b5-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="da1b5-301">เมื่อพนักงานเก็บเงินได้รับพร้อมต์ **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** ขณะที่ทำการเบิกสินค้าตามใบสั่ง เขาหรือเธอสามารถถามว่าลูกค้าต้องการใช้บัตรเดียวกันหรือไม่</span><span class="sxs-lookup"><span data-stu-id="da1b5-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="da1b5-302">ถ้าลูกค้าทำบัตรที่ใช้ในการสร้างใบสั่งหาย และต้องการชำระเงินสำหรับใบสั่งโดยใช้บัตรอื่น พนักงานเก็บเงินสามารถเลือก **ใช้วิธีการชำระเงินอื่น** ได้</span><span class="sxs-lookup"><span data-stu-id="da1b5-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="da1b5-303">ถ้าลูกค้ากลับมาในภายหลังเพื่อเบิกสินค้าเพิ่มเติมสำหรับใบสั่งเดียวกัน ถ้าการตรวจสอบบัตรเดิมยังคงมีผลบังคับใช้ พนักงานเก็บเงินสามารถถามอีกครั้งว่าลูกค้าต้องการใช้บัตรนั้นหรือไม่</span><span class="sxs-lookup"><span data-stu-id="da1b5-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="da1b5-304">การตรวจสอบไม่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="da1b5-304">Invalid authorizations</span></span>

<span data-ttu-id="da1b5-305">ถ้าบัตรที่ใช้ในการสร้างใบสั่งไม่มีผลบังคับใช้อีกต่อไป เมื่อมีการเลือกผลิตภัณฑ์สำหรับการเบิกสินค้า การร้องขอการบันทึกการชำระเงินจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="da1b5-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="da1b5-306">จากนั้น ตัวเชื่อมต่อการชำระเงินของ POS จะพยายามสร้างการตรวจสอบใหม่ และบันทึกโดยใช้รายละเอียดบัตรเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="da1b5-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="da1b5-307">ถ้าการตรวจสอบความถูกต้องใหม่หรือการบันทึกล้มเหลว พนักงานเก็บเงินจะได้รับพร้อมต์ว่าไม่สามารถประมวลผลการชำระเงินได้</span><span class="sxs-lookup"><span data-stu-id="da1b5-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="da1b5-308">จากนั้น พนักงานเก็บเงินจะต้องได้รับการชำระเงินใหม่จากลูกค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="da1b5-309">การชำระเงินที่พร้อมใช้งานหลายรายการ</span><span class="sxs-lookup"><span data-stu-id="da1b5-309">Multiple available payments</span></span>

<span data-ttu-id="da1b5-310">เมื่อมีการเบิกสินค้าตามใบสั่งที่มีการชำระเงินหลายรายการและมีรายการหลายรายการ พนักงานเก็บเงินจะได้รับพร้อมต์ **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เป็นอันดับแรก</span><span class="sxs-lookup"><span data-stu-id="da1b5-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="da1b5-311">ถ้ามีบัตรหลายใบ เมื่อพนักงานเก็บเงินเลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** รายการการชำระเงินของบัตรที่มีอยู่จะถูกบันทึก จนกว่าจะเป็นไปตามยอดดุลสำหรับสินค้าที่มีการเบิกสินค้าในขณะนี้</span><span class="sxs-lookup"><span data-stu-id="da1b5-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="da1b5-312">พนักงานเก็บเงินจะไม่มีตัวเลือกในการเลือกบัตรที่ควรใช้สำหรับสินค้าที่มีการเบิกสินค้า</span><span class="sxs-lookup"><span data-stu-id="da1b5-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="da1b5-313">หัวข้อที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="da1b5-313">Related topics</span></span>

- [<span data-ttu-id="da1b5-314">FAQ เกี่ยวกับการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="da1b5-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="da1b5-315">ตัวเชื่อมต่อการชำระเงิน Dynamics 365 สำหรับ Adyen</span><span class="sxs-lookup"><span data-stu-id="da1b5-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="da1b5-316">ตั้งค่าคอนฟิก BOPIS ในสภาพแวดล้อมการประเมินของ Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="da1b5-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)



[!INCLUDE[footer-include](../includes/footer-banner.md)]