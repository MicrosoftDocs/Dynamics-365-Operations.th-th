---
title: ภาพรวมการชำระเงินผ่านช่องทาง Omni
description: บทความนี้แสดงภาพรวมของการชำระเงินผ่านช่องทาง omni ใน Dynamics 365 Commerce
author: BrianShook
ms.date: 11/04/2020
ms.topic: overview
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom:
- "141393"
- intro-internal
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: brshoo
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: a5cc0725b383ca6657bd19b9dd25b0c60b364467
ms.sourcegitcommit: 9e2e54ff7d15aa51e58309da3eb52366328e199d
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 11/04/2022
ms.locfileid: "9746144"
---
# <a name="omni-channel-payments-overview"></a>ภาพรวมการชำระเงินผ่านช่องทาง Omni

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]

บทความนี้แสดงภาพรวมของการชำระเงินผ่านช่องทาง omni ใน Dynamics 365 Commerce ซึ่งรวมถึงรายการที่ครอบคลุมของสถานการณ์จำลองที่สนับสนุน ข้อมูลเกี่ยวกับฟังก์ชัน การตั้งค่า และการแก้ไขปัญหาเบื้องต้น และคำอธิบายเกี่ยวกับปัญหาทั่วไปบางอย่าง

## <a name="key-terms"></a>เงื่อนไขสำคัญ

| เงื่อนไข | คำอธิบาย |
|---|---|
| โทเคน | สตริงของข้อมูลที่ตัวประมวลผลการชำระเงินให้เป็นการอ้างอิง โทเคนสามารถแสดงหมายเลขบัตรชำระเงิน การอนุมัติการชำระเงิน และบันทึกการชำระเงินก่อนหน้านี้ โทเคนมีความสำคัญ เนื่องจากช่วยเก็บรักษาข้อมูลที่เป็นความลับออกจากระบบการขายหน้าร้าน (POS) บางครั้ง อาจเรียกได้อีกอย่างว่า *การอ้างอิง* |
| โทเคนบัตร | โทเคนที่ตัวประมวลผลการชำระเงินจัดเตรียมไว้สำหรับการจัดเก็บในระบบ POS คุณสามารถใช้โทเคนบัตรได้โดยร้านค้าที่รับเท่านั้น บางครั้ง อาจเรียกโทเคนบัตรได้อีกอย่างว่า *การอ้างอิงบัตร* |
| โทเคนการตรวจสอบ (auth) | รหัสเฉพาะที่กระบวนการชำระเงินให้ไว้เป็นส่วนหนึ่งของการตอบสนองที่ส่งไปยังระบบ POS หลังจากที่ระบบ POS ทำการร้องขอการตรวจสอบ โทเคนการตรวจสอบสามารถใช้ได้ในภายหลัง ถ้าตัวประมวลผลถูกเรียกให้ทำการดำเนินการ เช่น การกลับรายการ หรือการยกเลิกการตรวจสอบ อย่างไรก็ตาม บ่อยครั้งที่ใช้ในบันทึกเงินทุน เมื่อมีการเติมสินค้าตามใบสั่งหรือธุรกรรมได้รับการดำเนินการขั้นสุดท้าย บางครั้ง อาจเรียกโทเคนการตรวจสอบได้อีกอย่างว่า *การอ้างอิงการตรวจสอบ* |
| โทเคนบันทึก | การอ้างอิงที่ตัวประมวลผลการชำระเงินให้แก่ระบบ POS เมื่อการชำระเงินได้รับการดำเนินการขั้นสุดท้ายหรือถูกบันทึก สามารถใช้โทเคนบันทึกเพื่ออ้างอิงการบันทึกการชำระเงินในการดำเนินงานในเวลาต่อมา เช่น การร้องขอการขอคืนเงิน | 
| การไม่แสดงบัตร | เงื่อนไขที่อ้างอิงถึงธุรกรรมการชำระเงินที่ไม่มีการแสดงบัตรจริง ตัวอย่างเช่น ธุรกรรมเหล่านี้อาจเกิดขึ้นในสถานการณ์จำลอง e-commerce หรือสถานการณ์จำลองศูนย์บริการ สำหรับธุรกรรมเหล่านี้ จะมีการป้อนข้อมูลที่เกี่ยวข้องกับการชำระเงินด้วยตนเองบนเว็บไซต์ e-commerce ในโฟลว์ศูนย์บริการ หรือใน POS หรือเทอร์มินัลการชำระเงิน |
| การแสดงบัตร | เงื่อนไขที่อ้างอิงถึงธุรกรรมการชำระเงินที่มีการแสดงบัตรจริง และที่ใช้บนเทอร์มินัลการชำระเงินที่เชื่อมโยงกับระบบ POS ของ Microsoft Dynamics 365 |

## <a name="overview"></a>ภาพรวม

โดยทั่วไป *การชำระเงินผ่านช่องทาง Omni* จะอธิบายความสามารถในการสร้างใบสั่งในหนึ่งช่องทาง และเติมเต็มในช่องทางอื่น กุญแจสำคัญในการสนับสนุนการชำระเงินผ่านช่องทาง Omni คือ การเก็บรักษารายละเอียดการชำระเงินพร้อมกับรายละเอียดของใบสั่งที่เหลือ แล้วใช้รายละเอียดการชำระเงินเหล่านั้นเมื่อมีการเรียกคืนใบสั่งหรือประมวลผลในช่องทางอื่น ตัวอย่างแบบคลาสสิคคือ สถานการณ์ "ซื้อออนไลน์ เบิกสินค้าในร้านค้า" ในสถานการณ์สมมตินี้ รายละเอียดการชำระเงินจะถูกเพิ่มเมื่อมีการสร้างใบสั่งออนไลน์ หลังจากนั้น จะมีการเรียกคืนจากที่ POS เพื่อคิดค่าธรรมเนียมบัตรชำระเงินของลูกค้าในขณะที่เบิกสินค้า 

สถานการณ์ทั้งหมดที่อธิบายไว้ในบทความนี้สามารถนำมาใช้ได้โดยใช้ชุดสินค้าพัฒนาซอฟต์แวร์มาตรฐานการชำระเงิน (SDK) ที่มีอยู่ในการค้า [ตัวเชื่อมต่อการชำระเงิน Dynamics 365 สำหรับ Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) ให้การใช้งานแบบสำเร็จรูปของสถานการณ์จำลองทุกสถานการณ์ที่อธิบายไว้ที่นี่ 

### <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

สถานการณ์จำลองทั้งหมดที่อธิบายไว้ในบทความนี้ ต้องใช้ตัวเชื่อมต่อการชำระเงินที่สนับสนุนการชำระเงินผ่านช่องทาง Omni นอกจากนี้ คุณยังสามารถใช้ตัวเชื่อมต่อ Adyen แบบสำเร็จรูปได้ เนื่องจากสนับสนุนสถานการณ์ที่ถูกทำให้พร้อมใช้งานโดยผ่าน SDK ของการชำระเงิน สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการใช้ตัวเชื่อมต่อการชำระเงิน และเกี่ยวกับ Retail SDK โดยทั่วไป โปรดเยี่ยมชม [โฮมเพจ Retail สำหรับผู้เชี่ยวชาญและนักพัฒนาด้าน IT](/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors)

#### <a name="supported-versions"></a>รุ่นที่สนับสนุน

ความสามารถในการชำระเงินผ่านช่องทาง Omni ที่อธิบายไว้ในบทความนี้ ถูกนำออกใช้โดยเป็นส่วนหนึ่งของ Microsoft Dynamics 365 for Retail รุ่น 8.1.3 

#### <a name="card-present-and-card-not-present-connectors"></a>ตัวเชื่อมต่อ "การแสดงบัตร" และ "การไม่แสดงบัตร"

SDK ของการชำระเงินขึ้นอยู่กับชุดสองชุดของ application programming interfaces (APIs) สำหรับการชำระเงิน ชุดแรกของ APIs ถูกตั้งชื่อว่า **iPaymentProcessor** ซึ่งใช้ในการใช้ตัวเชื่อมต่อการชำระเงิน "การไม่แสดงบัตร" ที่สามารถใช้ในศูนย์บริการ และกับแพลตฟอร์ม e-Commerce ของ Microsoft Dynamics สำหรับข้อมูลเพิ่มเติมเกี่ยวกับอินเทอร์เฟส **iPaymentProcessor** ให้ดูเอกสาร [ใช้ตัวเชื่อมต่อการชำระเงินและอุปกรณ์การชำระเงิน](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) ซึ่งครอบคลุมการชำระเงิน 

ชุดที่สองของ APIs ถูกตั้งชื่อว่า **iNamedRequestHandler** ซึ่งสนับสนุนการใช้งานของการรวมการชำระเงินที่มี "การแสดงบัตร " ซึ่งใช้เทอร์มินัลการชำระเงิน สำหรับข้อมูลเพิ่มเติมเกี่ยวกับอินเทอร์เฟส **iNamedRequestHandler** ให้ดูที่ [สร้างการรวมการชำระเงินสำหรับเทอร์มินัลการชำระเงิน](/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension) 

### <a name="setup-and-configuration"></a>การตั้งค่าและการตั้งค่าคอนฟิก

ต้องใช้ส่วนประกอบและขั้นตอนการตั้งค่าต่อไปนี้:

- **การรวม eCommerce:** การรวมกับการค้าจะต้องสนับสนุนสถานการณ์ที่มีใบสั่งซื้อมาจากในหน้าร้านออนไลน์ สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ Retail e-Commerce SDK โปรดดู [ชุดพัฒนาซอฟต์แวร์ (SDK) ของแพลตฟอร์มe-Commerce platform](/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk) ในสภาพแวดล้อมสาธิต หน้าร้านอ้างอิงสนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง omni 
- **การตั้งค่าคอนฟิกการชำระเงินออนไลน์:** การตั้งค่าของช่องทางออนไลน์ต้องมีตัวเชื่อมต่อการชำระเงินที่ได้รับการปรับปรุงเพื่อสนับสนุนการชำระเงินตามช่องทาง omni อีกทางหนึ่งคือ คุณสามารถใช้ตัวเชื่อมต่อการชำระเงินแบบสำเร็จรูป สำหรับข้อมูลเกี่ยวกับวิธีการตั้งค่าคอนฟิกตัวเชื่อมต่อการชำระเงิน Adyen สำหรับร้านค้าออนไลน์ ให้ดูที่ [ตัวเชื่อมต่อการชำระเงิน Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce) นอกจากขั้นตอนการตั้งค่า eCommerce ที่อธิบายไว้ในบทความนั้นแล้ว จะต้องตั้งค่าพารามิเตอร์ **อนุญาตให้บันทึกข้อมูลการชำระเงินใน e-commerce** เป็น **จริง** ในการตั้งค่าสำหรับตัวเชื่อมต่อ Adyen 
- **การกำหนดค่าการชำระเงินช่องทาง Omni :** ในแผนกสนับสนุน ไปที่ **การขายปลีกและการค้า \> การตั้งค่าสำนักงานใหญ่ \> พารามิเตอร์ \> พารามิเตอร์ที่ใช้ทางการค้าร่วมกัน** จากนั้น บนแท็บ **การชำระเงินผ่านช่องทาง Omni** ตั้งค่าตัวเลือก **ใช้การชำระเงินผ่านช่องทาง Omni** เป็น **ใช่** ใน Commerce รุ่น10.0.12 และใหม่กว่า การตั้งค่านี้จะอยู่ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** เลือกคุณลักษณะ **ชำระเงินตามช่องทาง Omni** และคลิก **เปิดใช้งานเดี๋ยวนี้** 
- **บริการชำระเงิน:** ศูนย์บริการจะใช้ตัวเชื่อมต่อการชำระเงินเริ่มต้น บนหน้า **บริการชำระเงิน** เพื่อประมวลผลการชำระเงิน เมื่อต้องการสนับสนุนสถานการณ์จำลอง เช่น "ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า" ตัวเชื่อมต่อการชำระเงินเริ่มต้นนี้จะต้องเป็นตัวเชื่อมต่อการชำระเงิน Adyen หรือตัวเชื่อมต่อการชำระเงินที่ตรงกับความต้องการในการใช้งานสำหรับการชำระเงินผ่านช่องทาง omni
- **บริการ EFT:** การชำระเงินผ่านเทอร์มินัลการชำระเงินต้องมีการตั้งค่าบน FastTab **บริการ EFT** ของโพรไฟล์ฮาร์ดแวร์ ตัวเชื่อมต่อ Adyen สนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง Omni แบบสำเร็จรูป นอกจากนี้ คุณยังสามารถใช้ตัวเชื่อมต่อการชำระเงินอื่นๆ ที่สนับสนุนอินเทอร์เฟส **iNamedRequestHandler** ถ้ารายการเหล่านั้นสนับสนุนการชำระเงินผ่านช่องทาง omni
- **ความพร้อมใช้งานของตัวเชื่อมต่อการชำระเงิน:** เมื่อมีการเรียกคืนใบสั่ง รายการการชำระเงินที่ถูกเรียกคืนพร้อมกับใบสั่งจะรวมถึงชื่อของตัวเชื่อมต่อการชำระเงินที่ใช้ในการสร้างการตรวจสอบที่เกี่ยวข้องกับใบสั่งนั้น เมื่อมีการเติมสินค้าตามใบสั่ง SDK ของการชำระเงินจะพยายามใช้ตัวเชื่อมต่อเดียวกันกับที่ใช้ในการสร้างการตรวจสอบความถูกต้องดั้งเดิม ดังนั้น ตัวเชื่อมต่อการชำระเงินที่มีคุณสมบัติร้านค้าเดียวกันต้องพร้อมใช้งานสำหรับการบันทึก 
- **ชนิดของบัตร** สำหรับสถานการณ์จำลองช่องทาง omni ที่จะทำงานได้อย่างถูกต้อง แต่ละช่องทางต้องมีการตั้งค่าเดียวกันสำหรับชนิดการชำระเงินที่สามารถใช้สำหรับช่องทาง omni การตั้งค่านี้รวมถึงรหัสวิธีการชำระเงินและรหัสชนิดบัตร ตัวอย่างเช่น ถ้าชนิดการชำระเงินด้วย **บัตร** มีรหัสเป็น **2** ในการตั้งค่าร้านค้าออนไลน์ ควรจะมีรหัสเดียวกันในการตั้งค่าร้านค้าปลีก ข้อกำหนดเดียวกันใช้กับรหัสชนิดบัตร ถ้ามีการตั้งค่าหมายเลขบัตร **12** เป็น **VISA** ในร้านค้าออนไลน์ ควรตั้งค่ารหัสเดียวกันสำหรับร้านค้าปลีก 
- Retail Modern POS สำหรับ Windows หรือ Android ที่มีสถานีฮาร์ดแวร์ในตัว หรือ
- POS สมัยใหม่สำหรับ iOS หรือ Cloud POS พร้อมกับสถานีฮาร์ดแวร์ที่ใช้ร่วมกันและเชื่อมต่อกัน 

### <a name="basic-principle-supporting-omni-channel-payments"></a>หลักการพื้นฐานที่สนับสนุนการชำระเงินผ่านช่องทาง omni

ตัวเชื่อมต่อการชำระเงินและตัวประมวลผลการชำระเงินจะใช้โทเคน หรือการอ้างอิง เพื่ออ้างอิงการโต้ตอบที่เกี่ยวข้องกับการชำระเงินด้วยบัตร ตัวอย่างเช่น เมื่อมีการร้องขอการตรวจสอบการชำระเงิน จะมีการอ้างอิงไปยังการตรวจสอบนั้น ดังนั้น จึงสามารถอ้างอิงการตรวจสอบได้ในเวลาต่อมา เมื่อมีการบันทึกเงินทุนในขณะที่เติมสินค้า การตรวจสอบนี้มีความเฉพาะเจาะจงสำหรับผู้ค้า ตัวเชื่อมต่อการชำระเงิน และตัวประมวลผล 

ถ้าใบสั่งที่สร้างขึ้นออนไลน์กำลังถูกเบิกสินค้าในร้านค้า รายละเอียดการชำระเงินเดียวกันสำหรับใบสั่งนั้นต้องถูกเรียกคืนและถูกใช้ เมื่อมีการกำหนดรายละเอียดดั้งเดิมไว้เป็นส่วนหนึ่งของการร้องขอให้บันทึกการชำระเงินเทียบกับการตรวจสอบดั้งเดิม ตัวประมวลผลการชำระเงินจะสามารถจัดการการร้องขอและบันทึกการชำระเงินได้ 

เมื่อต้องการอ้างอิงใบสั่งออนไลน์อย่างถูกต้อง ตัวเชื่อมต่อการชำระเงิน "การไม่แสดงบัตร" ซึ่งสนับสนุนตัวประมวลผลเดียวกันต้องพร้อมใช้งานด้วยเช่นกัน ด้วยวิธีนี้ ระบบ POS อาจมีโปรเซสเซอร์หนึ่งตัวสำหรับการชำระเงินที่มี "การแสดงบัตร" แต่ยังสามารถมีการเข้าถึงไปยังตัวเชื่อมต่อการชำระเงินอื่นๆ เพื่อให้สามารถตอบสนองใบสั่งที่สร้างขึ้นในช่องทางอื่นได้โดยใช้ตัวประมวลผลการชำระเงินที่แตกต่างกัน 

## <a name="supported-scenarios"></a>สถานการณ์จำลองที่ได้รับการสนับสนุน

มีการสนับสนุนสถานการณ์การชำระเงินผ่านช่องทาง omni ต่อไปนี้:

- ซื้อออนไลน์ เบิกสินค้าในร้านค้า
- ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า
- ซื้อในร้านค้า A เบิกสินค้าในร้านค้า B
- ซื้อในร้านค้า A จัดส่งไปที่ลูกค้า

    > [!NOTE]
    > การชำระเงินในศูนย์การผลิตที่แมปกับฟังก์ชันการชำระเงิน "Normal" ต้องทำเครื่องหมายเป็นการชำระเงิน **ล่วงหน้า** = **ใช่** เพื่อให้สะท้อนในยอดเงินที่ต้องชำระเมื่อเรียกคืนใบสั่งใน POS การชำระเงินที่ไม่มีการชำระเงินล่วงหน้าของประเภท "ปกติ" จะไม่เป็นที่รู้จักเมื่อเรียกคืนใบสั่งใน POS 

การเปลี่ยนแปลงของสถานการณ์เหล่านี้ได้รับการสนับสนุนด้วยเช่นกัน ตัวอย่างเช่น ใบสั่งออนไลน์อาจประกอบด้วยทั้งรายการที่จะถูกจัดส่งไปยังลูกค้า และรายการที่จะถูกเบิกสินค้าในร้านค้า ตัวเลือกการเติมสินค้าตามใบสั่งทั้งหมดได้รับการสนับสนุนผ่านการชำระเงินผ่านช่องทาง omni 

ส่วนต่อไปนี้อธิบายขั้นตอนต่างๆ สำหรับสถานการณ์จำลองแต่ละสถานการณ์ และแสดงวิธีการรันสถานการณ์จำลองโดยใช้ข้อมูลสาธิต 

### <a name="buy-online-pick-up-in-store"></a>ซื้อออนไลน์ เบิกสินค้าในร้านค้า

ก่อนที่คุณจะเริ่มต้น ต้องแน่ใจว่ามีการทำตามข้อกำหนดเบื้องต้นดังต่อไปนี้:

- คุณมีหน้าร้านอ้างอิงที่ซึ่งมีการตั้งค่าคอนฟิกตัวเชื่อมต่อ Adyen
- ตัวเลือก **การชำระเงินช่องทาง Omni** ในหน้า **พารามิเตอร์ที่ใช้ทางการค้าร่วมกัน** ได้รับการกำหนดเป็น **จริง** ในรุ่นที่ใหม่กว่า การตั้งค่านี้ถูกย้ายไปยังพื้นที่ทำงาน **การจัดการคุณลักษณะ** ที่คุณสามารถเลือกคุณลักษณะ **การชำระเงินของช่องทาง Omni** แล้วคลิก **เปิดใช้งานทันที** 
- มีการตั้งค่าคอนฟิกตัวเชื่อมต่อการชำระเงิน Adyen สำหรับเครื่องบันทึกเงินสด POS ของ Houston
- Retail Modern POS สำหรับ Windows หรือ Android ที่มีสถานีฮาร์ดแวร์ในตัว หรือ
- POS สมัยใหม่สำหรับ iOS หรือ Cloud POS พร้อมกับสถานีฮาร์ดแวร์ที่ใช้ร่วมกันและเชื่อมต่อกัน 

ทำตามขั้นตอนเหล่านี้เพื่อรันสถานการณ์จำลอง

1. ในหน้าร้านอ้างอิง สร้างใบสั่งสำหรับการเบิกสินค้าในร้านค้า ตรวจสอบให้แน่ใจว่าได้เลือกร้านค้า **Houston** 
2. ไปที่ขั้นตอนการชำระเงิน และชำระเงินโดยใช้หมายเลขบัตรเครดิตสำหรับการทดสอบ คุณสามารถค้นหาหมายเลขบัตรเครดิตสำหรับการทดสอบได้ใน [หน้าหมายเลขบัตรสำหรับการทดสอบ Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description)
3. ในการค้า ให้ใช้ชุดงาน **ทำข้อมูลใบสั่งให้ตรงกัน** และตารางการแจกจ่าย **P-001** เพื่อสร้างใบสั่งซื้อในแผนกสนับสนุน
4. ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า 
5. เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**

    ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน 

6. เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน
7. เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง

    รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์) 

8. เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์ 
9. เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์ 

### <a name="buy-in-call-center-pick-up-in-store"></a>ซื้อในศูนย์บริการ เบิกสินค้าในร้านค้า

1. ในการค้า บนหน้า **ส่วนบริการลูกค้า** ให้ป้อน **อรอนงค์ ภัสราพิทักษ์** ในแถบค้นหา จากนั้นเลือก **ค้นหา** 
3. เลือก **Karen Berg** ในผลการค้นหา
4. หลังจากที่มีการโหลด Karen ลงบนหน้า **บริการลูกค้า** ให้เลือก **ใบสั่งขายใหม่**
5. บนหน้าใบสั่งขายใหม่ ให้เลือก **ส่วนหัว** เพื่อดูส่วนหัวของใบสั่ง 
6. บนหน้า **ส่วนหัวของใบสั่ง** ให้ตั้งค่าไซต์เป็น **Central** และคลังสินค้าเป็น **Houston**
7. บนแท็บ **จัดส่ง** ให้ตั้งค่าฟิลด์ **โหมดการจัดส่ง** เป็น **60** สำหรับการเบิกสินค้าของลูกค้า
8. เลือก **รายการ** แล้วจากนั้นเพิ่มรายการหนึ่งรายการขึ้นไปในใบสั่ง 
9. เลือก **เสร็จสมบูรณ์** เพื่อป้อนโฟลว์การดำเนินการใบสั่งให้เสร็จสมบูรณ์
10. เลื่อนลงไปที่ส่วนการชำระเงิน เลือก **เพิ่ม** แล้วเลือกรายการที่มีการตั้งค่าชนิดวิธีการชำระเงินเป็น **บัตร** 
11. เลือกเครื่องหมายบวก (**+**) เพื่อเพิ่มการชำระเงินด้วยบัตร 
12. ป้อนรายละเอียดสำหรับหมายเลขบัตรเครดิตสำหรับการทดสอบที่คุณพบบน [หน้าหมายเลขบัตรสำหรับการทดสอบ Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) แล้วจากนั้นเลือก **ตกลง**

    > [!NOTE]
    > ถ้าแบรนด์บัตรสำหรับหมายเลขบัตรที่คุณป้อนแตกต่างจากแบรนด์ซึ่งเลือกไว้เมื่อเริ่มต้นการชำระเงิน การชำระเงินจะยังคงดำเนินการต่อไปได้ อย่างไรก็ตาม จะมีการลงรายการบัญไปยังบัญชีซึ่งแมปกับแบรนด์บัตรที่คุณเลือกไว้ในขั้นตอนที่ 10

12. เลือก **ตกลง** อีกครั้ง เพื่อปิดกล่องโต้ตอบ **การดำเนินการการชำระเงินให้เสร็จสมบูรณ์ตามใบสั่ง**
13. บนหน้า **สรุปใบสั่งขาย** ให้เลือก **ส่ง**
14. ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า 
15. เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**

    ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน 

16. เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน
17. เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง

    รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์)

18. เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์ 
19. เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์ 

### <a name="buy-in-store-a-pick-up-in-store-b"></a>ซื้อในร้านค้า A เบิกสินค้าในร้านค้า B

1. เริ่มต้น POS สำหรับร้านค้า Houston
2. บนหน้า **ธุรกรรม** ให้เพิ่ม Karen Berg ไปยังธุรกรรม โดยใช้แผ่นหมายเลขเพื่อป้อน **2001**
3. เพิ่มรายการหนึ่งรายการขึ้นไปในธุรกรรม
4. เลือก **ใบสั่ง** เพื่อดูตัวเลือกใบสั่ง
5. เลือก **เบิกสินค้าทั้งหมด** แล้วจากนั้น เมื่อคุณถูกพร้อมต์ ให้เลือก **ใบสั่งของลูกค้า**
6. ในแถบค้นหา ให้ป้อน **Seattle** แล้วเลือกร้านค้า **Seattle** สำหรับการเบิกสินค้า 
7. เลือก **ตกลง** เพื่อยอมรับวันที่ปัจจุบันเป็นวันที่เบิกสินค้า
9. เลือก **ชำระด้วยบัตร** เพื่อเริ่มการชำระเงิน
10. ทำการชำระเงินด้วยบัตรสำหรับยอดเงินที่ครบกำหนดสำหรับการฝาก
11. ดำเนินการชำระเงินฝากบนเทอร์มินัลการชำระเงินให้เสร็จสมบูรณ์ 
12. หลังจากชำระเงินฝากแล้ว ให้เลือกตัวเลือกที่จะใช้บัตรเดียวกันสำหรับการเติมสินค้า และรอให้ใบสั่งเสร็จสมบูรณ์ หากมีการชําระเงิน 100% ของการฝากเงิน (จากขั้นตอนที่ 10 ข้างต้น) เงินทุนจะถูกรวบรวมทันทีโดยเทียบกับบัตร และโทเค็นการรับรองความถูกต้องจะไม่สามารถใช้งานในการออกใบแจ้งหนี้ เนื่องจากเงินทุนนั้นถูกรวบรวมและติดตามเป็นชําระเงินแล้ว
13. เริ่มต้น POS สำหรับร้านค้า Seattle
14. ใน POS บนหน้าต้อนรับ ให้เลือกการดำเนินการ **ใบสั่งที่จะเบิกสินค้า** เพื่อดูใบสั่งสำหรับการเบิกสินค้าในร้านค้า 
15. เลือกรายการหนึ่งรายการขึ้นไปจากใบสั่งที่สร้างขึ้นในหน้าร้านอ้างอิง แล้วจากนั้น เลือก **เบิกสินค้า**

    ใบสั่งจะถูกดึงมาจากฝ่ายสนับสนุน 

16. เมื่อมีการดึงข้อมูลรายละเอียดของรายการใบสั่งมาจากฝ่ายสนับสนุน และมีการตรวจพบการชำระเงินด้วยบัตรที่สามารถใช้สำหรับช่องทาง omni คุณจะได้รับการแจ้งว่าวิธีการชำระเงินพร้อมใช้งาน
17. เลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เพื่อทำธุรกรรมให้เสร็จสมบูรณ์โดยใช้รายละเอียดของบัตรที่ป้อนไว้ในหน้าร้านอ้างอิง

    รายการใบสั่งถูกโหลดบนหน้าธุรกรรม และยอดดุลที่ครบกำหนดเป็น 0 (ศูนย์)

18. เลือกแท็บ **การชำระเงิน** เพื่อดูรายการชำระเงินที่ถูกดึงมาจากใบสั่งออนไลน์ 
19. เลือกวิธีการชำระเงินใดๆ เพื่อให้ทำธุรกรรมให้เสร็จสมบูรณ์ 

### <a name="buy-in-store-a-ship-to-customer"></a>ซื้อในร้านค้า A จัดส่งไปที่ลูกค้า

1. เริ่มต้น POS สำหรับร้านค้า Houston
2. บนหน้า **ธุรกรรม** ให้เพิ่ม Karen Berg ไปยังธุรกรรม โดยใช้แผ่นหมายเลขเพื่อป้อน **2001**
3. เพิ่มรายการหนึ่งรายการขึ้นไปในธุรกรรม
4. เลือก **ใบสั่ง** เพื่อดูตัวเลือกใบสั่ง
5. เลือก **ส่งสินค้าทั้งหมด** แล้วจากนั้น เมื่อคุณถูกพร้อมต์ ให้เลือก **ใบสั่งของลูกค้า**
6. ในหน้าวิธีการจัดส่ง เลือก **ส่งข้ามคืนแบบมาตรฐาน** เลือก **ตกลง** เพื่อยอมรับวันที่ของวันนี้เป็นวันที่จัดส่ง 
7. เลือก **ตกลง** เพื่อยอมรับวันที่ปัจจุบันเป็นวันที่เบิกสินค้า
8. เลือก **ชำระด้วยบัตร** เพื่อเริ่มการชำระเงิน
9. ทำการชำระเงินด้วยบัตรสำหรับยอดเงินที่ครบกำหนดสำหรับการฝาก 
10. ดำเนินการชำระเงินฝากบนเทอร์มินัลการชำระเงินให้เสร็จสมบูรณ์ 
11. หลังจากชำระเงินฝากแล้ว ให้เลือกตัวเลือกที่จะใช้บัตรเดียวกันสำหรับการเติมสินค้า และรอให้ใบสั่งเสร็จสมบูรณ์ หากมีการชําระเงิน 100% ของการฝากเงิน (จากขั้นตอนที่ 9 ข้างต้น) เงินทุนจะถูกรวบรวมทันทีโดยเทียบกับบัตร และโทเค็นการรับรองความถูกต้องจะไม่สามารถใช้งานในการออกใบแจ้งหนี้ เนื่องจากเงินทุนนั้นถูกรวบรวมและติดตามเป็นชําระเงินแล้ว

เมื่อใบสั่งถูกเบิกสินค้า ถูกบรรจุ และถูกออกใบแจ้งหนี้ในฝ่ายสนับสนุน รายละเอียดการชำระเงินที่ระบุไว้ที่ POS จะใช้เพื่อบันทึกเงินทุนของสินค้าที่กำลังถูกจัดส่งไปยังลูกค้า 

## <a name="scenario-details"></a>รายละเอียดของสถานการณ์จำลอง

นอกจากสถานการณ์จำลองพื้นฐานที่เพิ่งถูกอธิบายไว้ มีการเพิ่มประสิทธิภาพการทำงานหลายอย่างไปยัง SDK ของการชำระเงิน เพื่อสนับสนุนการชำระเงินตามช่องทาง omni 

### <a name="pos"></a>POS

#### <a name="single-swipedip-for-customer-orders"></a>รูด/จุ่มครั้งเดียวสำหรับใบสั่งของลูกค้า

ก่อนที่จะมีการใช้คุณลักษณะการชำระเงินผ่านช่องทาง omni เมื่อมีการสร้างใบสั่งของลูกค้าที่มีเงินฝากที่ POS ลูกค้าจำเป็นต้องรูด (หรือจุ่ม) บัตรของตนสองครั้ง: หนึ่งครั้งเพื่อชำระเงินฝาก และหนึ่งครั้งเพื่อดำเนินกระบวนการทางโทเค็นของบัตรสำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา เมื่อมีการเปิดใช้งานคุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni ลูกค้าต้องรูดบัตรของตนเพียงครั้งเดียวเพื่อทั้งชำระเงินฝากและอนุมัติยอดเงินที่ครบกำหนดชำระสำหรับสินค้าที่จะมีการเติมสินค้าในภายหลัง ณ เวลาของการเติมสินค้า เงินทุนที่ได้รับอนุมัติจะถูกบันทึก ก่อนที่จะมีการใช้คุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni เฉพาะโทเคนบัตรที่เกิดซ้ำเท่านั้นที่ถูกสร้างขึ้นสำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา ดังนั้น เงินทุนสำหรับการเติมสินค้าที่ค้างอยู่จะไม่ได้รับอนุญาต และเพราะเงินทุนเหล่านั้นไม่ได้รับการจัดเก็บไว้สำหรับการซื้อนั้นๆ จึงเป็นไปได้น้อยที่จะถูกบันทึกในภายหลัง

> [!NOTE]
> การรูดแบบครั้งเดียวไม่ได้รับการสนับสนุนใน Retail รุ่น 8.1.3 ใบสั่งของลูกค้าในรุ่น 8.1.3 ใช้โฟลว์เดียวกันกับที่ใช้ก่อนที่จะมีการใช้งานคุณลักษณะกระบวนการทางโทเค็นผ่านช่องทาง omni 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a>บัตรที่ไม่สามารถออกโทเคนของบัตรที่เกิดซ้ำได้

ไม่สามารถใช้บัตรบางประเภทสำหรับการชำระเงินผ่านช่องทาง omni ได้ เนื่องจากไม่สนับสนุนการออกโทเคนของบัตรที่เกิดซ้ำ เมื่อมีการสร้างใบสั่งที่ POS ถ้ามีการชำระเงินฝากโดยใช้บัตรที่ไม่สนับสนุนโทเคนของบัตรที่เกิดซ้ำ จะมีการใช้โฟลว์กระบวนการทางโทเค็นของบัตรก่อนหน้านี้ ดังนั้น ลูกค้าที่ต้องการให้การชำระเงินที่จะใช้สำหรับการเติมสินค้าตามใบสั่งในเวลาต่อมา ต้องแสดงบัตรที่สอง ถ้าบัตรใบที่สองไม่สนับสนุนโทเคนบัตรที่เกิดซ้ำ การดำเนินการกระบวนการทางโทเค็นจะถูกปฏิเสธ และพนักงานเก็บเงินจะได้รับพร้อมต์ให้ร้องขอลูกค้าให้ใช้บัตรอื่น 

### <a name="using-a-different-card"></a>การใช้บัตรอื่น

ลูกค้าที่มาถึงร้านค้าสำหรับการเบิกสินค้าตามใบสั่ง มีตัวเลือกที่จะใช้บัตรอื่น เมื่อพนักงานเก็บเงินได้รับพร้อมต์ **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** ขณะที่ทำการเบิกสินค้าตามใบสั่ง พนักงานเก็บเงินสามารถถามว่าลูกค้าต้องการใช้บัตรเดียวกันหรือไม่ ถ้าลูกค้าทำบัตรที่ใช้ในการสร้างใบสั่งหาย และต้องการชำระเงินสำหรับใบสั่งโดยใช้บัตรอื่น พนักงานเก็บเงินสามารถเลือก **ใช้วิธีการชำระเงินอื่น** ได้ ถ้าลูกค้ากลับมาในภายหลังเพื่อเบิกสินค้าเพิ่มเติมสำหรับใบสั่งเดียวกัน ถ้าการตรวจสอบบัตรเดิมยังคงมีผลบังคับใช้ พนักงานเก็บเงินสามารถถามอีกครั้งว่าลูกค้าต้องการใช้บัตรนั้นหรือไม่

### <a name="invalid-authorizations"></a>การตรวจสอบไม่ถูกต้อง

ถ้าบัตรที่ใช้ในการสร้างใบสั่งไม่มีผลบังคับใช้อีกต่อไป เมื่อมีการเลือกผลิตภัณฑ์สำหรับการเบิกสินค้า การร้องขอการบันทึกการชำระเงินจะล้มเหลว จากนั้น ตัวเชื่อมต่อการชำระเงินของ POS จะพยายามสร้างการตรวจสอบใหม่ และบันทึกโดยใช้รายละเอียดบัตรเดียวกัน ถ้าการตรวจสอบความถูกต้องใหม่หรือการบันทึกล้มเหลว พนักงานเก็บเงินจะได้รับพร้อมต์ว่าไม่สามารถประมวลผลการชำระเงินได้ จากนั้น พนักงานเก็บเงินจะต้องได้รับการชำระเงินใหม่จากลูกค้า 

### <a name="multiple-available-payments"></a>การชำระเงินที่พร้อมใช้งานหลายรายการ

เมื่อมีการเบิกสินค้าตามใบสั่งที่มีการชำระเงินหลายรายการและมีรายการหลายรายการ พนักงานเก็บเงินจะได้รับพร้อมต์ **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** เป็นอันดับแรก ถ้ามีบัตรหลายใบ เมื่อพนักงานเก็บเงินเลือก **ใช้วิธีการชำระเงินที่พร้อมใช้งาน** รายการการชำระเงินของบัตรที่มีอยู่จะถูกบันทึก จนกว่าจะเป็นไปตามยอดดุลสำหรับสินค้าที่มีการเบิกสินค้าในขณะนี้ พนักงานเก็บเงินจะไม่มีตัวเลือกในการเลือกบัตรที่ควรใช้สำหรับสินค้าที่มีการเบิกสินค้า 

## <a name="related-articles"></a>บทความที่เกี่ยวข้อง

- [FAQ เกี่ยวกับการชำระเงิน](/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [ตัวเชื่อมต่อการชำระเงิน Dynamics 365 สำหรับ Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [ตั้งค่าคอนฟิก BOPIS ในสภาพแวดล้อมการประเมินของ Dynamics 365 Commerce](./cpe-bopis.md)



[!INCLUDE[footer-include](../includes/footer-banner.md)]
