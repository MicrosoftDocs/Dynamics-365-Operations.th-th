---
title: รวม Customer Voice เข้ากับหน้าไซต์อีคอมเมิร์ซ
description: บทความนี้อธิบายวิธีการรวม Microsoft Dynamics 365 Customer Voice ไปยังหน้าไซต์อีคอมเมิร์ซ Dynamics 365 Commerce
author: samjarawan
ms.date: 05/17/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: samjar
ms.search.validFrom: 2019-10-31
ms.openlocfilehash: c8c67ecf4950c92fc91c8d119e06e5e8afff0ddf
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 06/03/2022
ms.locfileid: "8850341"
---
# <a name="integrate-customer-voice-into-e-commerce-site-pages"></a>รวม Customer Voice เข้ากับหน้าไซต์อีคอมเมิร์ซ

[!include [banner](../includes/banner.md)]

บทความนี้อธิบายวิธีการรวม Microsoft Dynamics 365 Customer Voice ไปยังหน้าไซต์อีคอมเมิร์ซ Dynamics 365 Commerce

คุณสามารถรวม [Customer Voice](https://dynamics.microsoft.com/customer-voice/overview/) ไปยังไซต์อีคอมเมิร์ซเพื่อรวบรวม วิเคราะห์ และติดตามข้อคิดเห็นของลูกค้าแบบเรียลไทม์ได้ หากต้องการเริ่มต้นการรวม คุณต้องสร้างบัญชีและเลือกเทมเพลตโครงการ Customer Voice สำหรับชนิดข้อคิดเห็นที่คุณต้องการรวบรวม

## <a name="integrate-the-customer-voice-service"></a>รวมบริการ Customer Voice

เมื่อต้องการสร้างบัญชี Customer Voice ให้ไปที่ [Customer Voice](https://dynamics.microsoft.com/customer-voice/overview/) และปฏิบัติตามพร้อมต์

หลังจากคุณสร้างบัญชี Customer Voice และลงชื่อเข้าใช้ ขั้นตอนต่อไปคือเลือกเทมเพลตโครงการสำหรับชนิดข้อคิดเห็นที่คุณต้องการรวบรวม

หากต้องการเลือกเทมเพลตโครงการ Customer Voice ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ไปที่ [หน้าเทมเพลตโครงการ Customer Voice](https://customervoice.microsoft.com/Pages/ProjectPage.aspx)
1. เลือก **เริ่มต้นใช้งาน**
1. เลือกเทมเพลตโครงการสำหรับชนิดข้อคิดเห็นที่คุณต้องการรวบรวม แล้วเลือก **ถัดไป**
1. บนแท็บ **ส่ง** ภายใต้ **เลือกรูปแบบการฝัง** ให้เลือกรูปแบบการฝัง ฟิลด์ **รหัสที่ฝัง** จะแสดงรหัสที่ต้องฝังอยู่ในโปรแกรมสร้างไซต์ Commerce

ตัวอย่างในบทความนี้ใช้เทมเพลตโครงการ **การสำรวจลูกค้าประจำงวด** และรูปแบบที่ฝัง **ปุ่ม**

ตัวอย่างต่อไปนี้แสดงหน้าเทมเพลตโครงการ **การสำรวจลูกค้าประจำงวด** โดยตัวเลือกสำหรับรูปแบบที่ฝัง **ปุ่ม** ถูกเลือกไว้ และโค้ดฝังตัวสำหรับตัวเลือกนั้นจะปรากฏขึ้นในฟิลด์ **โค้ดฝังตัว** สามการดำเนินการที่แยกกันจำเป็นเพื่อฝังโค้ดที่ให้ไว้ในหน้าไซต์ของคุณ ตามที่ระบุไว้ในส่วนต่อไปนี้

![หน้าการสำรวจลูกค้าประจำงวด Customer Voice ที่มีการเลือกตัวเลือก ปุ่ม](media/customer-voice-integration-1.png)

### <a name="embed-the-external-script-url"></a>ฝัง URL สคริปต์ภายนอก

ในหน้าไซต์ทั้งหมดที่ควรได้รับการสํารวจ Customer Voice นั้น คุณต้องฝัง URL สคริปต์ภายนอกที่ Customer Voice ให้ไว้ในโค้ดฝังตัว วิธีที่ดีที่สุดในการฝังสคริปต์ในหน้าไซต์หลายหน้า คือ การสร้างส่วนย่อยของโปรแกรมสร้างไซต์ที่มี URL สคริปต์ภายนอก แล้วเพิ่มส่วนย่อยไปยังเทมเพลตหน้าที่เหมาะสม หลังจากที่คุณเผยแพร่เทมเพลตที่อัปเดตแล้ว โค้ดสคริปต์ภายนอกที่ฝังอยู่จะคล้ายกับตัวอย่างต่อไปนี้ในหน้าไซต์ที่ได้รับผลกระทบ

```html
<script src=https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/Embed.js type="text/javascript"></script>
```

สำหรับข้อมูลเกี่ยวกับส่วนย่อย ดูที่ [ใช้งานส่วนย่อย](work-with-fragments.md)

> [!NOTE]
> คุณต้องเพิ่ม URL ไปยังส่วนย่อยเท่านั้น โมดูลสคริปต์ภายนอกจะเพิ่มโค้ดสคริปต์อื่น

ในการฝัง URL สคริปต์ภายนอกไปยังส่วนย่อย ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในการสร้างไซต์ ให้สร้างส่วนย่อยโดยยึดตาม [โมดูลสคริปต์ภายนอก](script-module.md)
1. ในส่วนย่อยใหม่ ให้เลือกช่วงเวลา **สคริปต์ภายนอกเริ่มต้น**
1. ในบานหน้าต่างคุณสมบัติ **สคริปต์ภายนอกเริ่มต้น** ในฟิลด์ **แหล่งที่มาของสคริปต์** ให้ป้อน URL ของสคริปต์ภายนอก ดังที่แสดงในตัวอย่างต่อไปนี้ภาพประกอบ

    ![URL ของสคริปต์ภายนอกในฟิลด์แหล่งที่มาของสคริปต์สำหรับส่วนย่อยใหม่](media/customer-voice-integration-2.png)

1. เลือก **บันทึก** และจากนั้น เลือก **แก้ไขให้เสร็จสิ้น**
1. เลือก **เผยแพร่** เพื่อเผยแพร่ส่วนย่อย

ส่วนย่อยใหม่ที่มีบล็อคสคริปต์ภายนอกที่ฝังอยู่ขณะนี้พร้อมที่จะเพิ่มลงในเทมเพลตหน้าที่เหมาะสม

### <a name="embed-the-external-style-sheet-code"></a>ฝังโค้ดของแผ่นงานรูปแบบภายนอก

ถัดไป ในหน้าไซต์ทั้งหมดที่ควรได้รับการสํารวจ Customer Voice นั้น คุณต้องฝังโค้ดของแผ่นงานรูปแบบภายนอกที่ Customer Voice ให้ไว้ในโค้ดฝังตัว ในส่วนก่อนหน้านี้ วิธีที่ดีที่สุดในการฝังโค้ดของแผ่นงานรูปแบบภายนอกในหน้าไซต์หลายหน้า คือ การสร้างส่วนย่อยของโปรแกรมสร้างไซต์ที่มีโค้ดของแผ่นงานรูปแบบ แล้วเพิ่มส่วนย่อยไปยังเทมเพลตหน้าที่เหมาะสม โค้ดของแผ่นงานรูปแบบภายนอกที่ฝังอยู่จะคล้ายกับโค้ดตัวอย่างต่อไปนี้

```typescript
<link rel="stylesheet" type="text/css" href=https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/Embed.css />
```

ในการฝังโค้ดของแผ่นงานรูปแบบภายนอกไปยังส่วนย่อย ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในการสร้างไซต์ ให้สร้างส่วนย่อยโดยยึดตาม [โมดูลเมตาแท็ก](metatags-module.md)
1. ในส่วนย่อย ให้เลือกช่วง **เมตาแท็กเริ่มต้น**
1. ในบานหน้าต่างคุณสมบัติ **เมตาแท็กเริ่มต้น** ในฟิลด์ **เมตาแท็ก** ให้ป้อนโค้ดของแผ่นงานรูปแบบ ดังที่แสดงในตัวอย่างต่อไปนี้ภาพประกอบ

    ![โค้ดของแผ่นงานรูปแบบภายนอกในฟิลด์เมตาแท็กสำหรับส่วนย่อยใหม่](media/customer-voice-integration-3.png)

1. เลือก **บันทึก** และจากนั้น เลือก **แก้ไขให้เสร็จสิ้น**
1. เลือก **เผยแพร่** เพื่อเผยแพร่ส่วนย่อย

ส่วนย่อยใหม่ที่มีโค้ดของแผ่นงานรูปแบบภายนอกที่ฝังอยู่ขณะนี้พร้อมที่จะเพิ่มลงในเทมเพลตหน้าที่เหมาะสม

### <a name="embed-the-inline-script-code"></a>ฝังรหัสสคริปต์อินไลน์ 

ถัดไป ในหน้าไซต์ทั้งหมดที่ควรได้รับการสํารวจ Customer Voice นั้น คุณต้องฝังรหัสสคริปต์อินไลน์ที่ Customer Voice ให้ไว้ในโค้ดฝังตัว ในส่วนก่อนหน้านี้ วิธีที่ดีที่สุดในการฝังรหัสสคริปต์อินไลน์ในหน้าไซต์หลายหน้า คือ การสร้างส่วนย่อยของโปรแกรมสร้างไซต์ที่มีรหัสสคริปต์อินไลน์ แล้วเพิ่มส่วนย่อยไปยังเทมเพลตหน้าที่เหมาะสม

ในตัวอย่างต่อไปนี้ของรหัสสคริปต์อินไลน์ **SURVEY\_KEY** เป็นตัวยึด ค่าของ **SURVEY\_KEY** ควรตรงกับคีย์การสํารวจจริงที่ Customer Voice ให้ไว้ในโค้ดฝังตัว บรรทัดสุดท้ายจะเรียกใช้โค้ดเพื่อแสดงปุ่มการสํารวจหลังจาก 1 วินาที เพื่อให้แน่ใจว่าสคริปต์มีเวลาในการโหลดเพียงพอ คุณอาจต้องเพิ่มหรืออัปเดตข้อมูลเมตาอื่นๆ เช่น ชื่อบริษัท ทั้งนี้ขึ้นอยู่กับการสํารวจที่คุณเลือก

```html
function renderSurveyButton() {
    var se = new SurveyEmbed("SURVEY_KEY","https://customervoice.microsoft.com/","https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/","true");

    var context = {
        "First Name":"",
        "Last Name": "",
        "locale": "en-us",
        "companyname": "Adventure Works"
    };
    se.renderButton(context);
}

setTimeout(renderSurveyButton, 4000);
```

ในการฝังรหัสสคริปต์อินไลน์ไปยังส่วนย่อย ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในการสร้างไซต์ ให้สร้างส่วนย่อยโดยยึดตาม [โมดูลสคริปต์อินไลน์](script-module.md)
1. ในส่วนย่อย ให้เลือกช่วงเวลา **สคริปต์อินไลน์เริ่มต้น**
1. ในบานหน้าต่างคุณสมบัติ **สคริปต์อินไลน์เริ่มต้น** ในฟิลด์ **สคริปต์อินไลน์** ให้ป้อนรหัสสคริปต์อินไลน์ ดังที่แสดงในตัวอย่างต่อไปนี้ภาพประกอบ

    ![รหัสสคริปต์อินไลน์ในฟิลด์สคริปต์อินไลน์สำหรับส่วนย่อยใหม่](media/customer-voice-integration-4.png)

1. เลือก **บันทึก** และจากนั้น เลือก **แก้ไขให้เสร็จสิ้น**
1. เลือก **เผยแพร่** เพื่อเผยแพร่ส่วนย่อย

ส่วนย่อยใหม่ที่มีรหัสสคริปต์อินไลน์ที่ฝังอยู่ขณะนี้พร้อมที่จะเพิ่มลงในเทมเพลตหน้าที่เหมาะสม

## <a name="add-fragments-to-a-template"></a>เพิ่มส่วนย่อยให้กับเทมเพลต

เมื่อคุณสร้างส่วนย่อยที่มีโค้ดฝังตัว Customer Voice คุณต้องเพิ่มไปยังเทมเพลตหน้าที่เชื่อมโยงกับหน้าไซต์ที่คุณต้องการใช้ ในตัวอย่างต่อไปนี้ มีการเพิ่มส่วนย่อยตัวอย่างสามส่วนลงในเทมเพลตหน้ารายละเอียดผลิตภัณฑ์ (PDP)

![ตัวอย่างของส่วนย่อยที่เพิ่มที่เทมเพลต PDP](media/customer-voice-integration-5.png)

หลังจากที่เผยแพร่เทมเพลตที่อัปเดตแล้ว การสํารวจ Customer Voice จะปรากฏขึ้นบนหน้าทั้งหมดที่มีการควบคุมโดยเทมเพลต

หากต้องการทราบข้อมูลเกี่ยวกับเทมเพลต โปรดดูที่ [ทำงานกับเทมเพลต](work-with-templates.md)

## <a name="configure-content-security-policy"></a>กำหนดค่านโยบายความปลอดภัยของเนื้อหา

ตามค่าเริ่มต้น นโยบายความปลอดภัยของเนื้อหา (CSP) ไม่อนุญาตให้เรียกใช้บริการอื่นๆ เว้นแต่จะเสร็จสิ้นการตั้งค่าคอนฟิกเพิ่มเติม ดังนั้น หลังจากที่คุณเผยแพร่เทมเพลตที่อัปเดตแล้ว การโหลดการสํารวจอาจล้มเหลวบนหน้าไซต์ที่เกี่ยวข้อง เมื่อต้องการดูข้อผิดพลาดที่เกี่ยวข้องกับ CSP ให้เปิดเครื่องมือนักพัฒนาเว็บเบราเซอร์ของคุณ (F12) แล้วไปที่หน้าซึ่งมีการสํารวจ ข้อผิดพลาดที่เกี่ยวข้องกับ CSP จะปรากฏในเอาท์พุทคอนโซล

หากต้องการตั้งค่าคอนฟิก CSP ในโปรแกรมสร้างไซต์เพื่อแก้ไขข้อผิดพลาด ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ไปที่ **การตั้งค่าไซต์\> ส่วนขยาย**
1. บนแท็บ **นโยบายความปลอดภัยของเนื้อหา** ให้เพิ่ม `https://customervoice.microsoft.com/` ในคำสั่ง **child-src**
1. เพิ่ม `https://customervoice.microsoft.com/` ลงในคำสั่ง **frame-src**
1. เพิ่ม `https://mfpembedcdnmsit.azureedge.net` และ **.azureedge.net** ไปที่คำสั่ง **img-src**

สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [นโยบายความปลอดภัยของเนื้อหา](manage-csp.md)

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[โมดูลสคริปต์ภายนอก](script-module.md)

[โมดูลเมตาแท็ก](metatags-module.md)

[โมดูลสคริปต์แบบอินไลน์](script-module.md)

[นโยบายความปลอดภัยของเนื้อหา](manage-csp.md)

[ใช้งานส่วนย่อย](work-with-fragments.md)

[ใช้งานเทมเพลต](work-with-templates.md)
