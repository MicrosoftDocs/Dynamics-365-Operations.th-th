---
title: สร้างเท็มเพลตอีเมลสำหรับเหตุการณ์ของธุรกรรม
description: หัวข้อนี้จะอธิบายวิธีการสร้าง อัปโหลด และกำหนดค่าเท็มเพลตอีเมลสำหรับเหตุการณ์ทางของธุรกรรมใน Microsoft Dynamics 365 Commerce
author: bicyclingfool
manager: annbe
ms.date: 06/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: stuharg
ms.search.validFrom: 2020-01-20
ms.dyn365.ops.version: Release 10.0.8
ms.openlocfilehash: 245ca998ef3e6d172df3525f06d7901f3f41b650
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/15/2021
ms.locfileid: "5000802"
---
# <a name="create-email-templates-for-transactional-events"></a>สร้างเท็มเพลตอีเมลสำหรับเหตุการณ์ของธุรกรรม

[!include [banner](includes/banner.md)]

หัวข้อนี้จะอธิบายวิธีการสร้าง อัปโหลด และกำหนดค่าเท็มเพลตอีเมลสำหรับเหตุการณ์ทางของธุรกรรมใน Microsoft Dynamics 365 Commerce

## <a name="overview"></a>ภาพรวม

Dynamics 365 Commerce มีโซลูชันสำเร็จรูปสำหรับการส่งอีเมลที่แจ้งเตือนลูกค้าเกี่ยวกับเหตุการณ์ของธุรกรรม (ตัวอย่างเช่น เมื่อทำการสั่งซื้อ การสั่งซื้อจะพร้อมสำหรับการเบิกสินค้า หรือการจัดส่งสินค้าตามใบสั่ง) หัวข้อนี้จะอธิบายขั้นตอนสำหรับการสร้าง อัปโหลด และกำหนดค่าเท็มเพลตอีเมลที่ใช้ในการส่งอีเมลของธุรกรรม

## <a name="create-an-email-template"></a>สร้างเท็มเพลตอีเมล

ก่อนที่คุณจะสามารถแม็ปเหตุการณ์ของธุรกรรมเฉพาะกับเท็มเพลตอีเมลได้ คุณต้องสร้างเท็มเพลต

ทำตามขั้นตอนเหล่านี้เพื่อสร้างแม่แบบอีเมล

1. ในสำนักงานใหญ่ Commerce ไปยัง **แม่แบบอีเมลขององค์กร** ซึ่งอยู่ภายใต้ **Retail และ Commerce \> การตั้งค่าสำนักงานใหญ่ \> แม่แบบอีเมลขององค์กร** หรือ **การจัดการองค์กร \> การตั้งค่า \> แม่แบบอีเมลขององค์กร**
1. เลือก **ใหม่**
1. ภายใต้ **ทั่วไป** ให้ตั้งค่าฟิลด์ต่อไปนี้

    - **รหัสอีเมล** – รหัสอีเมลเป็นรหัสเฉพาะสำหรับเท็มเพลตและเป็นค่าที่แสดงเมื่อคุณเลือกเท็มเพลตที่จะแม็ปกับเหตุการณ์
    - **คำอธิบายอีเมล์** – คุณสามารถใช้ฟิลด์ทางเลือกนี้เพื่อระบุคำอธิบายของเท็มเพลต ค่าที่คุณป้อนจะปรากฏเฉพาะในศูนย์ควบคุม Commerce เท่านั้น
    - **ชื่อผู้ส่ง** – ชื่อที่คุณป้อนจะปรากฏในฟิลด์ "เริ่มต้น" ของไคลเอนต์อีเมลที่มากที่สุด
    - **อีเมลของผู้ส่ง** – ป้อนที่อยู่อีเมลที่ควรใช้สำหรับอีเมลที่ส่งโดยใช้เท็มเพลตนี้
    - **รหัสภาษาเริ่มต้น** – ฟิลด์นี้จะระบุเวอร์ชันที่แปลเป็นภาษาท้องถิ่นของอีเมลที่ส่งโดยค่าเริ่มต้น ถ้าไม่ได้ระบุภาษาโดยช่องทางที่เรียกใช้เท็มเพลตนี้

1. ใต้ **เนื้อหาข้อความอีเมล** ให้เลือก **ใหม่**
1. ในฟิลด์ **ภาษา** ให้ป้อนภาษาสำหรับเท็มเพลตอีเมล คุณสามารถเพิ่มภาษาและเท็มเพลตที่มีการแปลได้ในภายหลัง
1. ใน **ฟิลด์ชื่อเรื่อง** ให้ป้อนชื่อเรื่องของอีเมลที่ควรปรากฏในฟิลด์ชื่อเรื่องของอีเมล
1. เลือก **แก้ไข** เพื่ออัปโหลดเท็มเพลตอีเมลของคุณ

## <a name="create-an-email-message-body-by-using-html"></a>สร้างเนื้อหาของข้อความอีเมลโดยใช้ HTML

เนื้อหาของข้อความของอีเมลของคุณจะประกอบด้วย HTML คุณสามารถใช้โครงร่าง การกำหนดลักษณะ และการสร้างแบรนด์ที่มี Cascading Style Sheet แบบ HTML (CSS) และแบบอินไลน์ให้ นอกจากนี้คุณยังสามารถใช้รูปภาพได้เช่นกัน ถ้าคุณโฮสต์ไว้บนปลายทางเว็บที่พร้อมใช้งานโดยสาธารณะ เมื่อต้องการเพิ่มรูปภาพ ให้ป้อน URL ของรูปภาพในแอททริบิวต์ **src** ของแท็ก HTML **&lt;img&gt;**

> [!NOTE]
> ไคลเอนต์อีเมลที่กำหนดโครงร่างและข้อจำกัดการกำหนดลักษณะซึ่งอาจจำเป็นต้องมีการปรับปรุง HTML และ CSS ที่คุณใช้สำหรับเนื้อหาของข้อความ เราขอแนะนำให้คุณทำความคุ้นเคยกับแนวทางปฏิบัติที่ดีที่สุดสำหรับการสร้าง HTML ซึ่งจะได้รับการสนับสนุนโดยไคลเอนต์อีเมลที่ได้รับความนิยมมากที่สุด

## <a name="add-placeholders-to-the-email-message-body"></a>เพิ่มตัวยึดลงในเนื้อหาของข้อความอีเมล

อีเมลของคุณสามารถมีตัวยึดที่จะถูกแทนที่ด้วยค่าเฉพาะของลูกค้าและค่าเฉพาะทางธุรกรรมเมื่อมีการสร้างอีเมล ตัวยึดล้อมรอบด้วยสัญลักษณ์เปอร์เซ็นต์ (%) เสมอและถูกแทรกลงในเอกสาร HTML โดยตรง

นี่คือตัวอย่าง

```html
<p>
    Hello %customername%,<br />
    Order number %salesid%, can be picked up from the <b>%pickupstorename%</b> store.
</p>
```

### <a name="order-placeholders-sales-order-level"></a>ตัวยึดใบสั่ง (ระดับใบสั่งขาย)

ตัวยึดต่อไปนี้จะดึงข้อมูลและแสดงข้อมูลที่กำหนดที่ระดับใบสั่งขาย (เมื่อเทียบกับระดับของบรรทัดการขาย)

| ชื่อของตัวยึด    | ค่าของตัวยึด                                                |
|---------------------|------------------------------------------------------------------|
| customername        | ชื่อของลูกค้าที่วางใบสั่ง                   |
| salesid             | รหัสการขายของใบสั่ง                                       |
| deliveryaddress     | ที่อยู่ที่จัดส่งสำหรับใบสั่งที่จัดส่ง                         |
| customeraddress     | ที่อยู่ลูกค้า                                     |
| deliverydate        | วันที่จัดส่งสินค้า                                               |
| shipdate            | วันที่จัดส่ง                                                   |
| modeofdelivery      | วิธีการจัดส่งของใบสั่ง                                  |
| ค่าธรรมเนียม             | ค่าธรรมเนียมรวมสำหรับใบสั่ง                                 |
| ภาษี                 | ภาษีรวมสำหรับใบสั่ง                                     |
| ยอดรวม               | ยอดเงินรวมสำหรับใบสั่ง                                  |
| ordernetamount      | ยอดเงินรวมสำหรับใบสั่ง ลบด้วยภาษีรวม             |
| discount / ส่วนลด            | ส่วนลดรวมสำหรับใบสั่ง                                |
| storename           | ชื่อของร้านค้าที่มีการวางใบสั่ง                |
| storeaddress        | ที่อยู่ของร้านค้าที่วางใบสั่ง                  |
| storeopenfrom       | เวลาเปิดของร้านค้าที่วางใบสั่ง             |
| storeopento         | เวลาปิดของร้านค้าที่วางใบสั่ง             |
| pickupstorename     | ชื่อของร้านค้าที่จะมีการจัดส่งใบสั่ง         |
| pickupstoreaddress  | ที่อยู่ของร้านค้าที่จะมีการจัดส่งใบสั่ง      |
| pickupopenstorefrom | เวลาเปิดของร้านค้าที่จะมีการจัดส่งใบสั่ง |
| pickupopenstoreto   | เวลาปิดของร้านค้าที่จะมีการจัดส่งใบสั่ง |

### <a name="order-line-placeholders-sales-line-level"></a>ตัวยึดบรรทัดใบสั่ง (ระดับบรรทัดการขาย)

ตัวยึดตำแหน่งต่อไปนี้จะดึงข้อมูลและแสดงข้อมูลสำหรับผลิตภัณฑ์แต่ละรายการ (บรรทัด) ในใบสั่งขาย

| ชื่อของตัวยึด               | ค่าของตัวยึด |
|--------------------------------|-------------------|
| productid                      | รหัสผลิตภัณฑ์ของบรรทัด |
| lineproductname                | ชื่อของผลิตภัณฑ์ |
| lineproductdescription         | คำอธิบายเกี่ยวกับผลิตภัณฑ์ |
| linequantity                   | จำนวนของหน่วยที่สั่งสำหรับบรรทัด รวมถึงหน่วยวัด (ตัวอย่างเช่น **ชิ้น** หรือ **คู่**) |
| lineunit                       | หน่วยวัดสำหรับบรรทัด |
| linequantity_withoutunit       | จำนวนของหน่วยที่สั่งสำหรับบรรทัด โดยไม่มีหน่วยวัด |
| linequantitypicked             | เมื่อมีการใช้เหตุการณ์ **PickOrder** จำนวนหน่วยจะถูกจัดส่ง มิฉะนั้นจะเป็น **0** (ศูนย์) |
| linequantitypicked_withoutunit | เมื่อมีการใช้ **เหตุการณ์** จำนวนหน่วยที่จัดส่ง โดยไม่มีหน่วยวัด มิฉะนั้นจะเป็น **0** (ศูนย์) |
| linequantitypicked             | เมื่อมีการใช้เหตุการณ์ **PackOrder** และ **ใบสั่งที่พร้อมสำหรับจัดส่ง** จำนวนหน่วยที่บรรจุ มิฉะนั้นจะเป็น **0** (ศูนย์) |
| linequantitypacked_withoutuom  | เมื่อมีการใช้เหตุการณ์ **PackOrder** และ **ใบสั่งที่พร้อมสำหรับจัดส่ง** จำนวนหน่วยที่บรรจุ โดยไม่มีหน่วยวัด มิฉะนั้นจะเป็น **0** (ศูนย์) |
| linequantityshipped            | **0** เสมอ ยกเว้นเมื่อมีการใช้เหตุการณ์เฉพาะดังที่อธิบายไว้ในแถวถัดไป |
| linequantityshipped_withoutuom | เมื่อมีการใช้เหตุการณ์ **ShipOrder** จำนวนหน่วยที่จัดส่ง โดยไม่มีหน่วยวัด มิฉะนั้นจะเป็น **0** (ศูนย์) |
| lineprice                      | ราคาของการขายต่อหน่วย |
| linenetamount                  | ราคาของรายการหลังจากที่มีการใช้จำนวนหน่วยและส่วนลด |
| linediscount                   | ส่วนลดสำหรับแต่ละหน่วย |
| lineshipdate                   | วันที่จัดส่งสำหรับบรรทัด |
| linedeliverydate               | วันที่จัดส่งสำหรับบรรทัด |
| linedeliverymode               | วิธีการจัดส่งสำหรับบรรทัด |
| linedeliveryaddress            | ที่อยู่ที่จัดส่งสำหรับบรรทัด |
| giftcardnumber                 | หมายเลขบัตรของขวัญสำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ |
| giftcardbalance                | งบของบัตรของขวัญสำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ |
| giftcardmessage                | ข้อความของบัตรของขวัญสำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ |
| giftcardpin                    | หมายเลขรหัสประจำตัวของบัตรของขวัญ สำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ (ตัวยึดตำแหน่งนี้จะใช้กับบัตรของขวัญภายนอกโดยเฉพาะ) |
| giftcardexpiration             | วันหมดอายุของบัตรของขวัญ สำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ (ตัวยึดตำแหน่งนี้จะใช้กับบัตรของขวัญภายนอกโดยเฉพาะ) |
| giftcardrecipientname          | ชื่อของผู้รับบัตรของขวัญ สำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ |
| giftcardbuyername              | ชื่อของผู้ซื้อบัตรของขวัญ สำหรับผลิตภัณฑ์ของชนิดบัตรของขวัญ |

### <a name="format-of-order-line-placeholders-in-the-email-message-body"></a>รูปแบบของตัวยึดบรรทัดใบสั่งในเนื้อหาของข้อความอีเมล

เมื่อคุณสร้าง HTML สำหรับบรรทัดใบสั่งแต่ละบรรทัดในเนื้อหาของข้อความอีเมล ให้ใช้บล็อกที่ซ้ำกันของ HTML และตัวยึดสำหรับบรรทัดที่มีตัวยึดตำแหน่งต่อไปนี้ที่จะใส่ไว้ภายในแท็กข้อคิดเห็นของ HTML

```html
<!--%tablebegin.salesline%-->

(Insert the repeating block of HTML and placeholders for individual lines here.)

<!--%tableend.salesline%-->
```

นี่คือตัวอย่าง

```HTML
<table>
    <tr>
        <td>Product name</td>
        <td>Quantity</td>
        <td>Price</td>
    </tr>
    <!--%tablebegin.salesline%-->
    <tr>
        <td>%lineproductname%</td>
        <td>%linequantity_withoutunit%</td>
        <td>%lineprice%</td>
    </tr>
    <!--%tableend.salesline%-->
</table>
```

## <a name="create-a-template-for-emailed-receipts"></a>สร้างเท็มเพลตสำหรับใบเสร็จรับเงินที่ส่งทางอีเมล

ใบเสร็จรับเงินสามารถส่งอีเมลถึงลูกค้าที่ทำการซื้อสินค้าที่การขายหน้าร้าน (POS) โดยทั่วไปขั้นตอนสำหรับการสร้างเท็มเพลตใบเสร็จรับเงินที่ส่งทางอีเมลนั้นจะเหมือนกับขั้นตอนสำหรับการสร้างเท็มเพลตสำหรับเหตุการณ์ของธุรกรรมอื่นๆ อย่างไรก็ตามต้องมีการเปลี่ยนแปลงต่อไปนี้:

- รหัสอีเมลของเท็มเพลตอีเมลจะต้องเป็น **emailRecpt**
- ข้อความของใบเสร็จถูกแทรกลงในอีเมลโดยใช้ตัวยึด **%message%** เมื่อต้องการตรวจสอบให้แน่ใจว่ามีการแสดงเนื้อหาของใบเสร็จอย่างถูกต้อง ให้ล้อมรอบตัวยึด **%message%** ด้วยแท็ก HTML **&lt;pre&gt;** และ **&lt;/pre&gt;**
- การแบ่งบรรทัดใน HTML สำหรับส่วนหัวและส่วนท้ายของอีเมลจะถูกแปลงเป็นแท็ก HTML **&lt;br /&gt;** เพื่อให้เนื้อหาของใบเสร็จแสดงผลได้อย่างถูกต้อง ถ้าต้องการกำจัดพื้นที่แนวตั้งที่ไม่พึงประสงค์ในอีเมลใยเสร็จรับเงินของคุณ ให้ลบตัวแบ่งบรรทัดออกจากพื้นที่ใดๆ ใน HTML ซึ่งไม่จำเป็นต้องใช้พื้นที่แนวตั้ง

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการกำหนดค่าใบเสร็จทางอีเมล ดูที่ [กำหนดค่าใบเสร็จทางอีเมล](https://docs.microsoft.com/dynamicsax-2012/appuser-itpro/set-up-email-receipts)

## <a name="upload-the-email-html"></a>อัปโหลด HTML ของอีเมล

หลังจากที่คุณได้สร้างและทดสอบ HTML สำหรับเนื้อหาของข้อความของคุณแล้ว คุณต้องอัปโหลด HTML ไปที่ศูนย์ควบคุม Commerce ในขณะนี้ไม่สามารถส่งออกอีเมล HTML ได้ ดังนั้นคุณต้องรักษาสำเนาของหลักของ HTML ภายนอกศูนย์ควบคุม Commerce ของคุณ

เมื่อต้องการอัปโหลด HTML เท็มเพลตอีเมลใหม่หรือที่แก้ไข ให้ทำตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุมของ Commerce ให้ไปที่ **การขายปลีกและ Commerce \> การตั้งค่าศูนย์ควบคุม \> เท็มเพลตอีเมลขององค์กร**
1. เลือกแถวสำหรับภาษาที่คุณต้องการเพิ่มหรือแทนที่ HTML อีกทางหนึ่งคือเลือก **สร้าง** เพื่อสร้างแถวสำหรับภาษาใหม่
1. เลือก **แก้ไข**
1. ในกล่องโต้ตอบที่ปรากฏ เลือก **เรียกดู** เรียกดูเอกสาร HTML ที่คุณต้องการอัปโหลด เลือกเอกสาร แล้วเลือก **เปิด**
1. เลือก **อัปโหลด**
1. หลังจากที่ HTML ของอีเมลของคุณปรากฏในหน้าต่างแสดงตัวอย่าง ให้เลือก **ตกลง**
1. ตรวจสอบให้แน่ใจว่ามีการเลือกกล่องกาเครื่องหมาย **มีเนื้อหา** สำหรับแถว

ถ้าคุณได้ตั้งกำหนดค่าศูนย์ควบคุม Commerce ไว้แล้วเพื่อส่งอีเมล อีเมลใหม่หรือที่อัปเดตแล้วของคุณจะถูกส่งไปยังลูกค้าทั้งหมดที่ทำธุรกรรมที่เรียกใช้เหตุการณ์ที่ถูกแม็ปกับเท็มเพลต

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการกำหนดค่าอีเมลใน Dynamics 365 Commerce ดูที่ [กำหนดค่าและส่งอีเมล](../fin-ops-core/fin-ops/organization-administration/configure-email.md)

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม 

[ตั้งค่าโพรไฟล์การแจ้งเตือนทางอีเมล](email-notification-profiles.md)

[ตั้งค่าคอนฟิกและส่งอีเมล](../fin-ops-core/fin-ops/organization-administration/configure-email.md)

[ตั้งค่าใบเสร็จทางอีเมล](https://docs.microsoft.com/dynamicsax-2012/appuser-itpro/set-up-email-receipts)

[ส่งใบเสร็จทางอีเมลจาก Modern POS](email-receipts.md)
