---
title: คำนวณความพร้อมของสินค้าคงคลังสำหรับช่องทางการขายปลีก
description: หัวข้อนี้จะอธิบายวิธีการที่บริษัทสามารถใช้ Microsoft Dynamics 365 Commerce เพื่อดูความพร้อมความพร้อมใช้งานโดยประมาณสำหรับผลิตภัณฑ์ในช่องทางออนไลน์และร้านค้า
author: hhainesms
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: fdf6df7e393bcc401e770bd1b8afcaedcadc2660
ms.sourcegitcommit: 593438a145672c55ff6a910eabce2939300b40ad
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/23/2021
ms.locfileid: "5937445"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="95440-103">คำนวณความพร้อมของสินค้าคงคลังสำหรับช่องทางการขายปลีก</span><span class="sxs-lookup"><span data-stu-id="95440-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="95440-104">หัวข้อนี้จะอธิบายวิธีการที่บริษัทสามารถใช้ Microsoft Dynamics 365 Commerce เพื่อดูความพร้อมความพร้อมใช้งานโดยประมาณสำหรับผลิตภัณฑ์ในช่องทางออนไลน์และร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-inventory-availability"></a><span data-ttu-id="95440-105">ความถูกต้องของความพร้อมของสินค้าคงคลัง</span><span class="sxs-lookup"><span data-stu-id="95440-105">Accuracy of inventory availability</span></span>

<span data-ttu-id="95440-106">Commerce ใช้เซิร์ฟเวอร์และฐานข้อมูลจำนวนมากเพื่อให้แน่ใจว่ามีการขยายและประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="95440-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="95440-107">ดังนั้น จึงเป็นเรื่องสำคัญอย่างยิ่งที่คุณเข้าใจว่ามูลค่าสินค้าคงคลังที่พร้อมใช้งานที่ได้รับมาจากแอพลิเคชันการขายหน้าร้าน (POS) แอพลิเคชันโปรแกรมมิ่งอินเทอร์เฟสของความพร้อมของสินค้าคงคลังอีคอมเมิร์ซ(APIs) และหน้าสินค้าคงคลังคงเหลือในศูนย์ควบคุม Commerce อาจไม่ถูกต้อง 100 เปอร์เซ็นต์ในเวลาจริง</span><span class="sxs-lookup"><span data-stu-id="95440-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce headquarters might not be 100 percent accurate in real time.</span></span> <span data-ttu-id="95440-108">ถ้าธุรกรรมที่สร้างขึ้นสำหรับผลิตภัณฑ์ในช่องทางออนไลน์หรือร้านค้ายังไม่ได้ซิงค์กับเซิร์ฟเวอร์ศูนย์ควบคุม หน้าสินค้าคงคลังคงเหลือในศูนย์ควบคุม อาจไม่แสดงมูลค่าสินค้าคงคลังตามเวลาจริงที่ถูกต้องสำหรับผลิตภัณฑ์ดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="95440-108">If transactions that are created for products in the online or store channel haven't yet been synced to headquarters, the on-hand inventory pages in headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="95440-109">ตรงกันข้าม ถ้าคุณได้ตั้งค่าคอนฟิกบริษัทของคุณเพื่อให้ผู้ใช้ในศูนย์ควบคุม หรือแอพลิเคชันแบบรวมอื่นๆ สามารถขาย ได้รับ ส่งคืน หรือปรับปรุงสินค้าคงคลังออกจากร้านค้าหรือคลังสินค้าออนไลน์ ช่องทาง POS หรือออนไลน์อาจไม่มีข้อมูลทั้งหมดที่จำเป็นสำหรับการแสดงค่าในเวลาจริงที่ถูกต้องสำหรับสินค้า</span><span class="sxs-lookup"><span data-stu-id="95440-109">Conversely, if you configured your company so that users in headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show accurate real-time values for items.</span></span>

<span data-ttu-id="95440-110">คุณควรเข้าใจว่าข้อมูลความพร้อมใช้งานคงเหลือทั้งหมดที่ระบุไว้ในระหว่างวันดำเนินงานถือเป็นมูลค่าที่ประมาณการไว้</span><span class="sxs-lookup"><span data-stu-id="95440-110">It's critical to understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="95440-111">ดังนั้น ถ้าคุณพยายามที่จะเปรียบเทียบข้อมูลสินค้าคงคลังคงเหลือที่แอพลิเคชันให้พร้อมกับสินค้าคงคลังทางกายภาพจริงบนชั้นวาง หรือหากคุณพยายามที่จะเปรียบเทียบค่าคงเหลือที่แสดงอยู่ใน POS โดยมีข้อมูลคงเหลือที่คุณค้นหาสำหรับคลังสินค้าเดียวกันในศูนย์ควบคุม ค่าอาจแตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="95440-111">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in headquarters, the values might differ.</span></span> <span data-ttu-id="95440-112">ความแตกต่างนี้ในระหว่างวันดำเนินงานถูกคาดไว้และไม่ควรมีการพิจารณาถึงปัญหา</span><span class="sxs-lookup"><span data-stu-id="95440-112">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="95440-113">ถ้าคุณต้องการตรวจสอบความถูกต้องของข้อมูลและตรวจสอบให้แน่ใจว่าค่าที่ระบุไว้ใน POS, APIs และศูนย์ควบคุม จะจับคู่หน่วยทางกายภาพจริงที่คุณพบในร้านค้าหรือชั้นคลังสินค้าของคุณ เวลาที่ดีที่สุดในการทำเช่นนั้นคือหลังจากการดำเนินการของช่องทางได้หยุดทำงานสำหรับวันนั้น และธุรกรรมทั้งหมดถูกซิงค์ระหว่างศูนย์ควบคุมและช่องทางอย่างถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="95440-113">If you want to audit data and make sure that the values provided in POS, APIs, and headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between headquarters and the channels.</span></span>

## <a name="channel-side-inventory-calculation"></a><span data-ttu-id="95440-114">การคํานวณสินค้าคงคลังฝั่งช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-114">Channel-side inventory calculation</span></span>

<span data-ttu-id="95440-115">การคํานวณสินค้าคงคลังฝั่งช่องทางเป็นระบบที่ใช้ข้อมูลสินค้าคงคลังช่องทางที่รู้จักล่าสุด ในศูนย์ควบคุม Commerce เป็นพื้นฐาน จากนั้นปัจจัยต่างๆ ในการเปลี่ยนแปลงสินค้าคงคลังเพิ่มเติมที่เกิดขึ้นทางด้านช่องทางซึ่งไม่ได้รวมอยู่ในพื้นฐานนั้น เพื่อคํานวณปริมาณคงคลังคงเหลือที่ประเมินไว้ใกล้เวลาจริง</span><span class="sxs-lookup"><span data-stu-id="95440-115">The channel-side inventory calculation is a mechanism that takes the last-known channel inventory data in Commerce headquarters as a baseline, and then factors in additional inventory changes that occurred on the channel side that aren't included in that baseline to calculate a near-real-time estimated on-hand inventory.</span></span> 

<span data-ttu-id="95440-116">การเปลี่ยนแปลงสินค้าคงคลังต่อไปนี้จะพิจารณาในตรรกะการคํานวณสินค้าคงคลังฝั่งช่องทางในปัจจุบัน:</span><span class="sxs-lookup"><span data-stu-id="95440-116">The following inventory changes are currently considered in the channel-side inventory calculation logic:</span></span>

- <span data-ttu-id="95440-117">สินค้าคงคลังที่ขายผ่านใบสั่งเงินสด และสินค้ายกไปในร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-117">Inventory sold through cash-and-carry orders in store</span></span>
- <span data-ttu-id="95440-118">สินค้าคงคลังที่ขายผ่านใบสั่งของลูกค้าในร้านค้าหรือช่องทางออนไลน์</span><span class="sxs-lookup"><span data-stu-id="95440-118">Inventory sold through customer orders in store or online channel</span></span>
- <span data-ttu-id="95440-119">สินค้าคงคลังที่ส่งคืนไปยังร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-119">Inventory returned to store</span></span>
- <span data-ttu-id="95440-120">สินค้าคงคลังที่เติมสินค้า (เบิกสินค้า แพ็ค จัดส่ง) จากคลังสินค้าของร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-120">Inventory fulfilled (pick, pack, ship) from store warehouse</span></span>

<span data-ttu-id="95440-121">หากต้องการใช้การคํานวณสินค้าคงคลังฝั่งช่องทาง เนื่องจากต้องส่งสแน็ปช็อตรอบระยะเวลาของสินค้าคงคลังจากศูนย์ควบคุม ซึ่งสร้างโดยงาน **ความพร้อมใช้งานของผลิตภัณฑ์** ไปยังฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-121">To use the channel-side inventory calculation, as a prerequisite a periodic snapshot of inventory data from headquarters created by the **Product availability** job must be sent to the channel databases.</span></span> <span data-ttu-id="95440-122">สแนปช็อตแสดงถึงข้อมูลที่ศูนย์ควบคุมมีเกี่ยวกับความพร้อมของสินค้าคงคลังสำหรับชุดที่กำหนดของผลิตภัณฑ์ หรือผลิตภัณฑ์ย่อยและคลังสินค้า</span><span class="sxs-lookup"><span data-stu-id="95440-122">The snapshot represents the information that headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="95440-123">รวมถึงเฉพาะธุรกรรมของสินค้าคงคลังที่ประมวลผลและลงรายการบัญชีในศูนย์ควบคุมในเวลา ที่มีการใช้สแนปช็อตเท่านั้น และอาจไม่ถูกต้อง 100 เปอร์เซ็นต์ในเวลาจริง เนื่องจากการประมวลผลการขายคงที่ที่เกิดขึ้นระหว่างเซิร์ฟเวอร์ที่กระจายไป</span><span class="sxs-lookup"><span data-stu-id="95440-123">It includes only the inventory transactions that were processed and posted in headquarters at the time when the snapshot was taken, and it might not be 100 percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

- <span data-ttu-id="95440-124">ถ้ามีการขายสินค้าคงคลังสำหรับผลิตภัณฑ์ในร้านค้าผ่านทางการขายที่มีการชำระเงินด้วยเงินสดและการดำเนินการในใบสั่งของลูกค้าแบบอะซิงโครนัสในแอพลิเคชัน POS ศูนย์ควบคุมจะไม่มีข้อมูลเกี่ยวกับธุรกรรมการออกใช้สินค้าคงคลังที่เกี่ยวข้องสำหรับการขายในทันที</span><span class="sxs-lookup"><span data-stu-id="95440-124">If inventory was sold for a product in a store through a cash-and-carry or asynchronous customer order sale in the POS application, headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="95440-125">ศูนย์ควบคุมจะมีข้อมูลเกี่ยวกับสินค้าคงคลังที่ขายสำหรับชนิดของการขายร้านค้าเหล่านี้เท่านั้น หลังจากงาน P อัปโหลดธุรกรรมที่เกี่ยวข้องจากฐานข้อมูลช่องทางของร้านค้าเข้าสู่ศูนย์ควบคุม และใบสั่งขายที่เกี่ยวข้องจะถูกสร้างขึ้นผ่านการลงรายการบัญชีใบแจ้งยอดหรือกระบวนการลงรายการบัญชีของฟีดแบบต่อเนื่อง</span><span class="sxs-lookup"><span data-stu-id="95440-125">Headquarters will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into headquarters and the related sales orders are created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="95440-126">กระบวนการในการสร้างใบสั่งในศูนย์ควบคุม จะสร้างธุรกรรมสินค้าคงคลังที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="95440-126">The process of creating the orders in headquarters creates the related inventory transactions.</span></span> 
- <span data-ttu-id="95440-127">สำหรับใบสั่งของช่องทางอีคอมเมิร์ซ ศูนย์ควบคุมมีข้อมูลเกี่ยวกับธุรกรรมสินค้าคงคลังเฉพาะหลังจากที่ธุรกรรมถูกส่งไปยังศูนย์ควบคุม ผ่านงาน P และกระบวนการซิงโครไนส์ใบสั่งเสร็จสมบูรณ์แล้ว</span><span class="sxs-lookup"><span data-stu-id="95440-127">For e-commerce channel orders, headquarters has information about the inventory transactions only after the transactions are sent to headquarters through the P-job and the order synchronization process is completed.</span></span>

<span data-ttu-id="95440-128">เมื่อต้องการใช้สแนปช็อตของสินค้าคงคลังในศูนย์ควบคุม Commerce ให้ทำตามขั้นตอนเหล่านี้</span><span class="sxs-lookup"><span data-stu-id="95440-128">To take a snapshot of inventory in Commerce headquarters, follow these steps.</span></span>

1. <span data-ttu-id="95440-129">ไปที่ **Retail และ Commerce \> Retail และ Commerce IT \> ผลิตภัณฑ์และสินค้าคงคลัง \> ความพร้อมใช้งานของผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="95440-129">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="95440-130">เลือก **ตกลง** เพื่อรันงาน **ความพร้อมใช้งานของผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="95440-130">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="95440-131">คุณยังสามารถจัดกำหนดการของงานให้รันในชุดงานได้ด้วย</span><span class="sxs-lookup"><span data-stu-id="95440-131">You can also schedule this job to run in batch.</span></span>

<span data-ttu-id="95440-132">หลังจากที่งาน **ความพร้อมใช้งานของผลิตภัณฑ์** เสร็จสิ้นการรันแล้ว ข้อมูลที่ถูกบันทึกต้องถูกผลักดันให้กับฐานข้อมูลช่องทางอีคอมเมิร์ซ เพื่อให้มีการพิจารณาสแนปช็อตสินค้าคงคลังของศูนย์ควบคุมล่าสุดอยู่ในการคำนวณสินค้าคงคลังคงเหลือที่มีการประเมินฝั่งช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-132">After the **Product availability** job has finished running, the data that was captured must be pushed to the channel databases, so that the latest headquarters inventory snapshot can be considered in the channel-side calculation of estimated on-hand inventory.</span></span>

<span data-ttu-id="95440-133">หากต้องการซิงค์ข้อมูลสแนปช็อตจากศูนย์ควบคุมไปยังฐานข้อมูลช่องทางของคุณ ให้ปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="95440-133">To sync snapshot data from headquarters to your channel databases, follow these steps.</span></span>

1. <span data-ttu-id="95440-134">ไปยัง **การขายปลีกและการค้า \> การขายปลีกและไอทีเชิงพาณิชย์ \> กำหนดการการจัดจำหน่าย**</span><span class="sxs-lookup"><span data-stu-id="95440-134">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="95440-135">รันงาน **1130** (**ความพร้อมใช้งานของผลิตภัณฑ์**) เพื่อซิงค์ข้อมูลสแนปช็อตที่งาน **ความพร้อมใช้งานของผลิตภัณฑ์** ถูฉสร้างขึ้นจากศูนย์ควบคุม ไปยังฐานข้อมูลช่องทางของคุณ</span><span class="sxs-lookup"><span data-stu-id="95440-135">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job has created from headquarters to your channel databases.</span></span>

## <a name="inventory-availability-apis-for-e-commerce"></a><span data-ttu-id="95440-136">API ความพร้อมของสินค้าคงคลังสำหรับอีคอมเมิร์ซ</span><span class="sxs-lookup"><span data-stu-id="95440-136">Inventory availability APIs for e-commerce</span></span>

<span data-ttu-id="95440-137">Commerce มี API ต่อไปนี้ให้กับสถานการณ์ e-commerce เพื่อสอบถามความพร้อมของสินค้าคงคลังของผลิตภัณฑ์:</span><span class="sxs-lookup"><span data-stu-id="95440-137">Commerce provides the following APIs for e-commerce scenarios to query inventory availability of a product:</span></span>

- <span data-ttu-id="95440-138">**GetEstimatedAvailability** – ใช้ API นี้สอบถามสินค้าคงคลังเกี่ยวกับผลิตภัณฑ์หรือผลิตภัณฑ์ย่อยในคลังสินค้าช่องทางออนไลน์หรือคลังสินค้าที่เชื่อมโยงกับกลุ่ม การเติมสินค้าของช่องทางออนไลน์</span><span class="sxs-lookup"><span data-stu-id="95440-138">**GetEstimatedAvailability** – Use this API to query inventory for a product or product variant in the online channel warehouse or warehouses that are linked to the online channel's fulfillment group.</span></span>
- <span data-ttu-id="95440-139">**GetEstimatedProductWarehouseAvailability** – ใช้ API นี้เพื่อสอบถามสินค้าคงคลังสำหรับผลิตภัณฑ์หรือผลิตภัณฑ์ย่อยจากคลังสินค้าหนึ่งๆ</span><span class="sxs-lookup"><span data-stu-id="95440-139">**GetEstimatedProductWarehouseAvailability** – Use this API to query inventory for a product or product variant from a specific warehouse.</span></span>

> [!NOTE]
> <span data-ttu-id="95440-140">APIs เหล่านี้จะแทนที่ APIs ของ **GetProductAvailabilities** และ **GetAvailableInventoryNearby** ใน Commerce รุ่น 10.0.7 และรุ่นก่อนหน้า</span><span class="sxs-lookup"><span data-stu-id="95440-140">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Commerce release 10.0.7 and earlier.</span></span>

<span data-ttu-id="95440-141">ทั้ง API ภายในจะใช้ตรรกะการคํานวณฝั่งช่องทางและส่งคืนปริมาณที่ **พร้อมใช้งานจริง** ที่ประเมินไว้ ปริมาณที่ **พร้อมใช้งานทั้งหมด** **หน่วยวัด (UoM)** และ **ระดับสินค้าคงคลัง** ของผลิตภัณฑ์และคลังสินค้าที่ร้องขอ</span><span class="sxs-lookup"><span data-stu-id="95440-141">Both APIs internally use the channel-side calculation logic and return estimated **physical available** quantity, **total available** quantity, **unit of measure (UoM)**, and **inventory level** for the requested product and warehouse.</span></span> <span data-ttu-id="95440-142">ค่าที่ส่งคืนสามารถแสดงบนไซต์อีคอมเมิร์ซของคุณ ถ้าคุณต้องการ หรือสามารถใช้เพื่อทริกเกอร์ตรรกะทางธุรกิจอื่นๆ บนไซต์อีคอมเมิร์ซของคุณได้</span><span class="sxs-lookup"><span data-stu-id="95440-142">The returned values can be shown on your e-commerce site if you want, or they can be used to trigger other business logic on your e-commerce site.</span></span> <span data-ttu-id="95440-143">ตัวอย่างเช่น คุณสามารถป้องกันไม่ให้การซื้อผลิตภัณฑ์มีระดับสินค้าคงคลัง "ไม่มีในสินค้าคงคลัง"</span><span class="sxs-lookup"><span data-stu-id="95440-143">For example, you can prevent the purchase of products with an "out of stock" inventory level.</span></span>

<span data-ttu-id="95440-144">ถึงแม้ว่า APIs อื่นๆ ที่มีอยู่ใน Commerce สามารถไปยังศูนย์ควบคุมได้โดยตรงเพื่อดึงปริมาณคงเหลือสำหรับผลิตภัณฑ์ เราไม่แนะนำให้มีการใช้งานในสภาพแวดล้อมของอีคอมเมิร์ซ เนื่องจากปัญหาประสิทธิภาพที่อาจเกิดขึ้น และผลกระทบที่เกี่ยวข้องที่คำขอบ่อยครั้งเหล่านี้อาจมีอยู่บนเซิร์ฟเวอร์ศูนย์ควบคุม</span><span class="sxs-lookup"><span data-stu-id="95440-144">Although other APIs that are available in Commerce can go directly to headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-commerce environment because of potential performance issues and the impact that these frequent requests can have on your headquarters servers.</span></span> <span data-ttu-id="95440-145">นอกจากนี้ ด้วยการคำนวณฝั่งช่องทาง สอง API ที่กล่าวถึงข้างต้นยังจะสามารถประมาณการความพร้อมของผลิตภัณฑ์ได้อย่างแม่นยำมากขึ้น โดยพิจารณาถึงธุรกรรมที่สร้างขึ้นในช่องทางที่ยังไม่ได้ทราบเกี่ยวกับศูนย์ควบคุม</span><span class="sxs-lookup"><span data-stu-id="95440-145">Additionally, with channel-side calculation, the two APIs mentioned above can provide a more accurate estimate of a product's availability by taking into account the transactions created in the channels that aren’t yet known to headquarters.</span></span>

<span data-ttu-id="95440-146">การใช้ API สองรายการ คุณต้องเปิดใช้งานคุณลักษณะ **การคำนวณความพร้อมใช้งานของผลิตภัณฑ์ที่ปรับให้เหมาะสม** ผ่านพื้นที่ทำงาน **การจัดการคุณลักษณะ** ในศูนย์ควบคุม</span><span class="sxs-lookup"><span data-stu-id="95440-146">To use the two APIs, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in headquarters.</span></span> <span data-ttu-id="95440-147">ถ้าช่องทางออนไลน์และร้านค้าออนไลน์ของคุณใช้คลังสินค้าการเติมสินค้าเดียวกัน คุณต้องเปิดใช้งานคุณลักษณะ **ตรรกะการคํานวณสินค้าคงคลังฝั่งช่องทางอีคอมเมิร์ซขั้นสูง** เพื่อให้มีตรรกะการคํานวณฝั่งช่องทางภายในสอง API เพื่อตัวคูณในธุรกรรมที่ยังไม่ได้ลงรายการบัญชี (เงินสดและการถือครอง ใบสั่งของลูกค้า การส่งคืน) ที่สร้างขึ้นในช่องทางร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-147">If your online and store channels use the same fulfillment warehouses, you must also enable the **Enhanced e-Commerce channel-side inventory calculation logic** feature to have the channel-side calculation logic within the two APIs to factor in the unposted transactions (cash-and-carry, customer orders, returns) created in the store channel.</span></span> <span data-ttu-id="95440-148">คุณจะต้องรันงาน **1070** (**การตั้งค่าคอนฟิกช่องทาง**) หลังจากเปิดใช้งานคุณลักษณะเหล่านี้</span><span class="sxs-lookup"><span data-stu-id="95440-148">You will need to run the **1070** (**Channel configuration**) job after enabling these features.</span></span>

<span data-ttu-id="95440-149">เมื่อต้องการกําหนดว่าควรส่งคืนปริมาณผลิตภัณฑ์ในผลลัพธ์ API อย่างไร ให้ปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="95440-149">To define how product quantity should be returned in the API output, follow these steps.</span></span>

1. <span data-ttu-id="95440-150">ไปที่ **Retail และ Commerce \> การตั้งค่าศูนย์ควบคุม \> พารามิเตอร์ \> พารามิเตอร์ Commerce**</span><span class="sxs-lookup"><span data-stu-id="95440-150">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce parameters**.</span></span>
1. <span data-ttu-id="95440-151">เลือกแท็บ **สินค้าคงคลัง** จากนั้น บนแท็บด่วน **API ที่พร้อมใช้งานของสินค้าคงคลังของ e-Commerce** ตั้งค่าคอนฟิกค่าของการตั้งค่า **ปริมาณใน API เอาท์พุท**</span><span class="sxs-lookup"><span data-stu-id="95440-151">Select the **Inventory** tab, and then on the **Inventory availability APIs for e-Commerce** FastTab configure the value of the **Quantity in API output** setting.</span></span>
1. <span data-ttu-id="95440-152">รันงาน **1070** (**การตั้งค่าคอนฟิกช่องทาง**) เพื่อซิงค์การตั้งค่าล่าสุดไปยังช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-152">Run the **1070** (**Channel configuration**) job to sync the latest setting to channels.</span></span>

<span data-ttu-id="95440-153">การตั้งค่า **ปริมาณในเอาท์พุท API** มีตัวเลือกสามตัวเลือกดังนี้:</span><span class="sxs-lookup"><span data-stu-id="95440-153">The **Quantity in API output** setting provides three options:</span></span>

- <span data-ttu-id="95440-154">**ส่งคืนปริมาณสินค้าคงคลัง** - ปริมาณที่พร้อมใช้งานจริงและปริมาณรวมที่พร้อมใช้งานของผลิตภัณฑ์ที่ร้องขอ จะถูกส่งคืนในเอาท์พุท API</span><span class="sxs-lookup"><span data-stu-id="95440-154">**Return inventory quantity** - Physical available and total available quantity of a requested product are returned in API output.</span></span>
- <span data-ttu-id="95440-155">**ปริมาณสินค้าคงคลังส่งคืนที่ลบบัฟเฟอร์สินค้าคงคลัง** - ปริมาณที่ส่งคืนในผลลัพธ์ของ API จะถูกปรับปรุงโดยหักลบค่าบัฟเฟอร์สินค้าคงคลัง</span><span class="sxs-lookup"><span data-stu-id="95440-155">**Return inventory quantity subtracting inventory buffer** - The quantity returned in the API output is adjusted by subtracting the inventory buffer value.</span></span> <span data-ttu-id="95440-156">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับบัฟเฟอร์สินค้าคงคลัง ให้ดูที่ [การตั้งค่าคอนฟิกบัฟเฟอร์สินค้าคงคลัง และระดับสินค้าคงคลัง](inventory-buffers-levels.md)</span><span class="sxs-lookup"><span data-stu-id="95440-156">For more information about the inventory buffer, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>
- <span data-ttu-id="95440-157">**ไม่ส่งคืนปริมาณสินค้าคงคลัง** - ส่งคืนเฉพาะระดับสินค้าคงคลังในเอาท์พุท API</span><span class="sxs-lookup"><span data-stu-id="95440-157">**Not return inventory quantity** - Only the inventory level is returned in the API output.</span></span> <span data-ttu-id="95440-158">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับระดับสินค้าคงคลัง ให้ดูที่ [การตั้งค่าคอนฟิกบัฟเฟอร์สินค้าคงคลัง และระดับสินค้าคงคลัง](inventory-buffers-levels.md)</span><span class="sxs-lookup"><span data-stu-id="95440-158">For more information about inventory levels, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>

<span data-ttu-id="95440-159">คุณสามารถใช้พารามิเตอร์ API `QuantityUnitTypeValue` เพื่อระบุชนิดหน่วยที่คุณต้องการให้ API ส่งคืนปริมาณ</span><span class="sxs-lookup"><span data-stu-id="95440-159">You can use the `QuantityUnitTypeValue` API parameter to specify the unit type in which you would like the APIs to return quantity.</span></span> <span data-ttu-id="95440-160">พารามิเตอร์นี้สนับสนุนตัวเลือก **หน่วยสินค้าคงคลัง** (ค่าเริ่มต้น) **หน่วยการซื้อ** และ **หน่วยการขาย**</span><span class="sxs-lookup"><span data-stu-id="95440-160">This parameter supports the **inventory unit** (default), **purchase unit**, and **sell unit** options.</span></span> <span data-ttu-id="95440-161">ปริมาณที่ส่งคืนจะถูกปัดเศษเป็นความสอดคล้องของหน่วยวัดที่สอดคล้องกัน (UOM) ในศูนย์ควบคุม</span><span class="sxs-lookup"><span data-stu-id="95440-161">The returned quantity is rounded to the defined precision of the corresponding unit of measure (UOM) in headquarters.</span></span>

<span data-ttu-id="95440-162">API **GetEstimatedAvailability** มีพารามิเตอร์อินพุทต่อไปนี้ เพื่อสนับสนุนสถานการณ์ต่างๆ ของการสอบถาม:</span><span class="sxs-lookup"><span data-stu-id="95440-162">The **GetEstimatedAvailability** API offers the following input parameters to support different query scenarios:</span></span>

- <span data-ttu-id="95440-163">`DefaultWarehouseOnly` - ใช้พารามิเตอร์นี้เพื่อสอบถามสินค้าคงคลังของผลิตภัณฑ์ในคลังสินค้าเริ่มต้นของช่องทางออนไลน์</span><span class="sxs-lookup"><span data-stu-id="95440-163">`DefaultWarehouseOnly` - Use this parameter to query inventory for a product in the online channel's default warehouse.</span></span> 
- <span data-ttu-id="95440-164">`FilterByChannelFulfillmentGroup` และ `SearchArea` - ใช้พารามิเตอร์ทั้งสองนี้เพื่อสอบถามสินค้าคงคลังของสินค้าจากสถานที่เบิกสินค้าทั้งหมด ภายในพื้นที่ค้นหาเฉพาะตาม `longitude` `latitude` และ `radius`</span><span class="sxs-lookup"><span data-stu-id="95440-164">`FilterByChannelFulfillmentGroup` and `SearchArea` - Use these two parameters to query inventory for a product from all pickup locations within a specific search area, based on `longitude`, `latitude`, and `radius`.</span></span> 
- <span data-ttu-id="95440-165">`FilterByChannelFulfillmentGroup` และ `DeliveryModeTypeFilterValue` - ใช้พารามิเตอร์ทั้งสองนี้เพื่อสอบถามสินค้าคงคลังจากคลังสินค้าเฉพาะ ซึ่งเชื่อมโยงกับกลุ่มการเติมสินค้าของช่องทางออนไลน์ และถูกตั้งค่าคอนฟิกเพื่อสนับสนุนวิธีการจัดส่งบางอย่าง</span><span class="sxs-lookup"><span data-stu-id="95440-165">`FilterByChannelFulfillmentGroup` and `DeliveryModeTypeFilterValue` - Use these two parameters to query inventory for a product from specific warehouses that are linked to an online channel's fulfillment group and are configured to support certain modes of delivery.</span></span> <span data-ttu-id="95440-166">พารามิเตอร์ `DeliveryModeTypeFilterValue` สนับสนุนตัวเลือก **ทั้งหมด** (ค่าเริ่มต้น) **การจัดส่ง** และ **การเบิกสินค้า**</span><span class="sxs-lookup"><span data-stu-id="95440-166">The `DeliveryModeTypeFilterValue` parameter supports the **all** (default), **shipping**, and **pickup** options.</span></span> <span data-ttu-id="95440-167">ตัวอย่างเช่น ในสถานการณ์ที่สามารถเติมสินค้าตามใบสั่งออนไลน์จากคลังสินค้าจัดส่งต่างๆ คุณสามารถใช้พารามิเตอร์ทั้งสองดังกล่าวเพื่อสอบถามความพร้อมใช้งานของสินค้าคงคลังของผลิตภัณฑ์ในคลังสินค้าจัดส่งทั้งหมดดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="95440-167">For example, in a scenario where an online order can be fulfilled from multiple shipping warehouses, you can use these two parameters to query a product's inventory availability in all of those shipping warehouses.</span></span> <span data-ttu-id="95440-168">API ในกรณีนี้จะส่งคืนปริมาณคงคลังคงเหลือของผลิตภัณฑ์ และระดับสินค้าคงคลังในแต่ละคลังสินค้าจัดส่ง บวกด้วยปริมาณรวมและระดับสินค้าคงคลังรวมจากคลังสินค้าจัดส่งทั้งหมดในขอบเขตการสอบถาม</span><span class="sxs-lookup"><span data-stu-id="95440-168">The API in this case returns the product's on-hand quantity and inventory level in each of the shipping warehouses, plus an aggregated quantity and an aggregated inventory level from all shipping warehouses in the query scope.</span></span>
 
<span data-ttu-id="95440-169">โมดูล กล่อฃการซื้อ Commerce ตัวเลือกร้านค้า รายการสิ่งที่ต้องการ รถเข็น และไอคอนรถเข็น จะใช้ API และพารามิเตอร์ข้างต้น เพื่อแสดงข้อความระดับสินค้าคงคลังระหว่างไซต์ e-commerce</span><span class="sxs-lookup"><span data-stu-id="95440-169">The Commerce buy box, store selector, wishlist, cart, and cart icon modules consume the APIs and parameters mentioned above to display inventory level messages across the e-commerce site.</span></span> <span data-ttu-id="95440-170">โปรแกรมสร้างไซต์ Commerce มีการตั้งค่าสินค้าคงคลังต่างๆ ในการควบคุมลักษณะการซื้อสินค้าและการซื้อ</span><span class="sxs-lookup"><span data-stu-id="95440-170">Commerce site builder provides various inventory settings to control merchandising and purchase behavior.</span></span> <span data-ttu-id="95440-171">สำหรับข้อมูลเพิ่มเติม ดูที่ [ใช้การตั้งค่าสินค้าคงคลัง](inventory-settings.md)</span><span class="sxs-lookup"><span data-stu-id="95440-171">For more information, see [Apply inventory settings](inventory-settings.md).</span></span>

## <a name="pos-inventory-lookup-with-channel-side-calculation"></a><span data-ttu-id="95440-172">การค้นหาสินค้าคงคลัง POS ด้วยการคํานวณฝั่งช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-172">POS inventory lookup with channel-side calculation</span></span>

<span data-ttu-id="95440-173">ใน Commerce รุ่น 10.0.9 และรุ่นก่อนหน้า การดำเนินการ **การค้นหาสินค้าคงคลัง** ใน POS ใช้การเรียกบริการแบบเรียลไทมไปยังศูนย์ควบคุม เพื่อเรียกดูข้อมูลสินค้าคงคลังสำหรับผลิตภัณฑ์ที่เลือกสำหรับทั้งร้านค้าปัจจุบันของผู้ใช้และร้านค้าอื่นๆ ที่มีการตั้งค่าคอนฟิกสำหรับกลุ่มการเติมสินค้าเป็นส่วนหนึ่งของการตั้งค่าคอนฟิกช่องทางสำหรับร้านค้า</span><span class="sxs-lookup"><span data-stu-id="95440-173">In the Commerce release 10.0.9 and earlier, the **Inventory lookup** operation in POS used a real-time service call to headquarters to get inventory information for the selected product for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="95440-174">ใน Commerce รุ่น 10.0.10 และใหม่กว่า คุณสามารถปิดการเรียกบริการเวลาจริงไปยังศูนย์ควบคุม และใช้การคํานวณฝั่งช่องทางบนเซิร์ฟเวอร์ Commerce แทน เพื่อกําหนดปริมาณคงคลังคงเหลือที่พร้อมใช้งานจริงของร้านค้าและที่ตั้งอื่นใดที่กําหนดไว้ในกลุ่มการเติมสินค้า</span><span class="sxs-lookup"><span data-stu-id="95440-174">In Commerce release 10.0.10 and later, you can turn off real-time service calls to headquarters and instead use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="95440-175">นอกจากนี้ การตั้งค่าคอนฟิกสินค้าคงคลังที่คำนวณโดยช่องทางนี้ยังมีประโยชน์สำหรับสถานที่ซึ่งการเชื่อมต่ออินเทอร์เน็ตไม่น่าเชื่อถือ เนื่องจากคุณไม่จำเป็นต้องออนไลน์เพื่อเรียกการค้นหาสินค้าคงคลังจากศูนย์ควบคุม</span><span class="sxs-lookup"><span data-stu-id="95440-175">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups headquarters.</span></span>

<span data-ttu-id="95440-176">เมื่อการคำนวณด้านข้างช่องทางได้รับการตั้งค่าคอนฟิกและมีการจัดการอย่างถูกต้อง จึงสามารถให้การประเมินที่น่าเชื่อถือมากขึ้นของสินค้าคงคลังของร้านค้าปัจจุบัน เนื่องจากมีการใช้ข้อมูลธุรกรรมที่อยู่ในฐานข้อมูลช่องทาง Commerce แต่ศูนย์ควบคุม อาจยังไม่มีข้อมูลที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="95440-176">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory because it uses the transactional data that is in the Commerce channel database but that headquarters might not yet have information about.</span></span> <span data-ttu-id="95440-177">ตัวอย่างเช่น ถ้าคุณใช้การเรียกบริการแบบเรียลไทม์ที่มีอยู่สำหรับการค้นหาสินค้าคงคลังใน POS ศูนย์ควบคุม อาจจะยังไม่มีข้อมูลเกี่ยวกับการขายเงินสดและการขนส่งที่เพิ่งเกิดขึ้นสำหรับผลิตภัณฑ์</span><span class="sxs-lookup"><span data-stu-id="95440-177">For example, if you use the existing real-time service call for inventory lookups in POS, headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="95440-178">ดังนั้น ค่าสินค้าคงคลังคงเหลือที่ศูนย์ควบคุมส่งคืนสำหรับผลิตภัณฑ์ดังกล่าวอาจจะเกินสินค้าคงคลังคงเหลือจริงของร้านค้าหนึ่งหน่วย</span><span class="sxs-lookup"><span data-stu-id="95440-178">Therefore, the on-hand inventory value that headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="95440-179">อย่างไรก็ตาม ถ้าคุณใช้การคำนวณด้านข้างช่องทาง การขายแบบเงินสดและการขนส่งจะถูกรวมเป็นการคำนวณและหักจากมูลค่าคงเหลือที่แสดงไว้</span><span class="sxs-lookup"><span data-stu-id="95440-179">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="95440-180">ถึงแม้ว่าค่าที่ทั้งการคำนวณด้านช่องทางและการเรียกบริการแบบเรียลไทม์มีให้นั้นเป็นการประเมินสินค้าคงคลังคงเหลือเท่านั้น ค่าที่การคำนวณด้านช่องทางมีให้นั้นมีแนวโน้มที่จะถูกต้องมากกว่าสำหรับร้านค้าปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="95440-180">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

<span data-ttu-id="95440-181">เมื่อต้องการตั้งค่าคอนฟิก POS การดําเนินการ **ค้นหาสินค้าคงคลัง** ในศูนย์ควบคุม เพื่อใช้ตรรกะการคํานวณฝั่งช่องทางและปิดการเรียกบริการตามเวลาจริง ให้ปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="95440-181">To configure the POS **Inventory lookup** operation in headquarters to use the channel-side calculation logic and turn off real-time service call, follow these steps.</span></span>

1. <span data-ttu-id="95440-182">ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์POS \> โพรไฟล์ฟังก์ชัน**</span><span class="sxs-lookup"><span data-stu-id="95440-182">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="95440-183">เลือกโพรไฟล์ฟังก์ชัน</span><span class="sxs-lookup"><span data-stu-id="95440-183">Select a functionality profile.</span></span>
1. <span data-ttu-id="95440-184">บนแท็บด่วน **ฟังก์ชัน** ในส่วน **การคำนวณความพร้อมใช้งานของสินค้าคงคลัง** ให้เปลี่ยนค่าของฟิลด์ **โหมดการคำนวณความพร้อมใช้งานของสินค้าคงคลัง** จาก **บริการแบบเรียลไทม์** เป็น **ช่องทาง**</span><span class="sxs-lookup"><span data-stu-id="95440-184">On the **Functions** FastTab, in the **Inventory availability calculation** section, change the value of **Inventory availability calculation mode** from **Real time service** to **Channel**.</span></span> <span data-ttu-id="95440-185">โดยค่าเริ่มต้น โพรไฟล์ฟังก์ชันทั้งหมดใช้การเรียกบริการแบบเรียลไทม์</span><span class="sxs-lookup"><span data-stu-id="95440-185">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="95440-186">คุณต้องเปลี่ยนค่าของฟิลด์นี้ ถ้าคุณต้องการใช้ตรรกะการคำนวณด้านข้างช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-186">You must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="95440-187">ร้านค้าปลีกทั้งหมดที่เชื่อมโยงกับโพรไฟล์ฟังก์ชันที่เลือกจะได้รับผลกระทบจากการเปลี่ยนแปลงนี้</span><span class="sxs-lookup"><span data-stu-id="95440-187">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="95440-188">จากนั้นคุณต้องซิงค์การเปลี่ยนแปลงกับช่องทางผ่านกระบวนการจัดกำหนดการกระจายในศูนย์ควบคุม โดยดำเนินการตามขั้นตอนเหล่านี้</span><span class="sxs-lookup"><span data-stu-id="95440-188">You must then sync the changes to the channels through the distribution schedule process in headquarters by following these steps.</span></span>

1. <span data-ttu-id="95440-189">ไปยัง **การขายปลีกและการค้า \> การขายปลีกและไอทีเชิงพาณิชย์ \> กำหนดการการจัดจำหน่าย**</span><span class="sxs-lookup"><span data-stu-id="95440-189">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="95440-190">รันงาน **1070** (**การตั้งค่าคอนฟิกช่องทาง**)</span><span class="sxs-lookup"><span data-stu-id="95440-190">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="95440-191">หลังจากที่การตั้งค่าคอนฟิกเสร็จสมบูรณ์ ข้อมูลที่ระบุเกี่ยวกับสินค้าคงคลังที่มีอยู่จริงจะไม่มีการใช้การเรียกบริการแบบเรียลไทม์อีกต่อไป เมื่อผู้ใช้ในแอพลิเคชัน POS ใช้การดำเนินการ **การค้นหาสินค้าคงคลัง** (มุมมองมาตรฐานและเมทริกซ์)</span><span class="sxs-lookup"><span data-stu-id="95440-191">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="95440-192">แต่ข้อมูลเกี่ยวกับสินค้าคงคลังที่มีอยู่จริงสำหรับร้านค้าปัจจุบันและร้านค้าทั้งหมดในกลุ่มการเติมสินค้าจะถูกคำนวณตามสแนปช็อตที่รู้จักล่าสุด ซึ่งถูกจัดส่งไปยังฐานข้อมูลช่องทางจากศูนย์ควบคุม Commerce</span><span class="sxs-lookup"><span data-stu-id="95440-192">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="95440-193">ค่าสแนปช็อตมีการจำกัดเพิ่มเติมโดยการคำนวณด้านของช่องทางเพื่อปรับปรุงค่าที่มีอยู่จริง ตามธุรกรรมการขายหรือการส่งคืนเพิ่มเติมที่มีอยู่สำหรับผลิตภัณฑ์ที่เลือกไว้ในฐานข้อมูลช่องทางที่ไม่ได้รวมอยู่ในสแนปช็อตที่มีการซิงโครไนส์ล่าสุดจากงาน 1130</span><span class="sxs-lookup"><span data-stu-id="95440-193">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="95440-194">ถ้าฐานข้อมูลช่องทางไม่มีข้อมูลธุรกรรมสำหรับคลังสินค้าหรือร้านค้าใดๆ ในกลุ่มการเติมสินค้า จะไม่มีธุรกรรมเพิ่มเติมที่สามารถรวมเป็นการคำนวณค่าอีกครั้งได้</span><span class="sxs-lookup"><span data-stu-id="95440-194">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="95440-195">ดังนั้น การประเมินสินค้าคงคลังคงเหลือที่ดีที่สุดที่สามารถแสดงได้สำหรับคลังสินค้าหรือร้านค้าเหล่านั้นคือ ข้อมูลจากสแนปช็อตของศูนย์ควบคุม Commerce ที่รู้จักล่าสุด</span><span class="sxs-lookup"><span data-stu-id="95440-195">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="95440-196">หน้าจอ **การเติมสินค้าตามใบสั่ง** ของ POS ยังใช้ประโยชน์จากการคำนวณด้านของช่องทางเพื่อแสดงสินค้าคงคลังคงเหลือสำหรับสินค้า เมื่อมีการเลือกรายการการเติมสินค้าของใบสั่ง และผู้ใช้ดูแผง **รายละเอียด** สำหรับสินค้าคงคลังคงเหลือสำหรับสินค้าที่เลือก</span><span class="sxs-lookup"><span data-stu-id="95440-196">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="95440-197">เพิ่มประสิทธิภาพข้อมูลสินค้าคงคลังของคุณ</span><span class="sxs-lookup"><span data-stu-id="95440-197">Optimize your inventory data</span></span>

<span data-ttu-id="95440-198">เพื่อให้แน่ใจในการประเมินสินค้าคงคลังเป็นไปได้ที่ดีที่สุด จึงเป็นเรื่องสำคัญอย่างยิ่งที่คุณจะใช้ชุดงาน Commerce ต่อไปนี้ และรันชุดงานเหล่านี้บ่อยครั้ง:</span><span class="sxs-lookup"><span data-stu-id="95440-198">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="95440-199">**งาน P** – พบงาน P บนหน้า **กำหนดการกระจาย** และควรรันบ่อยๆ</span><span class="sxs-lookup"><span data-stu-id="95440-199">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="95440-200">งานนี้จะนำใบสั่งอีคอมเมิร์ซ ใบสั่งของลูกค้าแบบอะซิงโครนัสที่มีการสร้าง POS และใบสั่งเงินสดและการขนส่งที่ POS สร้างขึ้นจากฐานข้อมูลช่องทางเข้าสู่ศูนย์ควบคุม Commerce เพื่อให้สามารถดำเนินการต่อได้</span><span class="sxs-lookup"><span data-stu-id="95440-200">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="95440-201">จนกว่าข้อมูลนี้จะถูกซิงค์จากช่องทางไปยังศูนย์ควบคุม Commerce ศูนย์ควบคุม Commerce ไม่มีข้อมูลเกี่ยวกับการปรับปรุงสินค้าคงคลังให้กับผลิตภัณฑ์ในคลังสินค้าที่เป็นผลมาจากธุรกรรมดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="95440-201">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="95440-202">**ซิงโครไนส์ใบสั่ง** – งานนี้จะประมวลผลข้อมูลของธุรกรรมดิบในศูนย์ควบคุม Commerce ซึ่งงาน P มีให้และแปลงธุรกรรมใบสั่งซื้อของลูกค้าและแบบอะซิงโครนัสให้เป็นใบสั่งขายในศูนย์ควบคุม Commerce</span><span class="sxs-lookup"><span data-stu-id="95440-202">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="95440-203">จนกว่าจะมีการประมวลผลงานนี้และใบสั่งขายถูกสร้างขึ้น จะไม่มีการสร้างธุรกรรมสินค้าคงคลัง</span><span class="sxs-lookup"><span data-stu-id="95440-203">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="95440-204">ดังนั้น สินค้าคงคลังคงเหลือในศูนย์ควบคุม Commerce จะไม่พิจารณาธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="95440-204">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="95440-205">**คำนวณใบแจ้งยอดธุรกรรมเป็นชุดงาน** – สำหรับธุรกรรมเงินสดและการขนส่งที่สร้างขึ้นในร้านค้า กระบวนการลงรายการบัญชีฟีดแบบต่อเนื่องช่วยให้มั่นใจว่าสินค้าคงคลังที่เกี่ยวข้องกับการขายจะถูกปรับปรุงอย่างมีประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="95440-205">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="95440-206">เมื่อต้องการได้รับการประมวลผลที่มีประสิทธิภาพสูงสุดของธุรกรรมสินค้าคงคลังสำหรับใบสั่งแบบเงินสดและการขนส่ง ตรวจสอบให้แน่ใจว่าคุณตั้งค่าคอนฟิกระบบของคุณให้ใช้ [การลงรายการบัญชีฟีดแบบต่อเนื่อง](./trickle-feed.md)</span><span class="sxs-lookup"><span data-stu-id="95440-206">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](./trickle-feed.md).</span></span>
- <span data-ttu-id="95440-207">**ลงรายการบัญชีใบแจ้งยอดธุรกรรมเป็นชุดงาน** – งานนี้ยังต้องใช้สำหรับการลงรายการบัญชีฟีดแบบต่อเนื่องอีกด้วย</span><span class="sxs-lookup"><span data-stu-id="95440-207">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="95440-208">นี่จะเป็นไปตามงาน **คำนวณใบแจ้งยอดธุรกรรมเป็นชุดงาน**</span><span class="sxs-lookup"><span data-stu-id="95440-208">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="95440-209">งานนี้จะลงรายการบัญชีใบแจ้งยอดที่มีการคำนวณอย่างเป็นระบบ ดังนั้นจึงมีการสร้างใบสั่งขายสำหรับการขายแบบเงินสดและการขนส่งในศูนย์ควบคุม Commerce และศูนย์ควบคุม Commerce จะสะท้อนถึงสินค้าคงคลังของร้านค้าของคุณได้อย่างถูกต้องมากขึ้น</span><span class="sxs-lookup"><span data-stu-id="95440-209">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="95440-210">**ความพร้อมใช้งานของผลิตภัณฑ์** – งานนี้สร้างสแนปช็อตของสินค้าคงคลังจากศูนย์ควบคุม Commerce</span><span class="sxs-lookup"><span data-stu-id="95440-210">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="95440-211">**1130 (ความพร้อมใช้งานของผลิตภัณฑ์)** – งานนี้พบบนหน้า **กำหนดการกระจาย** และควรรันทันทีหลังจากงาน **ความพร้อมใช้งานของผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="95440-211">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="95440-212">งานนี้จะขนส่งข้อมูลสแนปช็อตของสินค้าคงคลังจากศูนย์ควบคุม Commerce ไปยังฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="95440-212">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

> [!NOTE]
> - <span data-ttu-id="95440-213">แนวทางปฏิบัติเพื่อรันงาน **พร้อมของผลิตภัณฑ์** และ **1130** เป็นรายชั่วโมง และการจัดกำหนดการงาน P ซิงโครไนส์ใบสั่ง และงานที่เกี่ยวข้องกับการลงรายการบัญชีขตามฟีดแบบต่อเนื่อง ด้วยความถี่เดียวกันหรือสูงกว่า</span><span class="sxs-lookup"><span data-stu-id="95440-213">It is a best practice to run the **Product availability** and **1130** jobs on an hourly basis, and to schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>
> - <span data-ttu-id="95440-214">สำหรับเหตุผลด้านประสิทธิภาพการทำงาน เมื่อมีการใช้การคำนวณความพร้อมของสินค้าคงคลังฝั่งช่องทางเพื่อทำให้มีการร้องขอความพร้อมใช้งานของสินค้าคงคลังโดยใช้ API อีคอมเมิร์ซ หรือตรรกะสินค้าคงคลังฝั่งช่องทางของ POS การคำนวณจะใช้แคชเพื่อกำหนดว่าเวลาที่เพียงพอได้ส่งผ่าน เพื่อตรวจสอบการรันตรรกะการคำนวณอีกครั้งหรือไม่</span><span class="sxs-lookup"><span data-stu-id="95440-214">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="95440-215">แคชเริ่มต้นถูกตั้งค่าเป็น 60 วินาที</span><span class="sxs-lookup"><span data-stu-id="95440-215">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="95440-216">ตัวอย่างเช่น คุณเปิดการคำนวณด้านข้างช่องทางสำหรับร้านค้าของคุณและดูสินค้าคงคลังคงเหลือสำหรับผลิตภัณฑ์บนหน้า **การค้นหาสินค้าคงคลัง**</span><span class="sxs-lookup"><span data-stu-id="95440-216">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="95440-217">ถ้ามีการขายผลิตภัณฑ์หนึ่งหน่วยขึ้นไป หน้า **การค้นหาสินค้าคงคลัง** จะไม่แสดงสินค้าคงคลังที่ลดลงจนกว่าแคชจะถูกล้างข้อมูล</span><span class="sxs-lookup"><span data-stu-id="95440-217">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="95440-218">หลังจากที่ผู้ใช้ลงรายการบัญชีธุรกรรมใน POS แล้ว พวกเขาควรรอ 60 วินาที ก่อนที่พวกเขาจะตรวจสอบว่าสินค้าคงคลังคงเหลือลดลงแล้วหรือไม่</span><span class="sxs-lookup"><span data-stu-id="95440-218">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="95440-219">ถ้าสถานการณ์จำลองทางธุรกิจของคุณต้องการเวลาแคชที่น้อยลง โปรดติดต่อเจ้าหน้าที่ฝ่ายสนับสนุนผลิตภัณฑ์ของคุณสำหรับความช่วยเหลือ</span><span class="sxs-lookup"><span data-stu-id="95440-219">If your business scenario requires a smaller cache time, contact your product support representative for assistance.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
