---
title: ภาพรวมของการรวมทางการเงินสำหรับช่องทาง Commerce
description: บทความนี้อธิบายภาพรวมของความสามารถของการรวมทางบัญชีที่พร้อมใช้งานใน Dynamics 365 Commerce
author: EvgenyPopovMBS
ms.date: 12/06/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: josaw
ms.search.validFrom: 2017-06-20
ms.openlocfilehash: 3f1b555a016a56cc41ab397e3708f20482f25f09
ms.sourcegitcommit: 0c927fcb3afd34d870391f05b5393a4673d916e5
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/08/2022
ms.locfileid: "9831871"
---
# <a name="fiscal-integration-overview-for-commerce-channels"></a>ภาพรวมของการรวมทางการเงินสำหรับช่องทาง Commerce

[!include [banner](../includes/banner.md)]

บทความนี้เป็นภาพรวมของความสามารถของการรวมทางบัญชีที่พร้อมใช้งานใน Dynamics 365 Commerce 

การรวมทางบัญชีจะรวมการรวมที่มีอุปกรณ์และบริการทางบัญชีที่หลากหลาย ซึ่งเปิดใช้งานการลงทะเบียนทางบัญชีของการขายที่เกี่ยวข้องกับกฎหมายทางบัญชีท้องถิ่น ที่มีเป้าหมายที่การป้องกันการฉ้อโกงภาษีในอุตสาหกรรมการขายปลีก นี่คือสถานการณ์จำลองทั่วไปบางส่วนที่สามารถครอบคลุมได้โดยใช้การรวมทางบัญชี:

- ลงทะเบียนการขายในอุปกรณ์ทางบัญชีที่ถูกเชื่อมต่อกับการขายหน้าร้าน (POS) เช่น เครื่องพิมพ์ทางบัญชี และพิมพ์ใบเสร็จทางบัญชีสำหรับลูกค้า
- ส่งข้อมูลอย่างปลอดภัยซึ่งเกี่ยวข้องกับการขายและการส่งคืนที่เสร็จสมบูรณ์ใน Retail POS ไปยัง Web Service ภายนอกที่ถูกดำเนินการโดยหน่วยงานภาษี
- ช่วยรับประกันความไม่เปลี่ยนแปลงของข้อมูลธุรกรรมการขายผ่านลายเซ็นดิจิทัล

ฟังก์ชันการรวมทางบัญชีใน คือกรอบงานที่ให้โซลูชันทั่วไปสำหรับการพัฒนาและการแก้ไข/ปรับปรุงตามคำสั่งเพิ่มเติมของการรวมระหว่าง Retail POS และอุปกรณ์และบริการทางบัญชี นอกจากนี้ ฟังก์ชันยังมีตัวอย่างการรวมทางบัญชีที่สนับสนุนสถานการณ์จำลองการขายปลีกพื้นฐานสำหรับประเทศหรือเขตเฉพาะ และทำงานกับอุปกรณ์หรือบริการทางบัญชีเฉพาะ ตัวอย่างการรวมทางบัญชีประกอบด้วยส่วนขยายที่หลากหลายขององค์ประกอบ Commerce และถูกรวมในชุดการพัฒนาซอฟท์แวร์ (SDK) สำหรับข้อมูลเพิ่มเติมเกี่ยวกับตัวอย่างการรวมข้อมูลทางการเงิน ดูที่ [ตัวอย่างการรวมข้อมูลทางการเงินใน Commerce SDK](#fiscal-integration-samples-in-the-commerce-sdk) สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการติดตั้ง และใช้ Commerce SDK ดูที่ [สถาปัตยกรรมของชุดการพัฒนาซอฟต์แวร์ (SDK) ของการขายปลีก](../dev-itpro/retail-sdk/retail-sdk-overview.md)

เพื่อสนับสนุนสถานการณ์จำลองอื่นๆ ที่ไม่ได้รับการสนับสนุนโดยตัวอย่างการรวมทางบัญชี เพื่อรวม Retail POS กับอุปกรณ์และบริการทางบัญชีอื่นๆ เพื่อครอบคลุมความต้องการของประเทศหรือเขตอื่นๆ คุณต้องขยายตัวอย่างการรวมทางบัญชีที่มีอยู่ หรือสร้างตัวอย่างใหม่โดยใช้ตัวอย่างที่มีอยู่เป็นตัวอย่าง

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices-and-services"></a>กระบวนการลงทะเบียนทางบัญชีและตัวอย่างการรวมทางบัญชีสำหรับอุปกรณ์และบริการทางบัญชี

กระบวนการลงทะเบียนทางบัญชีใน Retail POS สามารถประกอบด้วยขั้นตอนอย่างน้อยหนึ่งรายการ แต่ละขั้นตอนเกี่ยวข้องกับการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์เฉพาะในอุปกรณ์หรือบริการทางบัญชีหนึ่งรายการ ส่วนประกอบของโซลูชันต่อไปนี้มีส่วนร่วมในการลงทะเบียนทางบัญชีในอุปกรณ์หรือบริการทางบัญชี

- **ผู้ให้บริการเอกสารทางการเงิน** – องค์ประกอบนี้ทำให้ข้อมูลธุรกรรม/เหตุการณ์เป็นอนุกรมในรูปแบบที่ใช้เพื่อโต้ตอบกับอุปกรณ์หรือบริการทางบัญชี แยกวิเคราะห์การตอบสนองจากอุปกรณ์หรือบริการทางบัญชี และจัดเก็บการตอบสนองในช่องทางของฐานข้อมูล ส่วนขยายยังกำหนดธุรกรรมและเหตุการณ์เฉพาะที่ต้องถูกตั้งค่าคอนฟิก
- **ตัวเชื่อมต่อทางการเงิน** – องค์ประกอบนี้เริ่มต้นการสื่อสารกับอุปกรณ์หรือบริการทางบัญชี ส่งคำขอหรือคำสั่งโดยตรงไปยังอุปกรณ์หรือบริการทางบัญชีที่ขึ้นกับข้อมูลธุรกรรม/เหตุการณ์ ซึ่งถูกแยกจากเอกสารทางการเงินและรับการตอบสนองจากอุปกรณ์หรือบริการทางบัญชี

ตัวอย่างการรวมข้อมูลทางการเงินอาจประกอบด้วยส่วนขยาย Commerce Runtime (CRT) และสถานีฮาร์ดแวร์ และ POS สำหรับผู้ให้บริการเอกสารทางการเงินและตัวเชื่อมต่อทางการเงิน นอกจากนี้ ยังประกอบด้วยการตั้งค่าคอนฟิกส่วนประกอบต่อไปนี้:

- **การตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางการเงิน** – การตั้งค่าคอนฟิกนี้กำหนดวิธีการเอาต์พุตและรูปแบบสำหรับเอกสารทางการเงิน นอกจากนี้ ยังประกอบด้วยการแมปข้อมูลสำหรับภาษีและวิธีการการชำระเงิน เพื่อทำให้ข้อมูลจาก Retail POS เข้ากันได้กับค่าที่ถูกกำหนดไว้ล่วงหน้าในเฟิร์มแวร์ของอุปกรณ์หรือบริการทางบัญชี
- **การตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงิน** – การตั้งค่าคอนฟิกนี้กำหนดการสื่อสารทางกายภาพกับอุปกรณ์หรือบริการทางการเงินเฉพาะ

กระบวนการลงทะเบียนทางบัญชีสำหรับการลงทะเบียน POS เฉพาะ ถูกกำหนดโดยการตั้งค่าที่สอดคล้องกันในโพรไฟล์ฟังก์ชัน POS สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางบัญชี อัปโหลดผู้ให้บริการเอกสารทางการเงินและการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงิน และเปลี่ยนแปลงพารามิเตอร์การตั้งค่าคอนฟิก ดู [ตั้งค่ากระบวนการลงทะเบียนทางบัญชี](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).

> [!NOTE]
> หากคุณต้องการอุปกรณ์สำหรับการดําเนินงานที่ไม่ใช่ทางการเงิน เช่น การค้นหาแค็ตตาล็อกผลิตภัณฑ์ การค้นหาลูกค้า หรือการสร้างแบบร่างของธุรกรรม คุณสามารถเลือกอุปกรณ์เหล่านี้เป็นเครื่องบันทึกเงินสดที่มีข้อจํากัดของกระบวนการทางการเงิน ดูข้อมูลเพิ่มเติมที่ [ตั้งค่าเครื่องบันทึกเงินสดที่มีข้อจํากัดการลงทะเบียนทางการเงิน](setting-up-fiscal-integration-for-retail-channel.md#set-up-registers-with-fiscal-registration-restrictions)

ขั้นตอนการลงทะเบียนทางการเงินทั่วไปต่อไปนี้จะเริ่มต้นด้วยเหตุการณ์ใน POS (ตัวอย่างเช่น การกําหนดขั้นสุดท้ายของธุรกรรมการขาย) และดําเนินการตามลำดับขั้นตอนที่กําหนดล่วงหน้าซึ่งเกี่ยวข้องกับส่วนประกอบอื่นๆ ของ Commerce (เช่น CRT และสถานีฮาร์ดแวร์)

1. POS จะร้องขอเอกสารทางการเงินจากกรอบงานการรวมทางการเงิน (FIF)
1. FIF กำหนดว่าเหตุการณ์ปัจจุบันต้องการการลงทะเบียนทางบัญชีหรือไม่
1. โดยขึ้นกับการตั้งค่าของกระบวนการลงทะเบียนทางบัญชี FIF ระบุตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงินที่สอดคล้องกันเพื่อใช้สำหรับการลงทะเบียนทางบัญชี
1. FIF เรียกใช้ผู้ให้บริการเอกสารทางการเงินที่สร้างเอกสารทางการเงิน (ตัวอย่างเช่น เอกสาร XML) ที่แสดงธุรกรรมหรือเหตุการณ์
1. FIF จะส่งคืนเอกสารทางการเงินที่สร้างไปยัง POS
1. POS จะร้องขอให้ FIF ส่งเอกสารทางการเงินไปยังอุปกรณ์หรือบริการทางการเงิน
1. FIF เรียกใช้ตัวเชื่อมต่อทางการเงินที่ประมวลผลเอกสารทางการเงินและส่งไปยังอุปกรณ์หรือบริการทางบัญชี
1. FIF จะส่งคืนการตอบสนองทางการเงิน (นั่นคือการตอบสนองของอุปกรณ์หรือบริการทางการเงิน) ไปยัง POS
1. POS วิเคราะห์การตอบสนองทางบัญชี เพื่อกำหนดว่าการลงทะเบียนทางบัญชีสำเร็จหรือไม่ POS จะร้องขอให้ FIF จัดการข้อผิดพลาดใดๆ ที่เกิดขึ้น ตามความต้องการ 
1. POS ร้องขอให้ FIF ดำเนินการและบันทึกการตอบสนองทางการเงิน
1. ผู้ให้บริการเอกสารทางการเงินประมวลผลการตอบสนองทางการเงิน เนื่องจากเป็นส่วนหนึ่งของการประมวลผลนี้ ผู้ให้บริการเอกสารทางการเงินจะวิเคราะห์การตอบสนองและดึงข้อมูลเพิ่มเติมออกจากการประมวลผลนั้น
1. FIF จะบันทึกการตอบสนองและข้อมูลเพิ่มเติมไปยังฐานข้อมูลช่องทาง
1. POS จะพิมพ์ใบเสร็จผ่านเครื่องพิมพ์ใบเสร็จปกติที่เชื่อมต่อกับสถานีฮาร์ดแวร์ตามต้องการ ใบเสร็จอาจประกอบด้วยข้อมูลที่จำเป็นจากการตอบสนองทางการเงิน
 
ตัวอย่างต่อไปนี้แสดงขั้นตอนการดำเนินการลงทะเบียนทางบัญชีสำหรับอุปกรณ์หรือบริการทางบัญชีทั่วไป
 
### <a name="fiscal-registration-is-done-via-a-device-connected-to-the-hardware-station"></a>การลงทะเบียนทางการเงินเสร็จสิ้นผ่านอุปกรณ์ที่เชื่อมต่อกับสถานีฮาร์ดแวร์

การตั้งค่าคอนฟิกนี้จะใช้เมื่ออุปกรณ์ทางการเงินทางกายภาพ เช่น เครื่องพิมพ์ทางการเงินเชื่อมต่อกับสถานีฮาร์ดแวร์ นอกจากนี้ ยังสามารถใช้ได้เมื่อมีการสื่อสารกับอุปกรณ์หรือบริการทางการเงินผ่านทางซอฟต์แวร์ที่ติดตั้งบนสถานีฮาร์ดแวร์ด้วย ในกรณีนี้ ผู้ให้บริการเอกสารทางการเงินจะอยู่บน CRT และตัวเชื่อมต่อทางการเงินอยู่บนสถานีฮาร์ดแวร์

![การลงทะเบียนทางการเงินเสร็จสิ้นผ่านอุปกรณ์ที่เชื่อมต่อกับสถานีฮาร์ดแวร์](media/FIF-CRT-HWS.png)

### <a name="fiscal-registration-is-done-via-an-external-service"></a>การลงทะเบียนทางการเงินเสร็จสิ้นผ่านทางบริการภายนอก

การตั้งค่าคอนฟิกนี้จะใช้เมื่อลงทะเบียนทางการเงินผ่านบริการภายนอก เช่น บริการผ่านเว็บที่ดําเนินการโดยหน่วยงานจัดเก็บภาษี ในกรณีนี้ ทั้งผู้ให้บริการเอกสารทางการเงินและตัวเชื่อมต่อทางการเงินจะอยู่บน CRT

![การลงทะเบียนทางการเงินเสร็จสิ้นผ่านทางบริการภายนอก](media/FIF-CRT-CRT.png)
 
### <a name="fiscal-registration-is-done-internally-in-the-crt"></a>การลงทะเบียนทางการเงินเสร็จสิ้นแบบภายในใน CRT

การตั้งค่าคอนฟิกนี้จะใช้เมื่อการลงทะเบียนทางการเงินไม่ต้องผ่านอุปกรณ์ทางการเงินภายนอกหรือบริการภายนอก ตัวอย่างเช่น ใช้เมื่อการลงทะเบียนทางการเงินเสร็จสิ้นผ่านการลงชื่อดิจิทัลของธุรกรรมการขาย ในกรณีนี้ ทั้งผู้ให้บริการเอกสารทางการเงินและตัวเชื่อมต่อทางการเงินจะอยู่บน CRT

![การลงทะเบียนทางการเงินเสร็จสิ้นแบบภายในใน CRT](media/FIF-CRT-CRT-SGN.png)

### <a name="fiscal-registration-is-done-via-a-device-or-service-in-the-local-network"></a>การลงทะเบียนทางการเงินเสร็จสิ้นผ่านทางอุปกรณ์หรือบริการในเครือข่ายเฉพาะที่

การตั้งค่าคอนฟิกนี้จะใช้เมื่ออุปกรณ์ทางการเงินหรือบริการทางการเงินที่มีอยู่จริงแสดงอยู่ในเครือข่ายเฉพาะที่ของร้านค้าและเป็น Application Programming Interface (API) ของ HTTPS ในกรณีนี้ ผู้ให้บริการเอกสารทางการเงินจะอยู่บน CRT และตัวเชื่อมต่อทางการเงินอยู่บน POS

![การลงทะเบียนทางการเงินเสร็จสิ้นผ่านทางอุปกรณ์หรือบริการในเครือข่ายเฉพาะที่](media/FIF-CRT-POS.png)

## <a name="error-handling"></a>การจัดการข้อผิดพลาด

กรอบงานการรวมทางบัญชีให้ตัวเลือกต่อไปนี้เพื่อจัดการความล้มเหลว ในระหว่างการลงทะเบียนทางบัญชี:

- **ลองอีกครั้ง** – ตัวดำเนินการสามารถใช้ตัวเลือกนี้ได้ เมื่อความล้มเหลวถูกแก้ปัญหาอย่างรวดเร็ว และการลงทะเบียนทางบัญชีสามารถเรียกใช้ซ้ำได้ ตัวอย่างเช่น ตัวเลือกนี้สามารถใช้ได้เมื่ออุปกรณ์ทางบัญชีไม่ได้ถูกเชื่อมต่อ เครื่องพิมพ์ทางบัญชีไม่มีกระดาษ หรือมีกระดาษติดในเครื่องพิมพ์ทางบัญชี
- **ยกเลิก** – ตัวเลือกนี้อนุญาตให้ตัวดำเนินการเลื่อนการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์ปัจจุบัน ถ้าล้มเหลว หลังจากการลงทะเบียนถูกเลื่อน ตัวดำเนินการสามารถทำงานต่อได้ใน POS และสามารถทำให้การดำเนินการใดๆ เสร็จสมบูรณ์ ซึ่งการลงทะเบียนทางบัญชีไม่ได้ถูกร้องขอ เมื่อเหตุการณ์ใดๆ ที่ต้องการการลงทะเบียนทางบัญชีเกิดขึ้นใน POS (ตัวอย่างเช่น ธุรกรรมใหม่ถูกเปิด กล่องโต้ตอบการจัดการข้อผิดพลาด) ปรากฏโดยอัตโนมัติเพื่อแจ้งเตือนตัวดำเนินการว่า ธุรกรรมก่อนหน้าไม่ไดุ้ถูกลงทะเบียนอย่างถูกต้อง และให้ตัวเลือกการจัดการข้อผิดพลาด
- **ข้าม** – ผู้ปฏิบัติงานสามารถใช้ตัวเลือกนี้เมื่อไม่สามารถทำการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ปัจจุบันให้เสร็จสมบูรณ์ได้ ตัวอย่างเช่น หากเครื่องพิมพ์ทางการเงินไม่อยู่ในลำดับ **และ** การลงทะเบียนทางการเงินสามารถละเว้นได้ภายใต้เงื่อนไขเฉพาะ ตัวอย่างเช่น ตัวเลือกนี้สามารถใช้ได้เมื่อธุรกรรมการขายที่การลงทะเบียนทางบัญชีที่ล้มเหลว สามารถลงทะเบียนได้ในสมุดรายวันกระดาษพิเศษ หลังจากข้ามการลงทะเบียนทางการเงินแล้ว คุณสามารถดําเนินงานปกติใน POS ต่อไปได้ 
- **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** – ผู้ปฏิบัติงานสามารถใช้ตัวเลือกนี้เมื่อธุรกรรมหรือเหตุการณ์ปัจจุบันได้รับการลงทะเบียนจริงในอุปกรณ์ทางการเงินแล้ว ตัวอย่างเช่น มีการพิมพ์ใบเสร็จทางการเงิน แต่ความล้มเหลวเกิดขึ้นเมื่อการตอบสนองทางการเงินจะถูกบันทึกลงในฐานข้อมูลช่องทาง หลังจากเลือกธุรกรรมหรือเหตุการณ์ปัจจุบันเป็นลงทะเบียนแล้ว คุณสามารถดําเนินงานปกติใน POS ต่อไปได้
- **เลื่อน** – ผู้ปฏิบัติงานสามารถใช้ตัวเลือกนี้เมื่อธุรกรรมไม่ได้ลงทะเบียนเนื่องจากอุปกรณ์การลงทะเบียนหรือบริการไม่พร้อมใช้งาน **และ** ปรากฏข้อใดข้อหนึ่งต่อไปนี้:
    - มีตัวเลือกการลงทะเบียนทางการเงินสํารองอยู่และสามารถประมวลผลการลงทะเบียนทางการเงินต่อไปได้ในธุรกรรมปัจจุบัน ตัวอย่างเช่น [อุปกรณ์ทางการเงิน](./latam-bra-cf-e-sat.md#scenario-4-make-a-cash-and-carry-sale-of-goods-by-using-sat-as-contingency-mode) เฉพาะที่อาจเป็นตัวเลือกสํารองสำหรับบริการลงทะเบียนทางการเงินออนไลน์เมื่อบริการไม่พร้อมใช้งาน
    - การลงทะเบียนทางการเงินสามารถเสร็จสมบูรณ์ได้ในภายหลังโดยใช้กรอบการรวมทางการเงินอื่น ตัวอย่างเช่น ธุรกรรมที่เลื่อนออกไปสามารถลงทะเบียนทางการเงินในชุดงานโดยใช้ [ฟังก์ชันที่แยกต่างหาก](./latam-bra-nfce.md#scenario-3-make-a-cash-and-carry-sale-of-goods-in-offline-contingency-mode) ได้ในภายหลัง
    
    หลังจากการเลื่อนธุรกรรมหรือเหตุการณ์ปัจจุบัน คุณสามารถดําเนินงานปกติใน POS ต่อไปได้

> [!WARNING]
> ตัวเลือก **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** และ **เลื่อนออกไป** ควรพิจารณาเป็นตัวเลือกฉุกเฉินและใช้เฉพาะในกรณีพิเศษเท่านั้น อธิบายถึงตัวเลือกการจัดการข้อผิดพลาดเหล่านี้กับที่ปรึกษาทางกฎหมายหรือภาษีของคุณ และใช้วิจารณญาณที่ดีก่อนที่จะเปิดใช้งาน ตัวเลือกดังกล่าวต้องถูกเปิดใช้งานในกระบวนการลงทะเบียนทางบัญชีก่อนที่จะมีการใช้ ตรวจสอบว่าหากผู้ปฏิบัติงานไม่ได้ใช้งานเป็นประจำ ต้องให้สิทธิ์ที่เกี่ยวข้องแก่ผู้ปฏิบัติงาน

มีการสร้าง [ธุรกรรมทางการเงิน](#storing-fiscal-response-in-fiscal-transaction) เมื่อมีการเลือกตัวเลือก **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** หรือ **เลื่อนออกไป** แต่ธุรกรรมทางการเงินไม่มีการตอบสนองทางการเงิน ซึ่งช่วยให้คุณสามารถรวบรวมเหตุการณ์ของการลงทะเบียนทางการเงินที่ล้มเหลว ตัวเลือกเหล่านี้ยังเปิดใช้งานรหัสข้อมูลให้บันทึกข้อมูลเฉพาะบางอย่างเกี่ยวกับความล้มเหลว เช่น เหตุผลสำหรับความล้มเหลว หรือการให้เหตุผลสำหรับการข้ามการลงทะเบียนทางบัญชี หรือการทำเครื่องหมายธุรกรรมเป็นลงทะเบียนแล้ว สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าพารามิเตอร์การจัดการข้อผิดพลาด ดู [ตั้งการตั้งค่าการจัดการข้อผิดพลาด](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings)

### <a name="optional-fiscal-registration"></a>การลงทะเบียนทางการเงินที่เลือกได้

การลงทะเบียนทางการเงินอาจเป็นข้อบังคับสำหรับการดำเนินการบางอย่าง แต่ไม่จำเป็นสำหรับผู้อื่น ตัวอย่างเช่น การลงทะเบียนทางการเงินของการขายทั่วไปและการส่งคืนอาจเป็นข้อบังคับ แต่การลงทะเบียนทางการเงินของการดำเนินงานที่เกี่ยวข้องกับเงินฝากลูกค้าอาจเลือกได้ ในกรณีนี้ ความล้มเหลวในการดำเนินการลงทะเบียนการขายทางการเงินควรบล็อคการขายเพิ่มเติม แต่ความล้มเหลวในการลงทะเบียนทางการเงินของเงินฝากลูกค้าไม่ควรบล็อคการขายเพิ่มเติม เพื่อแยกแยะการดำเนินการที่เป็นข้อบังคับและที่เลือกได้ เราขอแนะนำให้คุณจัดการโดยใช้ผู้ให้บริการเอกสารที่แตกต่างกัน และคุณควรตั้งค่าขั้นตอนต่าง ๆ ในกระบวนการการลงทะเบียนทางการเงินสำหรับผู้ให้บริการดังกล่าว พารามิเตอร์ **ดำเนินการต่อเมื่อมีข้อผิดพลาด** ควรถูกเปิดใช้งานสำหรับขั้นตอนใด ๆ ที่เกี่ยวข้องกับการลงทะเบียนทางการเงินที่เลือกได้ สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าพารามิเตอร์การจัดการข้อผิดพลาด ดู [ตั้งการตั้งค่าการจัดการข้อผิดพลาด](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings)

### <a name="manually-rerun-fiscal-registration"></a>เรียกใช้การลงทะเบียนทางการเงินใหม่ด้วยตนเอง

ถ้าการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ถูกเลื่อนหลังจากเกิดความล้มเหลว (ตัวอย่างเช่น ถ้าผู้ปฏิบัติงานเลือก **ยกเลิก** ในกล่องโต้ตอบการจัดการข้อผิดพลาด) คุณสามารถเรียกใช้การลงทะเบียนทางการเงินด้วยตนเองอีกครั้งโดยการเรียกใช้การดำเนินงานที่สอดคล้องกัน สำหรับรายละเอียดเพิ่มเติม ดูที่ [เปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่ถูกเลื่อน](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-deferred-fiscal-registration)

### <a name="fiscal-registration-health-check"></a>การตรวจสอบความสมบูรณ์ของการลงทะเบียนทางการเงิน

ขั้นตอนการตรวจสอบความสมบูรณ์สำหรับการลงทะเบียนทางการเงินจะตรวจสอบความพร้อมของอุปกรณ์หรือบริการทางการเงินเมื่อเกิดเหตุการณ์ที่เฉพาะเจาะจง ถ้าการลงทะเบียนทางการเงินไม่สามารถเสร็จสมบูรณ์ได้ในขณะนี้ ผู้ดำเนินการจะได้รับแจ้งเตือนล่วงหน้า

POS ทำการตรวจสอบความสมบูรณ์เมื่อเกิดเหตุการณ์ต่อไปนี้:

- ธุรกรรมใหม่จะเปิดขึ้นมา
- เรียกคืนธุรกรรมที่ระงับแล้ว
- ธุรกรรมการขายหรือการส่งคืนเสร็จสิ้นแล้ว

หากการตรวจสอบความสมบูรณ์ล้มเหลว POS จะแสดงกล่องโต้ตอบการตรวจสอบความสมบูรณ์ กล่องโต้ตอบนี้มีปุ่มต่อไปนี้

- **OK** – ปุ่มนี้ช่วยให้ผู้ดำเนินการสามารถละเว้นข้อผิดพลาดในการตรวจสอบความสมบูรณ์ และทำการประมวลผลต่อได้ ผู้ดำเนินสามารถเลือกปุ่มนี้เฉพาะถ้าสิทธิ์ **อนุญาตให้ข้ามข้อผิดพลาดในการตรวจสอบความสมบูรณ์** ถูกเปิดใช้งาน
- **ยกเลิก** – ถ้าผู้ดำเนินเลือกปุ่มนี้ POS จะยกเลิกการดำเนินการสุดท้าย (ตัวอย่างเช่น ไม่มีการเพิ่มรายการไปยังธุรกรรมใหม่)

> [!NOTE]
> การตรวจสอบความสมบูรณ์จะรันต่อเมื่อการดำเนินการปัจจุบันต้องมีการลงทะเบียนทางการเงิน และถ้าพารามิเตอร์ **ดำเนินการต่อเมื่อมีข้อผิดพลาด** ถูกปิดใช้งานสำหรับขั้นตอนปัจจุบันของกระบวนการลงทะเบียนทางการเงิน ดูรายละเอียดเพิ่มเติมที่ [กำหนดการตั้งค่าการจัดการข้อผิดพลาด](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings)

## <a name="storing-fiscal-response-in-fiscal-transaction"></a>การจัดเก็บการตอบสนองทางบัญชีในธุรกรรมทางบัญชี

เมื่อการลงทะเบียนทางบัญชีของธุรกรรมหรือเหตุการณ์สำเร็จ ธุรกรรมทางบัญชีถูกสร้างขึ้นในฐานข้อมูลช่องทางและเชื่อมโยงไปยังธุรกรรมหรือเหตุการณ์ดั้งเดิม ในทำนองเดียวกัน ถ้าตัวเลือก **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** หรือ **เลื่อนออกไป** ถูกเลือกสำหรับการลงทะเบียนทางบัญชีที่ล้มเหลว ข้อมูลนี้ถูกจัดเก็บในธุรกรรมทางบัญชี ธุรกรรมทางบัญชีเก็บการตอบสนองทางบัญชีของอุปกรณ์หรือบริการทางบัญชี ถ้ากระบวนการลงทะเบียนทางบัญชีประกอบด้วยขั้นตอนหลายขั้นตอน ธุรกรรมทางบัญชีจะถูกสร้างขึ้นสำหรับแต่ละขั้นตอนของกระบวนการที่ส่งผลต่อการลงทะเบียนที่สำเร็จหรือล้มเหลว

ธุรกรรมทางบัญชีถูกโอนย้ายไปยังสำนักงานใหญ่โดย *งาน P* พร้อมกับธุรกรรม บน FastTab **ธุรกรรมทางบัญชี** ของหน้า **ธุรกรรมร้านค้า** คุณสามารถดูธุรกรรมทางบัญชีที่เชื่อมโยงกับธุรกรรมได้

ธุรกรรมทางบัญชีจัดเก็บรายละเอียดต่อไปนี้:

- รายละเอียดกระบวนการลงทะเบียนทางบัญชี (กระบวนการ กลุ่มตัวเชื่อมต่อ ตัวเชื่อมต่อ และอื่นๆ) นอกจากนี้ ยังจัดเก็บหมายเลขประจำสินค้าของอุปกรณ์ทางบัญชีในฟิลด์ **ลงทะเบียนหมายเลข** ถ้าข้อมูลนี้ถูกรวมในการตอบสนองทางบัญชี
- สถานะของการลงทะเบียนทางกาเงิน: **เสร็จสมบูรณ์** สำหรับการลงทะเบียนที่สำเร็จ **ถูกข้าม** ถ้าผู้ปฏิบัติงานเลือกตัวเลือก **ข้าม** สำหรับการลงทะเบียนที่ล้มเหลว หรือ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ถ้าผู้ปฏิบัติงานเลือกตัวเลือก **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** หรือ **ถูกเลื่อน** ถ้าผู้ปฏิบัติงานเลือกตัวเลือก **การเลื่อน**
- ธุรกรรมรหัสข้อมูลที่เกี่ยวข้องกับธุรกรรมทางบัญชีที่เลือก ในการดูธุรกรรมรหัสข้อมูล บนแท็บด่วน **ธุรกรรมทางการเงิน** เลือกธุรกรรมทางการเงินที่มีสถานะเป็น **ถูกข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** หรือ **ถูกเลื่อน** แล้วเลือก **ธุรกรรมรหัสข้อมูล**

ด้วยการเลือก **ข้อมูลแบบขยาย** คุณยังสามารถดูคุณสมบัติบางอย่างของธุรกรรมทางการเงินได้ด้วย รายการคุณสมบัติที่สามารถดูได้เป็นรายการเฉพาะของฟังก์ชันการลงทะเบียนทางการเงินที่สร้างธุรกรรมทางการเงิน ตัวอย่างเช่น คุณสามารถดูลายเซ็นดิจิทัล หมายเลขลำดับ รหัสประจำตัวของใบรับรอง รหัสอัลกอริทึมแฮช และคุณสมบัติธุรกรรมทางการเงินอื่นๆ ของฟังก์ชันการลงชื่อดิจิทัลของฝรั่งเศส

## <a name="fiscal-texts-for-discounts"></a>ข้อความทางบัญชีสำหรับส่วนลด

บางประเทศหรือบางเขตมีความต้องการพิเศษเกี่ยวกับข้อความเพิ่มเติมที่ต้องถูกพิมพ์ในใบเสร็จทางบัญชี เมื่อมีการนำชนิดของส่วนลดที่แตกต่างกันไปใช้ ฟังก์ชันการรวมทางการเงินอนุญาตให้คุณตั้งค่าข้อความพิเศษสำหรับส่วนลดที่ถูกพิมพ์ หลังจากรายการส่วนลดหรือใบเสร็จทางบัญชี สำหรับส่วนลดแบบกำหนดเอง คุณสามารถตั้งค่าคอนฟิกข้อความทางการเงินสำหรับรหัสข้อมูลที่ถูกระบุเป็นรหัสข้อมูล **ส่วนลดผลิตภัณฑ์** ในโพรไฟล์ฟังก์ชัน POS สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่าข้อความทางบัญชีสำหรับส่วนลด ดู [ตั้งค่าข้อความทางบัญชีสำหรับส่วนลด](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts)

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a>การพิมพ์รายงาน X ทางบัญชี และ Z ทางบัญชี

ฟังก์ชันการรวมทางบัญชีสนับสนุนการสร้างของใบแจ้งยอดสิ้นสุดวันที่เฉพาะเจาะจงกับอุปกรณ์และบริการทางบัญชีแบบรวม:

- ปุ่มใหม่ที่เรียกใช้การดำเนินการที่สอดคล้องกัน ควรถูกเพิ่มไปยังโครงร่างหน้าจอ POS สำหรับรายละเอียดเพิ่มเติม ดู [ตั้งค่ารายงาน X/Z ทางบัญชีจาก POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos)
- ในตัวอย่างการรวมทางบัญชี การดำเนินการเหล่านี้ควรถูกจับคู่กับการดำเนินการที่สอดคล้องกันของอุปกรณ์ทางบัญชี

## <a name="fiscal-integration-samples-in-the-commerce-sdk"></a>ตัวอย่างการรวมทางบัญชีใน Commerce SDK

ตัวอย่างการรวมข้อมูลทางบัญชีต่อไปนี้พร้อมใช้งานแล้วในขณะนี้ใน Commerce SDK:

- [ตัวอย่างการรวมเครื่องพิมพ์ทางการเงินสำหรับอิตาลี](./emea-ita-fpi-sample.md)
- [ตัวอย่างการรวมเครื่องพิมพ์ทางการเงินสำหรับโปแลนด์](./emea-pol-fpi-sample.md)
- [ตัวอย่างการรวมบริการลงทะเบียนทางการเงินสำหรับออสเตรีย](./emea-aut-fi-sample.md)
- [ตัวอย่างการรวมบริการลงทะเบียนทางการเงินสำหรับสาธารณรัฐเช็ก](./emea-cze-fi-sample.md)
- [ตัวอย่างการรวมหน่วยควบคุมสำหรับสวีเดน](./emea-swe-fi-sample.md)
- [ตัวอย่างการรวมบริการลงทะเบียนทางการเงินสำหรับเยอรมนี](./emea-deu-fi-sample.md)
- [ตัวอย่างการรวมเครื่องพิมพ์ทางการเงินสำหรับรัสเซีย](./rus-fpi-sample.md)
- [ตัวอย่างลายเซ็นดิจิทัลสำหรับนอร์เวย์](./emea-nor-cash-registers.md)

ฟังก์ชันการรวมทางการเงินต่อไปนี้มีการดําเนินการโดยใช้กรอบงานการรวมทางการเงินด้วย แต่พร้อมใช้งานสำเร็จรูปซึ่งไม่ได้รวมอยู่ใน Commerce SDK:

- [การลงทะเบียนทางการเงินของบราซิล](./latam-bra-commerce-localization.md#fiscal-registration-for-brazil)
- [ลายเซ็นดิจิทัลสำหรับฝรั่งเศส](./emea-fra-cash-registers.md)

ฟังก์ชันการรวมทางการเงินดั้งเดิมต่อไปนี้ที่พร้อมใช้งานใน Commerce SDK ไม่ใช้กรอบงานการรวมทางการเงิน และจะถูกยกเลิกการใช้ในการปรับปรุงในภายหลัง:

- [ตัวอย่างการรวมหน่วยควบคุมสำหรับสวีเดน (ดั้งเดิม)](./retail-sdk-control-unit-sample.md)
- [ลายเซ็นดิจิทัลสำหรับฝรั่งเศส (ดั้งเดิม)](./emea-fra-deployment.md)
- [ลายเซ็นดิจิทัลสำหรับนอร์เวย์ (ดั้งเดิม)](./emea-nor-loc-deployment-guidelines.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
