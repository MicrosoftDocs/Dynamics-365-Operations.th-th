---
title: แนวทางการปรับใช้เครื่องบันทึกเงินสดสำหรับนอร์เวย์
description: หัวข้อนี้จะให้คำแนะนําเกี่ยวกับวิธีการเปิดใช้งานฟังก์ชันเครื่องบันทึกเงินสดสําหรับการแปลเป็นภาษาท้องถิ่น Microsoft Dynamics 365 Commerce สําหรับนอร์เวย์
author: EvgenyPopovMBS
ms.date: 12/20/2021
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: epopov
ms.search.validFrom: 2019-3-1
ms.openlocfilehash: c7e64dbfe6a300c097b5b3711ac4310f3386df11
ms.sourcegitcommit: 0d2de52e12fdb9928556d37a4813a67b303695dc
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/21/2021
ms.locfileid: "7944751"
---
# <a name="deployment-guidelines-for-cash-registers-for-norway"></a>แนวทางการปรับใช้เครื่องบันทึกเงินสดสำหรับนอร์เวย์

[!include[banner](../includes/banner.md)]

หัวข้อนี้จะให้คำแนะนําเกี่ยวกับวิธีการเปิดใช้งานฟังก์ชันเครื่องบันทึกเงินสดสําหรับการแปลเป็นภาษาท้องถิ่น Microsoft Dynamics 365 Commerce สําหรับนอร์เวย์ การแปลเป็นภาษาท้องถิ่นประกอบด้วยส่วนขยายของส่วนประกอบของหลายส่วน ส่วนขยายเหล่านี้ช่วยให้คุณสามารถดำเนินการ เช่น พิมพ์ฟิลด์แบบกำหนดเองบนใบเสร็จ ลงทะเบียนเหตุการณ์การตรวจสอบเพิ่มเติม ธุรกรรมการขาย และธุรกรรมการเงินในการขายหน้าร้าน (POS) ลงชื่อธุรกรรมการขายทางดิจิทัล และพิมพ์รายงาน X และ Z ในรูปแบบท้องถิ่น หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับการแปลเป็นภาษาท้องถิ่นของนอร์เวย์ โปรดดูที่ [ฟังก์ชันเครื่องบันทึกเงินสดสำหรับนอร์เวย์](./emea-nor-cash-registers.md) สำหรับข้อมูลเพิ่มเติมเกี่ยวกับวิธีการตั้งค่า Commerce สำหรับนอร์เวย์ ให้ดูที่ [การตั้งค่า Commerce สำหรับนอร์เวย์](./emea-nor-cash-registers.md#setting-up-commerce-for-norway)

> [!WARNING]
> เนื่องจากข้อจํากัดของ [แบบจำลองบรรจุภัณฑ์และส่วนขยายอิสระใหม่](../dev-itpro/build-pipeline.md) จึงไม่สามารถใช้กับฟังก์ชันแปลนี้ได้ในขณะนี้ คุณต้องใช้ตัวอย่างการลงชื่อดิจิทัลสำหรับนอร์เวย์ในรุ่นก่อนหน้านี้ของชุดการพัฒนาซอฟต์แวร์ (SDK) ของการขายปลีกบนเครื่องเสมือนของนักพัฒนา (VM) ใน Microsoft Dynamics Lifecycle Services (LCS) หากต้องการข้อมูลเพิ่มเติม โปรดดูที่ [แนวทางการปรับใช้เครื่องบันทึกเงินสดสำหรับนอร์เวย์ (ดั้งเดิม)](./emea-nor-loc-deployment-guidelines.md)
>
> มีการวางแผนการสนับสนุนรูปแบบบรรจุภัณฑ์และส่วนขยายอิสระใหม่จากตัวอย่างการรวมทางการเงินกับรุ่นที่ใหม่กว่า

## <a name="set-up-fiscal-registration-for-norway"></a>ตั้งค่าการลงทะเบียนทางการเงินสำหรับนอร์เวย์

ตัวอย่างการลงทะเบียนทางการเงินสำหรับนอร์เวย์ยึดตาม [ฟังก์ชันการรวมทางการเงิน](fiscal-integration-for-retail-channel.md) และเป็นส่วนหนึ่งของ Retail SDK ตัวอย่างอยู่ในโฟลเดอร์ **src\\FiscalIntegration\\SequentialSignatureNorway** ของที่เก็บ [โซลูชัน Dynamics 365 Commerce](https://github.com/microsoft/Dynamics365Commerce.Solutions/) (ตัวอย่างเช่น [ตัวอย่างในรุ่น/9.34](https://github.com/microsoft/Dynamics365Commerce.Solutions/tree/release/9.34/src/FiscalIntegration/SequentialSignatureNorway)) ตัวอย่าง [ประกอบด้วย](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices) ผู้ให้บริการเอกสารทางการเงินและตัวเชื่อมต่อทางการเงิน ซึ่งเป็นส่วนขยายของ Commerce Runtime (CRT) หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับวิธีการใช้ Retail SDK โปรดดู [สถาปัตยกรรม Retail SDK](../dev-itpro/retail-sdk/retail-sdk-overview.md) และ [ตั้งค่าไปป์ไลน์การสร้างของ SDK บรรจุภัณฑ์อิสระ](../dev-itpro/build-pipeline.md)

ปฏิบัติตามขั้นตอนการตั้งค่าการลงทะเบียนทางการเงินตามที่อธิบายไว้ใน [การตั้งค่าการรวมทางการเงินของช่องทาง Commerce](./setting-up-fiscal-integration-for-retail-channel.md):

1. [ตั้งค่ากระบวนการการลงทะเบียนทางการเงิน](./setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process) ตรวจสอบให้แน่ใจว่าได้จดบันทึกการตั้งค่าของกระบวนการลงทะเบียนทางการเงินที่ใช้ [เฉพาะกับนอร์เวย์](#configure-the-fiscal-registration-process)
1. [กำหนดการตั้งค่าการจัดการข้อผิดพลาด](./setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings)
1. [เปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว](./setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration)
1. [ตั้งค่าคอนฟิกส่วนประกอบช่องทาง](#configure-channel-components)

### <a name="configure-the-fiscal-registration-process"></a>ตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางการเงิน

ให้ทําตามขั้นตอนต่อไปนี้เมื่อต้องการเปิดใช้งานกระบวนการการลงทะเบียนทางการเงินสำหรับนอร์เวย์ในศูนย์ควบคุม Commerce

1. ดาวน์โหลดไฟล์การตั้งค่าคอนฟิกสำหรับผู้ให้บริการเอกสารทางการเงินและตัวเชื่อมต่อทางการเงินจาก Commerce SDK:

    1. เปิดที่เก็บ [โซลูชัน Dynamics 365 Commerce](https://github.com/microsoft/Dynamics365Commerce.Solutions/)
    1. เปิดสาขาที่นำออกใช้ล่าสุด (ตัวอย่างเช่น **[รุ่น/9.34)](https://github.com/microsoft/Dynamics365Commerce.Solutions/tree/release/9.34)**
    1. เปิด **src \> FiscalIntegration \> SequentialSignatureNorway \> CommerceRuntime**
    1. ดาวน์โหลดไฟล์การตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางการเงินที่ **DocumentProvider.SequentialSignNorway \> Configuration \> DocumentProviderSequentialSignatureNorwaySample.xml** (ตัวอย่างเช่น [ไฟล์ของรุ่น/9.34](https://github.com/microsoft/Dynamics365Commerce.Solutions/blob/release/9.34/src/FiscalIntegration/SequentialSignatureNorway/CommerceRuntime/DocumentProvider.SequentialSignNorway/Configuration/DocumentProviderSequentialSignatureNorwaySample.xml))
    1. ดาวน์โหลดไฟล์การตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินที่ **Connector.SequentialSignNorway \> Configuration \> ConnectorSequentialSignatureNorwaySample.xml** (ตัวอย่างเช่น [ไฟล์ของรุ่น/9.34](https://github.com/microsoft/Dynamics365Commerce.Solutions/blob/release/9.34/src/FiscalIntegration/SequentialSignatureNorway/CommerceRuntime/Connector.SequentialSignNorway/Configuration/ConnectorSequentialSignatureNorwaySample.xml))

1. ไปที่ **Retail และ Commerce \> การตั้งค่าศูนย์ควบคุม \> พารามิเตอร์ \> พารามิเตอร์ที่ใช้ร่วมกัน** บนแท็บ **ทั่วไป** ให้ตั้งค่าตัวเลือก **เปิดใช้งานการรวมทางการเงิน** เป็น **ใช่**
1. ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ตัวเชื่อมต่อทางการเงิน** และโหลดไฟล์การตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินที่คุณดาวน์โหลดก่อนหน้านี้
1. ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ผู้ให้บริการเอกสารทางการเงิน** และโหลดไฟล์การตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางการเงินที่คุณดาวน์โหลดก่อนหน้านี้
1. ไปที่ **การขายปลีกและการพาณิชย์ \> การตั้งค่าช่องทางการขาย \> การรวมทางการเงิน \> โปรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** สร้างโปรไฟล์การทำงานของตัวเชื่อมต่อใหม่ และเลือกผู้ให้บริการเอกสารและตัวเชื่อมต่อที่คุณโหลดไว้ก่อนหน้านี้
1. ไปที่ **การขายปลีกและการพาณิชย์ \> การตั้งค่าช่องทางการขาย \> การรวมทางการเงิน \> โปรไฟล์ทางเทคนิคของตัวเชื่อมต่อ** สร้างโปรไฟล์ทางเทคนิคของตัวเชื่อมต่อใหม่ และเลือกตัวเชื่อมต่อที่คุณโหลดไว้ก่อนหน้านี้ ตั้งค่าชนิดของตัวเชื่อมต่อเป็น **ภายใน**
1. ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน** และสร้างกลุ่มตัวเชื่อมต่อทางการเงินใหม่สำหรับโปรไฟล์ฟังก์ชันของตัวเชื่อมต่อที่คุณสร้างก่อนหน้า
1. ไปที่ **การขายปลีกและการพาณิชย์ \> การตั้งค่าช่องทางการขาย \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน** สร้างกระบวนการลงทะเบียนทางการเงินใหม่และขั้นตอนกระบวนการลงทะเบียนทางการเงิน และเลือกกลุ่มตัวเชื่อมต่อทางการเงินที่คุณสร้างก่อนหน้านี้
1. ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์POS \> โพรไฟล์ฟังก์ชัน** เลือกโปรไฟล์ฟังก์ชันที่เชื่อมโยงกับร้านค้าที่ควรมีการเรียกใช้งานกระบวนการลงทะเบียน บน FastTab **กระบวนการลงทะเบียนทางการเงิน** ให้เลือกกระบวนการลงทะเบียนทางการเงินที่คุณสร้างไว้ก่อนหน้านี้ บน FastTab **บริการทางการเงิน** ให้เลือกโปรไฟล์ทางเทคนิคของตัวเชื่อมต่อที่คุณสร้างก่อนหน้านี้ 
1. ไปยัง **การขายปลีกและการค้า \> การขายปลีกและไอทีเชิงพาณิชย์ \> กำหนดการการจัดจำหน่าย** เปิดกำหนดการการกระจาย และเลือกงาน **1070** และ **1090** เพื่อโอนย้ายข้อมูลไปยังฐานข้อมูลช่องทาง

### <a name="configure-the-digital-signature-parameters"></a>ตั้งค่าคอนฟิกพารามิเตอร์ลายเซ็นดิจิทัล

คุณต้องตั้งค่าคอนฟิกใบรับรองที่จะใช้ในการลงชื่อดิจิทัลของธุรกรรมการขายในร้านค้า ใบรับรองดิจิทัลที่จัดเก็บใน Azure Key Vault จะใช้เพื่อลงชื่อ สำหรับโหมดออฟไลน์ของ Modern POS สามารถลงชื่อได้โดยใช้ใบรับรองดิจิทัลที่จัดเก็บไว้ในที่จัดเก็บเฉพาะที่ของเครื่องที่มีการติดตั้ง Modern POS ไว้

ก่อนที่คุณจะสามารถใช้ใบรับรองดิจิทัลที่จัดเก็บไว้ในที่จัดเก็บ Key Vault คุณต้องปฏิบัติตามขั้นตอนต่อไปนี้

1. ต้องสร้างที่จัดเก็บ Key Vault ขอแนะนำว่าคุณควรใช้งานที่จัดเก็บในพื้นที่ทางภูมิศาสตร์เดียวกันกับ Commerce Scale Unit
1. ใบรับรองต้องอัปโหลดไปยังที่จัดเก็บ Key Vault โดยเป็นข้อมูลลับสตริง base64
1. โปรแกรมประยุกต์ Application Object Server (AOS) ต้องได้รับอนุญาตให้อ่านข้อมูลลับจากที่จัดเก็บ Key Vault

หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับวิธีใช้งาน Key Vault โปรดดูที่ [เริ่มต้นการใช้งานกับ Azure Key Vault](/azure/key-vault/key-vault-get-started)

จากนั้นในหน้า **พารามิเตอร์ Key Vault** คุณต้องระบุพารามิเตอร์ต่างๆ เพื่อเข้าถึงการจัดเก็บ Key Vault:

- **ชื่อ** และ **รายละเอียด** – ชื่อและรายละเอียดของที่จัดเก็บ Key Vault
- **URL ของ Key Vault** – URL ของที่จัดเก็บ Key Vault
- **ไคลเอนต์ Key Vault** – รหัสไคลเอนต์เชิงโต้ตอบของโปรแกรมประยุกต์ Azure Active Directory (Azure AD) ที่เชื่อมโยงกับที่จัดเก็บ Key Vault เพื่อวัตถุประสงค์การรับรองความถูกต้อง ไคลเอนต์นี้ควรจะมีสิทธิ์อ่านข้อมูลลับจากที่จัดเก็บ
- **คีย์ลับ Key Vault** – คีย์ลับที่เชื่อมโยงกับโปรแกรมประยุกต์ Azure AD ที่ใช้การรับรองความถูกต้องในที่จัดเก็บ Key Vault
- **ชื่อ** **รายละเอียด** และ **การอ้างอิงข้อมูลลับ** – ชื่อ รายละเอียด และการอ้างอิงข้อมูลลับของใบรับรอง

จากนั้น คุณต้องตั้งค่าคอนฟิกตัวเชื่อมต่อของใบรับรองของคุณที่มีการจัดเก็บไว้ในที่เก็บ Key Vault หรือใบรับรองเฉพาะที่ ตัวเชื่อมต่อนี้ใช้การลงชื่อในฝั่งช่องทาง

1. ไปที่ **การขายปลีกและการพาณิชย์ \> การตั้งค่าช่องทางการขาย \> การรวมทางการเงิน \> โปรไฟล์ทางเทคนิคของตัวเชื่อมต่อ**
1. บน FastTab **การตั้งค่า** ให้ระบุพารามิเตอร์ต่อไปนี้ของลายเซ็นดิจิทัล

    - **ชื่อข้อมูลลับ** – เลือกชื่อข้อมูลลับที่คุณตั้งค่าคอนฟิกไว้ก่อนหน้านี้ในหน้า **พารามิเตอร์ Key Vault**
    - **รหัสรหัสธุรกิจของใบรับรองเฉพาะที่** – ระบุรหัสประจำตัวของใบรับรองที่จัดเก็บไว้เฉพาะที่
    - **อัลกอริทึมแฮช** – ระบุอัลกอริทึมแฮชการเข้ารหัสลับตัวใดตัวหนึ่งที่สนับสนุนโดย Microsoft .NET เช่น **SHA1**
    - **ชื่อร้านค้าที่มีใบรับรอง** – ฟิลด์นี้ไม่บังคับ ใช้เพื่อระบุชื่อร้านค้าเริ่มต้นที่ควรใช้ในการค้นหาใบรับรองเฉพาะที่
    - **สถานที่ร้านค้าที่มีใบรับรอง** – ฟิลด์นี้ไม่บังคับ ใช้เพื่อระบุที่ตั้งร้านค้าเริ่มต้นที่ควรใช้ในการค้นหาใบรับรองเฉพาะที่
    - **ลองใบรับรองเฉพาะที่ก่อน** – เลือกตัวเลือกนี้เพื่อใช้ใบรับรองจากร้านค้าเฉพาะที่ตามค่าเริ่มต้นสำหรับการลงชื่อข้อมูล แทนใบรับรองจาก Key Vault
    - **เรียกใช้การตรวจสอบความสมบูรณ์** – สำหรับข้อมูลเพิ่มเติมเกี่ยวกับคุณลักษณะการตรวจสอบความสมบูรณ์ที่ [การตรวจสอบความสมบูรณ์ของการลงทะเบียนทางการเงิน](./fiscal-integration-for-retail-channel.md#fiscal-registration-health-check)

> [!NOTE]
> - ขณะนี้อัลกอริทึแฮชการเข้ารหัสลับ **SHA1** เท่านั้นที่เป็นที่ยอมรับของนอร์เวย์
> - ชื่อร้านค้าเริ่มต้นและที่ตั้งร้านค้าจะถูกเพิ่มเพื่อทำให้กระบวนการของการค้นหาใบรับรองเฉพาะที่ใน CRT เป็นไปได้ง่ายขึ้น X509StoreProvider มีรายการของโฟลเดอร์ที่จัดเก็บใบรับรอง ถ้าไม่ได้ระบุชื่อร้านค้าเริ่มต้นและที่ตั้งร้านค้าเริ่มต้น X509StoreProvider จะพยายามค้นหาใบรับรองในโฟลเดอร์ทั้งหมดในรายการ

### <a name="configure-channel-components"></a>ตั้งค่าคอนฟิกส่วนประกอบช่องทาง

### <a name="development-environment"></a>สภาพแวดล้อมการพัฒนา

ปฏิบัติตามขั้นตอนต่อไปนี้เพื่อตั้งค่าสภาพแวดล้อมการพัฒนาเพื่อให้คุณสามารถทดสอบและขยายตัวอย่างได้

1. ลอกแบบหรือดาวน์โหลดที่เก็บ [โซลูชัน Dynamics 365 Commerce](https://github.com/microsoft/Dynamics365Commerce.Solutions) เลือกรุ่นสาขาที่นำออกใช้ที่ถูกต้องตามรุ่น SDK/โปรแกรมประยุกต์ของคุณ สำหรับข้อมูลเพิ่มเติม โปรดดูที่ [ดาวน์โหลดตัวอย่าง Retail SDK และแพคเกจอ้างอิงจาก GitHub และ NuGet](../dev-itpro/retail-sdk/sdk-github.md)
1. เปิดโซลูชัน **SequentialSignatureNorway.sln** ภายใต้ **Dynamics365Commerce.Solutions\\FiscalIntegration\\SequentialSignatureNorway** และสร้าง
1. ติดตั้งส่วนขยาย CRT:

    1. ค้นหาตัวติดตั้งส่วนขยาย CRT:

        - **Commerce Scale Unit:** ในโฟลเดอร์ **SequentialSignatureNorway\\ScaleUnit\\SequentialSignNorway.Installer\\bin\\Debug\\net461** ให้ค้นหาตัวติดตั้ง **ScaleUnit.SequentialSignNorway.Installer**
        - **CRT เฉพาะที่บน Modern POS:** ในโฟลเดอร์ **SequentialSignatureNorway\\ModernPOS\\ModernPos.SequentialSignNorway.Installer\\bin\\Debug\\net461** ให้ค้นหาตัวติดตั้ง **ModernPos.SequentialSignNorway.Installer**

    1. เริ่มต้นตัวติดตั้งส่วนขยาย CRT จากบรรทัดใบสั่ง:

        - **Commerce Scale Unit:**

            ```Console
            ScaleUnit.SequentialSignNorway.Installer.exe install --verbosity 0
            ```

        - **CRT เฉพาะที่บน Modern POS:**

            ```Console
            ModernPOS.SequentialSignNorway.Installer.exe install --verbosity 0
            ```

### <a name="production-environment"></a>สภาพแวดล้อมการทำงานจริง

ปฏิบัติตามขั้นตอนต่างๆ ใน [การตั้งค่าไปป์ไลน์การสร้างตัวอย่างการรวมทางการเงิน](fiscal-integration-sample-build-pipeline.md) เพื่อสร้างและปล่อย Cloud Scale Unit และแพคเกจที่ปรับใช้ได้แบบบริการตนเองในตัวอย่างการรวมทางการเงิน ไฟล์ YAML แม่แบบ **SequentialSignatureNorway build-pipeline.yaml** สามารถพบได้ในโฟลเดอร์ **Pipeline\\YAML_Files** ของที่เก็บ [โซลูชัน Dynamics 365 Commerce](https://github.com/microsoft/Dynamics365Commerce.Solutions)

### <a name="enable-the-digital-signature-in-offline-mode-for-modern-pos"></a>เปิดใช้งานลายเซ็นดิจิทัลในโหมดออฟไลน์ของ MODERN POS

หากต้องการเปิดใช้งานลายเซ็นดิจิทัลในโหมดออฟไลน์ของ Modern POS คุณต้องปฏิบัติตามขั้นตอนต่อไปนี้หลังจากที่คุณเรียกใช้ Modern POS บนอุปกรณ์ใหม่

1. ลงชื่อเข้าใช้ POS
1. บนหน้า **สถานะการเชื่อมต่อฐานข้อมูล** ให้ตรวจสอบให้แน่ใจว่าฐานข้อมูลออฟไลน์มีการซิงโครไนส์อย่างสมบูรณ์แล้ว เมื่อค่าของฟิลด์ **การดาวน์โหลดที่ค้างอยู่** เป็น **0 (ศูนย์)** ฐานข้อมูลจะถูกซิงโครไนส์ทั้งหมด
1. ลงชื่อออกจาก POS
1. รอสักครู่เพื่อให้ฐานข้อมูลออฟไลน์มีการซิงโครไนส์อย่างสมบูรณ์
1. ลงชื่อเข้าใช้ POS
1. บนหน้า **สถานะการเชื่อมต่อฐานข้อมูล** ให้ตรวจสอบให้แน่ใจว่าฐานข้อมูลออฟไลน์มีการซิงโครไนส์อย่างสมบูรณ์แล้ว เมื่อค่าของฟิลด์ **ธุรกรรมที่ค้างอยู่ในฐานข้อมูลออฟไลน์** เป็น **0 (ศูนย์)** ฐานข้อมูลจะถูกซิงโครไนส์ทั้งหมด
1. เปิด Modern POS อีกครั้ง
