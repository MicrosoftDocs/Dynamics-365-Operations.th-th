---
title: ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า
description: หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า
author: EvgenyPopovMBS
ms.date: 01/31/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: epopov
ms.search.validFrom: 2017-06-20
ms.openlocfilehash: fd37934e1ebd103d66c5181e0bfb75047f4cb6a3
ms.sourcegitcommit: 5cefe7d2a71c6f220190afc3293e33e2b9119685
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/01/2022
ms.locfileid: "8076974"
---
# <a name="set-up-the-fiscal-integration-for-commerce-channels"></a>ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]

หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการรวมทางการเงิน ดูที่ [ภาพรวมของการรวมทางการเงินสำหรับช่องทางการค้า](fiscal-integration-for-retail-channel.md)

## <a name="set-up-commerce-parameters"></a>ตั้งค่าพารามิเตอร์ Commerce

1. ในหน้า **พารามิเตอร์ที่ใช้ร่วมกันของการค้า** บนแท็บ **ทั่วไป** ตั้งค่าตัวเลือก **เปิดใช้งานการรวมทางการเงิน** เป็น **ใช่**
1. ในแท็บ **ลำดับหมายเลข** กำหนดลำดับหมายเลขสำหรับการอ้างอิงต่อไปนี้:

    - หมายเลขโพรไฟล์เทคนิคทางการเงิน
    - หมายเลขกลุ่มของตัวเชื่อมต่อทางการเงิน
    - หมายเลขกระบวนการการลงทะเบียน

1. ในหน้า **พารามิเตอร์การค้า** กำหนดลำดับหมายเลขสำหรับหมายเลขโพรไฟล์ฟังก์ชันทางการเงิน

    > [!NOTE]
    > ลำดับหมายเลขไม่จำเป็น คุณสามารถสร้างหมายเลขสำหรับเอนทิตีการรวมทางการเงินทั้งหมดจากลำดับหมายเลขหรือด้วยตนเอง

## <a name="set-up-a-fiscal-registration-process"></a>ตั้งค่ากระบวนการการลงทะเบียนทางการเงิน

กระบวนการในการตั้งค่าการรวมทางการเงินประกอบด้วยงานทั้งหมดต่อไปนี้:

- ตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินที่แสดงถึงอุปกรณ์หรือบริการทางการเงินที่ใช้สำหรับวัตถุประสงค์ในการลงทะเบียนทางการเงิน เช่น เครื่องพิมพ์ทางการเงิน
- ตั้งค่าคอนฟิกตัวให้บริการเอกสารที่สร้างเอกสารทางการเงินที่จะลงทะเบียนในอุปกรณ์หรือบริการทางการเงินโดยตัวเชื่อมต่อทางการเงิน
- ตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางการเงินที่กำหนดลำดับของขั้นตอนการลงทะเบียนทางการเงิน และตัวเชื่อมต่อทางการเงิน และตัวให้บริการเอกสารทางการเงินที่ใช้สำหรับแต่ละขั้นตอน
- กำหนดกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ฟังก์ชันของการขายหน้าร้าน (POS)
- กำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์

### <a name="upload-configurations-of-fiscal-document-providers"></a>อัปโหลดการตั้งค่าคอนฟิกของผู้ให้บริการเอกสารทางการเงิน

ผู้ให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการสร้างเอกสารทางการเงินที่แสดงถึงธุรกรรมและเหตุการณ์ที่ลงทะเบียนบน POS ในรูปแบบที่ใช้สำหรับการโต้ตอบกับอุปกรณ์หรือการบริการทางการเงิน ตัวอย่างเช่น ผู้ให้บริการเอกสารทางการเงินอาจสร้างการแสดงการรับสินค้าทางการเงินในรูปแบบ XML

หากต้องการอัปโหลดการตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางการเงิน ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **ผู้ให้บริการเอกสารทางการเงิน** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ผู้ให้บริการเอกสารทางการเงิน**)
1. อัปโหลดการตั้งค่าคอนฟิก XML สำหรับอุปกรณ์หรือบริการแต่ละรายการที่คุณวางแผนที่จะใช้

> [!TIP]
> โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ที่เกี่ยวข้องกับตัวให้บริการเอกสารทางการเงินปัจจุบัน

> [!NOTE]
> การแมปข้อมูลจะถือเป็นส่วนหนึ่งของตัวให้บริการเอกสารทางการเงิน ในการตั้งค่าการแมปข้อมูลที่แตกต่างกันสำหรับตัวเชื่อมต่อเดียวกัน (ตัวอย่างเช่น ข้อบังคับเฉพาะรัฐ) คุณควรสร้างผู้ให้บริการเอกสารทางการเงินที่แตกต่างกัน

### <a name="upload-configurations-of-fiscal-connectors"></a>อัปโหลดการตั้งค่าคอนฟิกของตัวเชื่อมต่อทางการเงิน

ตัวเชื่อมต่อทางการเงินมีหน้าที่รับผิดชอบในการติดต่อสื่อสารกับอุปกรณ์หรือการบริการทางการเงิน ตัวอย่างเช่น ตัวเชื่อมต่อทางการเงินอาจส่งการรับสินค้าทางการเงินที่ผู้ให้บริการเอกสารทางการเงินสร้างขึ้นในรูปแบบ XML ไปยังเครื่องพิมพ์ทางการเงิน สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับส่วนประกอบการรวมทางการเงิน ดูที่ [ตัวอย่างกระบวนการลงทะเบียนทางการเงินและการรวมทางการเงินสำหรับอุปกรณ์และบริการทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices-and-services)

หากต้องการอัปโหลดการตั้งค่าคอนฟิกของตัวเชื่อมต่อทางการเงิน ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **ตัวเชื่อมต่อทางการเงิน** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ตัวเชื่อมต่อทางการเงิน**)
1. อัปโหลดการตั้งค่าคอนฟิก XML สำหรับอุปกรณ์หรือบริการแต่ละรายการที่คุณวางแผนที่จะใช้สำหรับวัตถุประสงค์การรวมทางการเงิน

> [!TIP]
> โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ทางเทคนิคที่เกี่ยวข้องกับตัวเชื่อมต่อทางการเงินปัจจุบัน

ดูตัวอย่างของการตั้งค่าคอนฟิกของตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงิน ดู [ตัวอย่างการรวมทางการเงินใน Commerce SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-commerce-sdk)

### <a name="create-connector-functional-profiles"></a>สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ

เมื่อต้องการสร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ ให้ทำตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ**)
1. สำหรับชุดของตัวเชื่อมต่อทางการเงินและตัวให้บริการเอกสารทางการเงินแต่ละชุดที่เกี่ยวข้องกับตัวเชื่อมต่อทางการเงินนี้ ให้สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อโดยทำตามขั้นตอนเหล่านี้

    1. เลือกชื่อตัวเชื่อมต่อ
    1. เลือกผู้ให้บริการเอกสาร

#### <a name="change-data-mapping-parameters-in-a-connector-functional-profile"></a>เปลี่ยนพารามิเตอร์การแมปข้อมูลในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ

คุณสามารถเปลี่ยนพารามิเตอร์การแมปข้อมูลในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ ตารางต่อไปนี้แสดงตัวอย่างพารามิเตอร์การแมปข้อมูลในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ

| พารามิเตอร์ | รูปแบบ | ตัวอย่าง |
|-----------|--------|---------|
| การตั้งค่าอัตรา VAT | ค่า: VATrate | 1 : 2000, 2 : 1800 |
| การแมปรหัส VAT | VATcode : ค่า | vat20: 1, vat18: 2 |
| การแมปชนิดการชำระเงิน | TenderType : ค่า | เงินสด: 1, บัตร : 2 |

เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกผู้ให้บริการเอกสารทางการเงิน เลือก **อัปเดต** บนหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ**

> [!NOTE]
> โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อเป็นโพรไฟล์เฉพาะบริษัท ถ้าคุณวางแผนที่จะใช้ชุดของตัวเชื่อมต่อทางการเงินและตัวให้บริการเอกสารทางการเงินเดียวกันสำหรับบริษัทที่แตกต่างกัน คุณควรสร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับแต่ละบริษัท

### <a name="create-connector-technical-profiles"></a>สร้างโพรไฟล์เทคนิคของตัวเชื่อมต่อ

เมื่อต้องการสร้างโพรไฟล์เทคนิคของตัวเชื่อมต่อ ให้ทำตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **โพรไฟล์เทคนิคของตัวเชื่อมต่อ** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์เทคนิคของตัวเชื่อมต่อ**)
1. สร้างโพรไฟล์เทคนิคของตัวเชื่อมต่อสำหรับตัวเชื่อมต่อทางการเงินแต่ละตัวตามขั้นตอนเหล่านี้

    1. เลือกชื่อตัวเชื่อมต่อ
    1. เลือกชนิดตัวเชื่อมต่อ:

        - สำหรับอุปกรณ์หรือบริการที่เชื่อมต่อกับสถานีฮาร์ดแวร์หรือแสดงอยู่ในเครือข่ายเฉพาะที่ ให้เลือก **ภายในเครื่อง**
        - สำหรับบริการภายนอก ให้เลือก **ภายนอก**
        - สำหรับตัวเชื่อมต่อภายในใน Commerce Runtime (CRT) ให้เลือก **ภายใน** 

    1. เลือกตำแหน่งที่ตั้งตัวเชื่อมต่อ:

        - ถ้าตัวเชื่อมต่ออยู่บนสถานีฮาร์ดแวร์ ให้เลือก **สถานีฮาร์ดแวร์**
        - ถ้าตัวเชื่อมต่ออยู่บนเครื่องบันทึกเงินสด POS ให้เลือก **เครื่องบันทึกเงินสด**

พารามิเตอร์ในแท็บ **อุปกรณ์** และ **การตั้งค่า** ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสามารถเปลี่ยนได้ เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงิน เลือก **อัปเดต** ขณะที่โหลดเวอร์ชันใหม่ของการตั้งค่าคอนฟิก XML คุณจะได้รับข้อความแจ้งที่ระบุว่าตัวเชื่อมต่อทางการเงินปัจจุบัน หรือตัวให้บริการเอกสารทางการเงินถูกใช้แล้ว กระบวนงานนี้ไม่ได้แทนที่การเปลี่ยนแปลงด้วยตนเองที่ทำไว้ก่อนหน้านี้ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อและโพรไฟล์ทางเทคนิคตัวเชื่อมต่อ เมื่อต้องการใช้ชุดเริ่มต้นของพารามิเตอร์จากการตั้งค่าคอนฟิกใหม่ ให้เลือก **อัปเดต** บนหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** หรือหน้า **โพรไฟล์เทคนิคของตัวเชื่อมต่อ**

หากคุณต้องตั้งค่าพารามิเตอร์เฉพาะของเครื่องบันทึกเงินสดหรือร้านค้า POS แต่ละรายการ ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. เลือกรายการเมนู **แทนที่**
1. ในหน้า **แทนที่** ให้สร้างเรกคอร์ดใหม่
1. เลือกร้านค้าหรือเครื่องบันทึกเงินสด POS คุณสามารถแทนที่พารามิเตอร์ของโพรไฟล์เทคนิคที่เลือกของเครื่องบันทึกเงินสด POS แต่ละเครื่องหรือเครื่องบันทึกเงินสด POS ทั้งหมดในร้านค้าแต่ละร้านได้
1. บนแท็บ **อุปกรณ์** ให้ป้อนพารามิเตอร์ของเครื่องบันทึกเงินสด POS หรือร้านค้าที่เลือก

### <a name="create-fiscal-connector-groups"></a>สร้างกลุ่มของตัวเชื่อมต่อทางการเงิน

กลุ่มตัวเชื่อมต่อทางการเงินรวมโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อตัวเชื่อมของต่อเชื่อมต่อทางการเงินที่ทำหน้าที่เหมือนกัน และถูกใช้ในขั้นตอนเดียวกันในกระบวนการลงทะเบียนทางการเงิน ตัวอย่างเช่น ถ้าสามารถใช้เครื่องพิมพ์ทางการเงินหลายรุ่นในร้านค้า ตัวเชื่อมต่อทางการเงินสำหรับเครื่องพิมพ์ทางการเงินดังกล่าวสามารถรวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงิน

เมื่อต้องการสร้างกลุ่มของตัวเชื่อมต่อทางการเงิน ทำตามขั้นตอนเหล่านี้:

1. ไปที่หน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**)
1. สร้างกลุ่มของตัวเชื่อมต่อทางการเงินใหม่
1. เพิ่มโพรไฟล์ฟังก์ชันไปยังกลุ่มของตัวเชื่อมต่อ บนแท็บ **โพรไฟล์ฟังก์ชัน** เลือก **เพิ่ม** และเลือกหมายเลขโพรไฟล์ แต่ละตัวเชื่อมต่อทางการเงินในกลุ่มตัวเชื่อมต่อสามารถมีโพรไฟล์ฟังก์หนึ่งรายการ
1. ถ้าคุณต้องการระงับการใช้โพรไฟล์ฟังก์ชัน ตั้งค่าตัวเลือก **ปิดใช้งาน** เป็น **ใช่** การเปลี่ยนแปลงนี้มีผลต่อกลุ่มตัวเชื่อมต่อปัจจุบันเท่านั้น คุณสามารถดำเนินต่อโดยใช้โพรไฟล์ฟังก์ชันเดียวกันในกลุ่มตัวเชื่อมต่ออื่นๆ

### <a name="create-a-fiscal-registration-process"></a>สร้างกระบวนการลงทะเบียนทางการเงิน

กระบวนการลงทะเบียนทางการเงินจะถูกกำหนดโดยลำดับของขั้นตอนการลงทะเบียน และกลุ่มตัวเชื่อมต่อที่ใช้ในแต่ละขั้นตอน

เมื่อต้องการสร้างกระบวนการลงทะเบียนทางการเงิน ให้ทำตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **กระบวนการลงทะเบียนทางการเงิน** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**)
1. สร้างเรกคอร์ดใหม่ให้กับกระบวนการลงทะเบียนทางการเงินเฉพาะแต่ละกระบวนการ
1. เพิ่มขั้นตอนการลงทะเบียนในกระบวนการโดยปฏิบัติตามขั้นตอนเหล่านี้

    1. เลือก **เพิ่ม**
    1. เลือกชนิดของตัวเชื่อมต่อทางการเงิน
    1. ในฟิลด์ **หมายเลขกลุ่ม** เลือกกลุ่มตัวเชื่อมต่อทางการเงิน

### <a name="assign-entities-of-the-fiscal-registration-process-to-pos-profiles"></a>กำหนดเอนทิตี้ของกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ POS

หากต้องการกำหนดเอนทิตี้ของกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ POS ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **โพรไฟล์ฟังก์ชันของ POS** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฟังก์ชันการทำงาน**) 
1. กำหนดกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ฟังก์ชันการทำงานของ POS
1. เลือก **แก้ไข** จากนั้น บนแท็บ **กระบวนการลงทะเบียนทางการเงิน** ในฟิลด์ **หมายเลขกระบวนการ** เลือกกระบวนการ
1. ไปที่หน้า **โพรไฟล์ฮาร์ดแวร์ POS** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฮาร์ดแวร์**)
1. กำหนดโพรไฟล์ทางเทคนิคของตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์ 
1. เลือก **แก้ไข** จากนั้นบนแท็บ **อุปกรณ์ต่อพ่วงทางการเงิน** ให้เพิ่มรายการ 
1. ในฟิลด์ **หมายเลขของโพรไฟล์** ให้เลือกโพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ

> [!NOTE]
> คุณสามารถเพิ่มโพรไฟล์ทางเทคนิคหลายรายการไปยังโพรไฟล์ฮาร์ดแวร์เดียวกันได้ อย่างไรก็ตาม โพรไฟล์ฮาร์ดแวร์หรือโพรไฟล์ฟังก์ชันของ POS ควรมีจุดตัดกับกลุ่มตัวเชื่อมต่อทางการเงินใดๆ เดียวเท่านั้น

ขั้นตอนการลงทะเบียนทางการเงินถูกกำหนดตามกระบวนการลงทะเบียนทางการเงินและตามพารามิเตอร์บางตัวของส่วนประกอบการรวมทางการเงิน: ส่วนขยายของ CRT สำหรับตัวให้บริการเอกสารทางการเงินและส่วนขยายสถานีฮาร์ดแวร์สำหรับตัวเชื่อมต่อทางการเงิน

- การบอกรับเป็นสมาชิกของเหตุการณ์และธุรกรรมการลงทะเบียนทางการเงินถูกกำหนดไว้ล่วงหน้าในตัวให้บริการเอกสารทางการเงิน
- ตัวให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการระบุตัวเชื่อมต่อทางการเงินที่ใช้สำหรับการลงทะเบียนทางการเงินอีกด้วย ซึ่งตรงกับโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อที่รวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงินที่ระบุสำหรับขั้นตอนของกระบวนการลงทะเบียนทางการเงินกับโพรไฟล์ทางเทคนิคตัวเชื่อมต่อที่กำหนดให้กับโพรไฟล์ฮาร์ดแวร์ของสถานีฮาร์ดแวร์ที่จับคู่กับ POS
- ตัวให้บริการเอกสารทางการเงินใช้การตั้งค่าการแมปข้อมูลจากการตั้งค่าคอนฟิกตัวให้บริการเอกสารทางการเงินเพื่อแปลงข้อมูลเหตุการณ์/ธุรกรรม เช่น ภาษีและการชำระเงินในขณะที่มีการสร้างเอกสารทางการเงิน
- เมื่อตัวให้บริการเอกสารทางการเงินสร้างเอกสารทางการเงิน ตัวเชื่อมต่อทางการเงินสามารถเป็นส่งไปยังอุปกรณ์ทางการเงินทั้งอย่างนั้น หรือแยกวิเคราะห์และแปลงเป็นลำดับของคำสั่งของ Application Programming Interface (API) โดยขึ้นอยู่กับวิธีการจัดการการสื่อสาร

### <a name="validate-the-fiscal-registration-process"></a>ตรวจสอบความถูกต้องของกระบวนการลงทะเบียนทางการเงิน

ขอแนะนำให้คุณตรวจสอบความถูกต้องของกระบวนการลงทะเบียนทางการเงินในกรณีต่อไปนี้

- คุณได้เสร็จสิ้นการตั้งค่าทั้งหมดแล้วสำหรับกระบวนการลงทะเบียนใหม่ การตั้งค่าเหล่านี้มีการกำหนดกระบวนการลงทะเบียนให้กับโพรไฟล์ฟังก์ชันการทำงานของ POS และโพรไฟล์ฮาร์ดแวร์
- คุณได้เปลี่ยนแปลงกระบวนการลงทะเบียนทางการเงินที่มีอยู่ และการเปลี่ยนแปลงเหล่านั้นอาจทําให้ตัวเชื่อมต่อทางการเงินอื่นถูกเลือกขณะรันไทม์ (ตัวอย่างเช่น คุณได้เปลี่ยนกลุ่มตัวเชื่อมต่อให้กับขั้นตอนกระบวนการลงทะเบียนทางการเงิน เปิดใช้งานโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อในกลุ่มตัวเชื่อมต่อ หรือเพิ่มโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อใหม่ที่กลุ่มตัวเชื่อมต่อ)
- คุณทำการเปลี่ยนแปลงในการกำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อไปยังโพรไฟล์ฮาร์ดแวร์

เมื่อต้องการตรวจสอบความถูกต้องของกระบวนการลงทะเบียนทางการเงิน ให้ทำตามขั้นตอนเหล่านี้

1. ในศูนย์ควบคุม Commerce ให้ไปที่หน้า **กระบวนการลงทะเบียนทางการเงิน** (**Retail และ Commerce \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**)
1. เลือก **ตรวจสอบความถูกต้อง** เพื่อตรวจสอบความถูกต้องของกระบวนการลงทะเบียนทางการเงิน
1. ในหน้า **กำหนดการการกระจาย** เรียกใช้งาน **1070** และ **1090** เพื่อโอนย้ายข้อมูลไปยังฐานข้อมูลช่องทาง

## <a name="set-up-fiscal-texts-for-discounts"></a>ตั้งค่าข้อความทางการเงินสำหรับส่วนลด

ในบางกรณี ข้อความพิเศษต้องพิมพ์บนใบเสร็จทางการเงินเมื่อมีการใช้ส่วนลด คุณสามารถตั้งค่าข้อความทางการเงินสำหรับส่วนลดในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**)

- สำหรับส่วนลดด้วยตนเองที่ใช้ได้ที่ POS คุณควรตั้งค่าข้อความทางการเงินสำหรับรหัสข้อมูล หรือกลุ่มรหัสข้อมูลที่มีการระบุเป็นรหัสข้อมูล **ส่วนลดสำหรับผลิตภัณฑ์** ในโพรไฟล์ฟังก์ชันของ POS

    1. ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**
    1. ในแท็บ **รหัสข้อมูล** เลือก **เพิ่ม** และเลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูล
    1. ในฟิลด์ **หมายเลขรหัสข้อมูล** เลือกค่า
    1. ในฟิลด์ **หมายเลขรหัสย่อย** เลือกค่าถ้ารหัสย่อยจำเป็นสำหรับรหัสข้อมูลที่เลือก
    1. ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน
    1. ตั้งค่าตัวเลือก **พิมพ์ข้อมูลที่ผู้ใช้ป้อนบนใบเสร็จทางการเงิน** เป็น **ใช่** เพื่อแทนที่ข้อความบนใบเสร็จทางการเงินด้วยข้อมูลที่ผู้ใช้ป้อนด้วยตนเองที่ POS ตัวเลือกนี้ใช้ได้เฉพาะกับรหัสข้อมูลที่มีชนิดของข้อมูลป้อนเข้า **ข้อความ**

    > [!NOTE]
    > คุณสามารถระบุข้อความทางการเงินสำหรับรหัสข้อมูลหลายรายการเพื่อสนับสนุนสถานการณ์จำลองที่มีการใช้กลุ่มรหัสข้อมูล รหัสข้อมูลที่มีการเชื่อมโยง และรหัสข้อมูลที่มีการทริกเกอร์ ในสถานการณ์เหล่านี้ ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากรหัสข้อมูลทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมที่มีการใช้ส่วนลด

- สำหรับส่วนลดเฉพาะช่องทาง คุณควรกำหนดข้อความทางการเงินสำหรับรหัสส่วนลด

    1. ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**
    1. ในแท็บ **ส่วนลด** เลือก **เพิ่ม** และเลือกรหัสส่วนลด
    1. ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน

    > [!NOTE]
    > ถ้ามีการใช้ส่วนลดหลายรายการในบรรทัดธุรกรรมเดียวกัน ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากส่วนลดทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมเหล่านั้น

## <a name="set-error-handling-settings"></a>กำหนดการตั้งค่าการจัดการข้อผิดพลาด

ตัวเลือกการจัดการข้อผิดพลาดที่มีอยู่ในการรวมทางการเงินถูกตั้งค่าในกระบวนการลงทะเบียนทางการเงิน สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการจัดการข้อผิดพลาดในการรวมทางการเงิน ดูที่ [การจัดการข้อผิดพลาด](fiscal-integration-for-retail-channel.md#error-handling)

ปฏิบัติตามขั้นตอนต่อไปนี้เพื่อกำหนดการตั้งค่าการจัดการข้อผิดพลาด

1. ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) คุณสามารถตั้งค่าพารามิเตอร์ต่อไปนี้สำหรับแต่ละขั้นตอนของกระบวนการลงทะเบียนทางการเงิน:

    - **อนุญาตให้ข้าม** – พารามิเตอร์นี้เปิดใช้งานตัวเลือก **ข้าม** ในกล่องโต้ตอบการจัดการข้อผิดพลาด
    - **อนุญาตให้มีการทำเครื่องหมายเป็นลงทะเบียนแล้ว**– พารามิเตอร์นี้เปิดใช้งานตัวเลือก **การทำเครื่องหมายเป็นลงทะเบียนแล้ว** ในกล่องโต้ตอบการจัดการข้อผิดพลาด
    - **อนุญาตให้เลื่อน** – พารามิเตอร์นี้เปิดใช้งานตัวเลือก **เลื่อน** ในกล่องโต้ตอบการจัดการข้อผิดพลาด
    - **ดำเนินต่อกับข้อผิดพลาด** – ถ้าเปิดใช้งานพารามิเตอร์นี้ กระบวนการลงทะเบียนทางการเงินสามารถดำเนินต่อได้บนเครื่องบันทึกเงินสด POS หากการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ล้มเหลว หรือถ้าต้องการเรียกใช้การลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ถัดไป ผู้ดำเนินการต้องลองลงทะเบียนทางการเงินที่ล้มเหลวอีกครั้ง ข้าม หรือทำเครื่องหมายธุรกรรมหรือเหตุการณ์เป็นลงทะเบียนแล้ว สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [การลงทะเบียนทางการเงินที่เลือกได้](fiscal-integration-for-retail-channel.md#optional-fiscal-registration)

    > [!NOTE]
    > ถ้าพารามิเตอร์ **ดำเนินการต่อเมื่อมีข้อผิดพลาด** ถูกเปิดใช้งาน พารามิเตอร์ **อนุญาตให้ข้าม** และ **อนุญาตให้ทำเครื่องหมายเป็นลงทะเบียนแล้ว** จะถูกปิดใช้งานโดยอัตโนมัติ

1. ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ในกล่องโต้ตอบการจัดการข้อผิดพลาดที่จำเป็นต้องเปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามการลงะเบียนหรือทำเครื่องหมายเป็นลงทะเบียนแล้ว** หากต้องการเปิดใช้งานสิทธิ์นี้ ให้ไปที่หน้า **กลุ่มสิทธิ์** (**Retail และ Commerce \> พนักงาน \> กลุ่มสิทธิ์**) และตั้งค่าตัวเลือก **อนุญาตให้ข้ามการลงะเบียนหรือทำเครื่องหมายเป็นลงทะเบียนแล้ว** เป็น **ใช่**
1. ตัวเลือก **เลื่อน** ในกล่องโตต้อบการจัดการข้อผิดพลาดต้องมีการเปิดใช้งานสิทธิ์ **อนุญาตให้เลื่อน** หากต้องการเปิดใช้งานสิทธิ์ ให้ไปที่หน้า **กลุ่มสิทธิ์** (**Retail และ Commerce \> พนักงาน \> กลุ่มสิทธิ์**) และตั้งค่าตัวเลือก **อนุญาตให้เลื่อน** เป็น **ใช่**
1. ตัวเลือก **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** และ **เลื่อน** ทำให้ผู้ดำเนินการสามารถป้อนข้อมูลเพิ่มเติมเมื่อการลงทะเบียนทางการเงินไม่สำเร็จ เพื่อให้ฟังก์ชันนี้พร้อมใช้งาน คุณควรระบุรหัสข้อมูลเป็น **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** และ **เลื่อน** บนกลุ่มตัวเชื่อมต่อทางการเงิน จากนั้นข้อมูลที่ผู้ดำเนินการป้อนจะถูกบันทึกเป็นธุรกรรมรหัสข้อมูลที่เชื่อมโยงกับธุรกรรมทางการเงิน สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับรหัสข้อมูล ดูที่ [รหัสข้อมูลและกลุ่มรหัสข้อมูล](../info-codes-retail.md)

    > [!NOTE]
    > ฟังก์ชันทริกเกอร์ **ผลิตภัณฑ์** ไม่ได้สนับสนุนรหัสข้อมูลที่ใช้สำหรับ **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** ในกลุ่มตัวเชื่อมต่อทางการเงิน

    - ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** บนแท็บ **รหัสข้อมูล** ให้เลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูลในฟิลด์ **ข้าม**, **ทำเครื่องหมายเป็นลงทะเบียนแล้ว** และ **เลื่อน**

    > [!NOTE]
    > คุณสามารถสร้างเอกสารทางการเงินหนึ่งฉบับและเอกสารที่ไม่ใช่ทางการเงินหนึ่งฉบับในทุกขั้นตอนของกระบวนการลงทะเบียนทางการเงิน ส่วนขยายของผู้ให้บริการเอกสารทางการเงินจะระบุทุกชนิดของธุรกรรมหรือเหตุการณ์ที่สัมพันธ์กับเอกสารทางการเงินหรือไม่ใช่ทางการเงิน ลักษณะการทำงานการจัดการข้อผิดพลาดใช้เฉพาะกับเอกสารทางการเงิน
    >
    > - **เอกสารทางการเงิน** – เอกสารบังคับที่ควรจะลงทะเบียนเสร็จเรียบร้อยแล้ว (ตัวอย่างเช่น ใบเสร็จทางการเงิน)
    > - **เอกสารที่ไม่ใช่ทางการเงิน** – เอกสารเสริมสำหรับธุรกรรมหรือเหตุการณ์ (ตัวอย่างเช่น สลิปบัตรของขวัญ)

1. ถ้าผู้ดำเนินการจำเป็นต้องสามารถดำเนินต่อเพื่อประมวลผลการดำเนินงานปัจจุบัน (ตัวอย่างเช่น การสร้างหรือการทำธุรกรรมให้เป็นขั้นสุดท้าย) หลังจากเกิดข้อผิดพลาดในการตรวจสอบความสมบูรณ์ คุณควรเปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามข้อผิดพลาดในการตรวจสอบความสมบูรณ์** ในหน้า **กลุ่มสิทธิ์** (**การขายปลีกและการค้า \> พนักงาน \> กลุ่มสิทธิ์**) ดูข้อมูลเพิ่มเติมเกี่ยวกับขั้นตอนการตรวจสอบความสมบูรณ์ที่ [การตรวจสอบความสมบูรณ์ของการลงทะเบียนทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check)

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a>ตั้งค่ารายงาน X/Z ทางการเงินจาก POS

เพื่อเปิดใช้งานรายงาน X/Z ทางการเงินให้ถูกเรียกใช้จาก POS คุณควรเพิ่มปุ่มใหม่ในโครงร่าง POS

- ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS

    1. เลือกโครงร่างที่จะอัปเดต 
    1. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ X ทางการเงิน**
    1. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ Z ทางการเงิน**
    1. ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** เรียกใช้งาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงไปยังฐานข้อมูลช่องทาง

## <a name="enable-manual-execution-of-postponed-fiscal-registration"></a>เปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว

เมื่อต้องการเปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว คุณควรเพิ่มปุ่มใหม่ไปยังโครงร่าง POS

- ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS

    1. เลือกโครงร่างที่จะอัปเดต
    1. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **ทำกระบวนการลงทะเบียนทางการเงินให้เสร็จสมบูรณ์**
    1. ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** เรียกใช้งาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงของคุณไปยังฐานข้อมูลช่องทาง


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
