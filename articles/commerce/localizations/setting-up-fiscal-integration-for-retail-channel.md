---
title: ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า
description: หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า
author: josaw
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 2ac8dc8787ab0bdb796ec849f9ede3f697b09680
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193655"
---
# <a name="set-up-the-fiscal-integration-for-commerce-channels"></a><span data-ttu-id="e4a55-103">ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า</span><span class="sxs-lookup"><span data-stu-id="e4a55-103">Set up the fiscal integration for Commerce channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="e4a55-104">คำนำ</span><span class="sxs-lookup"><span data-stu-id="e4a55-104">Introduction</span></span>

<span data-ttu-id="e4a55-105">หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า</span><span class="sxs-lookup"><span data-stu-id="e4a55-105">This topic provides guidelines for setting up the fiscal integration functionality for Commerce channels.</span></span> <span data-ttu-id="e4a55-106">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการรวมทางการเงิน ดูที่ [ภาพรวมของการรวมทางการเงินสำหรับช่องทางการค้า](fiscal-integration-for-retail-channel.md)</span><span class="sxs-lookup"><span data-stu-id="e4a55-106">For more information about the fiscal integration, see [Overview of fiscal integration for Commerce channels](fiscal-integration-for-retail-channel.md).</span></span>

<span data-ttu-id="e4a55-107">กระบวนการในการตั้งค่าการรวมทางการเงินประกอบด้วยงานทั้งหมดต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e4a55-107">The process of setting up the fiscal integration includes the following tasks:</span></span>

1. <span data-ttu-id="e4a55-108">ตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินที่แสดงถึงอุปกรณ์หรือบริการทางการเงินที่ใช้สำหรับวัตถุประสงค์ในการลงทะเบียนทางการเงิน เช่น เครื่องพิมพ์ทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-108">Configure fiscal connectors that represent fiscal devices or services that are used for fiscal registration purposes, such as fiscal printers.</span></span>
2. <span data-ttu-id="e4a55-109">ตั้งค่าคอนฟิกตัวให้บริการเอกสารที่สร้างเอกสารทางการเงินที่จะลงทะเบียนในอุปกรณ์หรือบริการทางการเงินโดยตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-109">Configure document providers that generate fiscal documents that will be registered in fiscal devices or services by fiscal connectors.</span></span>
3. <span data-ttu-id="e4a55-110">ตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางการเงินที่กำหนดลำดับของขั้นตอนการลงทะเบียนทางการเงิน และตัวเชื่อมต่อทางการเงิน และตัวให้บริการเอกสารทางการเงินที่ใช้สำหรับแต่ละขั้นตอน</span><span class="sxs-lookup"><span data-stu-id="e4a55-110">Configure the fiscal registration process that defines a sequence of fiscal registration steps and the fiscal connectors and fiscal document providers that are used for each step.</span></span>
4. <span data-ttu-id="e4a55-111">กำหนดกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ฟังก์ชันของการขายหน้าร้าน (POS)</span><span class="sxs-lookup"><span data-stu-id="e4a55-111">Assign the fiscal registration process to point of sale (POS) functionality profiles.</span></span>
5. <span data-ttu-id="e4a55-112">กำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-112">Assign connector technical profiles to hardware profiles.</span></span>

## <a name="set-up-a-fiscal-registration-process"></a><span data-ttu-id="e4a55-113">ตั้งค่ากระบวนการการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-113">Set up a fiscal registration process</span></span>

<span data-ttu-id="e4a55-114">ก่อนที่คุณจะใช้ฟังก์ชันการรวมทางการเงิน คุณควรตั้งค่าคอนฟิกการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e4a55-114">Before you use the fiscal integration functionality, you should configure the following settings.</span></span>

1. <span data-ttu-id="e4a55-115">อัพเดตพารามิเตอร์การค้า</span><span class="sxs-lookup"><span data-stu-id="e4a55-115">Update Commerce parameters.</span></span>

    1. <span data-ttu-id="e4a55-116">ในหน้า **พารามิเตอร์ที่ใช้ร่วมกันของการค้า** บนแท็บ **ทั่วไป** ตั้งค่าตัวเลือก **เปิดใช้งานการรวมทางการเงิน** เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="e4a55-116">On the **Commerce shared parameters** page, on the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span> <span data-ttu-id="e4a55-117">ในแท็บ **ลำดับหมายเลข** กำหนดลำดับหมายเลขสำหรับการอ้างอิงต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e4a55-117">On the **Number sequences** tab, define the number sequences for the following references:</span></span>

        - <span data-ttu-id="e4a55-118">หมายเลขโพรไฟล์เทคนิคทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-118">Fiscal technical profile number</span></span>
        - <span data-ttu-id="e4a55-119">หมายเลขกลุ่มของตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-119">Fiscal connector group number</span></span>
        - <span data-ttu-id="e4a55-120">หมายเลขกระบวนการการลงทะเบียน</span><span class="sxs-lookup"><span data-stu-id="e4a55-120">Registration process number</span></span>

    2. <span data-ttu-id="e4a55-121">ในหน้า **พารามิเตอร์การค้า** กำหนดลำดับหมายเลขสำหรับหมายเลขโพรไฟล์ฟังก์ชันทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-121">On the **Commerce parameters** page, define the number sequence for the fiscal functional profile number.</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-122">ลำดับหมายเลขไม่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="e4a55-122">Number sequences are optional.</span></span> <span data-ttu-id="e4a55-123">คุณสามารถสร้างหมายเลขสำหรับเอนทิตีการรวมทางการเงินทั้งหมดจากลำดับหมายเลขหรือด้วยตนเอง</span><span class="sxs-lookup"><span data-stu-id="e4a55-123">Numbers for all fiscal integration entities can be generated either from number sequences or manually.</span></span>

2. <span data-ttu-id="e4a55-124">อัปโหลดการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-124">Upload configurations of fiscal connectors and fiscal document providers.</span></span>

    <span data-ttu-id="e4a55-125">ผู้ให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการสร้างเอกสารทางการเงินที่แสดงถึงธุรกรรมและเหตุการณ์ที่ลงทะเบียนบน POS ในรูปแบบที่ใช้สำหรับการโต้ตอบกับอุปกรณ์หรือการบริการทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-125">A fiscal document provider is responsible for generating fiscal documents that represent transactions and events that are registered on the POS in a format that is also used for the interaction with a fiscal device or service.</span></span> <span data-ttu-id="e4a55-126">ตัวอย่างเช่น ผู้ให้บริการเอกสารทางการเงินอาจสร้างการแสดงการรับสินค้าทางการเงินในรูปแบบ XML</span><span class="sxs-lookup"><span data-stu-id="e4a55-126">For example, a fiscal document provider might generate a representation of a fiscal receipt in an XML format.</span></span>

    <span data-ttu-id="e4a55-127">ตัวเชื่อมต่อทางการเงินมีหน้าที่รับผิดชอบในการติดต่อสื่อสารกับอุปกรณ์หรือการบริการทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-127">A fiscal connector is responsible for the communication with a fiscal device or service.</span></span> <span data-ttu-id="e4a55-128">ตัวอย่างเช่น ตัวเชื่อมต่อทางการเงินอาจส่งการรับสินค้าทางการเงินที่ผู้ให้บริการเอกสารทางการเงินสร้างขึ้นในรูปแบบ XML ไปยังเครื่องพิมพ์ทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-128">For example, a fiscal connector might send a fiscal receipt that a fiscal document provider created in an XML format to a fiscal printer.</span></span> <span data-ttu-id="e4a55-129">สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับส่วนประกอบการรวมทางการเงิน ดูที่ [ตัวอย่างกระบวนการลงทะเบียนทางการเงินและการรวมทางการเงินสำหรับอุปกรณ์ทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices)</span><span class="sxs-lookup"><span data-stu-id="e4a55-129">For more details about fiscal integration components, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

    1. <span data-ttu-id="e4a55-130">ในหน้า **ตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ตัวเชื่อมต่อทางการเงิน**) อัปโหลดการตั้งค่าคอนฟิก XML สำหรับแต่ละอุปกรณ์หรือบริการที่คุณวางแผนที่จะใช้สำหรับวัตถุประสงค์การรวมทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-130">On the **Fiscal connectors** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connectors**), upload an XML configuration for each device or service that you plan to use for fiscal integration purposes.</span></span>

        > [!TIP]
        > <span data-ttu-id="e4a55-131">โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ทางเทคนิคที่เกี่ยวข้องกับตัวเชื่อมต่อทางบัญชีปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="e4a55-131">By selecting **View**, you can view all functional and technical profiles that are related to the current fiscal connector.</span></span>

    2. <span data-ttu-id="e4a55-132">ในหน้า **ผู้ให้บริการเอกสารทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ผู้ให้บริการเอกสารทางการเงิน**) อัปโหลดการตั้งค่าคอนฟิก XML สำหรับแต่ละอุปกรณ์หรือบริการที่คุณวางแผนที่จะใช้สำหรับวัตถุประสงค์การรวมทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-132">On the **Fiscal document providers** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal document providers**), upload an XML configuration for each device or service that you plan to use.</span></span>

        > [!TIP]
        > <span data-ttu-id="e4a55-133">โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ที่เกี่ยวข้องกับตัวให้บริการเอกสารทางการเงินปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="e4a55-133">By selecting **View**, you can view all functional profiles that are related to the current fiscal document provider.</span></span>

    <span data-ttu-id="e4a55-134">ดูตัวอย่างของการตั้งค่าคอนฟิกของตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงิน ดู [ตัวอย่างการรวมทางการเงินใน Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk)</span><span class="sxs-lookup"><span data-stu-id="e4a55-134">For examples of configurations of fiscal connectors and fiscal document providers, see [Fiscal integration samples in the Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-135">การแม็ปข้อมูลจะถือเป็นส่วนหนึ่งของตัวให้บริการเอกสารทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-135">Data mapping is considered part of a fiscal document provider.</span></span> <span data-ttu-id="e4a55-136">ในการตั้งค่าการแม็ปข้อมูลที่แตกต่างกันสำหรับตัวเชื่อมต่อเดียวกัน (ตัวอย่างเช่น ข้อบังคับเฉพาะรัฐ) คุณควรสร้างผู้ให้บริการเอกสารทางการเงินที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="e4a55-136">To set up different data mappings for the same connector (for example, state-specific regulations), you should create different fiscal document providers.</span></span>

3. <span data-ttu-id="e4a55-137">สร้างโพรไฟล์การทำงานของตัวเชื่อมต่อและโพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-137">Create connector functional profiles and connector technical profiles.</span></span>

    1. <span data-ttu-id="e4a55-138">ในหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ**) สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับแต่ละชุดของตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงินที่เกี่ยวข้องกับตัวเชื่อมต่อทางการเงินนี้</span><span class="sxs-lookup"><span data-stu-id="e4a55-138">On the **Connector functional profiles** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Connector functional profiles**), create a connector functional profile for each combination of a fiscal connector and a fiscal document provider that is related to this fiscal connector.</span></span>

        1. <span data-ttu-id="e4a55-139">เลือกชื่อตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-139">Select a connector name.</span></span>
        2. <span data-ttu-id="e4a55-140">เลือกผู้ให้บริการเอกสาร</span><span class="sxs-lookup"><span data-stu-id="e4a55-140">Select a document provider.</span></span>

        <span data-ttu-id="e4a55-141">คุณสามารถเปลี่ยนพารามิเตอร์การแม็ปข้อมูลในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-141">You can change the data mapping parameters in a connector functional profile.</span></span> <span data-ttu-id="e4a55-142">เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกตัวให้บริการเอกสารทางการเงิน เลือก **อัพเดต**</span><span class="sxs-lookup"><span data-stu-id="e4a55-142">To restore the default parameters that are defined in the fiscal document provider configuration, select **Update**.</span></span>

        <span data-ttu-id="e4a55-143">**ตัวอย่าง**</span><span class="sxs-lookup"><span data-stu-id="e4a55-143">**Examples**</span></span>

        | <span data-ttu-id="e4a55-144">พารามิเตอร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-144">Parameter</span></span>  | <span data-ttu-id="e4a55-145">รูปแบบ</span><span class="sxs-lookup"><span data-stu-id="e4a55-145">Format</span></span> | <span data-ttu-id="e4a55-146">ตัวอย่าง</span><span class="sxs-lookup"><span data-stu-id="e4a55-146">Example</span></span> |
        |---|--------|---------|
        | <span data-ttu-id="e4a55-147">**การตั้งค่าอัตรา VAT**</span><span class="sxs-lookup"><span data-stu-id="e4a55-147">**VAT rates settings**</span></span> | <span data-ttu-id="e4a55-148">ค่า: VATrate</span><span class="sxs-lookup"><span data-stu-id="e4a55-148">value : VATrate</span></span> | <span data-ttu-id="e4a55-149">1 : 2000, 2 : 1800</span><span class="sxs-lookup"><span data-stu-id="e4a55-149">1 : 2000, 2 : 1800</span></span> |
        | <span data-ttu-id="e4a55-150">**การแม็ปรหัส VAT**</span><span class="sxs-lookup"><span data-stu-id="e4a55-150">**VAT codes mapping**</span></span> | <span data-ttu-id="e4a55-151">VATcode : ค่า</span><span class="sxs-lookup"><span data-stu-id="e4a55-151">VATcode : value</span></span> | <span data-ttu-id="e4a55-152">vat20: 1, vat18: 2</span><span class="sxs-lookup"><span data-stu-id="e4a55-152">vat20 : 1, vat18 : 2</span></span> |
        | <span data-ttu-id="e4a55-153">**การแม็ปชนิดการชำระเงิน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-153">**Tender types mapping**</span></span> | <span data-ttu-id="e4a55-154">TenderType : ค่า</span><span class="sxs-lookup"><span data-stu-id="e4a55-154">TenderType : value</span></span> | <span data-ttu-id="e4a55-155">เงินสด: 1, บัตร : 2</span><span class="sxs-lookup"><span data-stu-id="e4a55-155">Cash : 1, Card : 2</span></span> |

        > [!NOTE]
        > <span data-ttu-id="e4a55-156">โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อเป็นโพรไฟล์เฉพาะบริษัท</span><span class="sxs-lookup"><span data-stu-id="e4a55-156">Connector functional profiles are company-specific.</span></span> <span data-ttu-id="e4a55-157">ถ้าคุณวางแผนที่จะใช้ชุดของตัวเชื่อมต่อทางการเงินและตัวให้บริการเอกสารทางการเงินเดียวกันในบริษัทที่แตกต่างกัน คุณควรสร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับแต่ละบริษัท</span><span class="sxs-lookup"><span data-stu-id="e4a55-157">If you plan to use the same combination of a fiscal connector and a fiscal document provider in different companies, you should create a connector functional profile for each company.</span></span>

    2. <span data-ttu-id="e4a55-158">ในหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ**) สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับตัวเชื่อมต่อทางการเงินแต่ละรายการ</span><span class="sxs-lookup"><span data-stu-id="e4a55-158">On the **Connector technical profiles** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Connector technical profiles**), create a connector technical profile for each fiscal connector.</span></span>

        1. <span data-ttu-id="e4a55-159">เลือกชื่อตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-159">Select a connector name.</span></span>
        2. <span data-ttu-id="e4a55-160">เลือกชนิดตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-160">Select a connector type.</span></span> <span data-ttu-id="e4a55-161">เลือกอุปกรณ์ที่เชื่อมต่อกับสถานีฮาร์ดแวร์ เลือก **ท้องถิ่น**</span><span class="sxs-lookup"><span data-stu-id="e4a55-161">For devices that are connected to a Hardware station, select **Local**.</span></span>

            > [!NOTE]
            > <span data-ttu-id="e4a55-162">ขณะนี้มีการสนับสนุนเฉพาะตัวเชื่อมต่อภายในเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e4a55-162">Only local connectors are currently supported.</span></span>

        <span data-ttu-id="e4a55-163">พารามิเตอร์ในแท็บ **อุปกรณ์** และ **การตั้งค่า** ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสามารถเปลี่ยนได้</span><span class="sxs-lookup"><span data-stu-id="e4a55-163">Parameters on the **Device** and **Settings** tabs in a connector technical profile can be changed.</span></span> <span data-ttu-id="e4a55-164">เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงิน เลือก **อัพเดต**</span><span class="sxs-lookup"><span data-stu-id="e4a55-164">To restore the default parameters that are defined in the fiscal connector configuration, select **Update**.</span></span> <span data-ttu-id="e4a55-165">ขณะที่โหลดเวอร์ชันใหม่ของการตั้งค่าคอนฟิก XML คุณจะได้รับข้อความแจ้งที่ระบุว่าตัวเชื่อมต่อทางการเงินปัจจุบัน หรือตัวให้บริการเอกสารทางการเงินถูกใช้แล้ว</span><span class="sxs-lookup"><span data-stu-id="e4a55-165">While a new version of an XML configuration is loaded, you receive a message that states that the current fiscal connector or fiscal document provider is already being used.</span></span> <span data-ttu-id="e4a55-166">กระบวนงานนี้ไม่ได้แทนที่การเปลี่ยนแปลงด้วยตนเองที่ทำไว้ก่อนหน้านี้ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อและโพรไฟล์ทางเทคนิคตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-166">This procedure doesn't override manual changes that were previously made in connector functional profiles and connector technical profiles.</span></span> <span data-ttu-id="e4a55-167">เมื่อต้องการใช้ชุดเริ่มต้นของพารามิเตอร์จากการตั้งค่าคอนฟิกใหม่ บนหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** และหน้า **โพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ** เลือก **อัพเดต**</span><span class="sxs-lookup"><span data-stu-id="e4a55-167">To apply the default set of parameters from a new configuration, on the **Connector functional profiles** page or the **Connector technical profiles** page, select **Update**.</span></span>

4. <span data-ttu-id="e4a55-168">สร้างกลุ่มของตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-168">Create fiscal connector groups.</span></span>

    <span data-ttu-id="e4a55-169">กลุ่มตัวเชื่อมต่อทางการเงินรวมโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อตัวเชื่อมของต่อเชื่อมต่อทางการเงินที่ทำหน้าที่เหมือนกัน และถูกใช้ในขั้นตอนเดียวกันในกระบวนการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-169">A fiscal connector group combines functional profiles of fiscal connectors that perform identical functions and are used at the same step of a fiscal registration process.</span></span> <span data-ttu-id="e4a55-170">ตัวอย่างเช่น ถ้าสามารถใช้เครื่องพิมพ์ทางการเงินหลายรุ่นในร้านค้า ตัวเชื่อมต่อทางการเงินสำหรับเครื่องพิมพ์ทางการเงินดังกล่าวสามารถรวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-170">For example, if several fiscal printer models can be used in a store, fiscal connectors for those fiscal printers can be combined in a fiscal connector group.</span></span>

    1. <span data-ttu-id="e4a55-171">ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**) สร้างกลุ่มตัวเชื่อมต่อทางการเงินใหม่</span><span class="sxs-lookup"><span data-stu-id="e4a55-171">On the **Fiscal connector group** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**), create a new fiscal connector group.</span></span>
    2. <span data-ttu-id="e4a55-172">เพิ่มโพรไฟล์การทำงานไปยังกลุ่มของตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-172">Add functional profiles to the connector group.</span></span> <span data-ttu-id="e4a55-173">บนแท็บ **โพรไฟล์ฟังก์ชัน** เลือก **เพิ่ม** และเลือกหมายเลขโพรไฟล์</span><span class="sxs-lookup"><span data-stu-id="e4a55-173">On the **Functional profiles** tab, select **Add**, and select a profile number.</span></span> <span data-ttu-id="e4a55-174">แต่ละตัวเชื่อมต่อทางการเงินในกลุ่มตัวเชื่อมต่อสามารถมีโพรไฟล์ฟังก์หนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="e4a55-174">Each fiscal connector in a connector group can only have one functional profile.</span></span>
    3. <span data-ttu-id="e4a55-175">ถ้าคุณต้องการระงับการใช้โพรไฟล์การทำงาน ตั้งค่าตัวเลือก **ปิดใช้งาน** เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="e4a55-175">To suspend use of the functional profile, set the **Disable** option to **Yes**.</span></span> <span data-ttu-id="e4a55-176">การเปลี่ยนแปลงนี้มีผลต่อกลุ่มตัวเชื่อมต่อปัจจุบันเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e4a55-176">This change affects only the current connector group.</span></span> <span data-ttu-id="e4a55-177">คุณสามารถดำเนินต่อโดยใช้โพรไฟล์การทำงานเดียวกันในกลุ่มตัวเชื่อมต่ออื่นๆ</span><span class="sxs-lookup"><span data-stu-id="e4a55-177">You can continue to use the same functional profile in other connector groups.</span></span>

5. <span data-ttu-id="e4a55-178">สร้างกระบวนการการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-178">Create a fiscal registration process.</span></span>

    <span data-ttu-id="e4a55-179">กระบวนการลงทะเบียนทางการเงินจะถูกกำหนดโดยลำดับของขั้นตอนการลงทะเบียน และกลุ่มตัวเชื่อมต่อที่ใช้ในแต่ละขั้นตอน</span><span class="sxs-lookup"><span data-stu-id="e4a55-179">A fiscal registration process is defined by the sequence of registration steps and the connector group that is used for each step.</span></span>

    1. <span data-ttu-id="e4a55-180">ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) สร้างเรกคอร์ดใหม่สำหรับกระบวนการที่ไม่ซ้ำกันของการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-180">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), create a new record for each unique process of fiscal registration.</span></span>
    2. <span data-ttu-id="e4a55-181">เพิ่มขั้นตอนการลงทะเบียนไปยังกระบวนการ:</span><span class="sxs-lookup"><span data-stu-id="e4a55-181">Add registration steps to the process:</span></span>

        1. <span data-ttu-id="e4a55-182">เลือก **เพิ่ม**</span><span class="sxs-lookup"><span data-stu-id="e4a55-182">Select **Add**.</span></span>
        2. <span data-ttu-id="e4a55-183">เลือกชนิดของตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-183">Select a fiscal connector type.</span></span>
        3. <span data-ttu-id="e4a55-184">ในฟิลด์ **หมายเลขกลุ่ม** เลือกกลุ่มตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-184">In the **Group number** field, select an appropriate fiscal connector group.</span></span>

6. <span data-ttu-id="e4a55-185">กำหนดเอนทิตีของกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-185">Assign entities of the fiscal registration process to POS profiles.</span></span>

    1. <span data-ttu-id="e4a55-186">ในหน้า **โพรไฟล์ฟังก์ชันของ POS** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฟังก์ชัน**) กำหนดกระบวนการลงทะเบียนทางการเงินกับโพรไฟล์ฟังก์ชันของ POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-186">On the **POS functionality profiles** page (**Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**), assign the fiscal registration process to a POS functionality profile.</span></span> <span data-ttu-id="e4a55-187">เลือก **แก้ไข** จากนั้น บนแท็บ **กระบวนการลงทะเบียนทางการเงิน** ในฟิลด์ **หมายเลขกระบวนการ** เลือกกระบวนการ</span><span class="sxs-lookup"><span data-stu-id="e4a55-187">Select **Edit**, and then, on the **Fiscal registration process** tab, in the **Process number** field, select a process.</span></span>
    2. <span data-ttu-id="e4a55-188">ในหน้า **โพรไฟล์ฮาร์ดแวร์ POS** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฮาร์ดแวร์**) กำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-188">On the **POS hardware profile** page (**Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**), assign connector technical profiles to a hardware profile.</span></span> <span data-ttu-id="e4a55-189">เลือก **แก้ไข** เพิ่มรายการในแท็บ **อุปกรณ์ต่อพ่วงทางการเงิน** จากนั้น ในฟิลด์ **หมายเลขโพรไฟล์** เลือกโพรไฟล์ทางเทคนิคตัวเชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="e4a55-189">Select **Edit**, add a line on the **Fiscal peripherals** tab, and then, in the **Profile number** field, select a connector technical profile.</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-190">คุณสามารถเพิ่มโพรไฟล์ทางเทคนิคหลายรายการไปยังโพรไฟล์ฮาร์ดแวร์เดียวกันได้</span><span class="sxs-lookup"><span data-stu-id="e4a55-190">You can add several technical profiles to the same hardware profile.</span></span> <span data-ttu-id="e4a55-191">อย่างไรก็ตาม โพรไฟล์ฮาร์ดแวร์หรือโพรไฟล์ฟังก์ชันของ POS ควรมีจุดตัดกับกลุ่มตัวเชื่อมต่อทางการเงินใดๆ เดียวเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e4a55-191">However, a hardware profile or POS functionality profile should have only one intersection with any fiscal connector group.</span></span>

    <span data-ttu-id="e4a55-192">ขั้นตอนการลงทะเบียนทางการเงินถูกกำหนดตามกระบวนการลงทะเบียนทางการเงินและตามพารามิเตอร์บางตัวของส่วนประกอบการรวมทางการเงิน: ส่วนขยายของ Commerce Runtime สำหรับตัวให้บริการเอกสารทางการเงินและส่วนขยายสถานีฮาร์ดแวร์สำหรับตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-192">The fiscal registration flow is defined by the fiscal registration process and also by some parameters of fiscal integration components: the Commerce runtime extension for the fiscal document provider and the Hardware station extension for the fiscal connector.</span></span>

    - <span data-ttu-id="e4a55-193">การบอกรับเป็นสมาชิกของเหตุการณ์และธุรกรรมการลงทะเบียนทางการเงินถูกกำหนดไว้ล่วงหน้าในตัวให้บริการเอกสารทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-193">The subscription of events and transactions to fiscal registration is predefined in the fiscal document provider.</span></span>
    - <span data-ttu-id="e4a55-194">ตัวให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการระบุตัวเชื่อมต่อทางการเงินที่ใช้สำหรับการลงทะเบียนทางการเงินอีกด้วย</span><span class="sxs-lookup"><span data-stu-id="e4a55-194">The fiscal document provider is also responsible for identifying the fiscal connector that is used for fiscal registration.</span></span> <span data-ttu-id="e4a55-195">ซึ่งตรงกับโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อที่รวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงินที่ระบุสำหรับขั้นตอนของกระบวนการลงทะเบียนทางการเงินกับโพรไฟล์ทางเทคนิคตัวเชื่อมต่อที่กำหนดให้กับโพรไฟล์ฮาร์ดแวร์ของสถานีฮาร์ดแวร์ที่จับคู่กับ POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-195">It matches the connector functional profiles that are included in the fiscal connector group that is specified for the current step of the fiscal registration process with the connector technical profile that is assigned to the hardware profile of the Hardware station that the POS is paired to.</span></span>
    - <span data-ttu-id="e4a55-196">ตัวให้บริการเอกสารทางการเงินใช้การตั้งค่าการแม็ปข้อมูลจากการตั้งค่าคอนฟิกตัวให้บริการเอกสารทางการเงินเพื่อแปลงข้อมูลเหตุการณ์/ธุรกรรม เช่น ภาษีและการชำระเงินในขณะที่มีการสร้างเอกสารทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-196">The fiscal document provider uses the data mapping settings from the fiscal document provider configuration to transform transaction/event data such as taxes and payments while a fiscal document is generated.</span></span>
    - <span data-ttu-id="e4a55-197">เมื่อตัวให้บริการเอกสารทางการเงินสร้างเอกสารทางการเงิน ตัวเชื่อมต่อทางการเงินสามารถเป็นส่งไปยังอุปกรณ์ทางการเงินทั้งอย่างนั้น หรือแยกวิเคราะห์และแปลงเป็นลำดับของคำสั่งของ Application Programming Interface (API) โดยขึ้นอยู่กับวิธีการจัดการการสื่อสาร</span><span class="sxs-lookup"><span data-stu-id="e4a55-197">When the fiscal document provider generates a fiscal document, the fiscal connector can either send it to the fiscal device as is, or parse it and transform it into a sequence of commands of the device application programming interface (API), depending on how the communication is handled.</span></span>

7. <span data-ttu-id="e4a55-198">ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) เลือก **ตรวจสอบความถูกต้อง** เพื่อตรวจสอบกระบวนการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-198">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), select **Validate** to validate the fiscal registration process.</span></span>

    <span data-ttu-id="e4a55-199">เราขอแนะนำให้คุณรันการตรวจสอบความถูกต้องชนิดนี้ในกรณีต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e4a55-199">We recommend that you run this type of validation in the following cases:</span></span>

    - <span data-ttu-id="e4a55-200">หลังจากที่คุณทำการตั้งค่าเสร็จสิ้นสำหรับกระบวนการลงทะเบียนใหม่ รวมถึงเมื่อคุณกำหนดกระบวนการลงทะเบียนให้กับโพรไฟล์ฟังก์ชัน POS และโพรไฟล์ฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-200">After you've completed all the settings for a new registration process, including when you assign registration processes to POS functionality profiles and hardware profiles.</span></span>
    - <span data-ttu-id="e4a55-201">หลังจากที่คุณทำการเปลี่ยนแปลงในกระบวนการลงทะเบียนทางการเงินที่มีอยู่ และการเปลี่ยนแปลงเหล่านั้นอาจทำให้ตัวเชื่อมต่อทางการเงินอื่นกลายเป็นถูกเลือกขณะใช้งานจริง (ตัวอย่างเช่น ถ้าคุณเปลี่ยนกลุ่มตัวเชื่อมต่อสำหรับกระบวนการลงทะเบียนทางการเงิน ให้เปิดใช้งานตัวเชื่อมต่อฟังก์ชันของโพรไฟล์ในกลุ่มตัวเชื่อมต่อหรือเพิ่มโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อใหม่ไปยังกลุ่มตัวเชื่อมต่อ)</span><span class="sxs-lookup"><span data-stu-id="e4a55-201">After you make changes to an existing fiscal registration process, and those changes might cause a different fiscal connector to be selected at runtime (for example, if you change the connector group for a fiscal registration process step, enable a connector functional profile in a connector group, or add a new connector functional profile to a connector group).</span></span>
    - <span data-ttu-id="e4a55-202">หลังจากที่คุณทำการเปลี่ยนแปลงในการกำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อไปยังโพรไฟล์ฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-202">After you make changes in the assignment of connector technical profiles to hardware profiles.</span></span>

8. <span data-ttu-id="e4a55-203">ในหน้า **กำหนดการการกระจาย** รันงาน **1070** และ **1090** เพื่อโอนย้ายข้อมูลไปยังฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="e4a55-203">On the **Distribution schedule** page, run the **1070** and **1090** jobs to transfer data to the channel database.</span></span>

## <a name="set-up-fiscal-texts-for-discounts"></a><span data-ttu-id="e4a55-204">ตั้งค่าข้อความทางการเงินสำหรับส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e4a55-204">Set up fiscal texts for discounts</span></span>

<span data-ttu-id="e4a55-205">ในบางกรณี ข้อความพิเศษต้องพิมพ์บนใบเสร็จทางการเงินเมื่อมีการใช้ส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e4a55-205">In some cases, a special text must be printed on a fiscal receipt if a discount is applied.</span></span> <span data-ttu-id="e4a55-206">คุณสามารถตั้งค่าข้อความทางการเงินสำหรับส่วนลดในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**)</span><span class="sxs-lookup"><span data-stu-id="e4a55-206">You can set up fiscal texts for discounts on the **Fiscal connector group** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**).</span></span>

- <span data-ttu-id="e4a55-207">สำหรับส่วนลดด้วยตนเองที่ใช้ได้ที่ POS คุณควรตั้งค่าข้อความทางการเงินสำหรับรหัสข้อมูล หรือกลุ่มรหัสข้อมูลที่มีการระบุเป็นรหัสข้อมูล **ส่วนลดสำหรับผลิตภัณฑ์** ในโพรไฟล์ฟังก์ชันของ POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-207">For manual discounts that are applied at the POS, you should set a fiscal text for the info code or info code group that is specified as the **Product discount** info code in the POS functionality profile.</span></span>

    1. <span data-ttu-id="e4a55-208">ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-208">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="e4a55-209">ในแท็บ **รหัสข้อมูล** เลือก **เพิ่ม** และเลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e4a55-209">On the **Info codes** tab, select **Add**, and select an info code or info code group.</span></span>
    3. <span data-ttu-id="e4a55-210">ใน **หมายเลขรหัสข้อมูล** เลือกค่า</span><span class="sxs-lookup"><span data-stu-id="e4a55-210">In the **Info code number**, select a value.</span></span>
    4. <span data-ttu-id="e4a55-211">ในฟิลด์ **หมายเลขรหัสย่อย** เลือกค่าถ้ารหัสย่อยจำเป็นสำหรับรหัสข้อมูลที่เลือก</span><span class="sxs-lookup"><span data-stu-id="e4a55-211">In the **Subcode number** field, select a value if a subcode is required for the selected info code.</span></span>
    5. <span data-ttu-id="e4a55-212">ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-212">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>
    6. <span data-ttu-id="e4a55-213">ตั้งค่าตัวเลือก **พิมพ์ข้อมูลที่ผู้ใช้ป้อนบนใบเสร็จทางการเงิน** เป็น **ใช่** เพื่อแทนที่ข้อความบนใบเสร็จทางการเงินด้วยข้อมูลที่ผู้ใช้ป้อนด้วยตนเองที่ POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-213">Set the **Print user input on fiscal receipt** option to **Yes** to override the text on a fiscal receipt with information that a user manually enters at the POS.</span></span> <span data-ttu-id="e4a55-214">ตัวเลือกนี้ใช้ได้เฉพาะกับรหัสข้อมูลที่มีชนิดของข้อมูลป้อนเข้า **ข้อความ**</span><span class="sxs-lookup"><span data-stu-id="e4a55-214">This option applies only to info codes that have an input type of **Text**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-215">คุณสามารถระบุข้อความทางการเงินสำหรับรหัสข้อมูลหลายรายการเพื่อสนับสนุนสถานการณ์จำลองที่มีการใช้กลุ่มรหัสข้อมูล รหัสข้อมูลที่มีการเชื่อมโยง และรหัสข้อมูลที่มีการทริกเกอร์</span><span class="sxs-lookup"><span data-stu-id="e4a55-215">You can specify a fiscal text for several info codes to support scenarios where info code groups, linked info codes, and triggered info codes are used.</span></span> <span data-ttu-id="e4a55-216">ในสถานการณ์เหล่านี้ ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากรหัสข้อมูลทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมที่มีการใช้ส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e4a55-216">In these scenarios, the fiscal receipt will contain the fiscal texts from all info codes that are linked to the transaction line where the discount was applied.</span></span>

- <span data-ttu-id="e4a55-217">สำหรับส่วนลดเฉพาะช่องทาง คุณควรกำหนดข้อความทางการเงินสำหรับรหัสส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e4a55-217">For channel-specific discounts, you should define a fiscal text for the discount ID.</span></span>

    1. <span data-ttu-id="e4a55-218">ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-218">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="e4a55-219">ในแท็บ **ส่วนลด** เลือก **เพิ่ม** และเลือกรหัสส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e4a55-219">On the **Discounts** tab, select **Add**, and select a discount ID.</span></span>
    3. <span data-ttu-id="e4a55-220">ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-220">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-221">ถ้ามีการใช้ส่วนลดหลายรายการในบรรทัดธุรกรรมเดียวกัน ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากส่วนลดทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมเหล่านั้น</span><span class="sxs-lookup"><span data-stu-id="e4a55-221">If several discounts are applied to the same transaction line, the fiscal receipt will contain fiscal texts from all discounts that are linked to those transaction line.</span></span>

## <a name="set-error-handling-settings"></a><span data-ttu-id="e4a55-222">กำหนดการตั้งค่าการจัดการข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e4a55-222">Set error handling settings</span></span>

<span data-ttu-id="e4a55-223">ตัวเลือกการจัดการข้อผิดพลาดที่มีอยู่ในการรวมทางการเงินถูกตั้งค่าในกระบวนการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-223">The error handling options that are available in the fiscal integration are set in the fiscal registration process.</span></span> <span data-ttu-id="e4a55-224">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการจัดการข้อผิดพลาดในการรวมทางการเงิน ดูที่ [การจัดการข้อผิดพลาด](fiscal-integration-for-retail-channel.md#error-handling)</span><span class="sxs-lookup"><span data-stu-id="e4a55-224">For more information about error handling in the fiscal integration, see [Error handling](fiscal-integration-for-retail-channel.md#error-handling).</span></span>

1. <span data-ttu-id="e4a55-225">ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) คุณสามารถตั้งค่าพารามิเตอร์ต่อไปนี้สำหรับแต่ละขั้นตอนของกระบวนการลงทะเบียนทางการเงิน:</span><span class="sxs-lookup"><span data-stu-id="e4a55-225">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), you can set the following parameters for each step of the fiscal registration process:</span></span>

    - <span data-ttu-id="e4a55-226">**อนุญาตให้ข้าม** – พารามิเตอร์นี้เปิดใช้งานตัวเลือก **ข้าม** ในกล่องโต้ตอบการจัดการข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e4a55-226">**Allow skip** – This parameter enables the **Skip** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="e4a55-227">**อนุญาตให้มีการทำเครื่องหมายเป็นลงทะเบียน**– พารามิเตอร์นี้เปิดใช้งานตัวเลือก **การทำเครื่องหมายเป็นลงทะเบียน** ในกล่องโต้ตอบการจัดการข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e4a55-227">**Allow mark as registered** – This parameter enables the **Mark as registered** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="e4a55-228">**ดำเนินต่อกับข้อผิดพลาด** – ถ้าเปิดใช้งานพารามิเตอร์นี้ กระบวนการลงทะเบียนทางการเงินสามารถดำเนินต่อได้บนเครื่องบันทึกเงินสด POS หากการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e4a55-228">**Continue on error** – If this parameter is enabled, the fiscal registration process can continue on the POS register if the fiscal registration of a transaction or event fails.</span></span> <span data-ttu-id="e4a55-229">หรือถ้าต้องการรันการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ถัดไป ผู้ดำเนินการต้องลองลงทะเบียนทางการเงินที่ล้มเหลวอีกครั้ง ข้าม หรือทำเครื่องหมายธุรกรรมหรือเหตุการณ์เป็นลงทะเบียนแล้ว</span><span class="sxs-lookup"><span data-stu-id="e4a55-229">Otherwise, to run the fiscal registration of the next transaction or event, the operator must retry the failed fiscal registration, skip it, or mark the transaction or event as registered.</span></span> <span data-ttu-id="e4a55-230">สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [การลงทะเบียนทางการเงินที่เลือกได้](fiscal-integration-for-retail-channel.md#optional-fiscal-registration)</span><span class="sxs-lookup"><span data-stu-id="e4a55-230">For more information, see [Optional fiscal registration](fiscal-integration-for-retail-channel.md#optional-fiscal-registration).</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-231">ถ้าพารามิเตอร์ **ดำเนินการต่อเมื่อมีข้อผิดพลาด** ถูกเปิดใช้งาน พารามิเตอร์ **อนุญาตให้ข้าม** และ **อนุญาตให้ทำเครื่องหมายเป็นลงทะเบียนแล้ว** จะถูกปิดใช้งานโดยอัตโนมัติ</span><span class="sxs-lookup"><span data-stu-id="e4a55-231">If the **Continue on error** parameter is enabled, the **Allow skip** and **Allow mark as registered** parameters are automatically disabled.</span></span>

2. <span data-ttu-id="e4a55-232">ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ในกล่องโต้ตอบการจัดการข้อผิดพลาดจำเป็นต้องมีสิทธิ์ **อนุญาตให้ข้ามการลงะเบียนหรือทำเครื่องหมายเป็นลงทะเบียน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-232">The **Skip** and **Mark as registered** options in the error handling dialog box require the **Allow skip registration or mark as registered** permission.</span></span> <span data-ttu-id="e4a55-233">ดังนั้น ในหน้า **กลุ่มสิทธิ์** (**การขายปลีกและการค้า \> พนักงาน \> กลุ่มสิทธิ์**) เปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามการลงทะเบียนหรือทำเครื่องหมายเป็นลงทะเบียน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-233">Therefore, on the **Permission groups** page (**Retail and Commerce \> Employees \> Permission groups**), enable the **Allow skip registration or mark as registered** permission.</span></span>
3. <span data-ttu-id="e4a55-234">ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ทำให้ผู้ดำเนินการสามารถป้อนข้อมูลเพิ่มเติมเมื่อการลงทะเบียนทางการเงินไม่สำเร็จ</span><span class="sxs-lookup"><span data-stu-id="e4a55-234">The **Skip** and **Mark as registered** options let operators enter additional information when fiscal registration fails.</span></span> <span data-ttu-id="e4a55-235">เพื่อให้ฟังก์ชันนี้พร้อมใช้งาน คุณควรระบุรหัสข้อมูล **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** บนกลุ่มตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-235">To make this functionality available, you should specify the **Skip** and **Mark as registered** info codes on a fiscal connector group.</span></span> <span data-ttu-id="e4a55-236">จากนั้นข้อมูลที่ผู้ดำเนินการป้อนจะถูกบันทึกเป็นธุรกรรมรหัสข้อมูลที่เชื่อมโยงกับธุรกรรมทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-236">The information that operators enter is then saved as an info code transaction that is linked to the fiscal transaction.</span></span> <span data-ttu-id="e4a55-237">สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับรหัสข้อมูล ดูที่ [รหัสข้อมูลและกลุ่มรหัสข้อมูล](../info-codes-retail.md)</span><span class="sxs-lookup"><span data-stu-id="e4a55-237">For more details about info codes, see [Info codes and info code groups](../info-codes-retail.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-238">ฟังก์ชันทริกเกอร์ **ผลิตภัณฑ์** ไม่ได้สนับสนุนรหัสข้อมูลที่ใช้สำหรับ **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ในกลุ่มตัวเชื่อมต่อทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-238">The **Product** trigger function isn't supported for the info codes that are used for **Skip** and **Mark as registered** in fiscal connector groups.</span></span>

    - <span data-ttu-id="e4a55-239">ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** บนแท็บ **รหัสข้อมูล** เลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูลในฟิลด์ **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-239">On the **Fiscal connector group** page, on the **Info codes** tab, select info codes or info code groups in the **Skip** and **Mark as registered** fields.</span></span>

    > [!NOTE]
    > <span data-ttu-id="e4a55-240">คุณสามารถสร้างเอกสารทางการเงินหนึ่งฉบับและเอกสารที่ไม่ใช่ทางการเงินหนึ่งฉบับในทุกขั้นตอนของกระบวนการลงทะเบียนทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-240">One fiscal document and one non-fiscal document can be generated on any step of a fiscal registration process.</span></span> <span data-ttu-id="e4a55-241">ส่วนขยายของผู้ให้บริการเอกสารทางการเงินจะระบุทุกชนิดของธุรกรรมหรือเหตุการณ์ที่สัมพันธ์กับเอกสารทางการเงินหรือไม่ใช่ทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-241">A fiscal document provider extension identifies every type of transaction or event as related to fiscal or non-fiscal documents.</span></span> <span data-ttu-id="e4a55-242">ลักษณะการทำงานการจัดการข้อผิดพลาดใช้เฉพาะกับเอกสารทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e4a55-242">The error handling feature applies only to fiscal documents.</span></span>
    >
    > - <span data-ttu-id="e4a55-243">**เอกสารทางการเงิน** – เอกสารบังคับที่ควรจะลงทะเบียนเสร็จเรียบร้อยแล้ว (ตัวอย่างเช่น ใบเสร็จทางการเงิน)</span><span class="sxs-lookup"><span data-stu-id="e4a55-243">**Fiscal document** – A mandatory document that should be registered successfully (for example, a fiscal receipt).</span></span>
    > - <span data-ttu-id="e4a55-244">**เอกสารที่ไม่ใช่ทางการเงิน** – เอกสารเสริมสำหรับธุรกรรมหรือเหตุการณ์ (ตัวอย่างเช่น สลิปบัตรของขวัญ)</span><span class="sxs-lookup"><span data-stu-id="e4a55-244">**Non-fiscal document** – A supplementary document for the transaction or event (for example, a gift card slip).</span></span>

4. <span data-ttu-id="e4a55-245">ถ้าผู้ดำเนินการจำเป็นต้องสามารถดำเนินต่อเพื่อประมวลผลการดำเนินงานปัจจุบัน (ตัวอย่างเช่น การสร้างหรือการทำธุรกรรมให้เป็นขั้นสุดท้าย) หลังจากเกิดข้อผิดพลาดในการตรวจสอบความสมบูรณ์ คุณควรเปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามข้อผิดพลาดในการตรวจสอบความสมบูรณ์** ในหน้า **กลุ่มสิทธิ์** (**การขายปลีกและการค้า \> พนักงาน \> กลุ่มสิทธิ์**)</span><span class="sxs-lookup"><span data-stu-id="e4a55-245">If the operator must be able to continue to process the current operation (for example, creation or finalization of a transaction) after a health check error occurs, you should enable the **Allow skip health check error** permission on the **Permission groups** page (**Retail and Commerce \> Employees \> Permission groups**).</span></span> <span data-ttu-id="e4a55-246">ดูข้อมูลเพิ่มเติมเกี่ยวกับขั้นตอนการตรวจสอบความสมบูรณ์ที่ [การตรวจสอบความสมบูรณ์ของการลงทะเบียนทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check)</span><span class="sxs-lookup"><span data-stu-id="e4a55-246">For more information about the health check procedure, see [Fiscal registration health check](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check).</span></span>

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a><span data-ttu-id="e4a55-247">ตั้งค่ารายงาน X/Z ทางการเงินจาก POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-247">Set up fiscal X/Z reports from the POS</span></span>

<span data-ttu-id="e4a55-248">เพื่อเปิดใช้งานรายงาน X/Z ทางการเงินให้ถูกเรียกใช้จาก POS คุณควรเพิ่มปุ่มใหม่ในโครงร่าง POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-248">To enable fiscal X/Z reports to be run from the POS, you should add new buttons to a POS layout.</span></span>

- <span data-ttu-id="e4a55-249">ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-249">On the **Button grids** page, follow the instructions in [Add POS operations to POS layouts by using Button grid designer](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="e4a55-250">เลือกโครงร่างที่จะอัพเดต</span><span class="sxs-lookup"><span data-stu-id="e4a55-250">Select the layout to update.</span></span> 
    2. <span data-ttu-id="e4a55-251">เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ X ทางการเงิน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-251">Add a new button, and set the **Print fiscal X** button property.</span></span>
    3. <span data-ttu-id="e4a55-252">เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ Z ทางการเงิน**</span><span class="sxs-lookup"><span data-stu-id="e4a55-252">Add a new button, and set the **Print fiscal Z** button property.</span></span>
    4. <span data-ttu-id="e4a55-253">ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** รันงาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงไปยังฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="e4a55-253">On the **Distribution schedule** page, run the **1090** job to transfer changes to the channel database.</span></span>

## <a name="enable-manual-execution-of-postponed-fiscal-registration"></a><span data-ttu-id="e4a55-254">เปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว</span><span class="sxs-lookup"><span data-stu-id="e4a55-254">Enable manual execution of postponed fiscal registration</span></span>

<span data-ttu-id="e4a55-255">เมื่อต้องการเปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว คุณควรเพิ่มปุ่มใหม่ไปยังโครงร่าง POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-255">To enable manual execution of a postponed fiscal registration, you should add a new button to a POS layout.</span></span>

- <span data-ttu-id="e4a55-256">ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS</span><span class="sxs-lookup"><span data-stu-id="e4a55-256">On the **Button grids** page, follow the instructions in [Add POS operations to POS layouts by using Button grid designer](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="e4a55-257">เลือกโครงร่างที่จะอัพเดต</span><span class="sxs-lookup"><span data-stu-id="e4a55-257">Select the layout to update.</span></span>
    2. <span data-ttu-id="e4a55-258">เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **ทำกระบวนการลงทะเบียนทางการเงินให้เสร็จสมบูรณ์**</span><span class="sxs-lookup"><span data-stu-id="e4a55-258">Add a new button, and set the **Complete fiscal registration process** button property.</span></span>
    3. <span data-ttu-id="e4a55-259">ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** รันงาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงของคุณไปยังฐานข้อมูลช่องทาง</span><span class="sxs-lookup"><span data-stu-id="e4a55-259">On the **Distribution schedule** page, run the **1090** job to transfer your changes to the channel database.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]