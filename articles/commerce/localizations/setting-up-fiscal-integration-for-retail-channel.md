---
title: ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า
description: หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 889340c13d150ce8e3ad49a08b3d7f0c25a4b77a
ms.sourcegitcommit: deac22ba5377a912d93fe408c5ae875706378c2d
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/16/2021
ms.locfileid: "5017904"
---
# <a name="set-up-the-fiscal-integration-for-commerce-channels"></a>ตั้งค่าการรวมทางการเงินสำหรับช่องทางการค้า

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a>คำนำ

หัวข้อนี้ให้คำแนะนำสำหรับการตั้งค่าฟังก์ชันการรวมทางการเงินสำหรับช่องทางการค้า สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการรวมทางการเงิน ดูที่ [ภาพรวมของการรวมทางการเงินสำหรับช่องทางการค้า](fiscal-integration-for-retail-channel.md)

กระบวนการในการตั้งค่าการรวมทางการเงินประกอบด้วยงานทั้งหมดต่อไปนี้:

1. ตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินที่แสดงถึงอุปกรณ์หรือบริการทางการเงินที่ใช้สำหรับวัตถุประสงค์ในการลงทะเบียนทางการเงิน เช่น เครื่องพิมพ์ทางการเงิน
2. ตั้งค่าคอนฟิกตัวให้บริการเอกสารที่สร้างเอกสารทางการเงินที่จะลงทะเบียนในอุปกรณ์หรือบริการทางการเงินโดยตัวเชื่อมต่อทางการเงิน
3. ตั้งค่าคอนฟิกกระบวนการลงทะเบียนทางการเงินที่กำหนดลำดับของขั้นตอนการลงทะเบียนทางการเงิน และตัวเชื่อมต่อทางการเงิน และตัวให้บริการเอกสารทางการเงินที่ใช้สำหรับแต่ละขั้นตอน
4. กำหนดกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ฟังก์ชันของการขายหน้าร้าน (POS)
5. กำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์

## <a name="set-up-a-fiscal-registration-process"></a>ตั้งค่ากระบวนการการลงทะเบียนทางการเงิน

ก่อนที่คุณจะใช้ฟังก์ชันการรวมทางการเงิน คุณควรตั้งค่าคอนฟิกการตั้งค่าต่อไปนี้:

1. อัพเดตพารามิเตอร์การค้า

    1. ในหน้า **พารามิเตอร์ที่ใช้ร่วมกันของการค้า** บนแท็บ **ทั่วไป** ตั้งค่าตัวเลือก **เปิดใช้งานการรวมทางการเงิน** เป็น **ใช่** ในแท็บ **ลำดับหมายเลข** กำหนดลำดับหมายเลขสำหรับการอ้างอิงต่อไปนี้:

        - หมายเลขโพรไฟล์เทคนิคทางการเงิน
        - หมายเลขกลุ่มของตัวเชื่อมต่อทางการเงิน
        - หมายเลขกระบวนการการลงทะเบียน

    2. ในหน้า **พารามิเตอร์การค้า** กำหนดลำดับหมายเลขสำหรับหมายเลขโพรไฟล์ฟังก์ชันทางการเงิน

    > [!NOTE]
    > ลำดับหมายเลขไม่จำเป็น คุณสามารถสร้างหมายเลขสำหรับเอนทิตีการรวมทางการเงินทั้งหมดจากลำดับหมายเลขหรือด้วยตนเอง

2. อัปโหลดการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงิน

    ผู้ให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการสร้างเอกสารทางการเงินที่แสดงถึงธุรกรรมและเหตุการณ์ที่ลงทะเบียนบน POS ในรูปแบบที่ใช้สำหรับการโต้ตอบกับอุปกรณ์หรือการบริการทางการเงิน ตัวอย่างเช่น ผู้ให้บริการเอกสารทางการเงินอาจสร้างการแสดงการรับสินค้าทางการเงินในรูปแบบ XML

    ตัวเชื่อมต่อทางการเงินมีหน้าที่รับผิดชอบในการติดต่อสื่อสารกับอุปกรณ์หรือการบริการทางการเงิน ตัวอย่างเช่น ตัวเชื่อมต่อทางการเงินอาจส่งการรับสินค้าทางการเงินที่ผู้ให้บริการเอกสารทางการเงินสร้างขึ้นในรูปแบบ XML ไปยังเครื่องพิมพ์ทางการเงิน สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับส่วนประกอบการรวมทางการเงิน ดูที่ [ตัวอย่างกระบวนการลงทะเบียนทางการเงินและการรวมทางการเงินสำหรับอุปกรณ์ทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices)

    1. ในหน้า **ตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ตัวเชื่อมต่อทางการเงิน**) อัปโหลดการตั้งค่าคอนฟิก XML สำหรับแต่ละอุปกรณ์หรือบริการที่คุณวางแผนที่จะใช้สำหรับวัตถุประสงค์การรวมทางการเงิน

        > [!TIP]
        > โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ทางเทคนิคที่เกี่ยวข้องกับตัวเชื่อมต่อทางบัญชีปัจจุบัน

    2. ในหน้า **ผู้ให้บริการเอกสารทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> ผู้ให้บริการเอกสารทางการเงิน**) อัปโหลดการตั้งค่าคอนฟิก XML สำหรับแต่ละอุปกรณ์หรือบริการที่คุณวางแผนที่จะใช้สำหรับวัตถุประสงค์การรวมทางการเงิน

        > [!TIP]
        > โดยการเลือก **มุมมอง** คุณสามารถดูฟังก์ชันทั้งหมดและโพรไฟล์ที่เกี่ยวข้องกับตัวให้บริการเอกสารทางการเงินปัจจุบัน

    ดูตัวอย่างของการตั้งค่าคอนฟิกของตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงิน ดู [ตัวอย่างการรวมทางการเงินใน Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk)

    > [!NOTE]
    > การแม็ปข้อมูลจะถือเป็นส่วนหนึ่งของตัวให้บริการเอกสารทางการเงิน ในการตั้งค่าการแม็ปข้อมูลที่แตกต่างกันสำหรับตัวเชื่อมต่อเดียวกัน (ตัวอย่างเช่น ข้อบังคับเฉพาะรัฐ) คุณควรสร้างผู้ให้บริการเอกสารทางการเงินที่แตกต่างกัน

3. สร้างโพรไฟล์การทำงานของตัวเชื่อมต่อและโพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ

    1. ในหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ**) สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับแต่ละชุดของตัวเชื่อมต่อทางการเงินและผู้ให้บริการเอกสารทางการเงินที่เกี่ยวข้องกับตัวเชื่อมต่อทางการเงินนี้

        1. เลือกชื่อตัวเชื่อมต่อ
        2. เลือกผู้ให้บริการเอกสาร

        คุณสามารถเปลี่ยนพารามิเตอร์การแม็ปข้อมูลในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกตัวให้บริการเอกสารทางการเงิน เลือก **อัพเดต**

        **ตัวอย่าง**

        |   | รูปแบบ | ตัวอย่าง |
        |---|--------|---------|
        | **การตั้งค่าอัตรา VAT** | ค่า: VATrate | 1 : 2000, 2 : 1800 |
        | **การแม็ปรหัส VAT** | VATcode : ค่า | vat20: 1, vat18: 2 |
        | **การแม็ปชนิดการชำระเงิน** | TenderType : ค่า | เงินสด: 1, บัตร : 2 |

        > [!NOTE]
        > โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อเป็นโพรไฟล์เฉพาะบริษัท ถ้าคุณวางแผนที่จะใช้ชุดของตัวเชื่อมต่อทางการเงินและตัวให้บริการเอกสารทางการเงินเดียวกันในบริษัทที่แตกต่างกัน คุณควรสร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับแต่ละบริษัท

    2. ในหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> โพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ**) สร้างโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสำหรับตัวเชื่อมต่อทางการเงินแต่ละรายการ

        1. เลือกชื่อตัวเชื่อมต่อ
        2. เลือกชนิดตัวเชื่อมต่อ เลือกอุปกรณ์ที่เชื่อมต่อกับสถานีฮาร์ดแวร์ เลือก **ท้องถิ่น**

            > [!NOTE]
            > ขณะนี้มีการสนับสนุนเฉพาะตัวเชื่อมต่อภายในเท่านั้น

        พารามิเตอร์ในแท็บ **อุปกรณ์** และ **การตั้งค่า** ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อสามารถเปลี่ยนได้ เมื่อต้องการคืนค่าพารามิเตอร์เริ่มต้นที่กำหนดในการตั้งค่าคอนฟิกตัวเชื่อมต่อทางการเงิน เลือก **อัพเดต** ขณะที่โหลดเวอร์ชันใหม่ของการตั้งค่าคอนฟิก XML คุณจะได้รับข้อความแจ้งที่ระบุว่าตัวเชื่อมต่อทางการเงินปัจจุบัน หรือตัวให้บริการเอกสารทางการเงินถูกใช้แล้ว กระบวนงานนี้ไม่ได้แทนที่การเปลี่ยนแปลงด้วยตนเองที่ทำไว้ก่อนหน้านี้ในโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อและโพรไฟล์ทางเทคนิคตัวเชื่อมต่อ เมื่อต้องการใช้ชุดเริ่มต้นของพารามิเตอร์จากการตั้งค่าคอนฟิกใหม่ บนหน้า **โพรไฟล์ฟังก์ชันของตัวเชื่อมต่อ** และหน้า **โพรไฟล์ทางเทคนิคของตัวเชื่อมต่อ** เลือก **อัพเดต**

4. สร้างกลุ่มของตัวเชื่อมต่อทางการเงิน

    กลุ่มตัวเชื่อมต่อทางการเงินรวมโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อตัวเชื่อมของต่อเชื่อมต่อทางการเงินที่ทำหน้าที่เหมือนกัน และถูกใช้ในขั้นตอนเดียวกันในกระบวนการลงทะเบียนทางการเงิน ตัวอย่างเช่น ถ้าสามารถใช้เครื่องพิมพ์ทางการเงินหลายรุ่นในร้านค้า ตัวเชื่อมต่อทางการเงินสำหรับเครื่องพิมพ์ทางการเงินดังกล่าวสามารถรวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงิน

    1. ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**) สร้างกลุ่มตัวเชื่อมต่อทางการเงินใหม่
    2. เพิ่มโพรไฟล์การทำงานไปยังกลุ่มของตัวเชื่อมต่อ บนแท็บ **โพรไฟล์ฟังก์ชัน** เลือก **เพิ่ม** และเลือกหมายเลขโพรไฟล์ แต่ละตัวเชื่อมต่อทางการเงินในกลุ่มตัวเชื่อมต่อสามารถมีโพรไฟล์ฟังก์หนึ่งรายการ
    3. ถ้าคุณต้องการระงับการใช้โพรไฟล์การทำงาน ตั้งค่าตัวเลือก **ปิดใช้งาน** เป็น **ใช่** การเปลี่ยนแปลงนี้มีผลต่อกลุ่มตัวเชื่อมต่อปัจจุบันเท่านั้น คุณสามารถดำเนินต่อโดยใช้โพรไฟล์การทำงานเดียวกันในกลุ่มตัวเชื่อมต่ออื่นๆ

5. สร้างกระบวนการการลงทะเบียนทางการเงิน

    กระบวนการลงทะเบียนทางการเงินจะถูกกำหนดโดยลำดับของขั้นตอนการลงทะเบียน และกลุ่มตัวเชื่อมต่อที่ใช้ในแต่ละขั้นตอน

    1. ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) สร้างเรกคอร์ดใหม่สำหรับกระบวนการที่ไม่ซ้ำกันของการลงทะเบียนทางการเงิน
    2. เพิ่มขั้นตอนการลงทะเบียนไปยังกระบวนการ:

        1. เลือก **เพิ่ม**
        2. เลือกชนิดของตัวเชื่อมต่อทางการเงิน
        3. ในฟิลด์ **หมายเลขกลุ่ม** เลือกกลุ่มตัวเชื่อมต่อทางการเงิน

6. กำหนดเอนทิตีของกระบวนการลงทะเบียนทางการเงินไปยังโพรไฟล์ POS

    1. ในหน้า **โพรไฟล์ฟังก์ชันของ POS** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฟังก์ชัน**) กำหนดกระบวนการลงทะเบียนทางการเงินกับโพรไฟล์ฟังก์ชันของ POS เลือก **แก้ไข** จากนั้น บนแท็บ **กระบวนการลงทะเบียนทางการเงิน** ในฟิลด์ **หมายเลขกระบวนการ** เลือกกระบวนการ
    2. ในหน้า **โพรไฟล์ฮาร์ดแวร์ POS** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การตั้งค่า POS \> โพรไฟล์ POS \> โพรไฟล์ฮาร์ดแวร์**) กำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อให้กับโพรไฟล์ฮาร์ดแวร์ เลือก **แก้ไข** เพิ่มรายการในแท็บ **อุปกรณ์ต่อพ่วงทางการเงิน** จากนั้น ในฟิลด์ **หมายเลขโพรไฟล์** เลือกโพรไฟล์ทางเทคนิคตัวเชื่อมต่อ

    > [!NOTE]
    > คุณสามารถเพิ่มโพรไฟล์ทางเทคนิคหลายรายการไปยังโพรไฟล์ฮาร์ดแวร์เดียวกันได้ อย่างไรก็ตาม โพรไฟล์ฮาร์ดแวร์หรือโพรไฟล์ฟังก์ชันของ POS ควรมีจุดตัดกับกลุ่มตัวเชื่อมต่อทางการเงินใดๆ เดียวเท่านั้น

    ขั้นตอนการลงทะเบียนทางการเงินถูกกำหนดตามกระบวนการลงทะเบียนทางการเงินและตามพารามิเตอร์บางตัวของส่วนประกอบการรวมทางการเงิน: ส่วนขยายของ Commerce Runtime สำหรับตัวให้บริการเอกสารทางการเงินและส่วนขยายสถานีฮาร์ดแวร์สำหรับตัวเชื่อมต่อทางการเงิน

    - การบอกรับเป็นสมาชิกของเหตุการณ์และธุรกรรมการลงทะเบียนทางการเงินถูกกำหนดไว้ล่วงหน้าในตัวให้บริการเอกสารทางการเงิน
    - ตัวให้บริการเอกสารทางการเงินมีหน้าที่รับผิดชอบในการระบุตัวเชื่อมต่อทางการเงินที่ใช้สำหรับการลงทะเบียนทางการเงินอีกด้วย ซึ่งตรงกับโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อที่รวมอยู่ในกลุ่มตัวเชื่อมต่อทางการเงินที่ระบุสำหรับขั้นตอนของกระบวนการลงทะเบียนทางการเงินกับโพรไฟล์ทางเทคนิคตัวเชื่อมต่อที่กำหนดให้กับโพรไฟล์ฮาร์ดแวร์ของสถานีฮาร์ดแวร์ที่จับคู่กับ POS
    - ตัวให้บริการเอกสารทางการเงินใช้การตั้งค่าการแม็ปข้อมูลจากการตั้งค่าคอนฟิกตัวให้บริการเอกสารทางการเงินเพื่อแปลงข้อมูลเหตุการณ์/ธุรกรรม เช่น ภาษีและการชำระเงินในขณะที่มีการสร้างเอกสารทางการเงิน
    - เมื่อตัวให้บริการเอกสารทางการเงินสร้างเอกสารทางการเงิน ตัวเชื่อมต่อทางการเงินสามารถเป็นส่งไปยังอุปกรณ์ทางการเงินทั้งอย่างนั้น หรือแยกวิเคราะห์และแปลงเป็นลำดับของคำสั่งของ Application Programming Interface (API) โดยขึ้นอยู่กับวิธีการจัดการการสื่อสาร

7. ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) เลือก **ตรวจสอบความถูกต้อง** เพื่อตรวจสอบกระบวนการลงทะเบียนทางการเงิน

    เราขอแนะนำให้คุณรันการตรวจสอบความถูกต้องชนิดนี้ในกรณีต่อไปนี้:

    - หลังจากที่คุณทำการตั้งค่าเสร็จสิ้นสำหรับกระบวนการลงทะเบียนใหม่ รวมถึงเมื่อคุณกำหนดกระบวนการลงทะเบียนให้กับโพรไฟล์ฟังก์ชัน POS และโพรไฟล์ฮาร์ดแวร์
    - หลังจากที่คุณทำการเปลี่ยนแปลงในกระบวนการลงทะเบียนทางการเงินที่มีอยู่ และการเปลี่ยนแปลงเหล่านั้นอาจทำให้ตัวเชื่อมต่อทางการเงินอื่นกลายเป็นถูกเลือกขณะใช้งานจริง (ตัวอย่างเช่น ถ้าคุณเปลี่ยนกลุ่มตัวเชื่อมต่อสำหรับกระบวนการลงทะเบียนทางการเงิน ให้เปิดใช้งานตัวเชื่อมต่อฟังก์ชันของโพรไฟล์ในกลุ่มตัวเชื่อมต่อหรือเพิ่มโพรไฟล์ฟังก์ชันของตัวเชื่อมต่อใหม่ไปยังกลุ่มตัวเชื่อมต่อ)
    - หลังจากที่คุณทำการเปลี่ยนแปลงในการกำหนดโพรไฟล์ทางเทคนิคตัวเชื่อมต่อไปยังโพรไฟล์ฮาร์ดแวร์

8. ในหน้า **กำหนดการการกระจาย** รันงาน **1070** และ **1090** เพื่อโอนย้ายข้อมูลไปยังฐานข้อมูลช่องทาง

## <a name="set-up-fiscal-texts-for-discounts"></a>ตั้งค่าข้อความทางการเงินสำหรับส่วนลด

ในบางกรณี ข้อความพิเศษต้องพิมพ์บนใบเสร็จทางการเงินเมื่อมีการใช้ส่วนลด คุณสามารถตั้งค่าข้อความทางการเงินสำหรับส่วนลดในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กลุ่มตัวเชื่อมต่อทางการเงิน**)

- สำหรับส่วนลดด้วยตนเองที่ใช้ได้ที่ POS คุณควรตั้งค่าข้อความทางการเงินสำหรับรหัสข้อมูล หรือกลุ่มรหัสข้อมูลที่มีการระบุเป็นรหัสข้อมูล **ส่วนลดสำหรับผลิตภัณฑ์** ในโพรไฟล์ฟังก์ชันของ POS

    1. ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**
    2. ในแท็บ **รหัสข้อมูล** เลือก **เพิ่ม** และเลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูล
    3. ใน **หมายเลขรหัสข้อมูล** เลือกค่า
    4. ในฟิลด์ **หมายเลขรหัสย่อย** เลือกค่าถ้ารหัสย่อยจำเป็นสำหรับรหัสข้อมูลที่เลือก
    5. ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน
    6. ตั้งค่าตัวเลือก **พิมพ์ข้อมูลที่ผู้ใช้ป้อนบนใบเสร็จทางการเงิน** เป็น **ใช่** เพื่อแทนที่ข้อความบนใบเสร็จทางการเงินด้วยข้อมูลที่ผู้ใช้ป้อนด้วยตนเองที่ POS ตัวเลือกนี้ใช้ได้เฉพาะกับรหัสข้อมูลที่มีชนิดของข้อมูลป้อนเข้า **ข้อความ**

    > [!NOTE]
    > คุณสามารถระบุข้อความทางการเงินสำหรับรหัสข้อมูลหลายรายการเพื่อสนับสนุนสถานการณ์จำลองที่มีการใช้กลุ่มรหัสข้อมูล รหัสข้อมูลที่มีการเชื่อมโยง และรหัสข้อมูลที่มีการทริกเกอร์ ในสถานการณ์เหล่านี้ ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากรหัสข้อมูลทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมที่มีการใช้ส่วนลด

- สำหรับส่วนลดเฉพาะช่องทาง คุณควรกำหนดข้อความทางการเงินสำหรับรหัสส่วนลด

    1. ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** เลือก **ข้อความสำหรับใบเสร็จทางการเงิน**
    2. ในแท็บ **ส่วนลด** เลือก **เพิ่ม** และเลือกรหัสส่วนลด
    3. ในฟิลด์ **ข้อความสำหรับใบเสร็จทางการเงิน** ระบุข้อความทางการเงินที่ควรจะพิมพ์บนใบเสร็จทางการเงิน

    > [!NOTE]
    > ถ้ามีการใช้ส่วนลดหลายรายการในบรรทัดธุรกรรมเดียวกัน ใบเสร็จทางการเงินจะประกอบด้วยข้อความทางการเงินจากส่วนลดทั้งหมดที่เชื่อมโยงกับบรรทัดธุรกรรมเหล่านั้น

## <a name="set-error-handling-settings"></a>กำหนดการตั้งค่าการจัดการข้อผิดพลาด

ตัวเลือกการจัดการข้อผิดพลาดที่มีอยู่ในการรวมทางการเงินถูกตั้งค่าในกระบวนการลงทะเบียนทางการเงิน สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการจัดการข้อผิดพลาดในการรวมทางการเงิน ดูที่ [การจัดการข้อผิดพลาด](fiscal-integration-for-retail-channel.md#error-handling)

1. ในหน้า **กระบวนการลงทะเบียนทางการเงิน** (**การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> การรวมทางการเงิน \> กระบวนการลงทะเบียนทางการเงิน**) คุณสามารถตั้งค่าพารามิเตอร์ต่อไปนี้สำหรับแต่ละขั้นตอนของกระบวนการลงทะเบียนทางการเงิน:

    - **อนุญาตให้ข้าม** – พารามิเตอร์นี้เปิดใช้งานตัวเลือก **ข้าม** ในกล่องโต้ตอบการจัดการข้อผิดพลาด
    - **อนุญาตให้มีการทำเครื่องหมายเป็นลงทะเบียน**– พารามิเตอร์นี้เปิดใช้งานตัวเลือก **การทำเครื่องหมายเป็นลงทะเบียน** ในกล่องโต้ตอบการจัดการข้อผิดพลาด
    - **ดำเนินต่อกับข้อผิดพลาด** – ถ้าเปิดใช้งานพารามิเตอร์นี้ กระบวนการลงทะเบียนทางการเงินสามารถดำเนินต่อได้บนเครื่องบันทึกเงินสด POS หากการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ล้มเหลว หรือถ้าต้องการรันการลงทะเบียนทางการเงินของธุรกรรมหรือเหตุการณ์ถัดไป ผู้ดำเนินการต้องลองลงทะเบียนทางการเงินที่ล้มเหลวอีกครั้ง ข้าม หรือทำเครื่องหมายธุรกรรมหรือเหตุการณ์เป็นลงทะเบียนแล้ว สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [การลงทะเบียนทางการเงินที่เลือกได้](fiscal-integration-for-retail-channel.md#optional-fiscal-registration)

    > [!NOTE]
    > ถ้าพารามิเตอร์ **ดำเนินการต่อเมื่อมีข้อผิดพลาด** ถูกเปิดใช้งาน พารามิเตอร์ **อนุญาตให้ข้าม** และ **อนุญาตให้ทำเครื่องหมายเป็นลงทะเบียนแล้ว** จะถูกปิดใช้งานโดยอัตโนมัติ

2. ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ในกล่องโต้ตอบการจัดการข้อผิดพลาดจำเป็นต้องมีสิทธิ์ **อนุญาตให้ข้ามการลงะเบียนหรือทำเครื่องหมายเป็นลงทะเบียน** ดังนั้น ในหน้า **กลุ่มสิทธิ์** (**การขายปลีกและการค้า \> พนักงาน \> กลุ่มสิทธิ์**) เปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามการลงทะเบียนหรือทำเครื่องหมายเป็นลงทะเบียน**
3. ตัวเลือก **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ทำให้ผู้ดำเนินการสามารถป้อนข้อมูลเพิ่มเติมเมื่อการลงทะเบียนทางการเงินไม่สำเร็จ เพื่อให้ฟังก์ชันนี้พร้อมใช้งาน คุณควรระบุรหัสข้อมูล **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** บนกลุ่มตัวเชื่อมต่อทางการเงิน จากนั้นข้อมูลที่ผู้ดำเนินการป้อนจะถูกบันทึกเป็นธุรกรรมรหัสข้อมูลที่เชื่อมโยงกับธุรกรรมทางการเงิน สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับรหัสข้อมูล ดูที่ [รหัสข้อมูลและกลุ่มรหัสข้อมูล](../info-codes-retail.md)

    > [!NOTE]
    > ฟังก์ชันทริกเกอร์ **ผลิตภัณฑ์** ไม่ได้สนับสนุนรหัสข้อมูลที่ใช้สำหรับ **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน** ในกลุ่มตัวเชื่อมต่อทางการเงิน

    - ในหน้า **กลุ่มตัวเชื่อมต่อทางการเงิน** บนแท็บ **รหัสข้อมูล** เลือกรหัสข้อมูลหรือกลุ่มรหัสข้อมูลในฟิลด์ **ข้าม** และ **ทำเครื่องหมายเป็นลงทะเบียน**

    > [!NOTE]
    > คุณสามารถสร้างเอกสารทางการเงินหนึ่งฉบับและเอกสารที่ไม่ใช่ทางการเงินหนึ่งฉบับในทุกขั้นตอนของกระบวนการลงทะเบียนทางการเงิน ส่วนขยายของผู้ให้บริการเอกสารทางการเงินจะระบุทุกชนิดของธุรกรรมหรือเหตุการณ์ที่สัมพันธ์กับเอกสารทางการเงินหรือไม่ใช่ทางการเงิน ลักษณะการทำงานการจัดการข้อผิดพลาดใช้เฉพาะกับเอกสารทางการเงิน
    >
    > - **เอกสารทางการเงิน** – เอกสารบังคับที่ควรจะลงทะเบียนเสร็จเรียบร้อยแล้ว (ตัวอย่างเช่น ใบเสร็จทางการเงิน)
    > - **เอกสารที่ไม่ใช่ทางการเงิน** – เอกสารเสริมสำหรับธุรกรรมหรือเหตุการณ์ (ตัวอย่างเช่น สลิปบัตรของขวัญ)

4. ถ้าผู้ดำเนินการจำเป็นต้องสามารถดำเนินต่อเพื่อประมวลผลการดำเนินงานปัจจุบัน (ตัวอย่างเช่น การสร้างหรือการทำธุรกรรมให้เป็นขั้นสุดท้าย) หลังจากเกิดข้อผิดพลาดในการตรวจสอบความสมบูรณ์ คุณควรเปิดใช้งานสิทธิ์ **อนุญาตให้ข้ามข้อผิดพลาดในการตรวจสอบความสมบูรณ์** ในหน้า **กลุ่มสิทธิ์** (**การขายปลีกและการค้า \> พนักงาน \> กลุ่มสิทธิ์**) ดูข้อมูลเพิ่มเติมเกี่ยวกับขั้นตอนการตรวจสอบความสมบูรณ์ที่ [การตรวจสอบความสมบูรณ์ของการลงทะเบียนทางการเงิน](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check)

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a>ตั้งค่ารายงาน X/Z ทางการเงินจาก POS

เพื่อเปิดใช้งานรายงาน X/Z ทางการเงินให้ถูกเรียกใช้จาก POS คุณควรเพิ่มปุ่มใหม่ในโครงร่าง POS

- ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS

    1. เลือกโครงร่างที่จะอัพเดต 
    2. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ X ทางการเงิน**
    3. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **พิมพ์ Z ทางการเงิน**
    4. ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** รันงาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงไปยังฐานข้อมูลช่องทาง

## <a name="enable-manual-execution-of-postponed-fiscal-registration"></a>เปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว

เมื่อต้องการเปิดใช้งานการดำเนินการด้วยตนเองของการลงทะเบียนทางการเงินที่เลื่อนออกไปแล้ว คุณควรเพิ่มปุ่มใหม่ไปยังโครงร่าง POS

- ในหน้า **กริดปุ่ม** ทำตามคำแนะนำใน [เพิ่มปุ่มการดำเนินการที่กำหนดเองไปที่โครงร่าง POS โดยใช้ตัวออกแบบกริดปุ่ม](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) เพื่อติดตั้งโปรแกรมออกแบบและปรับปรุงโครงร่าง POS

    1. เลือกโครงร่างที่จะอัพเดต
    2. เพิ่มปุ่มใหม่และตั้งค่าคุณสมบัติปุ่ม **ทำกระบวนการลงทะเบียนทางการเงินให้เสร็จสมบูรณ์**
    3. ในหน้า **ตัวกำหนดตารางทำงานการกระจาย** รันงาน **1090** เพื่อโอนย้ายการเปลี่ยนแปลงของคุณไปยังฐานข้อมูลช่องทาง
