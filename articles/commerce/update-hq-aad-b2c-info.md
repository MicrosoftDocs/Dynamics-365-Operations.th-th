---
title: อัปเดต Commerce headquarters ด้วยข้อมูล Azure AD B2C ใหม่
description: หัวข้อนี้จะอธิบายวิธีการอัปเดต Microsoft Dynamics 365 Commerce headquarters ด้วยข้อมูล Azure Active Directory (Azure AD) ธุรกิจ-ผู้บริโภค (B2C) ใหม่
author: BrianShook
ms.date: 11/15/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.openlocfilehash: c65949ff97182d2692319ac2af00e3ef35a79580
ms.sourcegitcommit: 774f8f97a0b14cf1199bd1802178ccf536a25ade
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 11/17/2022
ms.locfileid: "9785329"
---
# <a name="update-commerce-headquarters-with-the-new-azure-ad-b2c-information"></a>อัปเดต Commerce headquarters ด้วยข้อมูล Azure AD B2C ใหม่

[!include [banner](includes/banner.md)]

หัวข้อนี้จะอธิบายวิธีการอัปเดต Microsoft Dynamics 365 Commerce headquarters ด้วยข้อมูล Azure Active Directory (Azure AD) ธุรกิจ-ผู้บริโภค (B2C) ใหม่

เมื่อมีขั้นตอนการเตรียมใช้งาน Azure AD B2C ด้านบนเสร็จเรียบร้อยแล้ว แอปพลิเคชัน Azure AD B2C ต้องมีการลงทะเบียนในสภาพแวดล้อม Dynamics 365 Commerce ของคุณ

เมื่อต้องการปรับปรุงศูนย์ควบคุมด้วยข้อมูล Azure AD B2C ใหม่ ให้ทำตามขั้นตอนต่อไปนี้

1. ใน Commerce ให้ไปที่ **พารามิเตอร์ที่ใช้ร่วมกันของ Commerce** และเลือก **ผู้ให้บริการข้อมูลเฉพาะตัว** ในเมนูด้านซ้าย
1. ภายใต้ **ผู้ให้บริการข้อมูลเฉพาะตัว** ให้ทำตามขั้นตอนต่อไปนี้:
    1. ในกล่อง **ผู้ออก** ให้ป้อนสตริงผู้ออกของผู้ให้บริการข้อมูลประจำตัว เมื่อต้องการค้นหาสตริงผู้ออกของคุณ ให้ดูที่ [ขอสตริงผู้ออกสำหรับการตั้งค่าศูนย์ควบคุม](#obtain-issuer-string-for-headquarters-setup) ด้านล่าง
    1. ในกล่อง **ชื่อ** ให้ป้อนชื่อสำหรับเรกคอร์ดผู้ออกของคุณ
    1. ในกล่อง **ชนิด** ให้ป้อน **Azure AD B2C (id_token)**
1. ภายใต้ **บริษัทที่เกี่ยวข้อง** ที่มีรายการของผู้ให้บริการข้อมูลเฉพาะตัวของ B2C ที่เลือก ให้ทำตามขั้นตอนต่อไปนี้:
    1. ในกล่อง **ClientID** ให้ป้อนรหัสแอพลิเคชัน B2C ของคุณ ซึ่งคุณสามารถค้นหาได้ในกล่อง **รหัสแอพลิเคชัน** ของหน้าคุณสมบัติของแอพลิเคชัน B2C ของคุณ
    1. ในกล่อง **ชนิด** ให้ป้อน **สาธารณะ**
    1. ในกล่อง **ชนิดผู้ใช้** ให้ป้อน **ลูกค้า**
1. บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**
1. ในกล่องค้นหา Commerce ให้ค้นหา **กำหนดการการกระจาย**
1. ในเมนูนำทางด้านซ้ายของหน้า **กำหนดการการกระจาย** ให้เลือกงาน **1110 การตั้งค่าคอนฟิกส่วนกลาง**
1. บนบานหน้าต่างการดำเนินการ เลือก **เรียกใช้ตอนนี้**

### <a name="obtain-issuer-string-for-headquarters-setup"></a>ขอสตริงผู้ออกสำหรับการตั้งค่าศูนย์ควบคุม

เมื่อต้องการขอสตริงผู้ออกของผู้ให้บริการข้อมูลประจำตัวของคุณ ให้ทำตามขั้นตอนต่อไปนี้

1. บนหน้า Azure AD B2C ของพอร์ทัล Azure ให้นําทางไปยังโฟลว์ผู้ใช้ **ลงชื่อสมัครใช้และลงชื่อเข้าใช้**
1. เลือก **โครงร่างหน้า** ในเมนูการนําทางด้านซ้าย ภายใต้ **ชื่อโครงร่าง** เลือก **ลงชื่อสมัครใช้และลงชื่อเข้าใช้แบบครบวงจร** แล้วเลือก **เรียกใช้โฟลว์ผู้ใช้**
1. ตรวจสอบให้แน่ใจว่าแอปพลิเคชันของคุณได้รับการตั้งค่าเป็นแอปพลิเคชัน Azure AD B2C ที่ต้องการซึ่งสร้างขึ้นข้างต้น แล้วเลือกลิงก์ขั้นตอนของผู้ใช้ภายใต้ส่วนหัว **เรียกใช้ขั้นตอนของผู้ใช้** ที่มี ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>`` (อย่าเลือก **เรียกใช้ขั้นตอนของผู้ใช้**) แท็บใหม่จะเปิดเพื่อข้อมูลเมตาของนโยบายที่จะรวบรวมสตริงของผู้ออก
1. ในหน้าข้อมูลเมตาที่แสดงในแท็บเบราว์เซอร์ของคุณ ให้คัดลอกสตริงผู้ออกของผู้ให้บริการข้อมูลประจำตัว (ค่าสำหรับ **ผู้ออก** ขึ้นต้นด้วย "https://" และลงท้ายด้วย "/v2.0/" ) ที่มีลักษณะคล้ายกับตัวอย่างต่อไปนี้
   - ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``
 
**หรือ**: เมื่อต้องการสร้าง URL ข้อมูลเมตาเดียวกันด้วยตนเอง ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. สร้าง URL ที่อยู่ข้อมูลเมตาในรูปแบบต่อไปนี้โดยใช้ผู้เช่า B2C และนโยบายของคุณ: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``
    - ตัวอย่าง: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``
1. ป้อน URL ที่อยู่ของข้อมูลเมตาลงในแถบที่อยู่ของเบราว์เซอร์
1. ในข้อมูลเมตา คัดลอก URL ผู้ออกของผู้ให้บริการข้อมูลประจำตัว (ค่าสำหรับ **"ผู้ออก"**)
    - ตัวอย่าง: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``

## <a name="next-steps"></a>ขั้นตอนถัดไป

เมื่อต้องการดําเนินการตั้งค่าผู้เช่า B2C ใน Commerce ต่อไป ให้ดําเนินการ [ตั้งค่าคอนฟิกผู้เช่า B2C ของคุณในโปรแกรมสร้างไซต์ Commerce](config-b2c-tenant-site-builder.md)

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[ตั้งค่าผู้เช่า B2C ใน Commerce](set-up-b2c-tenant.md)

[สร้างหรือเชื่อมโยงกับผู้เช่า Azure AD B2C ที่มีอยู่ในพอร์ทัล Azure](create-link-aad-b2c-tenant.md)

[สร้างแอปพลิเคชัน B2C](create-b2c-app.md)

[สร้างนโยบายขั้นตอนของผู้ใช้](create-user-flow-policies.md)

[เพิ่มผู้ให้บริการข้อมูลประจำตัวทางสังคม (เลือกกำหนดได้)](add-social-identity-providers.md)

[ตั้งค่าคอนฟิกผู้เช่า B2C ของคุณในโปรแกรมสร้างไซต์ Commerce](config-b2c-tenant-site-builder.md)

[ข้อมูล B2C เพิ่มเติม](additional-b2c-info.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
