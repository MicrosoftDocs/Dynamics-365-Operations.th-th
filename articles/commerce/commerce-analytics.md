---
title: การวิเคราะห์ของ Commerce (พรีวิว)
description: หัวข้อนี้อธิบายวิธีการติดตั้งและใช้ความสามารถด้านการวิเคราะห์ใน Microsoft Dynamics 365 Commerce
author: AamirAllaq
ms.date: 11/23/2021
audience: Application user
ms.reviewer: sericks
ms.search.region: Global
ms.author: aamiral
ms.search.validFrom: 2021-11-12
ms.openlocfilehash: 8cfe2af756315b5be3eb22d99376a96166fffc52
ms.sourcegitcommit: f9fca3d55b47e615e5ef64669dab184e057ec234
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 11/23/2021
ms.locfileid: "7862784"
---
# <a name="commerce-analytics-preview"></a>การวิเคราะห์ของ Commerce (พรีวิว)

[!include [banner](includes/banner.md)]

หัวข้อนี้อธิบายวิธีการติดตั้งการวิเคราะห์ของ Commerce (พรีวิว) ซึ่งเป็นความสามารถด้านการวิเคราะห์การทำงานที่รวมอยู่ใน Microsoft Dynamics 365 Commerce

## <a name="commerce-analytics-preview-live-demo"></a>สาธิตสดการวิเคราะห์ของ Commerce (พรีวิว)

คุณสามารถลองดู [สาธิตสดการวิเคราะห์ของ Commerce (พรีวิว)](https://aka.ms/CommerceAnalyticsDemo)

![สรุปการวิเคราะห์ของ Commerce (พรีวิว)](media/CommerceAnalytics_Summary.png)
![การชำระเงินการวิเคราะห์ของ Commerce (พรีวิว)](media/CommerceAnalytics_Payments.png)
![กิจกรรมเว็บการวิเคราะห์ของ Commerce (พรีวิว)](media/CommerceAnalytics_WebActivity.png)


## <a name="commerce-analytics-preview-system-architecture"></a>สถาปัตยกรรมระบบการวิเคราะห์ของ Commerce (พรีวิว)

### <a name="key-components"></a>ส่วนประกอบหลัก

การวิเคราะห์ของ Commerce (พรีวิว) ประกอบด้วยส่วนประกอบหลักต่อไปนี้:

- รายงาน Power BI เชิงโต้ตอบที่พร้อมใช้งาน
- มุมมอง SQL ในการวิเคราะห์ของ Azure Synapse
- ข้อมูลเอนทิตี้และออนโทโลยีใน Azure Data Lake
- ข้อมูลดิบใน Data Lake

![ส่วนประกอบหลักของสถาปัตยกรรมระบบการวิเคราะห์ของ Commerce](media/CommerceAnalyticsArchitecture_v2.png)

### <a name="data-flow"></a>โฟลว์ข้อมูล

#### <a name="step-1-data-generation"></a>ขั้นตอนที่ 1: การสร้างข้อมูล

ข้อมูลมีต้นทางเป็นข้อมูลธุรกรรมหรือข้อมูลพฤติกรรมจากแหล่งใดแหล่งหนึ่งต่อไปนี้

- พนักงานศูนย์บริการใช้ไคลเอ็นต์ Commerce HQ เพื่อประมวลผลใบสั่งขาย
- พนักงานเก็บเงินในการขายหน้าร้าน (POS) ประมวลผลธุรกรรมการขาย
- การขายถูกสร้างในแอปพลิเคชันที่กำหนดเองโดยใช้ Headless Commerce (Commerce Scale Unit)
- ผู้ซื้อสินค้าจากอีคอมเมิรซ์จะเลือกดูเว็บไซต์อีคอมเมิรซ์ของคุณ
- ผู้ซื้อสินค้าจากอีคอมเมิรซ์สั่งซื้อสินค้าผ่านเว็บไซต์อีคอมเมิรซ์ของคุณ
- ข้อมูลจัดทำโดยระบบอื่นๆ เช่น Dynamics 365 Connected Spaces

#### <a name="step-2-ingestion-and-pre-processing"></a>ขั้นตอนที่ 2: การนำเข้าและการประมวลผลเบื้องต้น

ข้อมูลธุรกรรมจะไปยัง Commerce HQ โดยตรง (ในกรณีของใบสั่งที่รวบรวมได้โดยตรงในไคลเอ็นต์ Commerce HQ) หรือผ่านทาง Commerce Scale Unit (ในกรณีของใบสั่งที่รวบรวมอยู่ที่ POS ในอีคอมเมิร์ซหรือในไคลเอ็นต์ที่กำหนดเองซึ่งใช้ Headless Commerce)

จากนั้นคุณลักษณะส่งออกไปยัง Data Lake จะถูกใช้เพื่อคัดลอกข้อมูลธุรกรรมไปยังที่จัดเก็บข้อมูลดิบเป็นข้อมูลดิบ ในที่จัดเก็บข้อมูลดิบ จะมีการจัดเก็บข้อมูลดิบในโฟลเดอร์ตาราง

ข้อมูลกิจกรรมของเว็บอีคอมเมิรซ์จะถูกส่งไปยังที่จัดเก็บข้อมูลดิบโดยตรง ข้อมูลที่จัดทำโดยระบบอื่นๆ เช่น Dynamics 365 Connected Spaces จะส่งไปยังที่จัดเก็บข้อมูลดิบโดยระบบเหล่านั้นโดยตรง

#### <a name="step-3-transformation-and-aggregation"></a>ขั้นตอนที่ 3: การแปลงข้อมูลและการรวม

หลังจากข้อมูลดิบอยู่ในที่จัดเก็บข้อมูลดิบของคุณ บริการการวิเคราะห์ของ Commerce จะอ่าน แปลง รวม และเขียนข้อมูลกลับไปยังที่จัดเก็บข้อมูลดิบในรูปแบบเอนทิตี้ทางตรรกะ (ในโฟลเดอร์เอนทิตี้) และเมตริกรวม (ในโฟลเดอร์ออนโทโลยี)

#### <a name="step-4-querying"></a>ขั้นตอนที่ 4: การสอบถาม

Azure Synapse Analytics จะใช้ในการสอบถามข้อมูลในที่จัดเก็บข้อมูลดิบของคุณผ่านส่วนติดต่อ Transact-SQL (T-SQL) ส่วนติดต่อนี้ประกอบด้วยมุมมอง SQL มุมมอง SQL จะเปิดใช้งานการสอบถามข้อมูลแบบรวมในที่จัดเก็บข้อมูลดิบผ่านไคลเอ็นต์ T-SQL โดยตรง (สำหรับการวิเคราะห์เฉพาะกิจ) หรือผ่านเครื่องมือการแสดงภาพ เช่น Power BI

#### <a name="step-5-modeling-and-serving"></a>ขั้นตอนที่ 5: การสร้างแบบจำลองและการแสดง

ข้อมูลที่สอบถามโดย Azure Synapse Analytics จะไปที่โมเดลความหมายของ Power BI ข้อมูลจะนําเข้าในหน่วยความจําภายในของ Power BI เป็นระยะหรือสอบถามโดยตรงขณะรันไทม์ ขึ้นอยู่กับชนิดของข้อมูล

สุดท้าย ข้อมูลจะแสดงในการแสดงภาพของ Power BI เพื่อให้ผู้ใช้สามารถดูและโต้ตอบด้วยได้

## <a name="commerce-analytics-preview-functional-overview"></a>ภาพรวมฟังก์ชันการวิเคราะห์ของ Commerce (พรีวิว)

### <a name="summary"></a>สรุป

แอปเทมเพลตการวิเคราะห์ของ Commerce ประกอบด้วยหน้ารายงานหลักต่อไปนี้:

1. [ตัวกรองระดับบนสุด](#TopLevelFilters)
2. [ผลิตภัณฑ์](#ProductsPage)
3. [ลูกค้า](#CustomersPage)
4. [ช่องสัญญาณ](#ChannelsPage)
5. [ใบสั่งขาย](#SalesPage)
6. [ขอบ](#MarginsPage)
7. [การส่งคืน](#ReturnsPage)
8. [ส่วนลด](#DiscountsPage)
9. [การชำระเงิน](#PaymentsPage)
10. [ลูกค้า](#CustomersPage)
11. [การเปรียบเทียบ](#ComparisonPage)
12. [กิจกรรมบนเว็บ](#WebActivityPage)
13. [กิจกรรมเว็บ - ตัวกรองระดับบนสุด](#WebActivityTopLevelFilters)

####  <a name="top-level-filters"></a><a name="TopLevelFilters"></a> ตัวกรองระดับบนสุด

- การตั้งค่าวันที่

    - ปี
    - ไตรมาส
    - เดือน
    - สัปดาห์
    - วัน

- การตั้งค่าช่องทาง

    - นิติบุคคล
    - ชนิดช่องทาง
    - ชนิดลูกค้า
    - ชนิดของการขาย
    - ช่องสัญญาณ
    - ลำดับชั้นขององค์กร

- การตั้งค่าผลิตภัณฑ์

    - การจัดประเภทตามลำดับชั้น
    - ประเภท

####  <a name="products"></a><a name="ProductsPage"></a> ผลิตภัณฑ์

- การขาย
- กำไรเบื้องต้น
- การส่งคืน

####  <a name="customers"></a><a name="CustomersPage"></a> ลูกค้า

- การขาย
- กำไรเบื้องต้น
- การส่งคืน

#### <a name="channels"></a><a name="ChannelsPage"></a> ช่องทาง

- การขาย
- กำไรเบื้องต้น
- การส่งคืน

### <a name="sales"></a>การขาย <a name="SalesPage"></a>

- ตามสถานที่จัดส่ง
- ตามช่องทาง/ร้านค้า/เทอร์มินัล
- โดยเรียงตามพนักงาน
- ตามวันที่
- ตามชั่วโมง
- ตามประเภทผลิตภัณฑ์

### <a name="margins"></a><a name="MarginsPage"></a> กำไรเบื้องต้น

- ตามสถานที่จัดส่ง
- สินค้าพลอยได้
- ตามวันที่

### <a name="returns"></a><a name="ReturnsPage"></a> การส่งคืน

- การส่งคืนตามจำนวน

    - โดยร้านค้า
    - สินค้าพลอยได้
    - ตามวันที่

- การส่งคืนตามธุรกรรม

    - โดยร้านค้า
    - สินค้าพลอยได้
    - ตามวันที่

### <a name="discounts"></a><a name="DiscountsPage"></a> ส่วนลด

- โดยร้านค้า
- สินค้าพลอยได้
- ตามวันที่
- การแยกส่วนประกอบ

    - นิติบุคคล
    - ร้านค้า
    - ชนิดของส่วนลด
    - ชื่อส่วนลด
    - สินค้า

### <a name="payments"></a><a name="PaymentsPage"></a> การชำระเงิน

- ตามช่องทาง/เทอร์มินัล
- ตามวิธีการ/ชนิดการชำระเงิน
- ตามวันที่
- การแยกส่วนประกอบ

    - นิติบุคคล
    - ชนิดช่องทาง
    - ร้านค้า
    - เทอร์มินัล
    - วิธีการชำระเงิน

### <a name="customers"></a><a name="CustomersPage"></a> ลูกค้า

- ค่าอายุการใช้งาน (LTV)

    LTV คํานวณตามจำนวนเงินรวมที่ลูกค้าใช้จ่ายในช่องทางการขายยของ Dynamics 365 Commerce ทั้งหมด (รวมถึง POS, อีคอมเมิร์ซและศูนย์บริการ)

- Recency

    ความเป็นปัจจุบันคํานวณตามจํานวนวันนับจากความสัมพันธ์กับธุรกรรมล่าสุดของลูกค้ากับองค์กร ปัจจุบัน ความเป็นปัจจุบันไม่ได้พิจารณาสัญญาณการมีส่วนร่วมที่ไม่ใช่ธุรกรรม เช่น กิจกรรมการเรียกดูผ่านอีคอมเมิร์ซ

- ความถี่

    ความถี่คํานวณตามการมีส่วนร่วมทางธุรกรรมของลูกค้ากับองค์กร ปัจจุบัน ความถี่ไม่ได้พิจารณาสัญญาณการมีส่วนร่วมที่ไม่ใช่ธุรกรรม เช่น กิจกรรมการเรียกดูผ่านอีคอมเมิร์ซ

- ระยะเวลาของความสัมพันธ์

    ระยะเวลาของความสัมพันธ์คํานวณตามจํานวนวันนับตั้งแต่สร้างเรกคอร์ดลูกค้าในระบบ

- จำนวนธุรกรรม

### <a name="comparison"></a><a name="ComparisonPage"></a> การเปรียบเทียบ

- การเปรียบเทียบผลิตภัณฑ์ตามรอบระยะเวลา

    - การขายและผลต่างของการขาย
    - กําไรเบื้องต้นและผลต่างของกําไรเบื้องต้น

- ลูกค้าตามรอบระยะเวลา

    - การขายและผลต่างของการขาย
    - กําไรเบื้องต้นและผลต่างของกําไรเบื้องต้น

### <a name="web-activity"></a><a name="WebActivityPage"></a> กิจกรรมบนเว็บ

#### <a name="top-level-filters"></a><a name="WebActivityTopLevelFilters"></a> ตัวกรองระดับบนสุด

- ช่วงวันที่
- ชนิดช่องทาง
- ช่องสัญญาณ
- การจัดประเภทตามลำดับชั้น

#### <a name="acquisitions"></a>การซื้อสินทรัพย์

- มุมมองหน้า

    - ตามประเทศหรือภูมิภาค
    - สินค้าพลอยได้
    - ตามสถานะลงชื่อเข้าใช้ของผู้ใช้
    - ตามวันที่

- ใบสั่งจากอีคอมเมิร์ซ
- อัตราการแปลง

    - ตามวันที่

- ช่วงระยะการแปลง

    - มุมมองหน้าตามชนิดหน้า (โฮมเพจ หน้าประเภท หรือหน้ารายละเอียดผลิตภัณฑ์)
    - ใส่เพิ่มที่รถเข็น
    - การชำระเงิน
    - การซื้อ

#### <a name="sessions"></a>รอบเวลา

รอบเวลาเป็นรอบเวลาเฉพาะของการไปที่เว็บไซต์อีคอมเมิร์ซของคุณของผู้ใช้ รอบเวลาจะสิ้นสุดลงหลังไม่ใช้งานนาน 30 นาทีหรือการใช้งานที่ใช้งานอยู่ 24 ชั่วโมง

- ตามประเทศหรือภูมิภาค
- ตามจุดเริ่มต้น (ผู้อ้างอิงภายนอก)
- ตามสถานะลงชื่อเข้าใช้ของผู้ใช้
- จำนวนรอบเวลา

    - ตามวันที่
    - ตามหน้ารายการ

- ใบสั่งต่อรอบเวลา

    - ตามวันที่

- อัตราการตีกลับของรอบเวลา

    การตีกลับของรอบเวลาเป็นรอบเวลาที่ผู้ใช้ออกทันทีหลังจากที่ผู้ใช้ไปที่เว็บไซต์อีคอมเมิร์ซของคุณ สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [อัตราการตีกลับ](https://en.wikipedia.org/wiki/Bounce_rate)

- การคลิกต่อรอบเวลา

#### <a name="visitors"></a>ผู้เยี่ยมชม

ผู้เยี่ยมชมแบบไม่ระบุชื่อบนเว็บไซต์อีคอมเมิร์ซของคุณจะถูกระบุตามเบราว์เซอร์เฉพาะและอุปกรณ์เฉพาะที่ผู้ใช้ใช้อยู่ การวิเคราะห์ของ Commerce ไม่ได้ติดตามผู้เยี่ยมชมแบบไม่ระบุชื่อในเบราว์เซอร์หรืออุปกรณ์ต่างๆ ผู้เยี่ยมชมแบบไม่ระบุชื่อที่ใช้เบราเซอร์เดียวกันบนอุปกรณ์เดียวกันจะถูกระบุเฉพาะในรอบเวลาของผู้ใช้หลายรอบเวลา จนกว่าข้อมูลที่แคชของเบราว์เซอร์จะถูกล้างหรือรอบระยะเวลา (โดยปกติคือ 12 เดือน) จะผ่านไป แล้วแต่ว่าเวลาใดจะเกิดขึ้นก่อน

ถ้าเรียกดูเว็บไซต์อีคอมเมิร์ซของคุณขณะที่ลงชื่อเข้าใช้ การวิเคราะห์ของ Commerce สามารถให้ข้อมูลเพิ่มเติมเกี่ยวกับผู้เยี่ยมชมได้ ข้อมูลนี้จะขึ้นอยู่กับความสัมพันธ์ที่มีอยู่ซึ่งองค์กรของคุณมีอยู่กับผู้เยี่ยมชม ซึ่งเป็นผลลัพธ์จากการซื้อก่อนหน้าในช่องทางการขายทั้งหมดของ Dynamics 365 Commerce (รวมถึง POS, อีคอมเมิร์ซและศูนย์บริการ) ข้อมูลเพิ่มเติมรวมถึง ความเป็นปัจจุบัน ระยะเวลาของความสัมพันธ์ ค่าอายุการใช้งาน และข้อมูลความถี่

- ผลต่างของผู้เยี่ยมชม
- ใบสั่งโดยเฉลี่ยของผู้เยี่ยมชม
- การขายโดยเฉลี่ยของผู้เยี่ยมชม
- จำนวนผู้เยี่ยมชมจากอีคอมเมิร์ซ

    - ตามวันที่
    - ตามสถานที่

        ปัจจุบัน การวิเคราะห์ของ Commerce สามารถระบุความละเอียดระดับประเทศ/ภูมิภาคสำหรับข้อมูลเชิงลึกของสถานที่สำหรับผู้เยี่ยมชมจากอีคอมเมิร์ซ

    - ตามความเป็นปัจจุบัน

        ความเป็นปัจจุบันคํานวณตามจํานวนวันนับจากความสัมพันธ์กับธุรกรรมล่าสุดของลูกค้ากับองค์กร ปัจจุบัน ความเป็นปัจจุบันไม่ได้พิจารณาสัญญาณการมีส่วนร่วมที่ไม่ใช่ธุรกรรม เช่น กิจกรรมการเรียกดูผ่านอีคอมเมิร์ซ

    - ตามระยะเวลาของความสัมพันธ์

        ระยะเวลาของความสัมพันธ์คํานวณตามจํานวนวันนับตั้งแต่สร้างเรกคอร์ดลูกค้าในระบบ

    - ตามค่าอายุการใช้งาน (LTV)

        LTV คํานวณตามจำนวนเงินรวมที่ลูกค้าใช้จ่ายในช่องทางการขายยของ Dynamics 365 Commerce ทั้งหมด (รวมถึง POS, อีคอมเมิร์ซและศูนย์บริการ)

    - ตามความถี่

        ความถี่คํานวณตามการมีส่วนร่วมทางธุรกรรมของลูกค้ากับองค์กร ปัจจุบัน ความถี่ไม่ได้พิจารณาสัญญาณการมีส่วนร่วมที่ไม่ใช่ธุรกรรม เช่น กิจกรรมการเรียกดูผ่านอีคอมเมิร์ซ

#### <a name="impressions"></a>การแสดงโฆษณา

การแสดงโฆษณาเป็นมุมมองเดียวของภาพผลิตภัณฑ์ตามผู้เยี่ยมชมจากอีคอมเมิร์ซ ตัวอย่างเช่น ผู้เยี่ยมชมจากอีคอมเมิร์ซไปที่โฮมเพจของเว็บไซต์อีคอมเมิร์ซของคุณและดูผลิตภัณฑ์เสื่อโยคะในโมดูลรายการ **ขายดี** ผู้เยี่ยมชมจะมองเห็นผลิตภัณฑ์เสื่อโยคะแบบเดียวกันในในโมดูลรายการ **เลือกมาสำหรับคุณ** ในกรณีนี้ การแสดงโฆษณามีผลิตภัณฑ์สองรายการ 

ปัจจุบัน การแสดงโฆษณามีการติดตามในลักษณะต่อไปนี้

- รายการ (ตัวอย่างเช่น **แนะนำ**, **ขายดี**, **เลือกมาสำหรับคุณ** และ **กำลังนิยม**)
- โมดูลรถเข็น
- คอนเทนเนอร์ผลการค้นหา
- คอนเทนเนอร์ผลการค้นหาตามประเภท

ปัจจุบัน ผลิตภัณฑ์ที่แสดงในโมดูลวงล้อหรือในวิชวลแบบกำหนดเองไม่นับรวมในเมตริกที่เกี่ยวข้องกับการแสดงโฆษณา

หน้า **รายงานการแสดงโฆษณา** ประกอบด้วยเมตริกต่อไปนี้:

- จำนวนการแสดงโฆษณา

    - ตามชนิดหน้าและโมดูล

        ชนิดหน้าเป็นชนิดทั่วไปหน้าที่กําหนดไว้สำหรับแต่ละหน้าในเว็บไซต์อีคอมเมิร์ซของคุณ ชนิดโมดูลคือชนิดของโมดูลภาพบนอีคอมเมิร์ซที่แสดงผลิตภัณฑ์

        หากต้องการดูการแสดงโฆษณาตามโมดูล คุณอาจต้องดูรายละเอียดแนวลึกของหน้าและภาพโมดูล

    - สินค้าพลอยได้
    - ตามสถานะลงชื่อเข้าใช้ของผู้ใช้
    - ตามวันที่

- จำนวนการคลิกของการแสดงโฆษณา

    การคลิกของการแสดงโฆษณาจะเกิดขึ้นเมื่อผู้เยี่ยมชมจากอีคอมเมิร์ซเลือกรูปภาพของผลิตภัณฑ์ โดยทั่วไปแล้ว ผู้เยี่ยมชมจะถูกพาไปยังหน้ารายละเอียดผลิตภัณฑ์ของผลิตภัณฑ์

- อัตราการคลิกผ่าน (CTR) ของการแสดงโฆษณา

    CTR จะคํานวณเป็นจํานวนรวมของการคลิกการแสดงโฆษณาหารด้วยจํานวนการแสดงโฆษณาทั้งหมด

## <a name="commerce-analytics-preview-installation"></a>การติดตั้งการวิเคราะห์ของ Commerce (พรีวิว)

> [!NOTE]
> การวิเคราะห์ของ Commerce (พรีวิว) มีรุ่นพรีวิวในสหรัฐอเมริกา แคนาดา สหราชอาณาจักร ยุโรป เอเชียตะวันออก เอเชียตะวันออก ออสเตรเลีย และญี่ปุ่น หากสภาพแวดล้อม Finance and Operations ของคุณอยู่ในภูมิภาคใดๆ เหล่านั้น คุณสามารถเปิดใช้งานคุณลักษณะนี้ในสภาพแวดล้อมของคุณโดยใช้ Microsoft Dynamics Lifecycle Services (LCS) ก่อนที่คุณจะสามารถใช้คุณลักษณะนี้ได้ โปรดดูที่ [ตั้งค่าคอนฟิกส่งออกไปยัง Azure Data Lake](../fin-ops-core/dev-itpro/data-entities/configure-export-data-lake.md)

### <a name="enable-and-configure-commerce-analytics-preview"></a><a name="enableCommerceAnalytics"></a>เปิดใช้งานและตั้งค่าคอนฟิกการวิเคราะห์ของ Commerce (พรีวิว)

หากต้องการติดตั้งการวิเคราะห์ของ Commerce (พรีวิว) คุณต้องมีสิทธิ์ในการสร้างทรัพยากรในการสมัครใช้งาน Azure คุณยังต้องมีสิทธิ์การใช้งานในการติดตั้ง Add-in ใน LCS ด้วย นี่คือภาพรวมของขั้นตอนต่างๆ

1. [ส่งแบบฟอร์มความต้องการรุ่นพรีวิวสำหรับการวิเคราะห์ของ Commerce (พรีวิว)](#joinPreview)
2. [เปิดใช้งานและตั้งค่าคอนฟิกส่งออกไปยัง Data Lake](#enableExportToDataLake)
3. [เปิดใช้งานและตั้งค่าคอนฟิก Add-in การวิเคราะห์ของ Commerce (พรีวิว)](#enableCommerceAnalyticsAddin)
4. [สร้างโทเค็นลายเซ็นการเข้าถึงที่ใช้ร่วมกัน (SAS) ของบัญชีการจัดเก็บของคุณ](#getSASToken)
5. [ดาวน์โหลดสคริปต์การปรับใช้งานสำหรับมุมมอง Azure Synapse](#downloadSynapseDeploymentScripts)
6. [ติดตั้งและตั้งค่าคอนฟิก Azure Synapse workspace](#configureAzureSynapse)
7. [ติดตั้งแอปเทมเพลต Power BI](#powerbi)

### <a name="submit-the-preview-intake-form-for-commerce-analytics-preview"></a><a name="joinPreview"></a>ส่งแบบฟอร์มความต้องการรุ่นพรีวิวสำหรับการวิเคราะห์ของ Commerce (พรีวิว)

ส่ง [แบบฟอร์มความต้องการรุ่นพรีวิวสำหรับการวิเคราะห์ของ Commerce (พรีวิว)](https://forms.office.com/r/vW5VLJGXZ2) รอเวลาประมวลผลแบบฟอร์มไม่เกินสามวัน หลังจากประมวลผลแล้ว ระบบจะส่งอีเมลยืนยันไปยังที่อยู่อีเมลที่คุณระบุในแบบฟอร์ม

### <a name="enable-and-configure-export-to-data-lake"></a><a name="enableExportToDataLake"></a>เปิดใช้งานและตั้งค่าคอนฟิกส่งออกไปยัง Data Lake

การวิเคราะห์ของ Commerce (พรีวิว) ใช้คุณลักษณะส่งออกไปยัง Data Lake เพื่อส่งออกข้อมูล Commerce HQ data ไปยัง Data Lake และเก็บรักษาข้อมูลใหม่ ก่อนที่คุณจะตั้งค่าคอนฟิกการวิเคราะห์ของ Commerce (พรีวิว) ให้เปิดใช้งานและตั้งค่าคอนฟิกส่งออกไปยัง Data Lake โดยปฏิบัติตามขั้นตอน [ตั้งค่าคอนฟิกส่งออกไปยัง Azure Data Lake](../fin-ops-core/dev-itpro/data-entities/configure-export-data-lake.md)

ขณะที่คุณตั้งค่าคอนฟิกส่งออกไปยัง Data Lake ตรวจสอบให้แน่ใจว่าคุณป้อนข้อมูลต่อไปนี้ เนื่องจากคุณจะต้องป้อนข้อมูลนั้นในภายหลัง:

- <a name="keyVault"></a>ชื่อ Domain Name System (DNS) ของ Key Vault และชื่อลับที่คุณจัดเก็บรหัสแอปพลิเคชันและข้อมูลลับของแอปพลิเคชัน สำหรับข้อมูลเพิ่มเติม ให้ดู [เพิ่มข้อมูลลับลงใน Key Vault ](../fin-ops-core/dev-itpro/data-entities/configure-export-data-lake.md#addsecrets)
- <a name="storageAccount"></a>ชื่อบัญชีการจัดเก็บของอินสแตนซ์ Data Lake สำหรับข้อมูลเพิ่มเติม โปรดดูที่ [สร้างบัญชี Data Lake Storage (รุ่น 2) ในการสมัครใช้งานของคุณ](../fin-ops-core/dev-itpro/data-entities/configure-export-data-lake.md#createsubscription)

### <a name="enable-and-configure-the-commerce-analytics-preview-add-in"></a><a name="enableCommerceAnalyticsAddin"></a>เปิดใช้งานและตั้งค่าคอนฟิก Add-in การวิเคราะห์ของ Commerce (พรีวิว)

เมื่อต้องการติดตั้ง Add-in การวิเคราะห์ของ Commerce (พรีวิว) ใน LCS คุณต้องเป็นผู้ดูแลระบบสภาพแวดล้อมใน LCS สำหรับสภาพแวดล้อมที่คุณวางแผนที่จะใช้

หากต้องการติดตั้งและตั้งค่าคอนฟิก Add-in การวิเคราะห์ของ Commerce (พรีวิว) ให้ทำตามขั้นตอนต่อไปนี้

1. ลงชื่อเข้าใช้ [LCS](https://lcs.dynamics.com/) และไปที่สภาพแวดล้อมของคุณ
2. ในหน้า **สภาพแวดล้อม** บนแท็บ **Add-in ของสภาพแวดล้อม** ให้เลือก **ติดตั้ง Add-in ใหม่**
3. ในกล่องโต้ตอบ ให้เลือก **การวิเคราะห์ของ Commerce (พรีวิว)**

    หาก **การวิเคราะห์ของ Commerce (พรีวิว)** ไม่แสดง ตรวจสอบให้แน่ใจว่าคุณได้เข้าร่วมใน Insider Program แล้ว

4. ในกล่องโต้ตอบ **ตั้งค่า Add in** ให้ป้อนข้อมูลดังต่อไปนี้

    | ข้อมูล | ต้นทาง | มูลค่าตัวอย่าง |
    |---|---|---|
    | รหัสผู้เช่า Azure AD สำหรับสภาพแวดล้อมของคุณ | ลงชื่อเข้าใช้ [พอร์ทัล Azure](https://portal.azure.com/) และเปิดบริการ **Azure Active Directory** จากนั้นเปิดหน้า **คุณสมบัติ** และคัดลอกค่าลงในฟิลด์ **รหัสไดเรกทอรี** | 72f988bf-0000-0000-00000-2d7cd011db47 |
    | ชื่อ DNS ของ Key Vault ของคุณ | ป้อน [ชื่อ DNS](#keyVault) ของ Key Vault ของคุณ คุณควรบันทึกค่านี้ในส่วนก่อนหน้านี้ | `https://contosod365datafeedpoc.vault.azure.net/` |
    | ข้อมูลลับที่มีรหัสแอปพลิเคชัน | ป้อน [ชื่อข้อมูลลับที่จัดเก็บรหัสแอปพลิเคชัน](#keyVault) คุณควรบันทึกค่านี้ในส่วนก่อนหน้านี้ | รหัสแอป |
    | ข้อมูลลับที่มีข้อมูลลับของแอปพลิเคชัน | ป้อน [ชื่อข้อมูลลับที่จัดเก็บข้อมูลลับของแอปพลิเคชัน](#keyVault) คุณควรบันทึกค่านี้ในส่วนก่อนหน้านี้ | ข้อมูลลับของแอป |

5. ยอมรับเงื่อนไขของข้อเสนอโดยการเลือกกล่องกาเครื่องหมาย แล้วเลือก **ติดตั้ง**

    ระบบจะติดตั้งและตั้งค่าคอนฟิก Add-in การวิเคราะห์ของ Commerce (พรีวิว) สำหรับสภาพแวดล้อม กระบวนการนี้อาจใช้เวลาสองสามนาที หลังจากเสร็จสิ้นแล้ว **การวิเคราะห์ของ Commerce (พรีวิว)** ควรแสดงบนหน้า **สภาพแวดล้อม** และสถานะควรเป็น **ติดตั้งแล้ว**

### <a name="generate-a-sas-token-for-your-storage-account"></a><a name="getSASToken"></a>สร้างโทเค็น SAS สำหรับบัญชีการจัดเก็บของคุณ

โทเค็น SAS ช่วยให้เอนทิตี้ภายนอกสามารถเข้าถึงบัญชีการจัดเก็บของคุณและมีชุดสิทธิ์เฉพาะเป็นจํานวนเวลาแบบจำกัด Azure Synapse จะใช้โทเค็น SAS เพื่อเข้าถึงข้อมูลพื้นฐานใน Data Lake

> [!NOTE]
> เนื่องจากข้อจํากัดที่ทราบของการวิเคราะห์ของ Commerce (พรีวิว) อินสแตนซ์ Azure Synapse จะสูญเสียการเข้าถึงที่จัดเก็บข้อมูลดิบเมื่อโทเค็น SAS หมดอายุ ดังนั้น เมื่อคุณสร้างโทเค็น SAS คุณควรตั้งค่าวันหมดอายุสูงสุดที่นโยบายความปลอดภัยขององค์กรของคุณอนุญาต

หากต้องการสร้างโทเค็น SAS ปฏิบัติตามขั้นตอนต่อไปนี้

1. ในพอร์ทัล Azure ให้ไปที่ [บัญชีการจัดเก็บ](#storageAccount) ที่คุณสร้างขณะที่คุณตั้งค่าคอนฟิกส่งออกไปยัง Data Lake
2. ในบานหน้าต่างด้านซ้าย ภายใต้บัญชีการจัดเก็บ ให้เลือก **ลายเซ็นการเข้าถึงที่ใช้ร่วมกัน**
3. บนหน้า **ตัวเลือก SAS** ให้ตั้งค่าฟิลด์ต่อไปนี้

    | ฟิลด์ | ค่า |
    |---|---|
    | บริการที่อนุญาต | เลือก **Blob** |
    | ชนิดทรัพยากรที่อนุญาต | เลือก **บริการ**, **คอนเทนเนอร์** และ **ออบเจ็กต์** |
    | สิทธิ์ที่อนุญาต | เลือก **อ่าน**, **เขียน**, **ลบ**, **แสดง**, **เพิ่ม** และ **สร้าง** |
    | สิทธิ์การกำหนดรุ่นของ Blob | เลือก **เปิดใช้งานการลบรุ่น** |
    | วันที่/เวลาเริ่มต้นและหมดอายุ | ตั้งค่าวันที่และเวลาเริ่มต้นและสิ้นสุดของโทเค็น SAS ตามความเหมาะสม |
    | ที่อยู่ IP ที่อนุญาต | ปล่อยฟิลด์นี้ให้ว่างไว้ |
    | โพรโทคอลที่อนุญาต | เลือก **HTTPS เท่านั้น** |
    | ระดับการกำหนดเส้นทางที่ต้องการ | เลือก **พื้นฐาน (ค่าเริ่มต้น)** |
    | คีย์การลงชื่อ | เลือก **key1** หรือ **key2** ตามความเหมาะสม |

4. เลือก **สร้าง SAS และสตริงการเชื่อมต่อ**
5. คัดลอกค่าในฟิลด์ **โทเค็น SAS** และวางลงในโปรแกรมแก้ไขข้อความ เช่น Notepad

### <a name="download-the-deployment-scripts-for-azure-synapse-views"></a><a name="downloadSynapseDeploymentScripts"></a>ดาวน์โหลดสคริปต์การปรับใช้งานสำหรับมุมมอง Azure Synapse

เมื่อต้องการสร้างและเผยแพร่มุมมองที่ต้องการใน Azure Synapse workspace คุณต้องเรียกใช้ชุดสคริปต์ ทำตามขั้นตอนต่อไปนี้เพื่อดาวน์โหลดสคริปต์

1. บน GitHub ให้ไปยังที่จัดเก็บ [microsoft/Dynamics365Commerce.Solutions](https://github.com/microsoft/Dynamics365Commerce.Solutions) (repo)
2. ดาวน์โหลดสคริปต์ไปยังคอมพิวเตอร์เฉพาะที่ของคุณโดยสร้างสคริปต์ใหม่หรือดาวน์โหลดเป็นไฟล์ซิป

### <a name="install-and-configure-an-azure-synapse-workspace"></a><a name="configureAzureSynapse"></a>ติดตั้งและตั้งค่าคอนฟิก Azure Synapse workspace

เมื่อต้องการติดตั้งและตั้งค่าคอนฟิก Azure Synapse workspace ให้ทำตามขั้นตอนต่อไปนี้

1. ติดตั้ง Azure Synapse workspace ในการสมัครใช้งาน Azure ของคุณ สำหรับข้อมูลเพิ่มเติม โปรดดูที่ [เริ่มต้นใช้งานด่วน: สร้าง Synapse workspace](/azure/synapse-analytics/quickstart-create-workspace)
2. ใน Notepad หรือโปรแกรมแก้ไขข้อความอื่น ให้เปิดไฟล์สคริปต์ **SetupSynapse.sql** จากโฟลเดอร์บนคอมพิวเตอร์เฉพาะที่ของคุณที่คุณคัดลอกหรือดาวน์โหลดที่เก็บ Dynamics365Commerce.Solutions ในส่วนก่อนหน้านี้ ไฟล์สคริปต์จะอยู่ภายใต้โฟลเดอร์ /Pipeline/CommerceAnalyticsSynapse/ ในสคริปต์ ให้แทนที่ข้อความตัวยึดด้วยค่าที่แสดงในตารางต่อไปนี้

    | ข้อความสำหรับตัวยึด | ค่าการแทนที่ |
    |---|---|
    | placeholder_storageaccount | ชื่อของ [บัญชีการจัดเก็บ](#storageAccount) ที่คุณสร้างขณะที่คุณตั้งค่าคอนฟิกส่งออกไปยัง Data Lake |
    | <a name="phContainer"></a>placeholder_container | ชื่อของคอนเทนเนอร์ที่จัดเก็บซึ่งสร้างในอินสแตนซ์ Data Lake ของคุณหลังจากที่คุณติดตั้ง Add-in ส่งออกไปยัง Data Lake ใน LCS เสร็จเรียบร้อยแล้ว เมื่อต้องการขอชื่อคอนเทนเนอร์ คุณต้องใช้ Storage Explorer ในพอร์ทัล Azure เพื่อเรียกดูบัญชีการจัดเก็บของคุณ |
    | placeholder_sastoken | [โทเค็น SAS](#getSASToken) ที่คุณสร้างขึ้น ตรวจสอบให้แน่ใจว่าได้ลบเครื่องหมายคําถาม (**?**) อกจากจุดเริ่มต้นของค่าโทเค็น SAS |
    | <a name="phUserPwd"></a>placeholder_password | รหัสผ่านที่รัดกุมที่คุณเลือก จดบันทึกรหัสผ่านนี้ รหัสผ่านนี้จะถูกตั้งค่าเป็นรหัสผ่านของบัญชี **reportreadonlyuser** ใหม่ที่สคริปต์สร้างขึ้น **อย่า** ป้อนรหัสผ่านของบัญชี **sqladminuser** |

3. คัดลอกเนื้อหาที่อัปเดตของไฟล์สคริปต์
4. ในพอร์ทัล Azure ไปที่ Azure Synapse workspace ใหม่ ในหน้า **ภาพรวม** ให้เลือก **เปิด Synapsy Studio**
5. ใน Synapsy Studio ให้เลือก **ใหม่ \> สคริปต์ SQL** และวางเนื้อหาของไฟล์สคริปต์ลงในโปรแกรมแก้ไขสคริปต์ SQL
6. ตรวจสอบให้แน่ใจว่าฟิลด์ **ใช้ฐานข้อมูล** ตั้งค่าเป็น **หลัก**
7. เลือก **เรียกใช้** และรอให้สคริปต์ทำงานเสร็จสิ้น การดำเนินการของสคริปต์ที่สำเร็จจะสร้างฐานข้อมูลให้กับการวิเคราะห์ของ Commerce โดยข้อมูลประจำตัวเพื่อเข้าถึงที่จัดเก็บข้อมูลดิบและบัญชีผู้ใช้แบบอ่านอย่างเดียวที่ Power BI จะใช้เชื่อมต่อกับอินสแตนซ์ Azure Synapse
8. บนคอมพิวเตอร์เฉพาะที่ของคุณ ให้เปิด Windows PowerShell ในโหมดผู้ดูแลระบบ และไปที่โฟลเดอร์ /Pipeline/CommerceAnalyticsSynapse/ ภายใต้โฟลเดอร์ที่คุณคัดลอกหรือดาวน์โหลด Dynamics365Commerce.Solutions repo
9. ตั้งค่านโยบายการเรียกใช้งาน Windows PowerShell โดยการเรียกใช้คำสั่งต่อไปนี้

    ```powershell
    Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
    ```

10. หากไม่ได้ติดตั้งโมดูล SQL Server PowerShell ไว้ ให้ติดตั้งโดยเรียกใช้คำสั่งต่อไปนี้

    ```powershell
    Install-Module sqlserver
    ```

    > [!NOTE]
    > ระหว่างการติดตั้งโมดูล คุณอาจได้รับพร้อมท์ให้ติดตั้งตัวให้บริการ NuGet ในกรณีนี้ ให้เลือก **Y** เพื่อติดตั้งตัวให้บริการ NuGet คุณยังอาจได้รับข้อความให้ตกลงว่ากำลังติดตั้งโมดูลจากที่เก็บที่ไม่น่าเชื่อถือ ในกรณีนี้ ให้เลือก **Y** เพื่อติดตั้งต่อ คุณสามารถเลือกเรียกใช้ **Set-PSRepository** cmdlet เพื่อไว้วางใจที่เก็บ **PSGallery** ก็ได้

11. เผยแพร่มุมมอง Azure Synapse โดยการเรียกใช้คำสั่งต่อไปนี้

    ```powershell
    .\PublishSynapseViews.ps1 -serverName SERVER_NAME -password PASSWORD -storageAccount STORAGE_ACCOUNT -containerName CONTAINER_NAME -datarootpath DATA_ROOT_PATH
    ```

    เมื่อคุณเรียกใช้คำสั่งนี้ ให้แทนที่ค่าตัวยึดด้วยค่าที่แสดงในตารางต่อไปนี้

    | ค่าของตัวยึด | ค่าการแทนที่ |
    |---|---|
    | SERVER_NAME | ชื่อของตำแหน่งข้อมูล Azure Synapse Serverless SQL คุณสามารถรับค่านี้จากหน้า **ภาพรวม** สำหรับ Azure Synapse workspace ในพอร์ทัล Azure |
    | PASSWORD | รหัสผ่านของบัญชี **sqladminuser** |
    | STORAGE_ACCOUNT | ชื่อของบัญชีการจัดเก็บสำหรับ Data Lake |
    | CONTAINER_NAME | ชื่อของคอนเทนเนอร์ที่สร้างขึ้นโดยคุณลักษณะส่งออกไปยัง Data Lake คอนเทนเนอร์นี้เป็นคอนเทนเนอร์เดียวกันกับที่คุณระบุเป็นค่า [placeholder_container](#phContainer) ในขั้นตอนที่ 2 |
    | DATA_ROOT_PATH | ชื่อโฟลเดอร์ภายใต้คอนเทนเนอร์ที่มีข้อมูลทั้งหมด |

    > [!NOTE]
    > คุณสามารถค้นหาชื่อบัญชีการจัดเก็บ ชื่อคอนเทนเนอร์ และพาธรากของข้อมูลได้โดยใช้เบราว์เซอร์ Azure Storage และบัญชี Data Lake Storage ในพอร์ทัล Azure

12. รอให้สคริปต์ทำงานเสร็จสิ้น การทำงานสคริปต์ที่สำเร็จจะสร้างมุมมอง SQL ในอินสแตนซ์ Azure Synapse Serverless SQL

### <a name="install-the-power-bi-template-app"></a><a name="powerbi"></a>ติดตั้งแอปเทมเพลต Power BI

หากต้องการติดตั้งแอปเทมเพลต Power BI สำหรับการวิเคราะห์ของ Commerce (พรีวิว) ให้ทำตามขั้นตอนต่อไปนี้

1. ลงชื่อเข้าใช้ [พอร์ทัล Power BI](https://powerbi.microsoft.com/) โดยใช้รหัสองค์กรของคุณ
2. ติดตั้งแอปเทมเพลต Power BI สำหรับการวิเคราะห์ของ Commerce (พรีวิว) โดยไปที่ [https://aka.ms/cdireport-installapp](https://aka.ms/cdireport-installapp) คุณอาจได้รับคําเตือนที่ระบุว่าแอปไม่แสดงใน AppSource เลือก **ติดตั้ง**
3. หากคุณติดตั้งแอปเป็นครั้งแรก ให้ข้ามไปยังขั้นตอนที่ 5 ก่อน หากคุณเคยติดตั้งแอปนี้มาก่อน ระบบจะแสดงตัวเลือกเพื่ออัปเดตแอปดังต่อไปนี้

    - **อัปเดตพื้นที่ทำงานและแอป** – อัปเดตแอปเทมเพลตที่มีอยู่และเขียนทับการตั้งค่าแอปที่มีอยู่ เช่น ชื่ออินสแตนซ์ของแอปลิเคชันและการตั้งค่าคอนฟิกของสิทธิ์
    - **อัปเดตเฉพาะเนื้อหาพื้นที่ทำงานโดยไม่อัปเดตแอป** – อัปเดตแอปเทมเพลตที่มีอยู่ แต่เก็บการตั้งค่าแอปที่มีอยู่ไว้ *ตัวเลือกนี้เป็นตัวเลือกที่แนะนำสำหรับการอัปเดตแอป*
    - **ติดตั้งแอปสําเนาอื่นลงในพื้นที่ทำงานใหม่** – สร้างพื้นที่ทำงานใหม่และสร้างสำเนาของแอปเทมเพลตที่มีอยู่ไว้ภายใน พื้นที่ทำงานที่มีอยู่จะถูกปล่อยไว้อย่างครบถ้วน

4. เลือกหนึ่งในตัวเลือกการอัปเดต แล้วเลือก **ติดตั้ง**
5. เปิดแอปที่ติดตั้งโดยการเลือก **แอป** ในบานหน้าต่างด้านซ้ายแล้วเลือกแอป
6. เชื่อมต่อแอปกับแหล่งข้อมูลของคุณโดยการเลือก **เชื่อมต่อ** ถ้าคุณเคยติดตั้งแอปไว้ก่อนหน้า ให้เลือกลิงก์ **เชื่อมต่อข้อมูลของคุณ** ในแถบข้อความสีเหลือง
7. ตั้งค่าฟิลด์เหล่านี้

    | ฟิลด์ | ค่า |
    |---|---|
    | เซิร์ฟเวอร์ | ป้อนชื่อของตำแหน่งข้อมูล Azure Synapse Serverless SQL ซึ่งคุณสร้างขึ้นในส่วนก่อนหน้า คุณสามารถรับค่านี้จากหน้า **ภาพรวม** สำหรับ Azure Synapse workspace ในพอร์ทัล Azure |
    | ฐานข้อมูล | ป้อน **CommerceAnalytics** |
    | ภาษา | เลือกค่าในรายการ ฟิลด์นี้ใช้กับชื่อผลิตภัณฑ์และประเภทที่แปลเป็นภาษาท้องถิ่น ค่าต้องตรงตามรูปแบบตัวพิมพ์ |
    | ช่วงวันที่ | เลือกค่าในรายการ ข้อมูลจํานวนเดือนที่เลือกจะนําเข้าไปยังชุดข้อมูล Power BI ค่าที่คุณเลือกจะมีผลกระทบต่อขนาดของชุดข้อมูลและเวลาที่ต้องใช้ในการซิงโครไนซ์ |

8. เลือก **ถัดไป** ระบบจะขอให้คุณป้อนข้อมูลประจำตัวสำหรับการเชื่อมต่อกับฐานข้อมูล SQL ของ Azure Synapse ตั้งค่าฟิลด์ตามที่แสดงไว้ในตารางต่อไปนี้

    | ฟิลด์ | ค่า |
    |---|---|
    | วิธีการรับรองความถูกต้อง | เลือก **พื้นฐาน** |
    | ชื่อผู้ใช้ | ป้อน **reportreadonlyuser** |
    | รหัสผ่าน | ป้อนค่าที่คุณแทนที่ตัวยึด [placeholder_password](#phUserPwd) ภายในสคริปต์ SetupSynapse.sql รหัสผ่านนี้เป็นรหัสผ่านของบัญชี **reportreadonlyuser** |

9. เลือก **ลงชื่อเข้าใช้และเชื่อมต่อ**
10. รอจนกว่าชุดข้อมูลจะอัปเดตเสร็จเรียบร้อย จากเลือกปุ่ม  **แก้ไขแอป** เพื่อเปิดพื้นที่ทำงานของแอป ซึ่งคุณสามารถดูสถานะการอัปเดตของชุดข้อมูลได้ ในพื้นที่ทำงานของแอป คุณยังสามารถตั้งค่ากำหนดการอัปเดตอัตโนมัติให้กับชุดข้อมูลของคุณ จัดการสิทธิ์ และเปลี่ยนชื่ออินสแตนซ์ของแอปได้ด้วย

### <a name="privacy"></a><a name="privacy"></a>ความเป็นส่วนตัว

การรักษาความเป็นส่วนตัวของคุณเป็นสิ่งสำคัญสำหรับเรา เรียนรู้เพิ่มเติม อ่าน [คำชี้แจงสิทธิส่วนบุคคล](https://go.microsoft.com/fwlink/?LinkId=521839) ของเรา

[!INCLUDE[footer-include](../includes/footer-banner.md)]
