---
title: ตัวตรวจสอบความสอดคล้องกันของธุรกรรมการขายปลีก
description: หัวข้อนี้อธิบายฟังก์ชันการทำงานของตัวตรวจสอบความสอดคล้องกันของธุรกรรมใน Dynamics 365 Commerce
author: josaw1
manager: AnnBe
ms.date: 10/07/2020
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 869230c0003735c1e9f48170a16ca9409a9edc19
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/15/2021
ms.locfileid: "4976550"
---
# <a name="retail-transaction-consistency-checker"></a>ตัวตรวจสอบความสอดคล้องกันของธุรกรรมการขายปลีก

[!include [banner](includes/banner.md)]

หัวข้อนี้อธิบายฟังก์ชันการทำงานของตัวตรวจสอบความสอดคล้องกันของธุรกรรมใน Microsoft Dynamics 365 Commerce ตัวตรวจสอบความสอดคล้องกันจะระบุและจำแนกธุรกรรมที่ไม่สอดคล้องกันก่อนที่จะมีการจัดการต่อโดยกระบวนการลงรายการบัญชีใบแจ้งยอด

เมื่อมีการลงรายการบัญชีใบแจ้งยอด การลงรายการบัญชีอาจล้มเหลวเนื่องจากข้อมูลที่ไม่สอดคล้องกันในตารางธุรกรรมการค้า ปัญหาข้อมูลอาจเกิดมาจากปัญหาที่ไม่คาดคิดในแอปพลิเคชันการขายหน้าร้าน (POS) หรือหากธุรกรรมมีการนำเข้าอย่างไม่ถูกต้องจากระบบ POS ของบริษัทอื่น ตัวอย่างของลักษณะความไม่สอดคล้องกันเหล่านี้ที่อาจปรากฏขึ้นได้แก่: 

- ยอดรวมของธุรกรรมในตารางส่วนหัวไม่ตรงกับยอดรวมของธุรกรรมในรายการ
- จำนวนรายการในตารางส่วนหัวไม่ตรงกับจำนวนของรายการในตารางธุรกรรม
- ภาษีในตารางส่วนหัวไม่ตรงกับยอดเงินภาษีในรายการ 

เมื่อธุรกรรมที่ไม่สอดคล้องกันถูกจัดการต่อโดยกระบวนการลงรายการบัญชีใบแจ้งยอด จะมีการสร้างใบแจ้งหนี้การขายและสมุดรายวันการชำระเงินที่ไม่สอดคล้องกัน และทำให้กระบวนการลงรายการบัญชีใบแจ้งยอดทั้งหมดล้มเหลว การกู้คืนใบแจ้งยอดจากสถานะดังกล่าวเป็นการแก้ไขข้อมูลที่มีความซับซ้อนในตารางธุรกรรมหลายตาราง ตัวตรวจสอบความสอดคล้องกันของธุรกรรมจะป้องกันปัญหาดังกล่าว

ตารางต่อไปนี้แสดงกระบวนการลงรายการบัญชีที่มีตัวตรวจสอบความสอดคล้องกันของธุรกรรม

![กระบวนการลงรายการบัญชีใบแจ้งยอดที่มีตัวตรวจสอบความสอดคล้องกันของธุรกรรม](./media/validchecker.png "กระบวนการลงรายการบัญชีใบแจ้งยอดที่มีตัวตรวจสอบความสอดคล้องกันของธุรกรรมการขายปลีก")

กระบวนการชุดงาน **ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า** จะตรวจสอบความสอดคล้องกันของตารางธุรกรรมการค้าในสถานการณ์ต่อไปนี้

- **บัญชีลูกค้า** – ตรวจสอบว่าบัญชีลูกค้าในตารางธุรกรรมมีอยู่ในข้อมูลหลักของลูกค้า HQ หรือไม่
- **จำนวนรายการ** – ตรวจสอบว่าจำนวนของรายการตามที่บันทึกไว้ในตารางส่วนหัวของธุรกรรมตรงกับจำนวนรายการในตารางธุรกรรมการขายหรือไม่
- **ราคารวมภาษี** – ตรวจสอบให้แน่ใจว่าพารามิเตอร์ **ราคารวมภาษี** สอดคล้องกันข้ามรายการธุรกรรม และราคาในรายการขายเป็นไปตามราคารวมภาษีและการยกเว้นภาษี
- **ยอดการชำระเงิน** - ตรวจสอบให้แน่ใจว่าเรกคอร์ดการชำระเงินตรงกับยอดการชำระเงินในส่วนหัว ในขณะทีมีการจัดโครงแบบในการตั้งค่าคอนฟิกสำหรับการปัดเศษสตางค์ในบัญชีแยกประเภททั่วไป
- **ยอดเงินรวม** – ตรวจสอบว่ายอดเงินรวมในส่วนหัวคือผลรวมของยอดเงินสุทธิในบรรทัดบวกด้วยยอดภาษี ในขณะที่ยังมีการจัดโครงแบบในการตั้งค่าคอนฟิกสำหรับการปัดเศษสตางค์ในบัญชีแยกประเภททั่วไป
- **ยอดเงินสุทธิ** – ตรวจสอบว่ายอดเงินสุทธิในส่วนหัวคือผลรวมของยอดเงินสุทธิในบรรทัด ในขณะที่ยังมีการจัดโครงแบบในการตั้งค่าคอนฟิกสำหรับการปัดเศษสตางค์ในบัญชีแยกประเภททั่วไป
- **การชำระเงินน้อยเกิน / มากเกิน** – ตรวจสอบว่าความแตกต่างระหว่างยอดเงินรวมในส่วนหัวและยอดการชำระเงินไม่เกินกว่าการตั้งค่าคอนฟิกการชำระเงินน้อยเกิน / การชำระเงินมากเกิน ในขณะที่ยังมีการจัดโครงแบบในการตั้งค่าคอนฟิกสำหรับการปัดเศษสตางค์ในบัญชีแยกประเภททั่วไป
- **ยอดส่วนลด** – ตรวจสอบว่ายอดส่วนลดในตารางส่วนลดและยอดส่วนลดในตารางรายการธุรกรรมสอดคล้องกันหรือไม่ และยอดส่วนลดในส่วนหัวเป็นผลรวมของยอดส่วนลดในรายการหรือไม่ ในขณะที่ยังมีการจัดโครงแบบในการตั้งค่าคอนฟิกสำหรับการปัดเศษสตางค์ในบัญชีแยกประเภททั่วไป
- **ส่วนลดต่อรายการสินค้า** – ตรวจสอบว่าส่วนลดต่อรายการสินค้าในรายการธุรกรรมเป็นผลรวมของรายการทั้งหมดในตารางส่วนลดที่สัมพันธ์กับรายการธุรกรรมหรือไม่
- **สินค้าจากบัตรของขวัญ** – Commerce ไม่รองรับการคืนสินค้าจากบัตรของขวัญ อย่างไรก็ตาม ยอดดุลในบัตรของขวัญไม่สามารถแลกเป็นเงินสด สินค้าจากบัตรของขวัญที่ดำเนินการเป็นรายการส่งคืนแทนรายการแลกเป็นเงินสดไม่สามารถดำเนินกระบวนการลงรายการบัญชีใบแจ้งยอด กระบวนการตรวจสอบความถูกต้องของสินค้าจากบัตรของขวัญจะช่วยรับประกันว่ามีเฉพาะสินค้าในรายการบัตรของขวัญในตารางธุรกรรมเท่านั้นที่เป็นรายการแลกเป็นเงินสดของบัตรของขวัญ
- **ราคาค่าลบ** – ตรวจสอบว่าไม่มีรายการธุรกรรมราคาค่าลบ
- **สินค้าและสินค้าย่อย** – ตรวจสอบว่าสินค้าและสินค้าย่อยในรายการธุรกรรมมีอยู่ในไฟล์หลักสินค้าและสินค้าย่อยหรือไม่
- **ยอดเงินภาษี** - ตรวจสอบว่าเรกคอร์ดภาษีตรงกับยอดเงินภาษีในรายการหรือไม่
- **หมายเลขลำดับประจำสินค้า** - ตรวจสอบว่ามีหมายเลขลำดับประจำสินค้าอยู่ในรายการธุรกรรมสำหรับสินค้าที่ควบคุมโดยหมายเลขลำดับประจำสินค้าหรือไม่
- **เครื่องหมาย** - ตรวจสอบว่ามีเครื่องหมายสำหรับปริมาณและยอดเงินสุทธิเหมือนกันในรายการธุรกรรมทั้งหมดหรือไม่
- **วันที่ทำการ** - ตรวจสอบว่ารอบระยะเวลาทางการเงินสำหรับวันที่ทำการทั้งหมดสำหรับธุรกรรมเปิดอยู่หรือไม่
- **ค่าธรรมเนียม** - ตรวจสอบความถูกต้องของยอดเงินค่าธรรมเนียมของส่วนหัวและรายการว่าเป็นไปตามราคา รวมภาษี และการยกเว้นภาษี

## <a name="set-up-the-consistency-checker"></a>ตั้งค่าตัวตรวจสอบความสอดคล้องกัน

ตั้งค่าคอนฟิกกระบวนการชุดงาน "ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า" ที่ **Retail และ Commerce \> ข้อมูลไอทีสำหรับ Retail และ Commerce \> การลงรายการบัญชี POS** สำหรับการดำเนินการประจำงวด ชุดงานสามารถจัดกำหนดการตามลำดับชั้นขององค์กร เช่นเดียวกับวิธีการตั้งค่ากระบวนการ "คำนวณใบแจ้งยอดเป็นชุดงาน" และ "ลงรายการบัญชีใบแจ้งยอดเป็นชุดงาน" เราขอแนะนำให้คุณตั้งค่าคอนฟิกกระบวนการชุดงานนี้เพื่อเรียกใช้วันละหลายครั้ง และจัดกำหนดการเพื่อให้ดำเนินการในตอนสิ้นสุดการดำเนินการของงาน P ทั้งหมด

## <a name="results-of-validation-process"></a>ผลลัพธ์ของกระบวนการตรวจสอบความถูกต้อง

ผลลัพธ์ของการตรวจสอบความถูกต้องตามกระบวนการชุดงานได้รับการติดแท็กเป็นธุรกรรมที่เหมาะสม ฟิลด์ **สถานะการตรวจสอบความถูกต้อง** ในเรกคอร์ดธุรกรรมได้รับการตั้งค่าเป็น **สำเร็จ** หรือ **ผิดพลาด** และวันที่ของการดำเนินการตรวจสอบความถูกต้องครั้งล่าสุดจะปรากฏในฟิลด์ **เวลาที่ตรวจสอบความถูกต้องล่าสุด**

หากต้องการดูข้อความคำอธิบายข้อผิดพลาดเพิ่มเติมที่เกี่ยวข้องกับความล้มเหลวในการตรวจสอบความถูกต้อง เลือกเรกคอร์ดธุรกรรมของร้านค้าที่เกี่ยวข้องและคลิกปุ่ม **ข้อผิดพลาดในการตรวจสอบความถูกต้อง**

ธุรกรรมที่ล้มเหลวในการตรวจสอบความถูกต้องและธุรกรรมที่ยังไม่ได้ตรวจสอบความถูกต้องจะไม่ถูกดึงลงในใบแจ้งยอด ระหว่างกระบวนการ "คำนวณใบแจ้งยอด" ผู้ใช้จะได้รับแจ้งหากมีธุรกรรมที่น่าจะรวมอยู่ในใบแจ้งยอดแต่ไม่มีอยู่

หากพบข้อผิดพลาดในการตรวจสอบความถูกต้อง วิธีเดียวในการแก้ไขข้อผิดพลาดคือการติดต่อฝ่ายสนับสนุนของ Microsoft ในรุ่นที่นำออกใช้ในอนาคต จะมีการเพิ่มความสามารถเพื่อให้ผู้ใช้สามารถแก้ไขเรกคอร์ดที่ล้มเหลวผ่านทางอินเทอร์เฟสผู้ใช้ ความสามารถในการลงบันทึกและการตรวจสอบยังสามารถใช้ในการติดตามประวัติการแก้ไขได้อีกด้วย

> [!NOTE]
> กฎการตรวจสอบความถูกต้องเพิ่มเติมที่จะรองรับสถานการณ์อื่นๆ จะได้รับการเพิ่มลงในรุ่นที่นำออกใช้ในอนาคต
