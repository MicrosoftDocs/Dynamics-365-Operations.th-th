---
title: ตรวจสอบความถูกต้องของธุรกรรมของร้านค้าสำหรับการคำนวณใบแจ้งยอด
description: หัวข้อนี้จะอธิบายถึงฟังก์ชันสำหรับการตรวจสอบความถูกต้องของธุรกรรมของร้านค้าใน Microsoft Dynamics 365 Commerce
author: analpert
ms.date: 01/31/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: analpert
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: f51b1f39aa212fe8587761721194db7791bec5bc
ms.sourcegitcommit: 7893ffb081c36838f110fadf29a183f9bdb72dd3
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/02/2022
ms.locfileid: "8087460"
---
# <a name="validate-store-transactions-for-statement-calculation"></a>ตรวจสอบความถูกต้องของธุรกรรมของร้านค้าสำหรับการคำนวณใบแจ้งยอด

[!include [banner](includes/banner.md)]

หัวข้อนี้จะอธิบายถึงฟังก์ชันสำหรับการตรวจสอบความถูกต้องของธุรกรรมของร้านค้าใน Microsoft Dynamics 365 Commerce กระบวนการตรวจสอบความถูกต้องจะระบุและทําเครื่องหมายธุรกรรมที่จะทําให้เกิดข้อผิดพลาดในการลงรายการบัญชีก่อนที่จะมีการจัดการต่อโดยกระบวนการลงรายการบัญชีใบแจ้งยอด

เมื่อคุณพยายามลงรายการบัญชีใบแจ้งยอด กระบวนการตรวจสอบความถูกต้องอาจล้มเหลวเนื่องจากข้อมูลที่ไม่สอดคล้องกันในตารางธุรกรรมการค้า ตัวอย่างปัจจัยบางอย่างที่อาจทำให้เกิดความไม่สอดคล้องกันมีดังต่อไปนี้

- ยอดรวมของธุรกรรมในตารางส่วนหัวไม่ตรงกับยอดรวมของธุรกรรมในรายการ
- จํานวนสินค้าที่ระบุในตารางส่วนหัวไม่ตรงกับจํานวนสินค้าในตารางธุรกรรม
- ภาษีในตารางส่วนหัวไม่ตรงกับยอดเงินภาษีในรายการ 

หากธุรกรรมที่ไม่สอดคล้องกันได้รับการจัดการต่อโดยกระบวนการลงรายการบัญชีใบแจ้งยอด ใบแจ้งหนี้การขายและสมุดรายวันการชำระเงินที่สร้างอาจทำให้การลงรายการบัญชีใบแจ้งยอดล้มเหลว กระบวนการ **ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า** ช่วยป้องกันปัญหาเหล่านี้โดยการตรวจสอบให้แน่ใจว่ามีเฉพาะธุรกรรมที่ผ่านกฎการตรวจสอบความถูกต้องของธุรกรรมเท่านั้นที่จะส่งผ่านไปยังกระบวนการคำนวณของใบแจ้งยอดธุรกรรม

รูปภาพประกอบต่อไปนี้แสดงกระบวนการของวันที่เวลาที่เกิดซ้ำสำหรับการอัปโหลดธุรกรรม การตรวจสอบความถูกต้องของธุรกรรม และการคำนวณและการลงรายการบัญชีใบแจ้งยอดธุรกรรม และกระบวนการเมื่อสิ้นสุดวันสำหรับการคำนวณและการลงรายการบัญชีงบการเงิน

![รูปภาพประกอบที่แสดงกระบวนการของวันที่เวลาที่เกิดซ้ำสำหรับการอัปโหลดธุรกรรม การตรวจสอบความถูกต้องของธุรกรรม และการคำนวณและการลงรายการบัญชีใบแจ้งยอดธุรกรรม และกระบวนการเมื่อสิ้นสุดวันสำหรับการคำนวณและการลงรายการบัญชีงบการเงิน](./media/valid-checker-statement-posting-flow.png)

## <a name="store-transaction-validation-rules"></a>กฎการตรวจสอบความถูกต้องของธุรกรรมของร้านค้า

กระบวนการชุดงาน **ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า** จะตรวจสอบความสอดคล้องกันของตารางธุรกรรมการค้าตามกฎการตรวจสอบความถูกต้องต่อไปนี้

> [!NOTE]
> กฎการตรวจสอบความถูกต้องจะยังคงเพิ่มไว้ต่อไปในรีลีสที่ออกต่อมา

### <a name="transaction-header-validation-rules"></a>กฎการตรวจสอบความถูกต้องของส่วนหัวธุรกรรม

ตารางต่อไปนี้แสดงรายการกฎการตรวจสอบความถูกต้องของส่วนหัวธุรกรรมที่มีการตรวจสอบกับส่วนหัวของธุรกรรมขายปลีกก่อนที่จะส่งผ่านธุรกรรมเหล่านั้นไปยังการลงรายการบัญชีใบแจ้งยอด

| กฎ | คำอธิบาย |
|-------|-------------|
| วันที่ทำการ | กฎนี้จะตรวจสอบว่าวันที่ทำการของธุรกรรมสัมพันธ์กับรอบระยะเวลาทางบัญชีที่เปิดในบัญชีแยกประเภทหรือไม่ |
| การปัดเศษสกุลเงิน | กฎนี้จะตรวจสอบว่ายอดเงินธุรกรรมถูกปัดเศษตามกฎการปัดเศษสกุลเงินหรือไม่ |
| บัญชีลูกค้า | กฎนี้จะตรวจสอบว่าลูกค้าที่ใช้ในธุรกรรมมีอยู่ในฐานข้อมูลหรือไม่ |
| ยอดส่วนลด | กฎนี้จะตรวจสอบว่ายอดส่วนลดในส่วนหัวเท่ากับผลรวมของยอดส่วนลดในรายการหรือไม่ |
| สถานะการลงรายการบัญชีเอกสารทางการเงิน (บราซิล) | กฎนี้จะตรวจสอบว่าสามารถลงรายการบัญชีเอกสารทางการเงินได้สำเร็จหรือไม่ |
| ยอดเงินรวม | กฎนี้จะตรวจสอบว่ายอดเงินรวมในส่วนหัวของธุรกรรมตรงกับยอดเงินสุทธิ รวมภาษีของรายการธุรกรรมบวกค่าธรรมเนียมหรือไม่ |
| สุทธิ | กฎนี้จะตรวจสอบว่ายอดเงินสุทธิในส่วนหัวของธุรกรรมตรงกับยอดเงินสุทธิ ไม่รวมภาษีของรายการธุรกรรมบวกค่าธรรมเนียมหรือไม่ |
| สุทธิ + ภาษี | กฎนี้จะตรวจสอบว่ายอดเงินรวมในส่วนหัวของธุรกรรมตรงกับยอดเงินสุทธิ ไม่รวมภาษีของรายการธุรกรรมบวกภาษีและค่าธรรมเนียมทั้งหมดหรือไม่ |
| จำนวนของสินค้า | กฎนี้จะตรวจสอบว่าจํานวนของสินค้าที่ระบุในส่วนหัวของธุรกรรมตรงกับผลรวมของปริมาณในรายการธุรกรรมหรือไม่ |
| ยอดการชำระเงิน | กฎนี้จะตรวจสอบว่ายอดการชำระเงินในส่วนหัวของธุรกรรมตรงกับผลรวมของธุรกรรมการชำระเงินทั้งหมดหรือไม่ |
| การคำนวณการยกเว้นภาษี | กฎนี้จะตรวจสอบว่าผลรวมของยอดเงินที่คํานวณได้และยอดเงินภาษีที่ได้รับยกเว้นของรายการค่าธรรมเนียมเท่ากับยอดเงินที่คํานวณไว้เดิมหรือไม่ |
| การกําหนดราคาที่รวมภาษี | กฎนี้จะตรวจสอบว่าแฟล็ก **ภาษีรวมอยู่ในราคา** ระหว่างส่วนหัวของธุรกรรมกับธุรกรรมภาษีสอดคล้องกันหรือไม่ |
| ธุรกรรมไม่เว้นว่าง | กฎนี้จะตรวจสอบว่าธุรกรรมมีรายการและมีอย่างน้อยหนึ่งรายการที่ไม่ได้ถูกยกเลิก |
| การชำระเงินน้อยเกิน/มากเกิน | กฎนี้จะตรวจสอบว่าความแตกต่างระหว่างยอดเงินรวมกับยอดการชำระเงินไม่เกินกว่าการตั้งค่าคอนฟิกการชำระเงินน้อยเกิน/การชำระเงินมากเกินสูงสุด |

### <a name="transaction-line-validation-rules"></a>กฎการตรวจสอบความถูกต้องของรายการธุรกรรม

ตารางต่อไปนี้แสดงรายการกฎการตรวจสอบความถูกต้องของรายการธุรกรรมที่มีการตรวจสอบกับรายละเอียดรายการของธุรกรรมขายปลีกก่อนที่จะส่งผ่านธุรกรรมเหล่านั้นไปยังการลงรายการบัญชีใบแจ้งยอด

| กฎ | คำอธิบาย |
|-------|-------------|
| บาร์โค้ด | กฎนี้จะตรวจสอบว่ามีบาร์โคดของสินค้าทั้งหมดที่ใช้ในรายการธุรกรรมอยู่ในฐานข้อมูลหรือไม่ |
| รายการค่าธรรมเนียม | กฎนี้จะตรวจสอบว่าผลรวมของยอดเงินที่คํานวณได้และยอดเงินภาษีที่ได้รับยกเว้นของรายการค่าธรรมเนียมเท่ากับยอดเงินที่คํานวณไว้เดิมหรือไม่ |
| การคืนสินค้าสำหรับบัตรของขวัญ | กฎนี้จะตรวจสอบว่าไม่มีการคืนสินค้าสำหรับบัตรของขวัญในธุรกรรม |
| สินค้าย่อย | กฎนี้จะตรวจสอบว่ามีสินค้าและสินค้าย่อยทั้งหมดที่ใช้ในรายการธุรกรรมอยู่ในฐานข้อมูลหรือไม่ |
| ส่วนลดต่อรายการสินค้า | กฎนี้จะตรวจสอบว่ายอดส่วนลดต่อรายการสินค้าตรงกับผลรวมของธุรกรรมส่วนลดหรือไม่ |
| ภาษีของรายการ | กฎนี้จะตรวจสอบว่ายอดเงินภาษีของรายการตรงกับผลรวมของธุรกรรมภาษีหรือไม่ |
| ราคาค่าลบ | กฎนี้จะตรวจสอบว่าไม่มีราคาค่าลบใช้ในรายการธุรกรรม |
| การควบคุมหมายเลขลำดับประจำสินค้า | กฎนี้จะตรวจสอบว่ามีหมายเลขลำดับประจำสินค้าอยู่ในรายการธุรกรรมสำหรับสินค้าที่มีการควบคุมหมายเลขลำดับประจำสินค้าหรือไม่ |
| มิติหมายเลขลำดับประจำสินค้า | กฎนี้จะตรวจสอบความว่าไม่มีการระบุหมายเลขลำดับประจำสินค้าถ้ามิติหมายเลขลำดับประจำสินค้าของสินค้าไม่ได้ใช้งานอยู่ |
| ความแตกต่างของเครื่องหมาย | กฎนี้จะตรวจสอบว่าเครื่องหมายของปริมาณและเครื่องหมายของยอดเงินสุทธิเหมือนกันในรายการธุรกรรมทั้งหมด |
| การยกเว้นภาษี | กฎนี้จะตรวจสอบว่าผลรวมของราคาของสินค้าต่อรายการและยอดเงินภาษีที่ได้รับยกเว้นเท่ากับราคาเดิมหรือไม่ |
| การกำหนดกลุ่มภาษี | กฎนี้จะตรวจสอบว่าชุดรวมของกลุ่มภาษีขายและกลุ่มภาษีตามประเภทสินค้าทำให้เกิดส่วนร่วมของภาษีที่ถูกต้องหรือไม่ |
| การแปลงหน่วยวัด | กฎนี้จะตรวจสอบว่าหน่วยวัดของทุกรายการมีการแปลงเป็นหน่วยวัดของสินค้าคงคลังที่ถูกต้องหรือไม่ |

## <a name="enable-the-store-transaction-validation-process"></a>เปิดใช้งานกระบวนการตรวจสอบความถูกต้องของธุรกรรมของร้านค้า

ตั้งค่าคอนฟิกงาน **ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า** สำหรับการดำเนินการประจำงวดในศูนย์ควบคุม Commerce (**Retail และ Commerce \> ข้อมูลไอทีสำหรับ Retail และ Commerce \> การลงรายการบัญชี POS**) ชุดงานจะมีการจัดกำหนดการตามลำดับชั้นขององค์กรของร้านค้า ขอแนะนำให้คุณตั้งค่าคอนฟิกกระบวนการชุดงานนี้ให้เรียกใช้ด้วยความถี่เดียวกันกับชุดงาน **งาน P** และ **การคำนวณใบแจ้งยอดธุรกรรม** ของคุณ

## <a name="results-of-the-validation-process"></a>ผลลัพธ์ของกระบวนการตรวจสอบความถูกต้อง

ผลลัพธ์ของกระบวนการชุดงาน **ตรวจสอบความถูกต้องของธุรกรรมของร้านค้า** สามารถดูได้ในธุรกรรมของร้านค้าปลีกแต่ละธุรกรรม ฟิลด์ **สถานะการตรวจสอบความถูกต้อง** ในเรกคอร์ดธุรกรรมได้รับการตั้งค่าเป็น **สำเร็จ**, **ผิดพลาด** หรือ **ไม่มี** ฟิลด์ **เวลาการตรวจสอบความถูกต้องล่าสุด** แสดงวันที่ของการเรียกใช้การตรวจสอบความถูกต้องล่าสุด

ตารางต่อไปนี้อธิบายสถานะการตรวจสอบความถูกต้องแต่ละสถานะ

| สถานะการตรวจสอบความถูกต้อง | คำอธิบาย |
|-------------------|-------------|
| สำเร็จ | กฎการตรวจสอบความถูกต้องที่เปิดใช้งานทั้งหมดผ่าน |
| ผิดพลาด | กฎการตรวจสอบความถูกต้องที่เปิดใช้งานระบุข้อผิดพลาด คุณสามารถดูรายละเอียดเพิ่มเติมเกี่ยวกับข้อผิดพลาดได้โดยการเลือก **ข้อผิดพลาดในการตรวจสอบความถูกต้อง** ในบานหน้าต่างการดำเนินการ |
| ไม่มี | ชนิดธุรกรรมไม่ต้องใช้กฎการตรวจสอบความถูกต้อง |

![หน้าธุรกรรมของร้านค้าที่แสดงฟิลด์สถานะการตรวจสอบความถูกต้องและปุ่มข้อผิดพลาดในการตรวจสอบความถูกต้อง](./media/valid-checker-validation-status-errors.png)

เฉพาะธุรกรรมที่มีสถานะการตรวจสอบความถูกต้องเป็น **สำเร็จ** เท่านั้นที่จะถูกดึงเข้าในใบแจ้งยอดธุรกรรม หากต้องการดูธุรกรรมที่มีสถานะ **ผิดพลาด** ให้ตรวจสอบไทล์ **ความล้มเหลวการตรวจสอบความถูกต้องของเงินสดและการขนส่ง** ในพื้นที่ทำงาน **การเงินของร้านค้า**

![ไทล์ในพื้นที่ทำงานการเงินของร้านค้า](./media/valid-checker-cash-carry-validation-failures.png)

หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับวิธีแก้ไขความล้มเหลวการตรวจสอบความถูกต้องของเงินสดและการขนส่ง โปรดดูที่ [แก้ไขและตรวจสอบธุรกรรมเงินสดและการขนส่งและการจัดการเงินสด](edit-cash-trans.md)

## <a name="additional-resources"></a>แหล่งข้อมูลเพิ่มเติม

[แก้ไขและตรวจสอบธุรกรรมเงินสดและการขนส่งและการจัดการเงินสด](edit-cash-trans.md)

[!INCLUDE[footer-include](../includes/footer-banner.md)]
