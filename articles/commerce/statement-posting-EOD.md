---
title: การปรับปรุงไปยังฟังก์ชันการลงรายการบัญชีใบแจ้งยอดจากธนาคาร
description: หัวข้อนี้อธิบายถึงการปรับปรุงที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด
author: analpert
ms.date: 01/31/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: josaw
ms.search.region: Global
ms.author: analpert
ms.search.validFrom: 2018-04-30
ms.openlocfilehash: 6ee0cea76be05634aa21643acef5b341f19d75ef
ms.sourcegitcommit: 7893ffb081c36838f110fadf29a183f9bdb72dd3
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/02/2022
ms.locfileid: "8087614"
---
# <a name="improvements-to-statement-posting-functionality"></a>การปรับปรุงไปยังฟังก์ชันการลงรายการบัญชีใบแจ้งยอดจากธนาคาร

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

หัวข้อนี้อธิบายถึงการปรับปรุงชุดแรกที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด การปรับปรุงเหล่านี้พร้อมใช้งานใน Microsoft Dynamics 365 for Finance and Operations 7.3.2

## <a name="activation"></a>การเปิดใช้งาน

โดยค่าเริ่มต้น ในขณะปรับใช้ Finance and Operations 7.3.2 โปรแกรมจะถูกตั้งค่าเพื่อใช้ลักษณะการทำงานแบบดั้งเดิมสำหรับการลงรายการบัญชีใบแจ้งยอด ในการเปิดใช้งานคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว คุณต้องเปิดคีย์การตั้งค่าคอนฟิก

- ไปที่ **การดูแลระบบ** \> **ตั้งค่า** \> **การตั้งค่าคอนฟิกลิขสิทธิ์** และจากนั้น ภายใต้โหนด **Retail และ Commerce** ล้างกล่องกาเครื่องหมาย **ใบแจ้งยอด (ดั้งเดิม)** และเลือกกล่องกาเครื่องหมาย **ใบแจ้งยอด**

เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** ใหม่ถูกเปิด รายการเมนูใหม่ที่ชื่อ **ใบแจ้งยอด** จะพร้อมใช้งาน รายการเมนูนี้ช่วยให้คุณสามารถสร้าง คำนวณ และลงรายการบัญชีใบแจ้งยอด ด้วยตนเองได้ ใบแจ้งยอดใดๆ ที่ทำให้เกิดข้อผิดพลาด เมื่อมีการใช้กระบวนการลงรายการบัญชีชุดงาน จะพร้อมใช้งานโดยใช้รายการเมนูนี้ด้วย (เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** ถูกเปิด รายการเมนูจะมีชื่อว่า **เปิดใบแจ้งยอด**)

Commerce มีการตรวจสอบต่อไปนี้ที่เกี่ยวข้องกับคีย์การตั้งค่าคอนฟิกเหล่านี้:

- คีย์การตั้งค่าคอนฟิกทั้งสองไม่ได้เปิดในเวลาเดียวกัน
- ต้องใช้คีย์การตั้งค่าคอนฟิกเดียวกันสำหรับการดำเนินการทั้งหมดที่กระทำกับคำสั่งที่กำหนดในระหว่างวัฏจักร (สร้าง คำนวณ ยกเลิกการเลือก ลงรายการบัญชี ฯลฯ) ตัวอย่างเช่น คุณไม่สามารถสร้างและคำนวณใบแจ้งยอดได้ในขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** ถูกเปิด และจากนั้นได้พยายามลงรายการบัญชีใบแจ้งยอดเดียวกัน ขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** ถูกเปิด

> [!NOTE]
> เราขอแนะนำให้คุณใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** สำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว เว้นแต่ว่าคุณมีเหตุผลที่น่าสนใจในการใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** แทน Microsoft จะยังคงลงทุนในคำสั่งใหม่และคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วต่อไป และเป็นเรื่องสำคัญว่า คุณสลับไปที่โอกาสที่เร็วที่สุดจะได้รับประโยชน์จากรายการนั้น คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่สืบทอดมาถูกเลิกใช้แล้วโดยเริ่มต้นในรุ่น 8.0

## <a name="setup"></a>การตั้งค่า

ในฐานะที่เป็นส่วนหนึ่งของการปรับปรุงไปยังคุณลักษณะการลงรายการบัญชีใบแจ้งยอด พารามิเตอร์ใหม่สามตัวได้ถูกนำไปใช้ในแท็บด่วน **ใบแจ้งยอด** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า**:

- **ปิดใช้งานการล้างข้อมูลใบแจ้งยอด** – ตัวเลือกนี้จะใช้ได้เฉพาะสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม เราขอแนะนำให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่** เพื่อป้องกันผู้ใช้จากเคลียริ่งคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชี ถ้าคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชีจะถูกล้างข้อมูล ข้อมูลจะได้รับความเสียหาย คุณควรตั้งค่าตัวเลือกนี้เป็น **ใช่** ในสถานการณ์ยกเว้นเท่านั้น
- **จองสินค้าคงคลังในระหว่างการคำนวณ** – เราขอแนะนำให้คุณใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** สำหรับการจองสินค้าคงคลัง และให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่** เมื่อการตั้งค่าตัวเลือกนี้เป็น **ไม่ใช่** คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วจะไม่พยายามที่จะสร้างรายการการจองสินค้าคงคลังในเวลาของการคำนวณ (ถ้ารายการไม่ได้ถูกสร้างขึ้นแล้วโดยใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** ) คุณลักษณะจะสร้างรายการการจองสินค้าคงคลัง เฉพาะในขณะลงรายการบัญชี การใช้งานนี้มีตัวเลือกการออกแบบ และเป็นไปตามข้อเท็จจริงที่ว่า กรอบเวลาระหว่างกระบวนการคำนวณและกระบวนการการลงรายการบัญชีโดยทั่วไปจะมีขนาดเล็ก อย่างไรก็ตาม ถ้าคุณต้องการจองสินค้าคงคลังในเวลาของการคำนวณ คุณสามารถกำหนดตัวเลือกนี้เป็น **ใช่**

    คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิมจะจองสินค้าคงคลังในระหว่างกระบวนการคำนวณใบแจ้งยอดเสมอ (ถ้าการจองยังไม่สำเร็จผ่านทางชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** ) โดยไม่คำนึงถึงการตั้งค่าของตัวเลือกนี้

- **ปิดใช้งานการตรวจนับที่จำเป็น** – เมื่อตัวเลือกนี้ถูกตั้งค่าเป็น **ใช่** กระบวนการลงรายการบัญชีสำหรับใบแจ้งยอดดำเนินต่อไป แม้ว่าผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรมในใบแจ้งยอดจะอยู่นอกขีดจำกัดที่กำหนดไว้ในแท็บด่วน **ใบแจ้งยอด** สำหรับร้านค้า

> [!NOTE]
> ใน Commerce รุ่น 10.0.14 เมื่อเปิดใช้งานคุณลักษณะ **ใบแจ้งยอดการขายปลีก - ฟีดแบบต่อเนื่อง** ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** ไม่สามารถใช้ได้อีกต่อไป และไม่สามารถเรียกใช้ได้

นอกจากนี้ พารามิเตอร์ต่อไปนี้ได้รับการแนะนำในแท็บด่วน **ประมวลผลชุดงาน** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า**: 

- **จำนวนสูงสุดของการลงรายการบัญชีใบแจ้งยอดแบบคู่ขนาน** – ฟิลด์นี้จะกำหนดจำนวนของงานในชุดงานที่จะใช้ในการลงรายการบัญชีใบแจ้งยอดหลายฉบับ 
- **เธรดสูงสุดสำหรับการประมวลผลใบสั่งต่อใบแจ้งยอด** – ฟิลด์นี้แสดงถึงจำนวนสูงสุดของเธรดที่ใช้โดยชุดงานการลงรายการบัญชีใบแจ้งยอด เพื่อสร้างและออกใบแจ้งหนี้ใบสั่งขายสำหรับใบแจ้งยอดเดียว จำนวนเธรดทั้งหมดที่จะใช้โดยกระบวนการลงรายการบัญชีใบแจ้งยอด จะถูกคำนวณตามค่าในพารามิเตอร์นี้ซึ่งคูณด้วยค่าในพารามิเตอร์ **จำนวนสูงสุดของการลงรายการบัญชีใบแจ้งยอดแบบคู่ขนาน** การตั้งค่าของพารามิเตอร์นี้สูงเกินไป อาจส่งผลกระทบด้านลบต่อประสิทธิภาพการทำงานของกระบวนการลงรายการบัญชีใบแจ้งยอด
- **รายการธุรกรรมสูงสุดที่รวมอยู่ในการรวม** – ฟิลด์นี้กำหนดจำนวนของรายการธุรกรรมที่จะถูกรวมไว้ในธุรกรรมแบบรวมหนึ่งรายการ ก่อนที่จะมีการสร้างรายการใหม่ ธุรกรรมแบบรวมถูกสร้างขึ้นตามเกณฑ์การรวมที่แตกต่างกัน เช่น ลูกค้า วันที่ธุรกิจ หรือมิติทางการเงิน ข้อสำคัญที่ควรจำคือ รายการจากธุรกรรมเดียวจะไม่ถูกแบ่งในธุรกรรมแบบรวมที่แตกต่างกัน ซึ่งหมายความว่า มีความเป็นไปได้ว่าจำนวนของรายการในธุรกรรมแบบรวมอยู่ในระดับสูงกว่าหรือต่ำกว่าตามปัจจัย เช่น จำนวนของผลิตภัณฑ์เฉพาะ
- **จำนวนสูงสุดของเธรดที่จะตรวจสอบความถูกต้องของธุรกรรมร้านค้า** – ฟิลด์นี้จะกำหนดจำนวนของเธรดที่จะใช้ในการตรวจสอบความถูกต้องของธุรกรรม การตรวจสอบความถูกต้องของธุรกรรมเป็นขั้นตอนที่จำเป็นที่ต้องเกิดขึ้นก่อนที่จะสามารถดึงข้อมูลธุรกรรมเข้าในใบแจ้งยอด นอกจากนี้ คุณยังจำเป็นต้องกำหนด **ผลิตภัณฑ์ในบัตรของขวัญ** บนแท็บด่วน **บัตรของขวัญ** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า** นี่เป็นต้องถูกกำหนด แม้ว่าจะไม่มีการใช้บัตรของขวัญโดยองค์กร

ตารางต่อไปนี้จะแสดงรายการค่าที่แนะนำสำหรับพารามิเตอร์ก่อนหน้า ค่าเหล่านี้ควรได้รับการทดสอบและปรับให้เหมาะกับการตั้งค่าคอนฟิกการปรับใช้และโครงสร้างพื้นฐานที่พร้อมใช้งาน การเพิ่มขึ้นใดๆ ในค่าที่แนะนำสามารถส่งผลกระทบในทางลบต่อการประมวลผลชุดงานอื่นๆ และควรมีการตรวจสอบความถูกต้อง

| พารามิเตอร์ | ค่าที่แนะนำ | รายละเอียด |
|-----------|-------------------|---------|
| จำนวนวันสูงสุดของการลงรายการบัญชีใบแจ้งยอดแบบคู่ขนาน | <p>ตั้งค่าพารามิเตอร์นี้เป็นจํานวนงานในชุดงานที่พร้อมใช้งานกับกลุ่มชุดงานที่เรียกใช้งาน **ใบแจ้งยอด**</p><p>**กฎทั่วไป:** คูณจํานวนของเซิร์ฟเวอร์เสมือน Application Object Server (AOS) ด้วยจํานวนงานในชุดงานที่พร้อมใช้งานต่อเซิร์ฟเวอร์เสมือน AOS</p> | พารามิเตอร์นี้ไม่สามารถใช้ได้เมื่อเปิดใช้งานคุณลักษณะ **ใบแจ้งยอดการขายปลีก - ฟีดแบบต่อเนื่อง** |
| เธรดสูงสุดสำหรับการประมวลผลใบสั่งต่อใบแจ้งยอด | เริ่มการทดสอบค่าที่ **4** โดยทั่วไป ค่าไม่ควรเกิน **8** | พารามิเตอร์นี้จะระบุจํานวนของเธรดที่ใช้ในการสร้างและลงรายการบัญชีใบสั่งขาย ซึ่งแสดงจํานวนของเธรดที่มีอยู่ในการลงรายการบัญชีต่อใบแจ้งยอด |
| รายการธุรกรรมสูงสุดที่รวมอยู่ในการรวม | เริ่มการทดสอบค่าที่ **1000** ขึ้นอยู่กับการตั้งค่าคอนฟิกศูนย์ควบคุม ใบสั่งที่เล็กลงอาจเป็นประโยชน์ต่อประสิทธิภาพมากกว่า | พารามิเตอร์นี้จะระบุจํานวนรายการที่จะรวมอยู่ในใบสั่งขายแต่ละใบในระหว่างการลงรายการบัญชีใบแจ้งยอด หลังจากครบจํานวนนี้แล้ว รายการจะถูกแบ่งเป็นใบสั่งใหม่ แม้ว่าจํานวนรายการขายจะไม่แน่นอน เนื่องจากการแบ่งจะเกิดขึ้นในระดับใบสั่งขาย แต่ใบสั่งขายจะถูกปิดด้วยตัวเลขที่ตั้งค่าไว้ พารามิเตอร์นี้ใช้ในการสร้างใบสั่งขายสำหรับธุรกรรมการขายปลีกไม่มีลูกค้าที่ระบุชื่อ |
| จำนวนเธรดสูงสุดในการตรวจสอบความถูกต้องของธุรกรรมของร้านค้า | ขอแนะนำว่าคุณควรตั้งค่าพารามิเตอร์นี้เป็น **4** และให้คุณเพิ่มพารามิเตอร์นี้เฉพาะเมื่อคุณไม่บรรลุประสิทธิภาพที่ยอมรับได้เท่านั้น จํานวนเธรดที่กระบวนการนี้ใช้ต้องไม่เกินจํานวนตัวประมวลผลที่สามารถใช้งานได้กับเซิร์ฟเวอร์ชุดงาน ถ้าคุณกําหนดเธรดมากเกินไปที่นี่ อาจส่งผลกระทบต่อการประมวลผลชุดงานอื่น | พารามิเตอร์นี้จะควบคุมจํานวนธุรกรรมที่สามารถตรวจสอบความถูกต้องพร้อมกันของร้านค้าที่กำหนด |

> [!NOTE]
> การตั้งค่าและพารามิเตอร์ทั้งหมดที่เกี่ยวข้องกับการลงรายการบัญชีใบแจ้งยอด และที่ถูกกำหนดไว้ในร้านค้าปลีก และในหน้า **พารามิเตอร์การค้า** สามารถใช้ได้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว

## <a name="processing"></a>การประมวลผล

คำสั่งสามารถถูกคำนวณและลงรายการบัญชีได้ในชุดงาน โดยใช้รายการเมนู **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน** อีกทางหนึ่งคือ ใบแจ้งยอดสามารถถูกคำนวณและลงรายการบัญชีได้ด้วยตนเอง โดยใช้รายการ **ใบแจ้งยอด** ที่คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วมีให้

กระบวนการและขั้นตอนสำหรับการคำนวณ และการลงรายการบัญชีใบแจ้งยอดในชุดงาน เท่ากันกับที่อยู่ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม อย่างไรก็ตาม การปรับปรุงที่สำคัญได้ถูกดำเนินการในการประมวลผล back-end หลักของใบแจ้งยอด การปรับปรุงเหล่านี้ทำให้กระบวนการยืดหยุ่นมากขึ้น และให้การมองเห็นที่ดีขึ้นในสถานะและข้อมูลข้อผิดพลาด ดังนั้น ผู้ใช้สามารถจัดการรากที่เกิดจากข้อผิดพลาด และจากนั้นดำเนินการกระบวนการลงรายการบัญชีต่อ โดยไม่ก่อให้เกิดความเสียหายในข้อมูล และไม่ทำให้เกิดข้อมูลที่ต้องซ่อมแซม

ส่วนต่อไปนี้อธิบายของการปรับปรุงหลักบางอย่างสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรากฏในอินเทอร์เฟสผู้ใช้ สำหรับใบแจ้งยอดและใบแจ้งยอดที่ลงรายการบัญชี

### <a name="status-details"></a>รายละเอียดสถานะ

แบบจำลองสถานะใหม่ได้ถูกนำมาใช้ในใบแจ้งยอดที่ลงรายการบัญชีตามปกติ ระหว่างกระบวนการการคำนวณและการลงรายการบัญชี

ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการคำนวณ

| ใบสั่งสถานะ | สถานะ      | คำอธิบาย |
|-------------|------------|-------------|
| 1           | เริ่มต้นแล้ว    | ใบแจ้งยอดถูกสร้างขึ้น และพร้อมที่จะถูกคำนวณ |
| 2           | ที่ทำเครื่องหมาย     | ธุรกรรมที่อยู่ในขอบเขตสำหรับใบแจ้งยอด จะถูกระบุตามพารามิเตอร์ใบแจ้งยอด และจะมีการทำเครื่องหมายด้วยรหัสใบแจ้งยอด |
| 3           | คำนวณได้ | รายการใบแจ้งยอดจะได้รับการคำนวณ และแสดงขึ้น |

ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการลงรายการบัญชี

| ใบสั่งสถานะ | สถานะ                   | คำอธิบาย |
|-------------|-------------------------|-------------|
| 1           | ตรวจสอบแล้ว                 | การตรวจสอบหลายรายการเสร็จสิ้นแล้ว โดยเกี่ยวข้องกับพารามิเตอร์ (ตัวอย่างเช่น ค่าธรรมเนียมการโอนการครอบครอง) และใบแจ้งยอดและรายการใบแจ้งยอด (ตัวอย่างเช่น ผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรม) |
| 2           | รวม              | ธุรกรรมการขายสำหรับลูกค้าที่มีชื่อและไม่มีชื่อ จะถูกรวมไว้ตามการตั้งค่าคอนฟิก ในขั้นสุดท้าย ธุรกรรมแบบรวมทุกรายการจะถูกแปลงเป็นใบสั่งขาย |
| 3           | ใบสั่งของลูกค้าที่สร้างขึ้น  | โดยยึดตามธุรกรรมแบบรวม ใบสั่งขายถูกใช้เพื่อสร้างในระบบ |
| 4 ชั่วโมง           | ใบสั่งของลูกค้าที่แแกใบแจ้งหนี้ | ใบสั่งขายถูกออกใบแจ้งหนี้ |
| 5           | ลงรายการบัญชีส่วนลด        | สมุดรายวันส่วนลดประจำงวดถูกลงรายการบัญชีตามการตั้งค่าคอนฟิก |
| 6 ชั่วโมง           | รายได้/ค่าใช้จ่ายที่ลงรายการบัญชี   | มีการลงรายบัญชีธุรกรรมรายได้/ค่าใช้จ่ายเป็นใบสำคัญ |
| 7           | เชื่อมโยงใบสำคัญแล้ว         | มีการสร้างสมุดรายวันการชำระเงิน และเชื่อมโยงกับใบแจ้งหนี้ที่สอดคล้องกัน |
| 8           | ลงรายการบัญชีการชำระเงิน         | สมุดรายวันการชำระเงินถูกลงรายการบัญชี |
| 9           | ลงรายการบัญชีบัตรของขวัญ       | มีการลงรายบัญชีธุรกรรมบัตรของขวัญเป็นใบสำคัญ |
| 10          | ประกาศแล้ว                  | ใบแจ้งยอดถูกทำเครื่องหมายเป็นลงรายการบัญชีแล้ว |

ทุกๆ สถานะในตารางข้างต้นไม่ขึ้นอยู่กับลักษณะ และการขึ้นต่อกันแบบลำดับชั้นถูกสร้างขึ้นระหว่างสถานะ การขึ้นต่อกันนี้ไหลจากบนลงล่าง ถ้าระบบตรวจพบข้อผิดพลาดขณะกำลังประมวลผลสถานะ สถานะของใบแจ้งยอดจะถูกแปลงกลับไปเป็นสถานะก่อนหน้านี้ ความพยายามซ้ำในเวลาต่อมาใดๆ ของกระบวนการ ดำเนินต่อจากสถานะที่ล้มเหลว และดำเนินต่อไปข้างหน้า วิธีการนี้มีประโยชน์ต่อไปนี้:

- ผู้ใช้มีความสามารถฝนการมองเห็นในสถานะที่ซึ่งเกิดข้อผิดพลาด
- มีการหลีกเลี่ยงความเสียหายของข้อมูล ตัวอย่างเช่น ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีอินสแตนซ์ที่ซึ่งมีการออกใบแจ้งหนี้ใบสั่งขายบางรายการ แต่รายการอื่นๆ ถูกเปิดทิ้งไว้ นอกจากนี้ ยังมีอินสแตนซ์ที่สมุดรายวันการชำระเงินบางรายการไม่มีใบแจ้งหนี้ที่สอดคล้องกันเพื่อชำระ เนื่องจากการลงรายการบัญชีใบแจ้งหนี้มีข้อผิดพลาด
- ผู้ใช้สามารถดูสถานะปัจจุบันของใบแจ้งยอดได้โดยใช้ปุ่ม **รายละเอียดสถานะ** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอด หน้ารายละเอียดสถานะมีสามส่วน:

    - ส่วนแรกแสดงสถานะปัจจุบันของใบแจ้งยอด พร้อมด้วยรหัสข้อผิดพลาดและข้อความแสดงข้อผิดพลาดโดยละเอียด ถ้ามีข้อผิดพลาดเกิดขึ้น
    - ส่วนที่สองจะแสดงสถานะต่างๆ ของกระบวนการคำนวณ สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการเรียกใช้เรียบร้อยแล้ว กล่าวว่าไม่สามารถเรียกใช้ได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการเรียกใช้
    - ส่วนที่สามจะแสดงสถานะต่างๆ ของกระบวนการลงรายการบัญชี สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการเรียกใช้เรียบร้อยแล้ว กล่าวว่าไม่สามารถเรียกใช้ได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการเรียกใช้

นอกจากนี้ ส่วนหัวของส่วนที่สองและที่สามแสดงสถานะทั้งหมดของกระบวนการที่เกี่ยวข้อง

### <a name="event-logs"></a>ล็อกเหตุการณ์

ใบแจ้งยอดจะผ่านการดำเนินงานต่างๆ (ตัวอย่างเช่น สร้าง คำนวณ ยกเลิกการเลือก และลงรายการบัญชี) และอินสแตนซ์หลายรายการของการดำเนินงานเดียวกันอาจถูกเรียก ในระหว่างวงจรชีวิตของใบแจ้งยอด ตัวอย่างเช่น หลังจากที่มีการสร้างและการคำนวณใบแจ้งยอด ผู้ใช้สามารถยกเลิกการเลือกใบแจ้งยอด และคำนวณอีกครั้งได้ ปุ่ม **ล็อกเหตุการณ์** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดให้บันทึกการตรวจสอบที่เสร็จสมบูรณ์ของการดำเนินงานต่างๆ ที่ถูกเรียกบนใบแจ้งยอด พร้อมด้วยข้อมูลเกี่ยวกับเวลาที่มีการเรียกการดำเนินการดังกล่าว

### <a name="aggregated-transactions"></a>ธุรกรรมที่รวม

ในระหว่างกระบวนการลงรายการบัญชี ธุรกรรมเงินสดและการขนส่งจะถูกรวมตามลูกค้าและผลิตภัณฑ์ ดังนั้น จํานวนของใบสั่งขายและรายการที่สร้างจะลดลง ธุรกรรมแบบรวมมีการจัดเก็บในระบบและใช้เพื่อสร้างใบสั่งขาย ธุรกรรมแบบรวมทุกรายการสร้างใบสั่งขายที่สอดคล้องกันในระบบ 

ถ้าใบแจ้งยอดมีการลงรายการบัญชีไม่ครบถ้วน คุณสามารถดูธุรกรรมแบบรวมในใบแจ้งยอดได้ บนบานหน้าต่างการดำเนินการ บนแท็บ **ใบแจ้งยอด** ในกลุ่ม **รายละเอียดการดำเนินการ** เลือก **ธุรกรรมแบบรวม**

![ปุ่มธุรกรรมแบบรวมของใบแจ้งยอดที่ไม่ได้ลงรายการบัญชีทั้งหมด](media/aggregated-transactions.png)

สำหรับใบแจ้งยอดที่มีการลงรายการบัญชี คุณสามารถดูธุรกรรมแบบรวมในหน้า **ใบแจ้งยอดที่มีการลงรายการบัญชี** ในบานหน้าต่างการดำเนินการ ให้เลือก **การสอบถาม** จากนั้นเลือก **ธุรกรรมแบบรวม**

![คำสั่งธุรกรรมแบบรวมสำหรับใบแจ้งยอดที่มีการลงรายการบัญชี](media/aggregated-transactions-posted-statements.png)

แท็บด่วน **รายละเอียดของใบสั่งขาย** ของธุรกรรมแบบรวมแสดงข้อมูลต่อไปนี้:

- **รหัสเรกคอร์ด** – รหัสของธุรกรรมแบบรวม
- **หมายเลขใบแจ้งยอด** – ใบแจ้งยอดที่มีธุรกรรมแบบรวมอยู่
- **วันที่** – วันที่ที่มีการสร้างธุรกรรมแบบรวม
- **รหัสการขาย** – เมื่อมีการสร้างใบสั่งขายจากธุรกรรมแบบรวม รหัสใบสั่งขาย ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบสั่งขายที่สอดคล้องกัน
- **จำนวนของรายการแบบวม** – จำนวนรวมของรายการสำหรับธุรกรรมแบบรวมและใบสั่งขาย
- **สถานะ** – สถานะล่าสุดของธุรกรรมแบบรวม
- **รหัสใบแจ้งหนี้** – เมื่อออกใบแจ้งหนี้ใบสั่งขายสำหรับธุรกรรมแบบรวม รหัสใบแจ้งหนี้การขาย ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบแจ้งหนี้สำหรับใบสั่งขาย
- **รหัสข้อผิดพลาด** – ฟิลด์นี้จะตั้งค่าไว้ถ้าการรวมอยู่ในสถานะผิดพลาด
- **ข้อความแสดงข้อผิดพลาด** – ฟิลด์นี้จะตั้งค่าไว้ถ้าการรวมอยู่ในสถานะผิดพลาด แสดงรายละเอียดเกี่ยวกับสาเหตุที่ทำให้กระบวนการล้มเหลว คุณสามารถใช้ข้อมูลในรหัสข้อผิดพลาดเพื่อแก้ไขปัญหา แล้วเริ่มกระบวนการใหม่ด้วยตนเองได้ การขายแบบรวมอาจต้องถูกลบออกและประมวลผลในใบแจ้งยอดใหม่ ทั้งนี้ขึ้นอยู่กับชนิดของวิธีการแก้ปัญหา

![ฟิลด์บนแท็บด่วน รายละเอียดของใบสั่งขาย ของธุรกรรมแบบรวม](media/aggregated-transactions-error-message-view.png)

แท็บด่วน **รายละเอียดธุรกรรม** ของธุรกรรมแบบรวม แสดงธุรกรรมทั้งหมดที่ถูกดึงลงในธุรกรรมแบบรวม รายการแบบรวมในธุรกรรมแบบรวมแสดงเรกคอร์ดแบบรวมทั้งหมดจากธุรกรรม รายการแบบรวมยังจะแสดงรายละเอียดต่างๆ ด้วย เช่น สินค้า ตัวแปร ปริมาณ ราคา ยอดเงินสุทธิ หน่วย และคลังสินค้า โดยทั่วไป รายการแบบรวมแต่ละรายการจะเกี่ยวข้องกับรายการใบสั่งขายหนึ่งรายการ

![แท็บด่วน รายละเอียดธุรกรรม ของธุรกรรมแบบรวม](media/aggregated-transactions-sales-details.png)

ในบางสถานการณ์ ธุรกรรมแบบรวมอาจล้มเหลวในการลงรายการบัญชีใบสั่งขายที่รวมบัญชี ในสถานการณ์เหล่านี้ รหัสข้อผิดพลาดจะสัมพันธ์กับสถานะใบแจ้งยอด เมื่อต้องการดูเฉพาะธุรกรรมแบบรวมที่มีข้อผิดพลาด คุณสามารถเปิดใช้งานตัวกรอง **แสดงความล้มเหลวเท่านั้น** ในมุมมองธุรกรรมแบบรวมโดยการเลือกกล่องกาเครื่องหมาย การเปิดใช้งานตัวกรองนี้หมายถึงคุณจํากัดเฉพาะผลลัพธ์ธุรกรรมแบบรวมที่มีข้อผิดพลาดที่ต้องใช้วิธีการแก้ปัญหา สำหรับข้อมูลเกี่ยวกับวิธีแก้ไขข้อผิดพลาดเหล่านี้ ดูที่ [แก้ไขและตรวจสอบธุรกรรมใบสั่งออนไลน์และใบสั่งของลูกค้าแบบอะซิงโครนัส](edit-order-trans.md)

![กล่องกาเครื่องหมายของตัวกรองแสดงความล้มเหลวเท่านั้นในมุมมองธุรกรรมแบบรวม](media/aggregated-transactions-failure-view.png)

บนหน้า **ธุรกรรมแบบรวม** คุณสามารถดาวน์โหลด XML สำหรับธุรกรรมแบบรวมเฉพาะโดยเลือก **ส่งออกข้อมูลการรวม** คุณสามารถตรวจสอบ XML ในตัวจัดรูปแบบ XML ใดๆ เพื่อดูรายละเอียดข้อมูลจริงที่เกี่ยวข้องกับการสร้างและการลงรายการบัญชีใบสั่งขาย ฟังก์ชันสำหรับการดาวน์โหลด XML สำหรับธุรกรรมแบบรวม ไม่พร้อมใช้งานสำหรับใบแจ้งยอดที่ถูกลงรายการบัญชี

![ปุ่มส่งออกข้อมูลการรวมบนหน้าธุรกรรมแบบรวม](media/aggregated-transactions-export.png)

ในกรณีที่คุณไม่สามารถแก้ไขข้อผิดพลาดได้โดยการแก้ไขข้อมูลในใบสั่งขายหรือข้อมูลที่สนับสนุนใบสั่งขาย ปุ่ม **ลบใบสั่งของลูกค้า** จะสามารถใช้งานได้ เมื่อต้องการลบใบสั่ง ให้เลือกธุรกรรมแบบรวมที่ล้มเหลว แล้วเลือก **ลบใบสั่งของลูกค้า** ทั้งธุรกรรมแบบรวมและใบสั่งขายที่สอดคล้องกันจะถูกลบ ตอนนี้ คุณสามารถตรวจสอบธุรกรรมต่างๆ ได้โดยใช้ฟังก์ชันแก้ไขและตรวจสอบ หรือไม่ คุณสามารถประมวลผลใหม่โดยใช้ใบแจ้งยอดใหม่ หลังจากที่ความล้มเหลวทั้งหมดได้รับการแก้ไขแล้ว คุณสามารถลงรายการบัญชีใบแจ้งยอดต่อโดยการเรียกใช้ฟังก์ชันลงรายการบัญชีใบแจ้งยอดสำหรับใบแจ้งยอดที่เกี่ยวข้อง

![ปุ่มลบใบสั่งของลูกค้าในมุมมองธุรกรรมแบบรวม](media/aggregated-transactions-delete-cust-order.png)

มุมมองธุรกรรมแบบรวมมีประโยชน์ดังต่อไปนี้

- ผู้ใช้มีความสามารถในการมองเห็นในธุรกรรมแบบรวมที่ล้มเหลวในระหว่างการสร้างใบสั่งขาย และใบสั่งขายที่ล้มเหลวในระหว่างการออกใบแจ้งหนี้
- ผู้ใช้มีความสามารถในการมองเห็นในวิธีการรวมธุรกรรม
- ผู้ใช้มีบันทึกการตรวจสอบบัญชีที่สมบูรณ์ จากธุรกรรม ไปยังใบสั่งขาย ไปยังใบแจ้งหนี้การขาย บันทึกการตรวจสอบนี้ไม่พร้อมใช้งานในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม
- ไฟล์ XML แบบรวมจะช่วยให้สามารถระบุปัญหาได้ง่ายขึ้นในระหว่างการสร้างใบสั่งขายและการออกใบแจ้งหนี้

### <a name="journal-vouchers"></a>ใบสำคัญสมุดรายวัน

ปุ่ม **ใบสำคัญสมุดรายวัน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงธุรกรรมใบสำคัญต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด และที่เกี่ยวข้องกับส่วนลด บัญชีรายได้/ค่าใช้จ่าย บัตรของขวัญ และอื่นๆ

ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น

### <a name="payment-journals"></a>สมุดรายวันการชำระเงิน

ปุ่ม **สมุดรายวันการชำระเงิน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงสมุดรายวันการชำระเงินต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด

ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น

## <a name="other-improvements"></a>การปรับปรุงอื่นๆ

อื่นๆ การปรับปรุง back-end ที่ผู้ใช้สามารถดูได้ ได้ถูกทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด ยกตัวอย่างเช่น

- การรวมไม่พิจารณาพนักงาน เทอร์มินัล และเอนทิตี้ของกะ เนื่องจากมีพารามิเตอร์การรวมน้อย ระบบต้องประมวลผลรายการใบสั่งขายน้อย
- การเกิดขึ้นของการชะงักงันในตารางธุรกรรมจะลดลงโดยการแนะนำตารางการขยายเพิ่มเติม และโดยทำการดำเนินการแทรก แทนการดำเนินการอัปเดตในตารางธุรกรรม
- จำนวนของการเรียกใช้งานในชุดงานได้ถูกทำให้เป็นพารามิเตอร์ และถูกจำกัด ดังนั้น จำนวนนี้สามารถปรับแต่งได้ง่ายขึ้น โดยเฉพาะกับสภาพแวดล้อมของลูกค้า คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีการสร้างจำนวนของชุดงานที่ไม่จำกัดในเวลาเดียวกัน ผลลัพธ์เป็นจำนวนงานที่ไม่สามารถจัดการได้ ค่าโสหุ้ย และปัญหาคอขวดบนเซิร์ฟเวอร์ชุดงาน
- คำสั่งต่างๆ ถูกจัดคิวสำหรับการประมวลผลได้อย่างมีประสิทธิภาพ โดยการจัดระดับความสำคัญของใบแจ้งยอดที่มีจำนวนของธุรกรรมสูงสุด
- กระบวนการชุดงาน เช่น **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน** ถูกเรียกใช้ในโหมดชุดงานเท่านั้น ในคุณลักษณะการลงรายการบัญชีคำสั่งดั้งเดิม ผู้ใช้สามารถเลือกเพื่อเรียกใช้กระบวนการชุดงานเหล่านี้ในโหมดการโต้ตอบซึ่งเป็นการดำเนินงานเธรดเดียวแบบ s ไม่เหมือนกับกระบวนการชุดงานที่เป็นแบบหลายเธรด
- ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม ความล้มเหลวใดๆ ของงานในชุดงานทำให้ชุดงานทั้งหมดอยู่ในสถานะข้อผิดพลาด ในคุณลักษณะที่ปรับปรุงแล้ว ความล้มเหลวของภารกิจชุดงานไม่ทำให้ชุดงานอยู่ในสถานะข้อผิดพลาด ถ้าชุดงานอื่นๆ เสร็จเรียบร้อยแล้ว คุณควรประเมินสถานะการลงรายการบัญชีสำหรับการดำเนินการชุดงานที่เรียกใช้โดยใช้หน้า **ใบแจ้งยอด** ซึ่งคุณสามารถดูใบแจ้งยอดใดๆ ที่ไม่ได้ลงรายการบัญชีได้เนื่องจากมีข้อผิดพลาด
- ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม การเกิดขึ้นครั้งแรกของความล้มเหลวในการรายงานทำให้ชุดงานทั้งหมดล้มเหลว ใบแจ้งยอดที่เหลือไม่ได้รับการประมวลผล ในคุณลักษณะที่ปรับปรุง กระบวนการชุดงานดำเนินต่อไปเพื่อประมวลผลรายงานทั้งหมด แม้ว่าบางคำสั่งจะล้มเหลว สวัสดิการหนึ่งรายการคือ ผู้ใช้สามารถมองเห็นได้ในจำนวนที่แน่นอนของใบแจ้งยอดที่มีข้อผิดพลาด ดังนั้น ผู้ใช้ไม่จำเป็นต้องติดอยู่ในลูปแบบต่อเนื่องของการแก้ไขข้อผิดพลาด และการเรียกใช้กระบวนการลงรายการบัญชีใบแจ้งยอด จนกระทั่งมีการลงรายการบัญชีใบแจ้งยอดทั้งหมด

## <a name="general-guidance-about-the-statement-posting-process"></a>คำแนะนำทั่วไปเกี่ยวกับใบแจ้งยอดที่ลงรายการบัญชีกระบวนการ

- เราขอแนะนำให้ คุณเรียกใช้กระบวนการลงรายการบัญชีใบแจ้งยอดในชุดงาน เนื่องจากชุดงานจะเรียกใช้โดยใช้ประโยชน์จากความชำนาญของกรอบงานชุดงานในแง่ของมัลติเธรด จำเป็นต้องใช้มัลติเธรดเพื่อจัดการกับไดรฟ์ข้อมูลขนาดใหญ่ของธุรกรรม ซึ่งโดยปกติแล้วจะปรากฏในการลงรายการบัญชีใบแจ้งยอด
- เราขอแนะนำให้ คุณเปิดสินค้าคงคลังทางกายภาพค่าลบในกลุ่มแบบจำลองสินค้า เพื่อให้คุณมีประสบการณ์การลงรายการบัญชีที่ราบรื่น ในบางสถานการณ์ ใบแจ้งยอดค่าลบอาจไม่สามารถจะลงรายการบัญชีได้ ถ้าไม่มีสินค้าคงคลังทางกายภาพที่เป็นค่าลบ ตัวอย่างเช่น ในทฤษฎี ถ้าไม่มีหน่วยของสินค้าในสินค้าคงคลังเพียงหนึ่งหน่วย และมีธุรกรรมการขายและธุรกรรมการส่งคืนสำหรับสินค้า ธุรกรรมควรจะสามารถลงรายการบัญชี แม้ว่าสินค้าคงคลังค่าลบไม่ได้ถูกเปิดใช้งาน อย่างไรก็ตาม เนื่องจากกระบวนการลงรายการบัญชีใบแจ้งยอดจะดึงทั้งธุรกรรมการขายและธุรกรรมการส่งคืนสินค้าในใบสั่งของลูกค้ารายเดียว ไม่มีการรับประกันว่ารายการขายจะถูกลงรายการบัญชีก่อน ซึ่งตามด้วยรายการส่งคืน ดังนั้น ข้อผิดพลาดอาจเกิดขึ้น ถ้าสินค้าคงคลังค่าลบถูกเปิดในสถานการณ์นี้ การลงรายการบัญชีธุรกรรมจะไม่ได้รับผลกระทบในทางลบ และระบบจะสะท้อนถึงสินค้าคงคลังอย่างถูกต้อง
- เราขอแนะนำให้ คุณใช้การรวม ในขณะที่คุณคำนวณและลงรายการบัญชีใบแจ้งยอด ดังนั้น การตั้งค่าต่อไปนี้จะได้รับการแนะนำสำหรับพารามิเตอร์การรวมบางตัว:

    - ไปที่ **Retail และ Commerce** \> **การตั้งค่า Headquarters** \> **พารามิเตอร์** \> **พารามิเตอร์การค้า** จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การปรับปรุงสินค้าคงคลัง** ในฟิลด์ **ระดับรายละเอียด** เลือก **สรุป**
    - ไปที่ **Retail และ Commerce** \> **การตั้งค่า Headquarters** \> **พารามิเตอร์** \> **พารามิเตอร์การค้า** จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การรวม** ตั้งค่าตัวเลือก **ธุรกรรมใบสำคัญ** เป็น **ใช่**


[!INCLUDE[footer-include](../includes/footer-banner.md)]
