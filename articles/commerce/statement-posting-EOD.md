---
title: การปรับปรุงไปยังฟังก์ชันการลงรายการบัญชีใบแจ้งยอดจากธนาคาร
description: หัวข้อนี้อธิบายถึงการปรับปรุงที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 68abef8f28c04a4f6f88e638c8abf944d06a32c4
ms.sourcegitcommit: 12b9d6f2dd24e52e46487748c848864909af6967
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/14/2020
ms.locfileid: "3057266"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="e0c4b-103">การปรับปรุงไปยังฟังก์ชันการลงรายการบัญชีใบแจ้งยอดจากธนาคาร</span><span class="sxs-lookup"><span data-stu-id="e0c4b-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="e0c4b-104">หัวข้อนี้อธิบายถึงการปรับปรุงชุดแรกที่ทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="e0c4b-105">การปรับปรุงเหล่านี้พร้อมใช้งานใน Microsoft Dynamics 365 for Finance and Operations 7.3.2</span><span class="sxs-lookup"><span data-stu-id="e0c4b-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="e0c4b-106">การเปิดใช้งาน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-106">Activation</span></span>

<span data-ttu-id="e0c4b-107">โดยค่าเริ่มต้น ในขณะปรับใช้ Finance and Operations 7.3.2 โปรแกรมจะถูกตั้งค่าเพื่อใช้คุณลักษณะแบบดั้งเดิมสำหรับการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="e0c4b-108">ในการเปิดใช้งานคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว คุณต้องเปิดคีย์การตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="e0c4b-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="e0c4b-109">ไปที่ **การดูแลระบบ** \> **ตั้งค่า** \> **การตั้งค่าคอนฟิกลิขสิทธิ์** และจากนั้น ภายใต้โหนด **การขายปลีกและการค้า** ล้างกล่องกาเครื่องหมาย **ใบแจ้งยอด (ดั้งเดิม)** และเลือกกล่องกาเครื่องหมาย **ใบแจ้งยอด**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="e0c4b-110">เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** ใหม่ถูกเปิด รายการเมนูใหม่ที่ชื่อ **ใบแจ้งยอด** จะพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="e0c4b-111">รายการเมนูนี้ช่วยให้คุณสามารถสร้าง คำนวณ และลงรายการบัญชีใบแจ้งยอด ด้วยตนเองได้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="e0c4b-112">ใบแจ้งยอดใดๆ ที่ทำให้เกิดข้อผิดพลาด เมื่อมีการใช้กระบวนการลงรายการบัญชีชุดงาน จะพร้อมใช้งานโดยใช้รายการเมนูนี้ด้วย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="e0c4b-113">(เมื่อคีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** ถูกเปิด รายการเมนูจะมีชื่อว่า **เปิดใบแจ้งยอด**)</span><span class="sxs-lookup"><span data-stu-id="e0c4b-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="e0c4b-114">Commerce มีการตรวจสอบต่อไปนี้ที่เกี่ยวข้องกับคีย์การตั้งค่าคอนฟิกเหล่านี้:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="e0c4b-115">คีย์การตั้งค่าคอนฟิกทั้งสองไม่ได้เปิดในเวลาเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="e0c4b-116">ต้องใช้คีย์การตั้งค่าคอนฟิกเดียวกันสำหรับการดำเนินการทั้งหมดที่กระทำกับคำสั่งที่กำหนดในระหว่างวัฏจักร (สร้าง คำนวณ ยกเลิกการเลือก ลงรายการบัญชี ฯลฯ)</span><span class="sxs-lookup"><span data-stu-id="e0c4b-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="e0c4b-117">ตัวอย่างเช่น คุณไม่สามารถสร้างและคำนวณใบแจ้งยอดได้ในขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** ถูกเปิด และจากนั้นได้พยายามลงรายการบัญชีใบแจ้งยอดเดียวกัน ขณะที่คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** ถูกเปิด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="e0c4b-118">เราขอแนะนำให้คุณใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด** สำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว เว้นแต่ว่าคุณมีเหตุผลที่น่าสนใจในการใช้คีย์การตั้งค่าคอนฟิก **ใบแจ้งยอด (ดั้งเดิม)** แทน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="e0c4b-119">Microsoft จะยังคงลงทุนในคำสั่งใหม่และคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วต่อไป และเป็นเรื่องสำคัญว่า คุณสลับไปที่โอกาสที่เร็วที่สุดจะได้รับประโยชน์จากรายการนั้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="e0c4b-120">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่สืบทอดมาถูกเลิกใช้แล้วโดยเริ่มต้นในรุ่น 8.0</span><span class="sxs-lookup"><span data-stu-id="e0c4b-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="e0c4b-121">การตั้งค่า</span><span class="sxs-lookup"><span data-stu-id="e0c4b-121">Setup</span></span>

<span data-ttu-id="e0c4b-122">ในฐานะที่เป็นส่วนหนึ่งของการปรับปรุงไปยังคุณลักษณะการลงรายการบัญชีใบแจ้งยอด พารามิเตอร์ใหม่สามตัวได้ถูกนำไปใช้ในแท็บด่วน **ใบแจ้งยอด** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า**:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="e0c4b-123">**ปิดใช้งานการล้างข้อมูลใบแจ้งยอด** – ตัวเลือกนี้จะใช้ได้เฉพาะสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="e0c4b-124">เราขอแนะนำให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่** เพื่อป้องกันผู้ใช้จากเคลียริ่งคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="e0c4b-125">ถ้าคำสั่งที่อยู่ในสถานะแบบกึ่งลงรายการบัญชีจะถูกล้างข้อมูล ข้อมูลจะได้รับความเสียหาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="e0c4b-126">คุณควรตั้งค่าตัวเลือกนี้เป็น **ใช่** ในสถานการณ์ยกเว้นเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="e0c4b-127">**จองสินค้าคงคลังในระหว่างการคำนวณ** – เราขอแนะนำให้คุณใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** สำหรับการจองสินค้าคงคลัง และให้คุณตั้งค่าตัวเลือกนี้เป็น **ไม่**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="e0c4b-128">เมื่อการตั้งค่าตัวเลือกนี้เป็น **ไม่ใช่** คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วจะไม่พยายามที่จะสร้างรายการการจองสินค้าคงคลังในเวลาของการคำนวณ (ถ้ารายการไม่ได้ถูกสร้างขึ้นแล้วโดยใช้ชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** )</span><span class="sxs-lookup"><span data-stu-id="e0c4b-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="e0c4b-129">คุณลักษณะจะสร้างรายการการจองสินค้าคงคลัง เฉพาะในขณะลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="e0c4b-130">การใช้งานนี้มีตัวเลือกการออกแบบ และเป็นไปตามข้อเท็จจริงที่ว่า กรอบเวลาระหว่างกระบวนการคำนวณและกระบวนการการลงรายการบัญชีโดยทั่วไปจะมีขนาดเล็ก</span><span class="sxs-lookup"><span data-stu-id="e0c4b-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="e0c4b-131">อย่างไรก็ตาม ถ้าคุณต้องการจองสินค้าคงคลังในเวลาของการคำนวณ คุณสามารถกำหนดตัวเลือกนี้เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="e0c4b-132">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิมจะจองสินค้าคงคลังในระหว่างกระบวนการคำนวณใบแจ้งยอดเสมอ (ถ้าการจองยังไม่สำเร็จผ่านทางชุดงาน **ลงรายการบัญชีสินค้าคงคลัง** ) โดยไม่คำนึงถึงการตั้งค่าของตัวเลือกนี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="e0c4b-133">**ปิดใช้งานการตรวจนับที่จำเป็น** – เมื่อตัวเลือกนี้ถูกตั้งค่าเป็น **ใช่** กระบวนการลงรายการบัญชีสำหรับใบแจ้งยอดดำเนินต่อไป แม้ว่าผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรมในใบแจ้งยอดจะอยู่นอกขีดจำกัดที่กำหนดไว้ในแท็บด่วน **ใบแจ้งยอด** สำหรับร้านค้า</span><span class="sxs-lookup"><span data-stu-id="e0c4b-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="e0c4b-134">นอกจากนี้ พารามิเตอร์ต่อไปนี้ได้รับการแนะนำในแท็บด่วน **ประมวลผลชุดงาน** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า**:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="e0c4b-135">**จำนวนสูงสุดของการลงรายการบัญชีใบแจ้งยอดแบบคู่ขนาน** – ฟิลด์นี้จะกำหนดจำนวนของงานในชุดงานที่จะใช้ในการลงรายการบัญชีใบแจ้งยอดหลายฉบับ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="e0c4b-136">**เธรดสูงสุดสำหรับการประมวลผลใบสั่งต่อใบแจ้งยอด** – ฟิลด์นี้แสดงถึงจำนวนสูงสุดของเธรดที่ใช้โดยชุดงานการลงรายการบัญชีใบแจ้งยอด เพื่อสร้างและออกใบแจ้งหนี้ใบสั่งขายสำหรับใบแจ้งยอดเดียว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="e0c4b-137">จำนวนเธรดทั้งหมดที่จะใช้โดยกระบวนการลงรายการบัญชีใบแจ้งยอด จะถูกคำนวณตามค่าในพารามิเตอร์นี้ซึ่งคูณด้วยค่าในพารามิเตอร์ **จำนวนสูงสุดของการลงรายการบัญชีใบแจ้งยอดแบบคู่ขนาน**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="e0c4b-138">การตั้งค่าของพารามิเตอร์นี้สูงเกินไป อาจส่งผลกระทบด้านลบต่อประสิทธิภาพการทำงานของกระบวนการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="e0c4b-139">**รายการธุรกรรมสูงสุดที่รวมอยู่ในการรวม** – ฟิลด์นี้กำหนดจำนวนของรายการธุรกรรมที่จะถูกรวมไว้ในธุรกรรมแบบรวมหนึ่งรายการ ก่อนที่จะมีการสร้างรายการใหม่</span><span class="sxs-lookup"><span data-stu-id="e0c4b-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="e0c4b-140">ธุรกรรมแบบรวมถูกสร้างขึ้นตามเกณฑ์การรวมที่แตกต่างกัน เช่น ลูกค้า วันที่ธุรกิจ หรือมิติทางการเงิน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="e0c4b-141">ข้อสำคัญที่ควรจำคือ รายการจากธุรกรรมเดียวจะไม่ถูกแบ่งในธุรกรรมแบบรวมที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="e0c4b-142">นี่หมายความว่า มีความเป็นไปได้ว่าจำนวนของรายการในธุรกรรมแบบรวมอยู่ในระดับสูงกว่าหรือต่ำกว่าตามปัจจัย เช่น จำนวนของผลิตภัณฑ์เฉพาะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="e0c4b-143">**จำนวนสูงสุดของเธรดที่จะตรวจสอบความถูกต้องของธุรกรรมร้านค้า** – ฟิลด์นี้จะกำหนดจำนวนของเธรดที่จะใช้ในการตรวจสอบความถูกต้องของธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="e0c4b-144">การตรวจสอบความถูกต้องของธุรกรรมเป็นขั้นตอนที่จำเป็นที่ต้องเกิดขึ้นก่อนที่จะสามารถดึงข้อมูลธุรกรรมเข้าในใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="e0c4b-145">นอกจากนี้ คุณยังจำเป็นต้องกำหนด **ผลิตภัณฑ์ในบัตรของขวัญ** บนแท็บด่วน **บัตรของขวัญ** บนแท็บ **การลงรายการบัญชี** ของหน้า **พารามิเตอร์การค้า**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="e0c4b-146">นี่เป็นต้องถูกกำหนด แม้ว่าจะไม่มีการใช้บัตรของขวัญโดยองค์กร</span><span class="sxs-lookup"><span data-stu-id="e0c4b-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="e0c4b-147">การตั้งค่าและพารามิเตอร์ทั้งหมดที่เกี่ยวข้องกับการลงรายการบัญชีใบแจ้งยอด และที่ถูกกำหนดไว้ในร้านค้าปลีก และในหน้า **พารามิเตอร์การค้า** สามารถใช้ได้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="e0c4b-148">การประมวลผล</span><span class="sxs-lookup"><span data-stu-id="e0c4b-148">Processing</span></span>

<span data-ttu-id="e0c4b-149">คำสั่งสามารถถูกคำนวณและลงรายการบัญชีได้ในชุดงาน โดยใช้รายการเมนู **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="e0c4b-150">อีกทางหนึ่งคือ ใบแจ้งยอดสามารถถูกคำนวณและลงรายการบัญชีได้ด้วยตนเอง โดยใช้รายการ **ใบแจ้งยอด** ที่คุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรับปรุงแล้วมีให้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="e0c4b-151">กระบวนการและขั้นตอนสำหรับการคำนวณ และการลงรายการบัญชีใบแจ้งยอดในชุดงาน เท่ากันกับที่อยู่ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="e0c4b-152">อย่างไรก็ตาม การปรับปรุงที่สำคัญได้ถูกดำเนินการในการประมวลผล back-end หลักของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="e0c4b-153">การปรับปรุงเหล่านี้ทำให้กระบวนการยืดหยุ่นมากขึ้น และให้การมองเห็นที่ดีขึ้นในสถานะและข้อมูลข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="e0c4b-154">ดังนั้น ผู้ใช้สามารถจัดการรากที่เกิดจากข้อผิดพลาด และจากนั้นดำเนินการกระบวนการลงรายการบัญชีต่อ โดยไม่ก่อให้เกิดความเสียหายในข้อมูล และไม่ทำให้เกิดข้อมูลที่ต้องซ่อมแซม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="e0c4b-155">ส่วนต่อไปนี้อธิบายของการปรับปรุงหลักบางอย่างสำหรับคุณลักษณะการลงรายการบัญชีใบแจ้งยอดที่ปรากฏในอินเทอร์เฟสผู้ใช้ สำหรับใบแจ้งยอดและใบแจ้งยอดที่ลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="e0c4b-156">รายละเอียดสถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-156">Status details</span></span>

<span data-ttu-id="e0c4b-157">แบบจำลองสถานะใหม่ได้ถูกนำมาใช้ในใบแจ้งยอดที่ลงรายการบัญชีตามปกติ ระหว่างกระบวนการการคำนวณและการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="e0c4b-158">ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="e0c4b-159">ใบสั่งสถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-159">State order</span></span> | <span data-ttu-id="e0c4b-160">สถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-160">State</span></span>      | <span data-ttu-id="e0c4b-161">คำอธิบาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="e0c4b-162">1</span><span class="sxs-lookup"><span data-stu-id="e0c4b-162">1</span></span>           | <span data-ttu-id="e0c4b-163">เริ่มต้นแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-163">Started</span></span>    | <span data-ttu-id="e0c4b-164">ใบแจ้งยอดถูกสร้างขึ้น และพร้อมที่จะถูกคำนวณ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="e0c4b-165">2</span><span class="sxs-lookup"><span data-stu-id="e0c4b-165">2</span></span>           | <span data-ttu-id="e0c4b-166">ที่ทำเครื่องหมาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-166">Marked</span></span>     | <span data-ttu-id="e0c4b-167">ธุรกรรมที่อยู่ในขอบเขตสำหรับใบแจ้งยอด จะถูกระบุตามพารามิเตอร์ใบแจ้งยอด และจะมีการทำเครื่องหมายด้วยรหัสใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="e0c4b-168">3</span><span class="sxs-lookup"><span data-stu-id="e0c4b-168">3</span></span>           | <span data-ttu-id="e0c4b-169">คำนวณได้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-169">Calculated</span></span> | <span data-ttu-id="e0c4b-170">รายการใบแจ้งยอดจะได้รับการคำนวณ และแสดงขึ้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="e0c4b-171">ตารางต่อไปนี้อธิบายสถานะต่างๆ และใบสั่งซื้อ ในระหว่างกระบวนการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="e0c4b-172">ใบสั่งสถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-172">State order</span></span> | <span data-ttu-id="e0c4b-173">สถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-173">State</span></span>                   | <span data-ttu-id="e0c4b-174">คำอธิบาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="e0c4b-175">1</span><span class="sxs-lookup"><span data-stu-id="e0c4b-175">1</span></span>           | <span data-ttu-id="e0c4b-176">ตรวจสอบแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-176">Checked</span></span>                 | <span data-ttu-id="e0c4b-177">การตรวจสอบหลายรายการเสร็จสิ้นแล้ว โดยเกี่ยวข้องกับพารามิเตอร์ (ตัวอย่างเช่น ค่าธรรมเนียมการโอนการครอบครอง) และใบแจ้งยอดและรายการใบแจ้งยอด (ตัวอย่างเช่น ผลต่างระหว่างยอดเงินที่ตรวจนับและยอดเงินธุรกรรม)</span><span class="sxs-lookup"><span data-stu-id="e0c4b-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="e0c4b-178">2</span><span class="sxs-lookup"><span data-stu-id="e0c4b-178">2</span></span>           | <span data-ttu-id="e0c4b-179">รวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-179">Aggregated</span></span>              | <span data-ttu-id="e0c4b-180">ธุรกรรมการขายสำหรับลูกค้าที่มีชื่อและไม่มีชื่อ จะถูกรวมไว้ตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="e0c4b-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="e0c4b-181">ในขั้นสุดท้าย ธุรกรรมแบบรวมทุกรายการจะถูกแปลงเป็นใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="e0c4b-182">3</span><span class="sxs-lookup"><span data-stu-id="e0c4b-182">3</span></span>           | <span data-ttu-id="e0c4b-183">ใบสั่งของลูกค้าที่สร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-183">Customer order created</span></span>  | <span data-ttu-id="e0c4b-184">โดยยึดตามธุรกรรมแบบรวม ใบสั่งขายถูกใช้เพื่อสร้างในระบบ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="e0c4b-185">4 ชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="e0c4b-185">4</span></span>           | <span data-ttu-id="e0c4b-186">ใบสั่งของลูกค้าที่แแกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-186">Customer order invoiced</span></span> | <span data-ttu-id="e0c4b-187">ใบสั่งขายถูกออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="e0c4b-188">5</span><span class="sxs-lookup"><span data-stu-id="e0c4b-188">5</span></span>           | <span data-ttu-id="e0c4b-189">ลงรายการบัญชีส่วนลด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-189">Discounts posted</span></span>        | <span data-ttu-id="e0c4b-190">สมุดรายวันส่วนลดประจำงวดถูกลงรายการบัญชีตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="e0c4b-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="e0c4b-191">6 ชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="e0c4b-191">6</span></span>           | <span data-ttu-id="e0c4b-192">รายได้/ค่าใช้จ่ายที่ลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-192">Income/expense posted</span></span>   | <span data-ttu-id="e0c4b-193">มีการลงรายบัญชีธุรกรรมรายได้/ค่าใช้จ่ายเป็นใบสำคัญ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="e0c4b-194">7</span><span class="sxs-lookup"><span data-stu-id="e0c4b-194">7</span></span>           | <span data-ttu-id="e0c4b-195">เชื่อมโยงใบสำคัญแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-195">Vouchers linked</span></span>         | <span data-ttu-id="e0c4b-196">มีการสร้างสมุดรายวันการชำระเงิน และเชื่อมโยงกับใบแจ้งหนี้ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="e0c4b-197">8</span><span class="sxs-lookup"><span data-stu-id="e0c4b-197">8</span></span>           | <span data-ttu-id="e0c4b-198">ลงรายการบัญชีการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-198">Payments posted</span></span>         | <span data-ttu-id="e0c4b-199">สมุดรายวันการชำระเงินถูกลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="e0c4b-200">9</span><span class="sxs-lookup"><span data-stu-id="e0c4b-200">9</span></span>           | <span data-ttu-id="e0c4b-201">ลงรายการบัญชีบัตรของขวัญ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-201">Gift cards posted</span></span>       | <span data-ttu-id="e0c4b-202">มีการลงรายบัญชีธุรกรรมบัตรของขวัญเป็นใบสำคัญ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="e0c4b-203">10</span><span class="sxs-lookup"><span data-stu-id="e0c4b-203">10</span></span>          | <span data-ttu-id="e0c4b-204">ประกาศแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-204">Posted</span></span>                  | <span data-ttu-id="e0c4b-205">ใบแจ้งยอดถูกทำเครื่องหมายเป็นลงรายการบัญชีแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="e0c4b-206">ทุกๆ สถานะในตารางข้างต้นไม่ขึ้นอยู่กับลักษณะ และการขึ้นต่อกันแบบลำดับชั้นถูกสร้างขึ้นระหว่างสถานะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="e0c4b-207">การขึ้นต่อกันนี้ไหลจากบนลงล่าง</span><span class="sxs-lookup"><span data-stu-id="e0c4b-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="e0c4b-208">ถ้าระบบตรวจพบข้อผิดพลาดขณะกำลังประมวลผลสถานะ สถานะของใบแจ้งยอดจะถูกแปลงกลับไปเป็นสถานะก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="e0c4b-209">ความพยายามซ้ำในเวลาต่อมาใดๆ ของกระบวนการ ดำเนินต่อจากสถานะที่ล้มเหลว และดำเนินต่อไปข้างหน้า</span><span class="sxs-lookup"><span data-stu-id="e0c4b-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="e0c4b-210">วิธีการนี้มีประโยชน์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="e0c4b-211">ผู้ใช้มีความสามารถฝนการมองเห็นในสถานะที่ซึ่งเกิดข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="e0c4b-212">มีการหลีกเลี่ยงความเสียหายของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e0c4b-212">Data corruption is avoided.</span></span> <span data-ttu-id="e0c4b-213">ตัวอย่างเช่น ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีอินสแตนซ์ที่ซึ่งมีการออกใบแจ้งหนี้ใบสั่งขายบางรายการ แต่รายการอื่นๆ ถูกเปิดทิ้งไว้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="e0c4b-214">นอกจากนี้ ยังมีอินสแตนซ์ที่สมุดรายวันการชำระเงินบางรายการไม่มีใบแจ้งหนี้ที่สอดคล้องกันเพื่อชำระ เนื่องจากการลงรายการบัญชีใบแจ้งหนี้มีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="e0c4b-215">ผู้ใช้สามารถดูสถานะปัจจุบันของใบแจ้งยอดได้โดยใช้ปุ่ม **รายละเอียดสถานะ** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="e0c4b-216">หน้ารายละเอียดสถานะมีสามส่วน:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="e0c4b-217">ส่วนแรกแสดงสถานะปัจจุบันของใบแจ้งยอด พร้อมด้วยรหัสข้อผิดพลาดและข้อความแสดงข้อผิดพลาดโดยละเอียด ถ้ามีข้อผิดพลาดเกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="e0c4b-218">ส่วนที่สองจะแสดงสถานะต่างๆ ของกระบวนการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="e0c4b-219">สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการรันเรียบร้อยแล้ว กล่าวว่าไม่สามารถรันได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการรัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="e0c4b-220">ส่วนที่สามจะแสดงสถานะต่างๆ ของกระบวนการลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="e0c4b-221">สัญลักษณ์แบบใช้ภาพบ่งชี้ว่า ได้มีการรันเรียบร้อยแล้ว กล่าวว่าไม่สามารถรันได้เนื่องจากมีข้อผิดพลาด และกล่าวว่ายังไม่ได้มีการรัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="e0c4b-222">นอกจากนี้ ส่วนหัวของส่วนที่สองและที่สามแสดงสถานะทั้งหมดของกระบวนการที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="e0c4b-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="e0c4b-223">ล็อกเหตุการณ์</span><span class="sxs-lookup"><span data-stu-id="e0c4b-223">Event logs</span></span>

<span data-ttu-id="e0c4b-224">ใบแจ้งยอดจะผ่านการดำเนินงานต่างๆ (ตัวอย่างเช่น สร้าง คำนวณ ยกเลิกการเลือก และลงรายการบัญชี) และอินสแตนซ์หลายรายการของการดำเนินงานเดียวกันอาจถูกเรียก ในระหว่างวงจรชีวิตของใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="e0c4b-225">ตัวอย่างเช่น หลังจากที่มีการสร้างและการคำนวณใบแจ้งยอด ผู้ใช้สามารถยกเลิกการเลือกใบแจ้งยอด และคำนวณอีกครั้งได้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="e0c4b-226">ปุ่ม **ล็อกเหตุการณ์** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดให้บันทึกการตรวจสอบที่เสร็จสมบูรณ์ของการดำเนินงานต่างๆ ที่ถูกเรียกบนใบแจ้งยอด พร้อมด้วยข้อมูลเกี่ยวกับเวลาที่มีการเรียกการดำเนินการดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="e0c4b-227">ธุรกรรมที่รวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-227">Aggregated transactions</span></span>

<span data-ttu-id="e0c4b-228">ในระหว่างกระบวนการลงรายการบัญชี ธุรกรรมการขายจะถูกรวมไว้ตามการตั้งค่าคอนฟิก</span><span class="sxs-lookup"><span data-stu-id="e0c4b-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="e0c4b-229">ธุรกรรมแบบรวมเหล่านี้ถูกจัดเก็บในระบบ และถูกใช้เพื่อสร้างใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="e0c4b-230">ธุรกรรมแบบรวมทุกรายการสร้างใบสั่งขายที่สอดคล้องกันในระบบ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="e0c4b-231">คุณสามารถดูธุรกรรมแบบรวมได้โดยใช้ปุ่ม **ธุรกรรมแบบรวม** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดได้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="e0c4b-232">แท็บ **รายละเอียดของใบสั่งขาย** ของธุรกรรมแบบรวมแสดงข้อมูลต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="e0c4b-233">**รหัสเรกคอร์ด** – รหัสของธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="e0c4b-234">**หมายเลขใบแจ้งยอด** – ใบแจ้งยอดที่มีธุรกรรมแบบรวมอยู่</span><span class="sxs-lookup"><span data-stu-id="e0c4b-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="e0c4b-235">**วันที่** – วันที่ที่มีการสร้างธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="e0c4b-236">**รหัสการขาย** – เมื่อมีการสร้างใบสั่งขายจากธุรกรรมแบบรวม รหัสใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="e0c4b-237">ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบสั่งขายที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="e0c4b-238">**จำนวนของรายการแบบวม** – จำนวนรวมของรายการสำหรับธุรกรรมแบบรวมและใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="e0c4b-239">**สถานะ** – สถานะล่าสุดของธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="e0c4b-240">**รหัสใบแจ้งหนี้** – เมื่อออกใบแจ้งหนี้ใบสั่งขายสำหรับธุรกรรมแบบรวม รหัสใบแจ้งหนี้การขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="e0c4b-241">ถ้าฟิลด์นี้ว่างเปล่า จะยังไม่มีการสร้างใบแจ้งหนี้สำหรับใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="e0c4b-242">แท็บ **รายละเอียดธุรกรรม** ของธุรกรรมแบบรวม แสดงธุรกรรมทั้งหมดที่ถูกดึงลงในธุรกรรมแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="e0c4b-243">รายการแบบรวมในธุรกรรมแบบรวมแสดงเรกคอร์ดแบบรวมทั้งหมดจากธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="e0c4b-244">รายการแบบรวมยังจะแสดงรายละเอียดต่างๆ ด้วย เช่น สินค้า ตัวแปร ปริมาณ ราคา ยอดเงินสุทธิ หน่วย และคลังสินค้า</span><span class="sxs-lookup"><span data-stu-id="e0c4b-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="e0c4b-245">โดยทั่วไป รายการแบบรวมแต่ละรายการจะเกี่ยวข้องกับรายการใบสั่งขายหนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="e0c4b-246">จากหน้า **ธุรกรรมแบบรวม** คุณสามารถดาวน์โหลด XML สำหรับธุรกรรมแบบรวมเฉพาะ โดยใช้ปุ่ม **ส่งออกใบสั่งขาย XML** ได้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="e0c4b-247">คุณสามารถใช้ XML เพื่อดีบักปัญหาที่เกี่ยวข้องกับการสร้างใบสั่งขายและลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="e0c4b-248">เพียงดาวน์โหลด XML อัพโหลดไปยังสภาพแวดล้อมการทดสอบ และดีบักปัญหาในสภาพแวดล้อมการทดสอบ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="e0c4b-249">ฟังก์ชันสำหรับการดาวน์โหลด XML สำหรับธุรกรรมแบบรวม ไม่พร้อมใช้งานสำหรับใบแจ้งยอดที่ถูกลงรายการบัญชี</span><span class="sxs-lookup"><span data-stu-id="e0c4b-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="e0c4b-250">มุมมองธุรกรรมแบบรวมแสดงผลประโยชน์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="e0c4b-251">ผู้ใช้มีความสามารถในการมองเห็นในธุรกรรมแบบรวมที่ล้มเหลวในระหว่างการสร้างใบสั่งขาย และใบสั่งขายที่ล้มเหลวในระหว่างการออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="e0c4b-252">ผู้ใช้มีความสามารถในการมองเห็นในวิธีการรวมธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="e0c4b-253">ผู้ใช้มีบันทึกการตรวจสอบบัญชีที่สมบูรณ์ จากธุรกรรม ไปยังใบสั่งขาย ไปยังใบแจ้งหนี้การขาย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="e0c4b-254">บันทึกการตรวจสอบนี้ไม่พร้อมใช้งานในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="e0c4b-255">ไฟล์ XML แบบรวมจะช่วยให้สามารถระบุปัญหาได้ง่ายขึ้นในระหว่างการสร้างใบสั่งขายและการออกใบแจ้งหนี้</span><span class="sxs-lookup"><span data-stu-id="e0c4b-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="e0c4b-256">ใบสำคัญสมุดรายวัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-256">Journal vouchers</span></span>

<span data-ttu-id="e0c4b-257">ปุ่ม **ใบสำคัญสมุดรายวัน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงธุรกรรมใบสำคัญต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด และที่เกี่ยวข้องกับส่วนลด บัญชีรายได้/ค่าใช้จ่าย บัตรของขวัญ และอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="e0c4b-258">ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="e0c4b-259">สมุดรายวันการชำระเงิน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-259">Payment journals</span></span>

<span data-ttu-id="e0c4b-260">ปุ่ม **สมุดรายวันการชำระเงิน** ในกลุ่ม **รายละเอียดการดำเนินการ** ของใบแจ้งยอดแสดงสมุดรายวันการชำระเงินต่างๆ ทั้งหมดที่สร้างขึ้นสำหรับใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="e0c4b-261">ในปัจจุบัน โปรแกรมแสดงข้อมูลนี้สำหรับใบแจ้งยอดที่ลงรายการบัญชีแล้วเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="e0c4b-262">การปรับปรุงอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-262">Other improvements</span></span>

<span data-ttu-id="e0c4b-263">อื่นๆ การปรับปรุง back-end ที่ผู้ใช้สามารถดูได้ ได้ถูกทำไว้กับคุณลักษณะการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="e0c4b-264">ยกตัวอย่างเช่น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-264">Here are some examples:</span></span>

- <span data-ttu-id="e0c4b-265">การรวมไม่พิจารณาพนักงาน เทอร์มินัล และเอนทิตี้ของกะ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="e0c4b-266">เนื่องจากมีพารามิเตอร์การรวมน้อย ระบบต้องประมวลผลรายการใบสั่งขายน้อย</span><span class="sxs-lookup"><span data-stu-id="e0c4b-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="e0c4b-267">การเกิดขึ้นของการชะงักงันในตารางธุรกรรมจะลดลงโดยการแนะนำตารางการขยายเพิ่มเติม และโดยทำการดำเนินการแทรก แทนการดำเนินการอัปเดตในตารางธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="e0c4b-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="e0c4b-268">จำนวนของการรันงานในชุดงานได้ถูกทำให้เป็นพารามิเตอร์ และถูกจำกัด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="e0c4b-269">ดังนั้น จำนวนนี้สามารถปรับแต่งได้ง่ายขึ้น โดยเฉพาะกับสภาพแวดล้อมของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="e0c4b-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="e0c4b-270">คุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม มีการสร้างจำนวนของชุดงานที่ไม่จำกัดในเวลาเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="e0c4b-271">ผลลัพธ์เป็นจำนวนงานที่ไม่สามารถจัดการได้ ค่าโสหุ้ย และปัญหาคอขวดบนเซิร์ฟเวอร์ชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="e0c4b-272">คำสั่งต่างๆ ถูกจัดคิวสำหรับการประมวลผลได้อย่างมีประสิทธิภาพ โดยการจัดระดับความสำคัญของใบแจ้งยอดที่มีจำนวนของธุรกรรมสูงสุด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="e0c4b-273">กระบวนการชุดงาน เช่น **คำนวณใบแจ้งยอดในชุดงาน** และ **ลงรายการบัญชีใบแจ้งยอดในชุดงาน** ถูกรันในโหมดชุดงานเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="e0c4b-274">ในคุณลักษณะการลงรายการบัญชีคำสั่งดั้งเดิม ผู้ใช้สามารถเลือกเพื่อรันกระบวนการชุดงานเหล่านี้ในโหมดการโต้ตอบซึ่งเป็นการดำเนินงานเธรดเดียวแบบ s ไม่เหมือนกับกระบวนการชุดงานที่เป็นแบบหลายเธรด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="e0c4b-275">ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม ความล้มเหลวใดๆ ของงานในชุดงานทำให้ชุดงานทั้งหมดอยู่ในสถานะข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="e0c4b-276">ในคุณลักษณะที่ปรับปรุงแล้ว ความล้มเหลวของภารกิจชุดงานไม่ทำให้ชุดงานอยู่ในสถานะข้อผิดพลาด ถ้าชุดงานอื่นๆ เสร็จเรียบร้อยแล้ว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="e0c4b-277">คุณควรประเมินสถานะการลงรายการบัญชีสำหรับการดำเนินการชุดงานที่รันโดยใช้หน้า **ใบแจ้งยอด** ซึ่งคุณสามารถดูใบแจ้งยอดใดๆ ที่ไม่ได้ลงรายการบัญชีได้เนื่องจากมีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="e0c4b-278">ในคุณลักษณะการลงรายการบัญชีใบแจ้งยอดเดิม การเกิดขึ้นครั้งแรกของความล้มเหลวในการรายงานทำให้ชุดงานทั้งหมดล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="e0c4b-279">ใบแจ้งยอดที่เหลือไม่ได้รับการประมวลผล</span><span class="sxs-lookup"><span data-stu-id="e0c4b-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="e0c4b-280">ในคุณลักษณะที่ปรับปรุง กระบวนการชุดงานดำเนินต่อไปเพื่อประมวลผลรายงานทั้งหมด แม้ว่าบางคำสั่งจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e0c4b-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="e0c4b-281">สวัสดิการหนึ่งรายการคือ ผู้ใช้สามารถมองเห็นได้ในจำนวนที่แน่นอนของใบแจ้งยอดที่มีข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="e0c4b-282">ดังนั้น ผู้ใช้ไม่จำเป็นต้องติดอยู่ในลูปแบบต่อเนื่องของการแก้ไขข้อผิดพลาด และการรันกระบวนการลงรายการบัญชีใบแจ้งยอด จนกระทั่งมีการลงรายการบัญชีใบแจ้งยอดทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="e0c4b-283">คำแนะนำทั่วไปเกี่ยวกับใบแจ้งยอดที่ลงรายการบัญชีกระบวนการ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="e0c4b-284">เราขอแนะนำให้ คุณรันกระบวนการลงรายการบัญชีใบแจ้งยอดในชุดงาน เนื่องจากชุดงานจะรันโดยใช้ประโยชน์จากความชำนาญของกรอบงานชุดงานในแง่ของมัลติเธรด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="e0c4b-285">จำเป็นต้องใช้มัลติเธรดเพื่อจัดการกับไดรฟ์ข้อมูลขนาดใหญ่ของธุรกรรม ซึ่งโดยปกติแล้วจะปรากฏในการลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="e0c4b-286">เราขอแนะนำให้ คุณเปิดสินค้าคงคลังทางกายภาพค่าลบในกลุ่มแบบจำลองสินค้า เพื่อให้คุณมีประสบการณ์การลงรายการบัญชีที่ราบรื่น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="e0c4b-287">ในบางสถานการณ์ ใบแจ้งยอดค่าลบอาจไม่สามารถจะลงรายการบัญชีได้ ถ้าไม่มีสินค้าคงคลังทางกายภาพที่เป็นค่าลบ</span><span class="sxs-lookup"><span data-stu-id="e0c4b-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="e0c4b-288">ตัวอย่างเช่น ในทฤษฎี ถ้าไม่มีหน่วยของสินค้าในสินค้าคงคลังเพียงหนึ่งหน่วย และมีธุรกรรมการขายและธุรกรรมการส่งคืนสำหรับสินค้า ธุรกรรมควรจะสามารถลงรายการบัญชี แม้ว่าสินค้าคงคลังค่าลบไม่ได้ถูกเปิดใช้งาน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="e0c4b-289">อย่างไรก็ตาม เนื่องจากกระบวนการลงรายการบัญชีใบแจ้งยอดจะดึงทั้งธุรกรรมการขายและธุรกรรมการส่งคืนสินค้าในใบสั่งของลูกค้ารายเดียว ไม่มีการรับประกันว่ารายการขายจะถูกลงรายการบัญชีก่อน ซึ่งตามด้วยรายการส่งคืน</span><span class="sxs-lookup"><span data-stu-id="e0c4b-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="e0c4b-290">ดังนั้น ข้อผิดพลาดอาจเกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="e0c4b-290">Therefore, errors can occur.</span></span> <span data-ttu-id="e0c4b-291">ถ้าสินค้าคงคลังค่าลบถูกเปิดในสถานการณ์นี้ การลงรายการบัญชีธุรกรรมจะไม่ได้รับผลกระทบในทางลบ และระบบจะสะท้อนถึงสินค้าคงคลังอย่างถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="e0c4b-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="e0c4b-292">เราขอแนะนำให้ คุณใช้การรวม ในขณะที่คุณคำนวณและลงรายการบัญชีใบแจ้งยอด</span><span class="sxs-lookup"><span data-stu-id="e0c4b-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="e0c4b-293">ดังนั้น การตั้งค่าต่อไปนี้จะได้รับการแนะนำสำหรับพารามิเตอร์การรวมบางตัว:</span><span class="sxs-lookup"><span data-stu-id="e0c4b-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="e0c4b-294">ไปที่ **การขายปลีกและการค้า** \> **การตั้งค่าศูนย์ควบคุม** \> **พารามิเตอร์** \> **พารามิเตอร์การค้า**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="e0c4b-295">จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การปรับปรุงสินค้าคงคลัง** ในฟิลด์ **ระดับรายละเอียด** เลือก **สรุป**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="e0c4b-296">ไปที่ **การขายปลีกและการค้า** \> **การตั้งค่าศูนย์ควบคุม** \> **พารามิเตอร์** \> **พารามิเตอร์การค้า**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="e0c4b-297">จากนั้น บนแท็บ **การลงรายการบัญชี** บน FastTab **การรวม** ตั้งค่าตัวเลือก **ธุรกรรมใบสำคัญ** เป็น **ใช่**</span><span class="sxs-lookup"><span data-stu-id="e0c4b-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
