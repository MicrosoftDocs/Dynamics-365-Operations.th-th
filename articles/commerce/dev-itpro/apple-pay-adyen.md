---
title: ตั้งค่า Apple Pay กับ Adyen ใน Dynamics 365 Commerce
description: บทความนี้จะอธิบายวิธีการตั้งค่า Apple Pay กับ Adyen ใน Microsoft Dynamics 365 Commerce
author: BrianShook
ms.date: 11/15/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: josaw
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2022-06-20
ms.openlocfilehash: 0949b9d7a4b181605d43956932b4fc095940bd64
ms.sourcegitcommit: cf6b764824bd1cf2c0dde6d37ddd0a7abab87ff0
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 11/16/2022
ms.locfileid: "9780380"
---
# <a name="set-up-apple-pay-with-adyen-in-dynamics-365-commerce"></a>ตั้งค่า Apple Pay กับ Adyen ใน Dynamics 365 Commerce

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]

บทความนี้จะอธิบายวิธีการตั้งค่า Apple Pay กับ Adyen ใน Microsoft Dynamics 365 Commerce

## <a name="key-terms"></a>เงื่อนไขสำคัญ

| เงื่อนไข | คำอธิบาย |
|---|---|
| Apple Pay | เรียกอีกอย่างว่า "ปุ่ม" Apple Pay, Apple Pay เป็นการจ่ายเงินแบบหนึ่งที่ได้รับการสนับสนุนผ่านตัวเชื่อมต่อ Adyen ซึ่งเปิดใช้งานประสบการณ์ของลูกค้าและการผสานการทำงานที่ได้รับการสนับสนุนโดย Microsoft Dynamics 365 Apple Pay Connector |
| กระเป๋าสตางค์ | ชนิดการชำระเงินที่ไม่มีลักษณะการชำระเงินแบบดั้งเดิม เช่น ช่วงหมายเลขรหัสธนาคาร (BIN) และวันหมดอายุ ซึ่งใช้เพื่อแยกความแตกต่างของชนิดบัตรเครดิตและบัตรเดบิต |

Dynamics 365 Commerce เสนอการรวมแบบสำเร็จสำหรับ Apple Pay เมื่อใช้บริการเกตเวย์การเงิน Adyen Apple Pay คือวิธีการจ่ายเงินดิจิทัลแบบหนึ่งที่ใช้บัญชีผู้จำหน่าย Apple Pay ในการประสานงานกับบริการการชำระเงินของ Adyen เมื่อตั้งค่าคอนฟิกแล้ว ปุ่ม Apple Pay จะสามารถเลือกวิธีการจ่ายเงินที่เป็นส่วนของหน้าการเช็คเอาท์ใบสั่งของร้านค้าออนไลน์ ปุ่ม Apple Pay จะแสดงเป็นตัวเลือกการชำระเงินเฉพาะกับอุปกรณ์ที่รองรับ Apple Pay เท่านั้น เมื่อผู้ใช้เลือก **Apple Pay** บนเบราว์เซอร์หรืออุปกรณ์ที่สนับสนุน ผู้ใช้จะถูกนำไปยังบริการ Apple Pay เพื่อทำการชำระงินของพวกเขาให้เสร็จสมบูรณ์โดยตรง จากนั้นใบสั่งก็จะถูกส่งกลับไปยังร้านค้าออนไลน์เพื่อทำใบสั่งให้เสร็จสมบูรณ์

การอ้างอิงตัวเชื่อมต่อ Dynamics 365 Payment Connector สำหรับ Apple Pay จะถูกใช้เพิ่มเติมจาก Dynamics 365 Payment Connector สำหรับ Adyen เพื่อเปิดใช้งาน Apple Pay และการชำระเงินด้วยบัตรเครดิตบนไซต์ คุณยังสามารถตั้งค่าคอนฟิก Apple Pay ให้ใช้งานในร้านค้าที่มีเทอร์มินัลการจ่ายเงิน Adyen ที่ใช้ Dynamics 365 Payment Connector สำหรับ Adyen กับการขายหน้าร้าน (POS) ของ Commerce ด้วย ในกรณีนี้ Dynamics 365 Payment Connector สำหรับ Adyen จะจัดการกับอุปกรณ์ Apple Payment แท็บผ่านเทอร์มินัล

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

ต้องใช้บัญชีผู้จำหน่าย Apple ในการใช้ Apple Pay กับ Adyen ใน Commerce ข้อมูลเกี่ยวกับวิธีตั้งค่าใช้การตั้งค่า Apple Pay ในพื้นที่ลูกค้าทดสอบของคุณ โปรดดูที่ [การรวมแบบ Drop-in ของ Apple Pay](https://docs.adyen.com/payment-methods/apple-pay/web-drop-in#set-up-apple-pay) ข้อมูลเกี่ยวกับสิ่งที่ต้องทำเมื่อพร้อมที่จะใช้งานจริงในสภาพแวดล้อมการทำงานจริงของคุณ โปรดดูที่ [การเริ่มใช้งานจริง](https://docs.adyen.com/payment-methods/apple-pay/web-drop-in#going-live)

วิธีการชำระเงิน Apple Pay ต้องรวมกับบัญชี Adyen ของคุณด้วย Adyen สามารถช่วยคุณตั้งค่าวิธีการจ่ายเงิน และยังช่วยให้มั่นใจว่าโดเมนที่คุณจะใช้ใบรับรองจะถูกมอบหมายให้ใช้กับใบรับรอง

ในการเปิดใช้งานคุณลักษณะกระเป๋าตังค์ขั้นสูงใน Commerce Headquarters ไปที่ **พื้นที่ทำงาน \> การจัดการคุณลักษณะ** และค้นหาคุณลักษณะ **การสนับสนุนกระเป๋าตังค์ขั้นสูงและการปรับปรุงการชำระเงิน** เลือกคุณลักษณะ จากนั้นเลือก **เปิดใช้งาน** หลังจากได้เปิดใช้งานคุณลักษณะ ให้เรียกใช้กำหนดการกระจาย **1110** เพื่อเปลี่ยนแปลงข้อมูลในช่องทางทั้งหมด

## <a name="map-the-apple-pay-payment-method"></a>แม็ปวิธีการชำระเงิน Apple Pay

Apple Pay คือวิธีการชำระเงินดิจิทัลแบบหนึ่ง สำหรับข้อมูลเกี่ยวกับวิธีตั้งค่าการแม็ปการชำระเงิน Apple Pay โปรดดูที่ [การสนับสนุนการชำระเงินด้วยกระเป๋าสตางค์](../wallets.md)

แม็ปวิธีการชำระเงิน Apple Payใน Commerce headquarters ให้ทำตามขั้นตอนเหล่านี้

1. ไปที่ **การขายปลีกและการค้า \> การตั้งค่าช่องทาง \> วิธีการชำระเงิน \> ชนิดของการ์ด**
1. เลือก **ใหม่** เพื่อเพิ่มบรรทัดสำหรับ Apple Pay และตั้งค่าดังต่อไปนี้:

    - **ID:** ApplePay
    - **ชื่อการชำระเงินทางอิเล็กทรอนิกส์:** Apple Pay
    - **ชนิด:** กระเป๋าสตางค์
    - **ผู้ออก:** Apple

1. เลือก **การแม็ปผู้ประมวลผล** เพื่อเปิดกล่องโต้ตอบ **วิธีการแม็ปการชำระเงินของตัวประมวลผล** คอลัมน์ **วิธีการชำระเงินของตัวประมวลผลที่ยกเลิกการแม็ป** จะแสดงรายการวิธีการจ่ายเงินที่สนับสนุนให้กับตัวเชื่อมต่อแต่ละตัวที่มีอยู่ (Adyen, PayPal และ Thed)
1. แมปวิธีการชำระเงินที่สนับสนุนที่คุณต้องการสำหรับทั้งตัวเชื่อมต่อ **Dynamics 365 Payment Connector สำหรับ Adyen** (เพื่อใช้งานที่ POS) และ ตัวเชื่อมต่อ **Dynamics 365 Payment Connector สำหรับ Apple Pay** (เพื่อใช้งานในช่องทางออนไลน์)
1. ในแต่ละบรรทัดการแมป ในคอลัมน์ **วิธีการชำระเงินของตัวประมวลผลที่ยกเลิกการแม็ป** ให้เลือกบรรทัดที่จะสนับสนุน แล้วเลือก **เพิ่ม** เพื่อย้ายการเลือกไปยังคอลัมน์ **วิธีการชำระเงินของตัวประมวลผลที่แม็ป**
1. เลือก **ตกลง** แล้วบนหน้า **ชนิดของบัตร** ให้เลือก **บันทึก**

## <a name="set-up-the-apple-pay-certificate-for-your-site"></a>ตั้งค่าใบรับรอง Apple Pay สำหรับไซต์ของคุณ

สำหรับแต่ละไซต์ คุณต้องอัปโหลดไฟล์การเชื่อมโยงโดเมน (หรือที่เรียกว่าใบรับรอง Apple Pay) ตามที่อธิบายไว้ใน [คู่มือ Adyen Apple Pay](https://docs.adyen.com/payment-methods/apple-pay/web-drop-in#going-live) คุณสามารถใช้โปรแกรมสร้างไซต์ Commerce เพื่ออัปโหลดไฟล์การเชื่อมโยงโดเมนไปยังไลบรารีสื่อของไซต์ของคุณ

ในการตั้งค่าใบรับรอง Apple Pay ในโปรแกรมสร้างไซต์ ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ดาวน์โหลดใบรับรอง (ไฟล์การเชื่อมโยงโดเมน) จาก [Adyen](https://docs.adyen.com/payment-methods/apple-pay/web-drop-in#going-live)
1. เพิ่มนามสกุล .txt ลงในไฟล์การเชื่อมโยงโดเมน
1. ในโปรแกรมสร้างไซต์ [อัปโหลด](../upload-serve-static-files.md) ไฟล์การเชื่อมโยงโดเมนไปยังไลบรารีสื่อของไซต์ของคุณ
1. ไปที่ **URL**
1. เลือก **สร้าง \> URL ใหม่**
1. ในกล่องโต้ตอบ **URL ใหม่** ให้เลือก **สินทรัพย์ของไลบรารีสื่อ**
1. ในฟิลด์ **พาธ URL** ให้ป้อนพาธ URL (หากยังไม่ได้ป้อน) หลังจาก URL ฐานโดเมน ให้ป้อนสตริง Apple ที่ต้องใช้ต่อไปนี้: `<domain>/.well-known/apple-developer-merchantid-domain-association.txt`
1. เลือก **ถัดไป** ไลบรารีสื่อแสดงสินทรัพย์สื่อทั้งหมดที่อัปโหลดของชนิด **เอกสาร** (.txt)
1. เลือกไฟล์การเชื่อมโยงโดเมนที่ควรมีให้สำหรับคำขอไปยัง URL ที่คุณกำหนดไว้ก่อนหน้านี้
1. เลือก **สร้าง**

ณ จุดนี้ URL ที่คุณสร้างจะอยู่ในสถานะร่าง เผยแพร่ URL เพื่อดําเนินการให้เสร็จสมบูรณ์ ไฟล์ที่ URL ชี้ไปยังไม่มีการส่งคืนจนกว่าคุณจะเผยแพร่ URL

## <a name="configure-a-commerce-online-store-for-apple-pay"></a>ตั้งค่าคอนฟิกร้านค้าออนไลน์ของ Commerce สำหรับ Apple Pay

เมื่อต้องการตั้งค่าคอนฟิกร้านค้าออนไลน์ของ Commerce สำหรับ Apple Pay ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ใน Commerce headquarters ไปที่ **การขายปลีกและการค้า \> ช่องทาง \> ร้านค้าออนไลน์**
1. เลือกค่า **รหัสช่องทางการขายปลีก** ของช่องทางร้านค้าออนไลน์ของไซต์ของคุณ
1. บนแท็บด่วน **บัญชีการชำระเงิน** ให้เพิ่มตัวเชื่อมต่อ **Dynamics 365 Payment Connector สำหรับ Adyen** ถ้ายังไม่ได้ตั้งค่า โดยการปฏิบัติตามคําแนะนําใน [ตั้งค่า Dynamics 365 Payment Connector สำหรับ Adyen](adyen-connector-setup.md)
1. หลังจากตั้งค่าคอนฟิกตัวเชื่อมต่อ Adyen แล้ว ให้เลือก **เพิ่ม** เพื่อเพิ่มตัวเชื่อมต่อ **Dynamics 365 Payment Connector สำหรับ Apple Pay**
1. ป้อนค่าของคุณสมบัติร้านค้าตัวเชื่อมต่อ

    | คุณสมบัติ               | คำอธิบาย | ต้องระบุ | ตั้งค่าอัตโนมัติ | ค่าตัวอย่าง |
    | ---------------------- | ----------- | -------- | ----------------- | ------------ |
    | ชื่อแอสเซมบลี          | ชื่อแอสเซมบลีของ Dynamics 365 Payment Connector สำหรับ Apple Pay | ใช่ | ใช่ | ชื่อไบนารี |
    | รหัสบัญชีบริการ     | รหัสเฉพาะของการตั้งค่าของคุณสมบัติผู้จำหน่าย ตัวระบุนี้จะลงท้ายบนธุรกรรมการชำระเงินและระบุคุณสมบัติผู้จำหน่ายที่กระบวนการปลาย (เช่น การออกใบแจ้งหนี้) ควรใช้ | ใช่ | ใช่ | Guid |
    | รหัสบัญชีผู้จำหน่าย    | ป้อนรหัสผู้จำหน่าย Adyen เฉพาะ ค่านี้จะให้เมื่อคุณลงชื่อสมัครใช้ Adyen ตามที่อธิบายไว้ใน [ลงทะเบียนกับ Adyen](adyen-connector-setup.md#sign-up-with-adyen) | ใช่ | ไม่ | MerchantIdentifier |
    | คีย์ API ระบบคลาวด์          | ป้อนคีย์ API ระบบคลาวด์ของ Adyen คุณสามารถรับคีย์นี้โดยปฏิบัติตามคําแนะนําใน [วิธีการเรียกใช้คีย์ API](https://docs.adyen.com/developers/user-management/how-to-get-the-api-key) | ใช่ | หมายเลข | abcdefg |
    | สภาพแวดล้อมเกตเวย์    | ป้อนสภาพแวดล้อมเกตเวย์ Adyen ที่จะแม็ปไป ค่าที่เป็นไปได้ คือ **ทดสอบ** และ **ใช้งาน** คุณควรตั้งค่าฟิลด์นี้เป็น **ใช้งาน** เฉพาะกับอุปกรณ์และธุรกรรมการทำงานจริงเท่านั้น | ใช่ | ใช่ | สด |
    | สกุลเงินที่สนับสนุน   | ป้อนสกุลเงินที่ตัวเชื่อมต่อควรประมวลผล ในสถานการณ์สถานการณ์ปัจจุบันของบัตร Adyen สามารถสนับสนุนสกุลเงินเพิ่มเติมโดยผ่าน [การแปลงสกุลเงิน Dynamic](https://www.adyen.com/pos-payments/dynamic-currency-conversion) หลังจากที่มีการส่งคำขอธุรกรรมไปที่เทอร์มินัลการชำระเงิน ติดต่อฝ่ายสนับสนุนของ Adyen เพื่อรับรายการสกุลเงินที่สนับสนุน | ใช่ | ใช่ | USD;EUR |
    | ชนิดการชำระเงินที่รองรับ | ป้อนชนิดการชำระเงินที่ตัวเชื่อมต่อควรประมวลผล | ใช่ | ใช่ | ApplePay |

1. หลังจากป้อนข้อมูลผู้จำหน่ายแล้ว ให้รันงานกําหนดการกระจายการตั้งค่าคอนฟิกช่องทาง **1070**

## <a name="configure-commerce-pos-for-apple-pay"></a>กำหนดค่า Commerce POS สำหรับ Apple Pay

การตั้งค่าคอนฟิก POS ใช้การตั้งค่าคอนฟิกฟิลด์ **บริการ EFT** ของโปรไฟล์ฮาร์ดแวร์สำหรับตัวเชื่อมต่อการชำระเงิน Dynamics 365 สำหรับ Adyen ใน Commerce headquarters การตั้งค่าคอนฟิกบริการ EFT ของ Dynamics 365 Payment Connector สำหรับ Adyen ดังที่อธิบายไว้ใน [ตั้งค่าส่วนโปรไฟล์ฮาร์ดแวร์ Dynamics 365 POS](adyen-connector-setup.md#set-up-a-dynamics-365-pos-hardware-profile)

ตรวจสอบให้แน่ใจว่าคุณเพิ่ม **ApplePay** ไปยังรายการชนิดการชําระเงินในฟิลด์ **ชนิดการชําระเงินที่สนับสนุน** ใช้เครื่องหมายอัฒภาค (;) เพื่อแยกชนิดการชำระเงินในรายการ

การแมปตัวประมวลผลของตัวเชื่อมต่อ Adyen จะรวบรวมชนิดบัตรกระเป๋าสตางค์ที่ Apple Pay ใช้ในเทอร์มินัล POS

### <a name="configure-content-security-policies-in-site-builder"></a>การตั้งค่าคอนฟิกนโยบายความปลอดภัยของเนื้อหาในโปรแกรมสร้างไซต์

ก่อนที่คุณจะตั้งค่าคอนฟิกบางส่วนของหน้าหรือหน้าของคุณด้วย Apple Pay คุณต้องตรวจสอบให้แน่ใจว่านโยบายความปลอดภัยของเนื้อหา (CSPs) ของคุณได้รับการตั้งค่าในตัวสร้างไซต์ Commerce สำหรับไซต์ของคุณ

ในการตั้งค่าคอนฟิกนโยบายความปลอดภัยของเนื้อหาในโปรแกรมสร้างไซต์ ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ไปที่ **การตั้งค่าไซต์ \> ส่วนขยาย**
1. บนแท็บ **นโยบายความปลอดภัยเนื้อหา** เลือก **เพิ่ม** เพื่อเพิ่มบรรทัดที่มี `https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js` ไปยังส่วน **hild-src** **connect-src** **frame-src**, **img-src**, **script-src**, and **style-src**
1. เมื่อคุณเสร็จสิ้น ให้เลือก **บันทึกและเผยแพร่** เพื่อยืนยันการเปลี่ยนแปลง

### <a name="set-up-apple-pay-as-a-checkout-payment-option"></a>ตั้งค่า Apple Pay เป็นตัวเลือกการชำระเงินเช็คเอาท์

หากต้องการตั้งค่า Apple Pay เป็นตัวเลือกการชำระเงิน บนหน้าเช็คเอาท์ (ไม่ด่วน) ของไซต์ของคุณ ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ในตัวสร้างไซต์ ไปที่ **ส่วนย่อย** แล้วเลือกส่วนย่อยเช็คเอาท์ของไซต์ของคุณ
1. เลือก **แก้ไข**
1. ในช่อง **คอนเทนเนอร์ส่วนเช็คเอาท์** เลือกจุดไข่ปลา (**...**) แล้วจากนั้นเลือก **เพิ่มโมดูล**
1. ในกล่องโต้ตอบ **เลือกโมดูล** ให้เลือกโมดูล **Apple Payล์** แล้วเลือก **ตกลง**
1. เลือก **บันทึก**
1. เลือก **แก้ไขให้เสร็จสิ้น** เพื่อเช็คอินส่วนย่อย และจากนั้น เลือก **เผยแพร่** เพื่อเผยแพร่

การตั้งค่าโมดูล **Apple Pay** จะสร้างขึ้นในโมดูลนี้ และเชื่อมต่อกับ Dynamics 365 Payment Connector สำหรับ Apple Pay ที่ตั้งค่าคอนฟิกไว้สำหรับช่องทางออนไลน์ใน Commerce headquarters

### <a name="apple-pay-payment-behavior"></a>ลักษณะการทำงานของการชำระเงินด้วย Apple Pay

ปุ่มการชำระเงิน **Apple Pay** จะแสดงอยู่เฉพาะบนอุปกรณ์ที่ Apple Pay สนับสนุนเท่านั้น (iPhones iPads และเบราเซอร์ Safari ที่สนับสนุน Apple Pay) หากผู้ใช้ไม่ได้ใช้งานอุปกรณ์ใดอุปกรณ์หนึ่งเหล่านี้ ปุ่มการชำระเงิน **Apple Pay** จะถูกซ่อนจากมุมมอง

เมื่อผู้ใช้เลือกปุ่มการชำระเงิน **Apple Pay** กล่องโต้ตอบ **Apple Pay** จะปรากฏขึ้น ดังนั้น ผู้ใช้สามารถรับรองความถูกต้องกับอุปกรณ์หรือเบราเซอร์ Apple Pay ของพวกเขา กล่องโต้ตอบ **Apple Pay** จะแสดงสรุปจํานวนเงินของใบสั่งและวิธีการจ่ายเงินที่ผู้ใช้ตั้งค่าคอนฟิกให้กับ Apple Wallet ผู้ใช้สามารถทบทวนรายละเอียดเหล่านี้ แล้วเลือก **จ่าย** เพื่อเสร็จสิ้นการชำระเงิน เมื่อการชำระเงินสมบูรณ์แล้ว ผู้ใช้จะถูกนำไปยังหน้าไซต์ **การสั่งซื้อเสร็จสมบูรณ์** ซึ่งแสดงสรุปใบสั่งโดยละเอียดของธุรกรรมที่เสร็จสมบูรณ์แล้ว

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[คำถามที่ถามบ่อยเกี่ยวกับการชำระเงิน](payments-retail.md)

[โมดูลเช็คเอาท์](../add-checkout-module.md)

[โมดูลการชำระเงิน](../payment-module.md)
