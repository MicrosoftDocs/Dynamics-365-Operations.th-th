---
title: มีการลงรายการบัญชีภาษีไปที่บัญชีแยกประเภทในใบสำคัญที่ไม่ถูกต้อง
description: หัวข้อนี้มีข้อมูลการแก้ไขปัญหาเบื้องต้นที่สามารถช่วยได้เมื่อลงรายการบัญชีภาษีในบัญชีแยกประเภทที่ไม่ถูกต้องในใบสำคัญ
author: qire
manager: beya
ms.date: 04/12/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application user
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: wangchen
ms.search.validFrom: 2021-04-01
ms.dyn365.ops.version: 10.0.1
ms.openlocfilehash: 0404d71f0492e188ed5da62387bb90a336e69c5a
ms.sourcegitcommit: 57668404d61359b33e0c0280f2f7c4eb829b1ed2
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/27/2021
ms.locfileid: "5947717"
---
# <a name="tax-is-posted-to-the-wrong-ledger-account-in-the-voucher"></a>มีการลงรายการบัญชีภาษีไปที่บัญชีแยกประเภทในใบสำคัญที่ไม่ถูกต้อง

[!include [banner](../includes/banner.md)]

ในระหว่างการลงรายการบัญชี มีการลงรายการบัญชีภาษีไปที่บัญชีแยกประเภทในใบสำคัญที่ไม่ถูกต้อง เมื่อต้องการแก้ไขปัญหานี้ ให้ปฏิบัติตามขั้นตอนในส่วนต่อไปนี้ตามต้องการ ตัวอย่างในหัวข้อนี้ใช้ใบสั่งขายเป็นเอกสารทางธุรกิจ

## <a name="find-the-tax-code-of-the-incorrectly-posted-tax-transaction"></a>ค้นหารหัสภาษีขายของธุรกรรมที่ลงรายการบัญชีไม่ถูกต้อง

1. บนหน้า **ธุรกรรมใบสำคัญ** ให้เลือกธุรกรรมที่คุณต้องการใช้งาน แล้วเลือก **ภาษีขายที่ลงรายการบัญชี**

    [![ปุ่มภาษีขายที่ลงรายการบัญชีบนหน้าธุรกรรมใบสำคัญ](./media/tax-posted-to-wrong-ledger-account-Picture1.png)](./media/tax-posted-to-wrong-ledger-account-Picture1.png)

2. ให้ตรวจสอบค่าในฟิลด์ **รหัสภาษีขาย** ในตัวอย่างนี้ **VAT 19**

    [![ฟิลด์รหัสภาษีขายในหน้าภาษีขายที่ลงรายการบัญชี](./media/tax-posted-to-wrong-ledger-account-Picture2.png)](./media/tax-posted-to-wrong-ledger-account-Picture2.png)

## <a name="check-the-ledger-posting-group-of-the-tax-code"></a>ตรวจสอบกลุ่มการลงรายการบัญชีแยกประเภทสำหรับรหัสภาษี

1. ไปที่ **ภาษี** \> **ภาษีทางอ้อม** \> **ภาษีขาย** \> **รหัสภาษีขาย**
2. ค้นหาและเลือกรหัสภาษี แล้วตรวจทานค่าในฟิลด์ **กลุ่มการลงรายการบัญชีแยกประเภท** ในตัวอย่างนี้ **VAT**

    [![ฟิลด์กลุ่มการลงรายการบัญชีแยกประเภทบนหน้ารหัสภาษีขาย](./media/tax-posted-to-wrong-ledger-account-Picture3.png)](./media/tax-posted-to-wrong-ledger-account-Picture3.png)

3. ค่าในฟิลด์ **กลุ่มการลงรายการบัญชีแยกประเภท** เป็นลิงค์ เลือกลิงค์นั้นหากต้องการดูรายละเอียดของการตั้งค่าคอนฟิกของกลุ่ม หรือเลือกระงับ (หรือคลิกขวา) ในฟิลด์ แล้วเลือก **ดูรายละเอียด**

    [![ดูคำสั่งในรายละเอียด](./media/tax-posted-to-wrong-ledger-account-Picture4.png)](./media/tax-posted-to-wrong-ledger-account-Picture4.png)

4. ในฟิลด์ **เจ้าหนี้ภาษีขาย** ให้ตรวจสอบว่าหมายเลขบัญชีถูกต้องตามชนิดของธุรกรรม ถ้าไม่ ให้เลือกบัญชีที่ถูกต้องที่จะลงรายการบัญชี ในตัวอย่างนี้ ภาษีขายของใบสั่งขายควรได้รับการลงรายการบัญชีไปยังบัญชีเจ้าหนี้ภาษีขาย 222200

    [![ฟิลด์เจ้าหนี้ภาษีขายในหน้ากลุ่มการลงรายการบัญชีแยกประเภท](./media/tax-posted-to-wrong-ledger-account-Picture5.png)](./media/tax-posted-to-wrong-ledger-account-Picture5.png)

    ตารางต่อไปนี้จะให้ข้อมูลเกี่ยวกับแต่ละฟิลด์ในหน้า **กลุ่มการลงรายการบัญชีแยกประเภท**

    | ฟิลด์                  | คำอธิบาย |
    |------------------------|-------------|
    | เจ้าหนี้ภาษีขาย      | บัญชีหลักสำหรับภาษีขายขาออกที่ต้องชำระให้แก่หน่วยงานจัดเก็บภาษี |
    | ลูกหนี้ภาษีขาย   | บัญชีหลักสำหรับภาษีขาเข้าที่ได้รับจากหน่วยงานจัดเก็บภาษี |
    | ค่าใช้จ่ายภาษีนำเข้า        | บัญชีหลักที่ใช้ลงรายการบัญชีภาษีการใช้ที่หักลดได้ ซึ่งผู้ขนส่งไม่ต้องขอคืนหรือรายงานต่อหน่วยงานจัดเก็บภาษี โดยเป็นส่วนหนึ่งของภาษีสินค้าและบริการที่กลับรายการในสหภาพยุโรป (EU) (GST)/ภาษีขายที่สอดคล้อง (HST) **ภาษีนำเข้า** ต้องถูกเลือกสำหรับรหัสภาษีขายในกลุ่มภาษีขายที่ถูกใช้ในธุรกรรม ฟิลด์นี้จะไม่พร้อมใช้งาน ถ้ามีการเลือก **ใช้กฎภาษีสำหรับภาษีขาย** ในหน้า **พารามิเตอร์บัญชีแยกประเภททั่วไป** |
    | เจ้าหนี้ภาษีนำเข้า        | บัญชีหลักที่ใช้ลงรายการบัญชีภาษีการใช้ขาเข้าที่เป็นเจ้าหนี้หน่วยงานจัดเก็บภาษี |
    | บัญชีการจ่ายเงิน     | บัญชีหลักที่ใช้ในการลงรายการบัญชีของยอดดุลสุทธิของบัญชีแยกประเภทที่ระบุในฟิลด์ **เจ้าหนี้ภาษีนำเข้า** และ **ลูกหนี้ภาษีขาย** |
    | ส่วนลดเงินสดของผู้จัดจำหน่าย   | บัญชีหลักที่ใช้ลงรายการบัญชีส่วนลดเงินสดสำหรับรหัสภาษีขายที่เชื่อมโยงกับกลุ่มการลงรายการบัญชีแยกประเภทนี้ |
    | ส่วนลดเงินสดสำหรับลูกค้า | บัญชีหลักที่ใช้ลงรายการบัญชีส่วนลดเงินสดสำหรับรหัสภาษีขายที่เชื่อมโยงกับกลุ่มการลงรายการบัญชีแยกประเภทนี้ |

    สำหรับข้อมูลเพิ่มเติม โปรดดู [ตั้งค่ากลุ่มการลงรายการบัญชีแยกประเภทสำหรับภาษีขาย](tasks/set-up-ledger-posting-groups-sales-tax.md)

## <a name="debug-in-code-to-check-ledger-dimensions"></a>ดีบักในรหัสเพื่อตรวจสอบมิติบัญชีแยกประเภท

ในรหัส บัญชีการลงรายการบัญชีจะขึ้นอยู่กับมิติบัญชีแยกประเภท มิติบัญชีแยกประเภทจะบันทึกรหัสเรกคอร์ดของบัญชีในฐานข้อมูล

1. สำหรับใบสั่งขาย ให้เพิ่มจุดสั่งหยุดที่วิธีการ **Tax::saveAndPost()** และ **Tax::post()** ให้ความสำคัญกับค่าของ **\_ledgerDimension**

    [![ตัวอย่างรหัสใบสั่งขายที่มีจุดสั่งหยุด](./media/tax-posted-to-wrong-ledger-account-Picture6.png)](./media/tax-posted-to-wrong-ledger-account-Picture6.png)

    ในใบสั่งซื้อ ให้เพิ่มจุดสั่งหยุดที่วิธีการ **TaxPost::saveAndPost()** และ **TaxPost::postToTaxTrans()** ให้ความสำคัญกับค่าของ **\_ledgerDimension**

    [![ตัวอย่างรหัสใบสั่งซื้อที่มีจุดสั่งหยุด](./media/tax-posted-to-wrong-ledger-account-Picture7.png)](./media/tax-posted-to-wrong-ledger-account-Picture7.png)

2. รันการสอบถาม SQL ต่อไปนี้เพื่อค้นหาค่าที่แสดงของบัญชีในฐานข้อมูล ตามรหัสเรกคอร์ดที่บันทึกโดยมิติบัญชีแยกประเภท

    ```sql
    select * from DIMENSIONATTRIBUTEVALUECOMBINATION where recid={the value of _ledgerDimension}
    ```

    [![แสดงค่าของรหัสเรกคอร์ด](./media/tax-posted-to-wrong-ledger-account-Picture8.png)](./media/tax-posted-to-wrong-ledger-account-Picture8.png)

3. ตรวจสอบ callstack เพื่อดูว่า **_ledgerDimension** ถูกมอบหมายจากที่ใด โดยปกติแล้ว ค่านี้จะมาจาก **TmpTaxWorkTrans** ในกรณีนี้ คุณควรเพิ่มจุดสั่งหยุดที่ **TmpTaxWorkTrans::insert()** และ **TmpTaxWorkTrans::update()** เพื่อค้นหาสถานที่ที่มอบหมายค่า

## <a name="determine-whether-customization-exists"></a>ระบุว่ามีการเลือกเองอยู่หรือไม่

หากคุณได้เสร็จสิ้นขั้นตอนในส่วนก่อนหน้านี้แต่ไม่พบปัญหา ให้ระบุว่ามีการเลือกเองอยู่หรือไม่ ถ้าไม่มีการเลือกเองอยู่ ให้สร้างคำขอบริการของ Microsoft เพื่อขอความช่วยเหลือเพิ่มเติม

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
