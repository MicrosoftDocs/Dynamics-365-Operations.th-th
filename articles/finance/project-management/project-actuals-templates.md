---
title: ซิงโครไนส์รายการจริงของโครงการโดยตรงจาก Project Service Automation ไปยังสมุดรายวันการรวมโครงการสำหรับการลงรายการบัญชีใน Finance and Operations
description: หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่ใช้ซิงโครไนส์การนำเข้าจริงของโครงการโดยตรงจาก Microsoft Dynamics 365 Project Service Automation ไปยัง Finance and Operations
author: KimANelson
manager: AnnBe
ms.date: 07/20/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2016-11-28
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 0aeaa1ee4c35ca42a5382b3c7ff3519cba52996c
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 09/30/2019
ms.locfileid: "2250541"
---
# <a name="synchronize-project-actuals-directly-from-project-service-automation-to-the-project-integration-journal-for-posting-in-finance-and-operations"></a><span data-ttu-id="ee343-103">ซิงโครไนส์รายการจริงของโครงการโดยตรงจาก Project Service Automation ไปยังสมุดรายวันการรวมโครงการสำหรับการลงรายการบัญชีใน Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ee343-103">Synchronize project actuals directly from Project Service Automation to the project integration journal for posting in Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="ee343-104">หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่ใช้ในการทำให้ข้อมูลมูลค่าจริงของโครงการจาก Dynamics 365 Project Service Automation ไปยัง Dynamics 365 Finance ตรงกันโดยตรง</span><span class="sxs-lookup"><span data-stu-id="ee343-104">This topic describes the templates and underlying tasks that are used to synchronize project actuals directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

<span data-ttu-id="ee343-105">เท็มเพลตซิงโครไนส์ธุรกรรมจาก Project Service Automation ลงในตารางการจัดเตรียมใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-105">The template synchronizes transactions from Project Service Automation into a staging table in Finance.</span></span> <span data-ttu-id="ee343-106">หลังจากการซิงโครไนส์เสร็จสมบูรณ์ คุณ **ต้อง** นำเข้าข้อมูลจากตารางการจัดเตรียมลงในสมุดรายวันการรวม</span><span class="sxs-lookup"><span data-stu-id="ee343-106">After synchronization is completed, you **must** import the data from the staging table into the integration journal.</span></span>

> [!NOTE]
> - <span data-ttu-id="ee343-107">การรวมมูลค่าจริงของโครงการพร้อมใช้งานเริ่มต้นในรุ่น 8.0.1</span><span class="sxs-lookup"><span data-stu-id="ee343-107">Project actuals integration is available starting in version 8.0.1.</span></span>
> - <span data-ttu-id="ee343-108">ถ้าคุณกำลังใช้ Enterprise Edition 7.3.0 หลังจากที่คุณติดตั้ง KB 4132657 และ KB 4132660 คุณจะสามารถใช้เท็มเพลตเพื่อรวมงานโครงการ ค่าใช้จ่ายประเภทธุรกรรม การประเมินชั่วโมง การประเมินค่าใช้จ่าย และค่าที่เกิดขึ้นจริงได้และสามารถตั้งค่าคอนฟิกฟังก์ชันการล็อคได้</span><span class="sxs-lookup"><span data-stu-id="ee343-108">If you're using Enterprise edition 7.3.0 after you install KB 4132657 and KB 4132660, you will be able to use the templates to integrate project tasks, expense transaction categories, hour estimates, expense estimates, and actuals, and to configure functionality locking.</span></span> <span data-ttu-id="ee343-109">ถ้าคุณต้องตั้งค่าการกระจายการลงบัญชี เราขอแนะนำให้ คุณติดตั้ง KB 4131710 ด้วย</span><span class="sxs-lookup"><span data-stu-id="ee343-109">If you must reset the accounting distributions, we recommend that you also install KB 4131710.</span></span>
> - <span data-ttu-id="ee343-110">ถ้าคุณกำลังใช้รุ่น 7.3.0 และคุณกำลังนำธุรกรรมค่าธรรมเนียมมาจาก Project Service Automation คุณต้องติดตั้ง KB 4345320 เพื่อรวมค่าธรรมเนียมดังกล่าวในใบแจ้งหนี้โครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-110">If you're using version 7.3.0, and you are bringing fee transactions over from Project Service Automation, you must install KB 4345320 in order to include those fees in the project invoice.</span></span>
> - <span data-ttu-id="ee343-111">ถ้าคุณกำลังป้อนยอดภาษีขายในธุรกรรมเวลาหรือค่าใช้จ่ายใน Project Service Automation คุณต้องติดตั้ง Project Service Automation Update 7</span><span class="sxs-lookup"><span data-stu-id="ee343-111">If you're entering sales tax amounts on time or expense transactions in Project Service Automation, you must install Project Service Automation Update 7.</span></span> <span data-ttu-id="ee343-112">มิฉะนั้น ภาษีจริงจะไม่สามารถเชื่อมโยงกับเวลาที่เชื่อมโยงหรือค่าใช้จ่ายจริงได้ และสิ่งเหล่านั้นจะไม่มีการซิงค์กับ Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-112">Otherwise, the tax actuals won't be linked to the associated time or expense actuals, and they won't be synchronized to Finance.</span></span> <span data-ttu-id="ee343-113">สำหรับข้อมูลเพิ่มเติม ติดต่อฝ่ายสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="ee343-113">For more information, contact Support.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="ee343-114">โฟลว์ข้อมูลสำหรับ Project Service Automation ไปยัง Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-114">Data flow for Project Service Automation to Finance</span></span>

<span data-ttu-id="ee343-115">การรวมโซลูชั่นจาก Project Service Automation ไปยัง Finance ใช้คุณลักษณะการรวมข้อมูลเพื่อซิงโครไนส์ข้อมูลระหว่างอินสแตนซ์ของ Project Service Automation และ Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-115">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="ee343-116">เท็มเพลตการรวมที่พร้อมใช้งานกับคุณลักษณะการรวมข้อมูล เปิดใช้งานโฟลว์ของข้อมูลเกี่ยวกับรายการจริงของโครงการจาก Project Service Automation ไปยัง Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-116">The integration templates that are available with the Data integration feature enable the flow of data about project actuals from Project Service Automation to Finance.</span></span>

<span data-ttu-id="ee343-117">ภาพประกอบต่อไปนี้แสดงวิธีการซิงโครไนส์ข้อมูลระหว่าง Project Service Automation และ Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-117">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="ee343-118">[![โฟลว์ข้อมูลสำหรับการรวม Project Service Automation กับ Finance and Operations](./media/ProjectActualsFlow.jpg)](./media/ProjectActualsFlow.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee343-118">[![Data flow for Project Service Automation integration with Finance and Operations](./media/ProjectActualsFlow.jpg)](./media/ProjectActualsFlow.jpg)</span></span>

## <a name="project-actuals-from-project-service-automation"></a><span data-ttu-id="ee343-119">รายการจริงของโครงการจาก Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-119">Project actuals from Project Service Automation</span></span>

### <a name="template-and-tasks"></a><span data-ttu-id="ee343-120">เท็มเพลตและงาน</span><span class="sxs-lookup"><span data-stu-id="ee343-120">Template and tasks</span></span>

<span data-ttu-id="ee343-121">เพื่อเข้าถึงเท็มเพลตที่พร้อมใช้งาน ในศูนย์การจัดการ Microsoft PowerApps เลือก **โครงการ** และจากนั้น ที่มุมขวาบน เลือก **โครงการใหม่** เพื่อเลือกเท็มเพลตสาธารณะ</span><span class="sxs-lookup"><span data-stu-id="ee343-121">To access the available templates, in the Microsoft PowerApps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="ee343-122">เท็มเพลตและงานพื้นฐานต่อไปนี้ถูกใช้ซิงโครไนส์ข้อมูลจริงของโครงการจาก Project Service Automation ไปยัง Finance:</span><span class="sxs-lookup"><span data-stu-id="ee343-122">The following template and underlying tasks are used to synchronize project actuals from Project Service Automation to Finance:</span></span>

- <span data-ttu-id="ee343-123">**ชื่อของเท็มเพลตในการรวมข้อมูล:** รายการจริงของโครงการ (PSA ไปยัง Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ee343-123">**Name of the template in Data integration:** Project actuals (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="ee343-124">**ชื่อของงานในโครงการ:**</span><span class="sxs-lookup"><span data-stu-id="ee343-124">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="ee343-125">จริง</span><span class="sxs-lookup"><span data-stu-id="ee343-125">Actuals</span></span>
    - <span data-ttu-id="ee343-126">TransactionConnections</span><span class="sxs-lookup"><span data-stu-id="ee343-126">TransactionConnections</span></span>

### <a name="entity-set"></a><span data-ttu-id="ee343-127">การตั้งค่าเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee343-127">Entity set</span></span>

| <span data-ttu-id="ee343-128">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-128">Project Service Automation</span></span> | <span data-ttu-id="ee343-129">การเงิน</span><span class="sxs-lookup"><span data-stu-id="ee343-129">Finance</span></span>                                   |
|----------------------------|----------------------------------------------------------|
| <span data-ttu-id="ee343-130">จริง</span><span class="sxs-lookup"><span data-stu-id="ee343-130">Actuals</span></span>                    | <span data-ttu-id="ee343-131">เอนทิตี้การรวมสำหรับการนำเข้าจริงของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-131">Integration entity for project actuals</span></span>                   |
| <span data-ttu-id="ee343-132">การเชื่อมต่อธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee343-132">Transaction Connections</span></span>    | <span data-ttu-id="ee343-133">เอนทิตี้การรวมสำหรับความสัมพันธ์ของธุรกรรมของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-133">Integration entity for project transaction relationships</span></span> |

### <a name="entity-flow"></a><span data-ttu-id="ee343-134">ขั้นตอนเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee343-134">Entity flow</span></span>

<span data-ttu-id="ee343-135">ข้อมูลจริงของโครงการถูกจัดการใน Project Service Automation และถูกซิงโครไนส์ไปยังสมุดรายวันการรวมของโครงการใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-135">Project actuals are managed in Project Service Automation, and they are synchronized to the project integration journal in Finance.</span></span> <span data-ttu-id="ee343-136">การบัญชีจะถูกใช้โดยขึ้นอยู่กับการตั้งค่าการลงรายการบัญชีและมิติทางการเงินเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ee343-136">The accounting will be applied based on default financial dimensions and the posting setup.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="ee343-137">ข้อกำหนดเบื้องต้น</span><span class="sxs-lookup"><span data-stu-id="ee343-137">Prerequisites</span></span>

<span data-ttu-id="ee343-138">ก่อนที่การซิงโครไนส์ของรายการจริงจะเกิดขึ้นได้ คุณต้องตั้งค่าคอนฟิกพารามิเตอร์การรวม Project Service Automation และซิงโครไนส์โครงการ งานโครงการ และประเภทธุรกรรมค่าใช้จ่ายโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-138">Before synchronization of actuals can occur, you must configure the Project Service Automation integration parameters and synchronize projects, project tasks, and project expense transaction categories.</span></span>

### <a name="power-query"></a><span data-ttu-id="ee343-139">Power Query</span><span class="sxs-lookup"><span data-stu-id="ee343-139">Power Query</span></span>

<span data-ttu-id="ee343-140">ในเท็มเพลตรายการจริงของโครงการ คุณต้องใช้ Microsoft Power Query for Excel เพื่อทำให้งานเหล่านี้เสร็จสมบูรณ์:</span><span class="sxs-lookup"><span data-stu-id="ee343-140">In the project actuals template, you must use Microsoft Power Query for Excel to complete these tasks:</span></span>

- <span data-ttu-id="ee343-141">แปลงชนิดของธุรกรรมใน Project Service Automation เป็นชนิดของธุรกรรมที่ถูกต้องใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-141">Transform the transaction type in Project Service Automation to the correct transaction type in Finance.</span></span> <span data-ttu-id="ee343-142">มีการกำหนดการแปลงนี้ในเท็มเพลตรายการจริงของโครงการ (PSA ไปยัง Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ee343-142">This transformation is already defined in the Project actuals (PSA to Fin and Ops) template.</span></span>
- <span data-ttu-id="ee343-143">แปลงชนิดของการเรียกเก็บเงินใน Project Service Automation เป็นชนิดของการเรียกเก็บเงินที่ถูกต้องใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-143">Transform the billing type in Project Service Automation to the correct billing type in Finance.</span></span> <span data-ttu-id="ee343-144">มีการกำหนดการแปลงนี้ในเท็มเพลตรายการจริงของโครงการ (PSA ไปยัง Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ee343-144">This transformation is already defined in the Project actuals (PSA to Fin and Ops) template.</span></span> <span data-ttu-id="ee343-145">จากนั้น ชนิดการเรียกเก็บเงินจะถูกแม็ปไปยังลักษณะของรายการตามการตั้งค่าคอนฟิกในหน้า **พารามิเตอร์การรวม Project Service Automation**</span><span class="sxs-lookup"><span data-stu-id="ee343-145">The billing type is then mapped to the line property, based on the configuration on the **Project Service Automation integration parameters** page.</span></span>
- <span data-ttu-id="ee343-146">กรองหน่วยงานในองค์กรของทรัพยากรเฉพาะที่จะถูกซิงโครไนส์กับเท็มเพลตนี้</span><span class="sxs-lookup"><span data-stu-id="ee343-146">Filter to specific resource organizational units that must be synchronized with this template.</span></span>
- <span data-ttu-id="ee343-147">ถ้ารายการจริงของเวลาระหว่างบริษัทหรือค่าใช้จ่ายระหว่างบริษัทจะถูกซิงโครไนส์กับ Finance คุณต้องแปลงหน่วยงานในองค์กรในสัญญาเป็นนิติบุคคลที่ถูกต้องใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-147">If intercompany time or intercompany expense actuals will be synchronized to Finance, you must transform the contract organizational unit to the correct legal entity in Finance.</span></span> <span data-ttu-id="ee343-148">ในเท็มเพลตรายการจริงของโครงการ (PSA ไปยัง Fin and Ops) คอลัมน์ที่เป็นเงื่อนไขถูกกำหนดโดยยึดตามข้อมูลสาธิต</span><span class="sxs-lookup"><span data-stu-id="ee343-148">In the Project actuals (PSA to Fin and Ops) template, a conditional column is defined based on demo data.</span></span> <span data-ttu-id="ee343-149">คุณต้องอัพเดตคอลัมน์แบบมีเงื่อนไขที่แทรกล่าสุดไปยังนิติบุคคลที่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="ee343-149">You must update the last inserted conditional column to the correct legal entities.</span></span> <span data-ttu-id="ee343-150">มิฉะนั้น ความล้มเหลวในการรวมอาจผิดพลาด หรือธุรกรรมจริงที่ไม่ถูกต้องอาจถูกนำเข้าไปยัง Finance อย่างใดอย่างหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="ee343-150">Otherwise, either an integration error might occur, or incorrect actual transactions might be imported into Finance.</span></span>
- <span data-ttu-id="ee343-151">ถ้ารายการจริงของเวลาระหว่างบริษัทหรือค่าใช้จ่ายระหว่างบริษัท จะไม่ถูกซิงโครไนส์กับ Finance คุณต้องลบคอลัมน์แบบมีเงื่อนไขที่แทรกล่าสุดจากเท็มเพลตของคุณ</span><span class="sxs-lookup"><span data-stu-id="ee343-151">If intercompany time or intercompany expense actuals won't be synchronized to Finance, you must delete the last inserted conditional column from your template.</span></span> <span data-ttu-id="ee343-152">มิฉะนั้น ความล้มเหลวในการรวมอาจผิดพลาด หรือธุรกรรมจริงที่ไม่ถูกต้องอาจถูกนำเข้าไปยัง Finance อย่างใดอย่างหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="ee343-152">Otherwise, either an integration error might occur, or incorrect actual transactions might be imported into Finance.</span></span>

#### <a name="contract-organizational-unit"></a><span data-ttu-id="ee343-153">หน่วยงานในองค์กรในสัญญา</span><span class="sxs-lookup"><span data-stu-id="ee343-153">Contract organizational unit</span></span>
<span data-ttu-id="ee343-154">ในการอัพเดตคอลัมน์แบบมีเงื่อนไขที่แทรกในเท็มเพลต คลิกที่ลูกศร **แม็ป** เพื่อเปิดการแม็ป</span><span class="sxs-lookup"><span data-stu-id="ee343-154">To update the inserted conditional column in the template, click the **Map** arrow to open the mapping.</span></span> <span data-ttu-id="ee343-155">เลือกลิงก์ **การกรองข้อมูลและแบบสอบถามขั้นสูง** เพื่อเปิด Power Query</span><span class="sxs-lookup"><span data-stu-id="ee343-155">Select the **Advanced Query and Filtering** link to open Power Query.</span></span>

- <span data-ttu-id="ee343-156">ถ้าคุณกำลังใช้เท็มเพลตรายการจริงของโครงการเริ่มต้น (PSA ไปยัง Fin and Ops) ใน Power Query เลือกส่วน **เงื่อนไขที่แทรก** ล่าสุด จากส่วน **ขั้นตอนที่ใช้**</span><span class="sxs-lookup"><span data-stu-id="ee343-156">If you're using the default Project actuals (PSA to Fin and Ops) template, in Power Query, select the last **Inserted Condition** from the **Applied Steps** section.</span></span> <span data-ttu-id="ee343-157">ในรายการ **ฟังก์ชัน** แทนที่ **USSI** ด้วยชื่อของนิติบุคคลที่ควรจะใช้กับการรวม</span><span class="sxs-lookup"><span data-stu-id="ee343-157">In the **Function** entry, replace **USSI** with the name of the legal entity that should be used with the integration.</span></span> <span data-ttu-id="ee343-158">เพิ่มเงื่อนไขเพิ่มเติมไปยังรายการ **ฟังก์ชัน** ตามที่คุณต้องการ และปรับปรุงเงื่อนไข **อื่น** จาก **USMF** เพื่อแก้ไขนิติบุคคล</span><span class="sxs-lookup"><span data-stu-id="ee343-158">Add additional conditions to the **Function** entry as you require, and update the **else** condition from **USMF** to the correct legal entity.</span></span>
- <span data-ttu-id="ee343-159">ถ้าคุณกำลังสร้างเท็มเพลตใหม่ คุณต้องเพิ่มคอลัมน์เพื่อสนับสนุนเวลาและค่าใช้จ่ายระหว่างบริษัท</span><span class="sxs-lookup"><span data-stu-id="ee343-159">If you're creating a new template, you must add the column to support intercompany time and expenses.</span></span> <span data-ttu-id="ee343-160">เลือก **เพิ่มคอลัมน์แบบมีเงื่อนไข** และป้อนชื่อสำหรับคอลัมน์ เช่น **LegalEntity**</span><span class="sxs-lookup"><span data-stu-id="ee343-160">Select **Add Conditional Column**, and enter a name for the column, such as **LegalEntity**.</span></span> <span data-ttu-id="ee343-161">ป้อนเงื่อนไขสำหรับคอลัมน์ ที่ซึ่งถ้า **msdyn\_contractorganizationalunitid.msdyn\_ชื่อ** คือ \<หน่วยงาน\> แล้ว \<ป้อนนิติบุคคล\>; นอกจากนั้นเป็น null</span><span class="sxs-lookup"><span data-stu-id="ee343-161">Enter a condition for the column, where, if **msdyn\_contractorganizationalunitid.msdyn\_name** is \<organizational unit\>, then \<enter the legal entity\>; else null.</span></span>

### <a name="template-mapping-in-data-integration"></a><span data-ttu-id="ee343-162">การแม็ปเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee343-162">Template mapping in Data integration</span></span>

<span data-ttu-id="ee343-163">ภาพประกอบต่อไปนี้แสดงตัวอย่างของการแม็ปงานเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee343-163">The following illustrations show an example of the template task mapping in Data integration.</span></span> <span data-ttu-id="ee343-164">การแม็ปแสดงข้อมูลฟิลด์ที่จะถูกซิงโครไนส์จาก Project Service Automation ไปยัง Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-164">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="ee343-165">[![การแม็ปเท็มเพลต](./media/ActualsMapping.jpg)](./media/ActualsMapping.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee343-165">[![Template mapping](./media/ActualsMapping.jpg)](./media/ActualsMapping.jpg)</span></span>

<span data-ttu-id="ee343-166">[![การแม็ปเท็มเพลต](./media/TransactionConnections.jpg)](./media/TransactionConnections.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee343-166">[![Template mapping](./media/TransactionConnections.jpg)](./media/TransactionConnections.jpg)</span></span>

## <a name="import-from-staging-table-after-integration-from-project-service-automation"></a><span data-ttu-id="ee343-167">นำเข้าจากตารางการจัดเตรียมหลังจากการรวมจาก Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-167">Import from staging table after integration from Project Service Automation</span></span>

<span data-ttu-id="ee343-168">การนำเข้าจากกระบวนการประจำงวดของตารางการจัดเตรียม ต้องถูกรันหลังจากการซิงโครไนส์ของรายการจริงจาก Project Service Automation ไปยัง Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-168">The Import from staging table periodic process must be run after the synchronization of actuals from Project Service Automation to Finance.</span></span> <span data-ttu-id="ee343-169">กระบวนการนี้จะนำเข้าธุรกรรมโครงการจากตารางการจัดเตรียมไปยังสมุดรายวันการรวม Project Service Automation ที่มีการใช้การลงบัญชี และสามารถลงรายบัญชีธุรกรรมที่นำเข้าได้</span><span class="sxs-lookup"><span data-stu-id="ee343-169">This process will import the project transactions from the staging table into the Project Service Automation integration journal, where the accounting is applied and the imported transactions can be posted.</span></span> <span data-ttu-id="ee343-170">เราขอแนะนำให้คุณรันกระบวนการนี้ในโหมดชุดงาน; และอาจเลือกที่จะถูกตั้งค่าให้รันเป็นชุดงานที่เกิดซ้ำ</span><span class="sxs-lookup"><span data-stu-id="ee343-170">We recommend that you run this process in batch mode; it can optionally be set up to run as a recurring batch.</span></span>

## <a name="update-actuals-from-finance"></a><span data-ttu-id="ee343-171">อัพเดตรายการที่เกิดขึ้นจริงจาก Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-171">Update actuals from Finance</span></span>

### <a name="template-and-tasks"></a><span data-ttu-id="ee343-172">เท็มเพลตและงาน</span><span class="sxs-lookup"><span data-stu-id="ee343-172">Template and tasks</span></span>

<span data-ttu-id="ee343-173">เท็มเพลตและงานพื้นฐานต่อไปนี้จะถูกใช้ในการซิงโครไนส์หมายเลขใบสำคัญและภาษีขายสำหรับธุรกรรมโครงการที่ลงรายการบัญชีจาก Finance ไปยัง Project Service Automation:</span><span class="sxs-lookup"><span data-stu-id="ee343-173">The following template and underlying tasks are used to synchronize the voucher number and sales taxes for posted project transactions from Finance to Project Service Automation:</span></span>

- <span data-ttu-id="ee343-174">**ชื่อของเท็มเพลตในการรวมข้อมูล:** การอัพเดตรายการจริงของโครงการ (Fin Ops ไปยัง PSA)</span><span class="sxs-lookup"><span data-stu-id="ee343-174">**Name of the template in Data integration:** Project actuals update (Fin Ops to PSA)</span></span>
- <span data-ttu-id="ee343-175">**ชื่อของงานในโครงการ:**</span><span class="sxs-lookup"><span data-stu-id="ee343-175">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="ee343-176">จริง</span><span class="sxs-lookup"><span data-stu-id="ee343-176">Actuals</span></span> 
    - <span data-ttu-id="ee343-177">TransactionConnections</span><span class="sxs-lookup"><span data-stu-id="ee343-177">TransactionConnections</span></span>

### <a name="entity-set"></a><span data-ttu-id="ee343-178">การตั้งค่าเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee343-178">Entity set</span></span>

| <span data-ttu-id="ee343-179">การเงิน</span><span class="sxs-lookup"><span data-stu-id="ee343-179">Finance</span></span>                                                  | <span data-ttu-id="ee343-180">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-180">Project Service Automation</span></span> |
|----------------------------------------------------------|----------------------------|
| <span data-ttu-id="ee343-181">เอนทิตี้การรวมสำหรับการนำเข้าจริงของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-181">Integration entity for project actuals</span></span>                   | <span data-ttu-id="ee343-182">จริง</span><span class="sxs-lookup"><span data-stu-id="ee343-182">Actuals</span></span>                    |
| <span data-ttu-id="ee343-183">เอนทิตี้การรวมสำหรับความสัมพันธ์ของธุรกรรมของโครงการ</span><span class="sxs-lookup"><span data-stu-id="ee343-183">Integration entity for project transaction relationships</span></span> | <span data-ttu-id="ee343-184">การเชื่อมต่อธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="ee343-184">Transaction Connections</span></span>    |

### <a name="entity-flow"></a><span data-ttu-id="ee343-185">ขั้นตอนเอนทิตี้</span><span class="sxs-lookup"><span data-stu-id="ee343-185">Entity flow</span></span>

<span data-ttu-id="ee343-186">ข้อมูลจริงของโครงการถูกจัดการใน Project Service Automation และถูกซิงโครไนส์ไปยังสมุดรายวันการรวมของโครงการใน Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-186">Project actuals are managed in Project Service Automation, and they are synchronized to the project integration journal in Finance.</span></span> <span data-ttu-id="ee343-187">หลังจากที่ลงรายการบัญชีรายการจริงใน Finance จะมีการปรับปรุงใน Project Service Automation ที่มีหมายเลขใบสำคัญจาก Finance</span><span class="sxs-lookup"><span data-stu-id="ee343-187">After actuals are posted in Finance, they are updated in Project Service Automation with the voucher number from Finance.</span></span> <span data-ttu-id="ee343-188">ถ้าภาษีขายถูกเพิ่มลงใน Finance รายการจริงของภาษีใหม่จะถูกสร้างใน Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-188">If sales taxes were added in Finance, new tax actuals are created in Project Service Automation.</span></span>

### <a name="power-query"></a><span data-ttu-id="ee343-189">Power Query</span><span class="sxs-lookup"><span data-stu-id="ee343-189">Power Query</span></span>

<span data-ttu-id="ee343-190">ในเท็มเพลตการปรับปรุงรายการจริงของโครงการ คุณต้องใช้ Power Query เพื่อทำให้งานเหล่านี้เสร็จสมบูรณ์:</span><span class="sxs-lookup"><span data-stu-id="ee343-190">In the project actuals update template, you must use Power Query to complete these tasks:</span></span>

- <span data-ttu-id="ee343-191">แปลงชนิดของธุรกรรมใน Finance เป็นชนิดของธุรกรรมที่ถูกต้องใน Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-191">Transform the transaction type in Finance to the correct transaction type in Project Service Automation.</span></span> <span data-ttu-id="ee343-192">มีการกำหนดการแปลงนี้แล้วในเท็มเพลตการปรับปรุงรายการจริงของโครงการ (Fin and Ops ไปยัง PSA)</span><span class="sxs-lookup"><span data-stu-id="ee343-192">This transformation is already defined in the Project actuals update (Fin Ops to PSA) template.</span></span>
- <span data-ttu-id="ee343-193">แปลงชนิดของการเรียกเก็บเงินใน Finance เป็นชนิดของการเรียกเก็บเงินที่ถูกต้องใน Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-193">Transform the billing type in Finance to the correct billing type in Project Service Automation.</span></span> <span data-ttu-id="ee343-194">มีการกำหนดการแปลงนี้แล้วในเท็มเพลตการปรับปรุงรายการจริงของโครงการ (Fin and Ops ไปยัง PSA)</span><span class="sxs-lookup"><span data-stu-id="ee343-194">This transformation is already defined in the Project actuals update (Fin Ops to PSA) template.</span></span>

### <a name="template-mapping-in-data-integration"></a><span data-ttu-id="ee343-195">การแม็ปเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee343-195">Template mapping in Data integration</span></span>

<span data-ttu-id="ee343-196">ภาพประกอบต่อไปนี้แสดงตัวอย่างของการแม็ปงานเท็มเพลตในการรวมข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ee343-196">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="ee343-197">การแม็ปแสดงข้อมูลฟิลด์ที่จะถูกซิงโครไนส์จาก Finance ไปยัง Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ee343-197">The mapping shows the field information that will be synchronized from Finance to Project Service Automation.</span></span>

<span data-ttu-id="ee343-198">[![การแม็ปเท็มเพลต](./media/ActualsUpdateMapping.jpg)](./media/ActualsUpdateMapping.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee343-198">[![Template mapping](./media/ActualsUpdateMapping.jpg)](./media/ActualsUpdateMapping.jpg)</span></span>

<span data-ttu-id="ee343-199">[![การแม็ปเท็มเพลต](./media/TransactionConnectionsUpdate.jpg)](./media/TransactionConnectionsUpdate.jpg)</span><span class="sxs-lookup"><span data-stu-id="ee343-199">[![Template mapping](./media/TransactionConnectionsUpdate.jpg)](./media/TransactionConnectionsUpdate.jpg)</span></span>
