---
title: สภาพแวดล้อมของบริการ
description: บทความนี้มีข้อมูลเกี่ยวกับสภาพแวดล้อมการบริการสำหรับการออกใบแจ้งหนี้อิเล็กทรอนิกส์และอธิบายวิธีการตั้งค่า
author: dkalyuzh
ms.date: 02/28/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: dkalyuzh
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: 8c743c5b2fbc7dcc3ae04fa4d7ca0e65de6c2507
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 06/03/2022
ms.locfileid: "8901260"
---
# <a name="service-environments"></a>สภาพแวดล้อมของบริการ

[!include [banner](../includes/banner.md)]

สภาพแวดล้อมการบริการคือ พาร์ติชันเชิงตรรกะที่ถูกสร้างขึ้นเพื่อสนับสนุนคุณลักษณะมาตรฐานโลกและเอกสารที่สอดคล้องกันที่ประมวลผลในบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์ ข้อมูลลับด้านความปลอดภัยและใบรับรองดิจิทัล และสิทธิ์การเข้าถึง (การควบคุม) ต้องตั้งค่าคอนฟิกที่ระดับสภาพแวดล้อมการบริการ

คุณสามารถสร้างสภาพแวดล้อมการบริการหลายรายการตามที่คุณต้องการ สภาพแวดล้อมการบริการทั้งหมดที่คุณสร้างจะไม่ขึ้นต่อกัน ตามแนวทางปฏิบัติ ขอแนะนำให้คุณสร้างสภาพแวดล้อมการบริการอย่างน้อยสองสภาพแวดล้อม ดังนี้

- สภาพแวดล้อมหนึ่งเพื่อวัตถุประสงค์ในการพัฒนาหลักและการตรวจสอบความถูกต้อง โดยทั่วไป สภาพแวดล้อมนี้จะเป็นสภาพแวดล้อมการทดสอบการยอมรับของผู้ใช้ (UAT)
- สภาพแวดล้อมหนึ่งเพื่อวัตถุประสงค์ในการทำงานจริง สภาพแวดล้อมนี้โดยปกติแล้วจะเป็นสภาพแวดล้อมการทำงานจริง

การแบ่งพาร์ติชันชนิดนี้ช่วยให้มั่นใจว่ากระบวนการออกใบแจ้งหนี้อิเล็กทรอนิกส์ได้รับการตรวจสอบความถูกต้องและปรับค่าใน sandbox ก่อนที่จะไปยังการทำงานจริง

คุณต้องสร้างและรักษาสภาพแวดล้อมการบริการใน Regulatory Configuration Service (RCS) เมื่อสภาพแวดล้อมการบริการพร้อมแล้ว ต้องมีการเผยแพร่ไปยังบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์ กระบวนการเผยแพร่จะส่งพารามิเตอร์ของสภาพแวดล้อมการบริการจากอินสแตนซ์ RCS ไปยังบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์

หากคุณไม่ได้ทำกระบวนการเผยแพร่ให้เสร็จสิ้น หลังจากที่คุณสร้างสภาพแวดล้อมการบริการใหม่หรือปรับปรุงสภาพแวดล้อมการบริการที่มีอยู่ ( ตัวอย่างเช่น โดยการเพิ่มหรือเอาผู้ใช้ออก หรือข้อมูลลับของ Microsoft Azure Key Azure) การเปลี่ยนแปลงจะไม่มีผล เฉพาะสภาพแวดล้อมที่เผยแพร่เท่านั้นที่สามารถเข้าถึงได้โดย Dynamics 365 Finance หรือ Dynamics 365 Supply Chain Management

## <a name="service-environment-statuses"></a>สถานะสภาพแวดล้อมการบริการ

สภาพแวดล้อมการให้บริการสามารถจัดการผ่านสถานะได้ คุณสามารถดูสถานะของสภาพแวดล้อมในหน้า **สภาพแวดล้อมการบริการ** ได้ สถานะที่พร้อมใช้งานมีดังต่อไปนี้

- **ไมได้เผยแพร่** – สร้างสภาพแวดล้อมแล้ว แต่ยังไม่ได้เผยแพร่
- **เผยแพร่แล้ว** – สภาพแวดล้อมได้รับการเผยแพร่ไปยังบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์เแล้ว
- **มีการเปลี่ยนแปลง** – แอททริบิวต์ของสภาพแวดล้อมที่เผยแพร่มีการเปลี่ยนแปลง แต่การเปลี่ยนแปลงยังไม่ได้รับการเผยแพร่

## <a name="users"></a>ผู้ใช้

สภาพแวดล้อมการบริการแต่ละรายการต้องแสดงรายชื่อผู้ใช้ที่สามารถเชื่อมต่อกับการออกใบแจ้งหนี้งอิเล็กทรอนิกส์จาก Finance หรือ Supply Chain Management

## <a name="applications"></a>ใบสมัคร

ในบางสถานการณ์ แอปพลิเคชันอื่นที่ไม่ใช่ Finance หรือ Supply Chain Management อาจต้องเชื่อมต่อกับบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์เพื่อส่งเอกสารอิเล็กทรอนิกส์ที่จะประมวลผลเพิ่มเติมหรือเพื่อดึงข้อมูล เช่น สถานะการส่งเอกสาร ในสถานการณ์เหล่านี้ ควรกําหนดแอปพลิเคชันไว้ในรายการของแอปพลิเคชัน ด้วยวิธีนี้ แอปจะสามารถเข้าถึงบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์ได้ แอปพลิเคชันต้องมีการลงทะเบียนเป็นแอปพลิเคชันใน Azure Active Directory (Azure AD) และต้องใช้รหัสออบเจ็กต์เพื่อระบุแอปพลิเคชันนั้นด้วย 

เนื่องจาก Microsoft ต้องการการควบคุมความปลอดภัยระดับสูงผ่านแอปพลิเคชันที่สามารถเชื่อมต่อกับบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์ คุณต้องติดต่อ Microsoft ที่ <DGXRegulatoryservicesengineering@service.microsoft.com> และให้รายละเอียดต่อไปนี้ของแอปพลิเคชันของคุณ

- Azure AD รหัสผู้เช่า
- รหัสสภาพแวดล้อม Microsoft Dynamics Lifecycle Services (LCS)
- รหัสแอปพลิเคชัน (รหัสไคลเอนต์)
- รหัสออบเจ็กต์
- การให้เหตุผลและคำอธิบายระดับสูงของแอปพลิเคชัน

Microsoft จะประเมินคำขอและลงทะเบียนแอปพลิเคชันในเครื่องบันทึกเงินสดที่มีการรักษาความปลอดภัย เพื่อให้แน่ใจว่าแอปพลิเคชันนี้สามารถดําเนินการกับการออกใบแจ้งหนี้อิเล็กทรอนิกส์ได้

## <a name="number-sequences"></a>ลำดับหมายเลข

ถ้าสถานการณ์ของคุณต้องใช้ลำดับหมายเลข (ตัวอย่างเช่น ในชื่อไฟล์) คุณสามารถใช้ลำดับหมายเลขที่กําหนดไว้เฉพาะสภาพแวดล้อมหนึ่งๆ ได้ แต่สามารถใช้ลำดับหมายเลขนั้นระหว่างคุณลักษณะมาตรฐานโลกต่างๆ หรือคุณลักษณะมาตรฐานโลกเฉพาะได้ หลังจากกําหนดลำดับหมายเลขแล้ว คุณสามารถใช้ลำดับหมายเลขนั้นในตัวแปรและไปป์ไลน์การประมวลผลได้ เมื่อต้องการติดตามการใช้งาน ในหน้า **ลำดับหมายเลข** ให้ค้นหาค่า **ปัจจุบัน** ของพารามิเตอร์ **ใช้อยู่**

### <a name="working-with-number-sequences"></a>การทำงานกับลำดับหมายเลข
ในหน้า **ลำดับหมายเลข**: 

- เลือก **ใหม่** เพื่อสร้างลำดับหมายเลข จากนั้นป้อนชื่อและคำอธิบาย 
- เลือก **ลบ** เพื่อลบลำดับหมายเลข ถ้าไม่ได้ใช้อีกต่อไป
- คุณไม่ต้องเลือก **เผยแพร่** ในบานหน้าต่างการดำเนินการเพื่อเผยแพร่การเปลี่ยนแปลงไปยังลำดับหมายเลข การอัปเดตเกิดขึ้นโดยอัตโนมัติ

## <a name="create-a-key-vault-reference"></a>สร้างการอ้างอิง Key Vault

1. ลงชื่อเข้าใช้บัญชี RCS ของคุณ
2. ในพื้นที่ทำงาน **คุณลักษณะมาตรฐานโลก** ในส่วน **สภาพแวดล้อม** ให้เลือกไทล์ **การออกใบแจ้งหนี้อิเล็กทรอนิกส์**
3. บนหน้า **การตั้งค่าสภาพแวดล้อม** บนบานหน้าต่างการดำเนินการ ให้เลือก **สภาพแวดล้อมการบริการ**
4. บนหน้า **สภาพแวดล้อมการบริการ** บนบานหน้าต่างการดำเนินการ ให้เลือก **พารามิเตอร์ Key Vault**
5. บนหน้า **พารามิเตอร์ Key Vault** เลือก **ใหม่** เพื่อสร้างการอ้างอิง Key Vault
6. ในฟิลด์ **ชื่อ** ป้อนชื่อสำหรับการอ้างอิง Key Vault
7. ในฟิลด์ **คำอธิบาย** ให้ป้อนคำอธิบาย
8. ในฟิลด์ **Key Vault URI** ให้วาง Key Vault URI จาก Key Vault (`https://<your key vault>.vault.azure.net/`) สำหรับข้อมูลเพิ่มเติม ดูที่ [สร้าง Azure Key Vault ในพอร์ทัล Azure](e-invoicing-create-azure-key-vault-azure-portal.md)
9. เลือก **บันทึก**
    
## <a name="create-a-secret-for-the-storage-account-secret-token"></a>สร้างข้อมูลลับของโทเค็นข้อมูลลับบัญชีที่เก็บข้อมูล

1. บนหน้า **พารามิเตอร์ Key Vault** ให้เลือก การอ้างอิง Key Vault ที่คุณสร้างในขั้นตอนก่อนหน้า จากนั้นในส่วน **ใบรับรอง** ให้เลือก **เพิ่ม**
2. ในฟิลด์ **ชื่อ** ป้อนชื่อข้อมูลลับของบัญชีที่จัดเก็บ ชื่อนี้ควรตรงกับข้อมูลลับ Key Vault ที่เก็บโทเค็นลายเซ็นการเข้าถึงที่ใช้ร่วมกัน (SAS) ของที่เก็บข้อมูล สำหรับข้อมูลเพิ่มเติม ดูที่ [สร้างบัญชีที่เก็บข้อมูล Azure ในพอร์ทัล Azure](e-invoicing-create-azure-storage-account-azure-portal.md) 
3. ในฟิลด์ **คำอธิบาย** ให้ป้อนคำอธิบาย
4. ในฟิลด์ **ชนิด** เลือก **ข้อมูลลับ**
5. เลือก **บันทึก**
    
## <a name="create-a-service-environment"></a>สร้างสภาพแวดล้อมการบริการ

1. บนหน้า **สภาพแวดล้อมการบริการ** ให้เลือก **ใหม่** เพื่อสร้างสภาพแวดล้อมการบริการ
2. ในฟิลด์ **ชื่อ** ป้อนชื่อของสภาพแวดล้อมการออกใบแจ้งหนี้อิเล็กทรอนิกส์
3. ในฟิลด์ **คำอธิบาย** ให้ป้อนคำอธิบาย
4. ในฟิลด์ **ข้อมูลลับของที่จัดเก็บโทเค็น SAS** ให้เลือกชื่อของความลับของบัญชีจัดเก็บที่ต้องใช้เพื่อตรวจสอบสิทธิ์ในการเข้าถึงบัญชีที่เก็บข้อมูล
5. ในส่วน **ผู้ใช้** ให้เลือก **เพิ่ม** เพื่อเพิ่มผู้ใช้ที่ได้รับอนุญาตให้ส่งใบแจ้งหนี้อิเล็กทรอนิกส์ผ่านสภาพแวดล้อม และเชื่อมต่อกับบัญชีที่เก็บข้อมูล
6. ในฟิลด์ **รหัสผู้ใช้** ให้ป้อนนามแฝงของผู้ใช้ 
7. ในฟิลด์ **อีเมล** ป้อนอยู่อีเมลของผู้ใช้
8. เลือก **บันทึก**
9. ในบานหน้าต่างการดำเนินการ ให้เลือก **เผยแพร่** เพื่อเผยแพร่สภาพแวดล้อมไปยังบริการออกใบแจ้งหนี้อิเล็กทรอนิกส์ ตรวจสอบว่าค่าของฟิลด์ **สถานะ** ถูกเปลี่ยนเป็น **เผยแพร่แล้ว**
