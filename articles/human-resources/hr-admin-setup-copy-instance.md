---
title: คัดลอกอินสแตนซ์
description: คุณสามารถใช้ Microsoft Dynamics Lifecycle Services (LCS) เพื่อคัดลอกฐานข้อมูล Microsoft Dynamics 365 Human Resources ไปยังสภาพแวดล้อม Sandbox
author: andreabichsel
manager: AnnBe
ms.date: 07/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-human-resources
ms.technology: ''
ms.search.form: SystemAdministrationWorkspaceForm
audience: Application User
ms.reviewer: anbichse
ms.search.scope: Human Resources
ms.custom: 7521
ms.assetid: ''
ms.search.region: Global
ms.author: anbichse
ms.search.validFrom: 2020-02-03
ms.dyn365.ops.version: Human Resources
ms.openlocfilehash: 6b52b696d323df6bafead2418ae322d1a9cdf64a
ms.sourcegitcommit: ec4df354602c20f48f8581bfe5be0c04c66d2927
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/19/2020
ms.locfileid: "3706239"
---
# <a name="copy-an-instance"></a>คัดลอกอินสแตนซ์

คุณสามารถใช้ Microsoft Dynamics Lifecycle Services (LCS) เพื่อคัดลอกฐานข้อมูล Microsoft Dynamics 365 Human Resources ไปยังสภาพแวดล้อม Sandbox ถ้าคุณมีสภาพแวดล้อม Sandbox อื่นคุณยังสามารถคัดลอกฐานข้อมูลจากสภาพแวดล้อมดังกล่าวไปยังสภาพแวดล้อม Sandbox ที่กำหนดเป้าหมาย

เมื่อต้องการคัดลอกอินสแตนซ์ ให้ใช้คำแนะนำต่อไปนี้:

- อินสแตนซ์ทรัพยากรบุคคลที่คุณต้องการเขียนทับต้องเป็นสภาพแวดล้อม sandbox

- สภาพแวดล้อมที่คุณกำลังคัดลอกมาจากและไปถึง ต้องอยู่ในภูมิภาคเดียวกัน คุณไม่สามารถคัดลอกข้ามภูมิภาคได้

- คุณต้องเป็นผู้ดูแลระบบในสภาพแวดล้อมเป้าหมายเพื่อให้คุณสามารถลงชื่อเข้าใช้สู่ระบบได้หลังจากการคัดลอกอินสแตนซ์แล้ว

- เมื่อคุณคัดลอกฐานข้อมูลทรัพยากรบุคคล คุณจะไม่คัดลอกองค์ประกอบ (แอปหรือข้อมูล) ที่มีอยู่ในสภาพแวดล้อม Microsoft Power Apps สำหรับข้อมูลเกี่ยวกับการคัดลอกองค์ประกอบในสภาพแวดล้อม Power Apps ให้ดูที่ [คัดลอกสภาพแวดล้อม](https://docs.microsoft.com/power-platform/admin/copy-environment) สภาพแวดล้อม Power Apps ที่คุณต้องการเขียนทับต้องเป็นสภาพแวดล้อม Sandbox คุณต้องเป็นผู้ดูแลระบบผู้เช่าทั่วโลกเพื่อเปลี่ยนสภาพแวดล้อมการใช้จริง Power Apps ไปยังสภาพแวดล้อม Sandbox สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการเปลี่ยนสภาพแวดล้อม ให้ดู Power Apps [สลับอินสแตนซ์](https://docs.microsoft.com/dynamics365/admin/switch-instance)

- ถ้าคุณคัดลอกอินสแตนซ์ไปยังสภาพแวดล้อม Sandbox และต้องการรวมสภาพแวดล้อม Sandbox กับ Common Data Serviceคุณต้องนำฟิลด์ที่กำหนดเองไปใช้กับเอนทิตี้ Common Data Service ใหม่อีกครั้ง ดูที่ [ใช้ฟิลด์ที่กำหนดเองกับ Common Data Service](hr-admin-setup-copy-instance.md?apply-custom-fields-to-common-data-service)

## <a name="effects-of-copying-a-human-resources-database"></a>ผลของการคัดลอกฐานข้อมูลทรัพยากรบุคคล

เหตุการณ์ต่อไปนี้เกิดขึ้นเมื่อคุณคัดลอกฐานข้อมูลทรัพยากรบุคคล:

- กระบวนการคัดลอกจะลบฐานข้อมูลที่มีอยู่ในสภาพแวดล้อมเป้าหมาย หลังจากที่กระบวนการคัดลอกเสร็จสมบูรณ์แล้ว คุณจะไม่สามารถกู้คืนฐานข้อมูลที่มีอยู่ได้

- สภาพแวดล้อมเป้าหมายจะไม่พร้อมใช้งานจนกว่ากระบวนการคัดลอกจะเสร็จสมบูรณ์

- เอกสารในที่จัดเก็บ Microsoft Azure Blob จะไม่ถูกคัดลอกจากสภาพแวดล้อมหนึ่งไปยังอีกสภาพแวดล้อมหนึ่ง ดังนั้น เอกสารและเท็มเพลตที่แนบจะไม่ถูกคัดลอกและจะยังคงอยู่ในสภาพแวดล้อมต้นทาง

- ผู้ใช้ทั้งหมดยกเว้นผู้ใช้ที่เป็นผู้ดูแลระบบและบัญชีผู้ใช้บริการภายในอื่นๆ จะไม่สามารถใช้งานได้​ ผู้ใช้ที่เป็นผู้ดูแลระบบจึงสามารถลบหรือทำให้ข้อมูลยุ่งเหยิงก่อนที่ผู้ใช้คนอื่นได้รับอนุญาตให้กลับเข้าสู่ระบบ

- ผู้ใช้ผู้ดูแลระบบต้องทำการเปลี่ยนแปลงการตั้งค่าคอนฟิก เช่น การเชื่อมต่อปลายทางการรวมกับบริการหรือ URL เฉพาะ

## <a name="copy-the-human-resources-database"></a>คัดลอกฐานข้อมูลทรัพยากรบุคคล

เมื่อต้องการทำงานนี้ให้เสร็จสมบูรณ์ คุณจะคัดลอกอินสแตนซ์ก่อน แล้วลงชื่อเข้าสู่ศูนย์การจัดการ Microsoft Power Platform เพื่อคัดลอกสภาพแวดล้อม Power Apps ของคุณ

> [!WARNING]
> เมื่อคุณคัดลอกอินสแตนซ์ฐาน ข้อมูลจะถูกลบออกในอินสแตนซ์เป้าหมาย อินสแตนซ์เป้าหมายไม่พร้อมใช้งานในระหว่างกระบวนการนี้

1. ลงชื่อเข้าสู่ LCS และเลือกโครงการ LCS ที่มีอินสแตนซ์ที่คุณต้องการคัดลอก

2. ในโครงการ LCS ของคุณ เลือกไทล์ **การจัดการแอป Human Resources**

3. เลือกอินสแตนซ์ที่จะคัดลอก แล้วเลือก **copy**

4. ในบานหน้าต่างงาน **คัดลอกอินสแตนซ์** ให้เลือกอินสแตนซ์ที่จะเขียนทับ แล้วเลือก **คัดลอก** รอให้มีการอัปเดตค่าของฟิลด์ **สถานะการคัดลอก** เป็น **เสร็จสมบูรณ์**

   ![[เลือกอินสแตนซ์ที่จะเขียนทับ](./media/copy-instance-select-target-instance.png)](./media/copy-instance-select-target-instance.png)

5. เลือก **Power Platform** และลงชื่อเข้าใช้ไปยังศูนย์การจัดการ Microsoft Power Platform

   ![[เลือก Power Platform](./media/copy-instance-select-power-platform.png)](./media/copy-instance-select-power-platform.png)

6. เลือกอินสแตนซ์ Power Apps ที่จะคัดลอก แล้วเลือก **คัดลอก**

7. เมื่อกระบวนการคัดลอกเสร็จสมบูรณ์ ให้ลงชื่อเข้าใช้ไปยังอินสแตนซ์เป้าหมาย และเปิดใช้งานการรวม Common Data Service สำหรับข้อมูลและคำแนะนำเพิ่มเติม ดูที่ [ตั้งค่าคอนฟิกการรวม Common Data Service](https://docs.microsoft.com/dynamics365/talent/hr-common-data-service-integration)

## <a name="data-elements-and-statuses"></a>องค์ประกอบและสถานะของข้อมูล

องค์ประกอบข้อมูลต่อไปนี้ไม่ได้รับการคัดลอกเมื่อคุณคัดลอกอินสแตนซ์ทรัพยากรบุคคล:

- ที่อยู่อีเมลในตาราง **LogisticsElectronicAddress** 

- ประวัติชุดงานในตาราง **BatchJobHistory** **BatchHistory** และ **BatchConstraintHistory**

- รหัสผ่าน Mail Transfer Protocol (SMTP) แบบธรรมดาในตาราง **SysEmailSMTPPassword**

- เซิร์ฟเวอร์สับเปลี่ยน SMTP ในตาราง **SysEmailParameters**

- การตั้งค่าการจัดการการพิมพ์ในตาราง **PrintMgmtSettings** และ **PrintMgmtDocInstance**

- เรกคอร์ดเฉพาะสภาพแวดล้อมในตาราง **SysServerConfig** **SysServerSessions** **SysCorpNetPrinters** **SysClientSessions** **BatchServerConfig** และ **BatchServerGroup**

- เอกสารแนบในตาราง DocuValue เอกสารแนบเหล่านี้รวมถึงเท็มเพลต Microsoft Office ที่ถูกเขียนทับในสภาพแวดล้อมต้นทาง

- สตริงการเชื่อมต่อในตาราง **PersonnelIntegrationConfiguration**

องค์ประกอบบางอย่างเหล่านี้ไม่ได้รับการคัดลอกเนื่องจากเป็นองค์ประกอบเฉพาะของสภาพแวดล้อม ตัวอย่าง ได้แก่ เรกคอร์ด **BatchServerConfig** และ **SysCorpNetPrinters** องค์ประกอบอื่นๆ ที่ไม่ได้รับการคัดลอก เนื่องจากปริมาณของตั๋วสนับสนุน ตัวอย่างเช่น:

- อาจมีการส่งอีเมลที่ซ้ำกันเนื่องจาก SMTP ยังคงเปิดใช้งานอยู่ในสภาพแวดล้อมการทดสอบการยอมรับของผู้ใช้ (Sandbox)

- อาจมีการส่งข้อความการรวมที่ไม่ถูกต้องเนื่องจากชุดงานยังคงเปิดใช้งานอยู่

- ผู้ใช้อาจเปิดใช้งานก่อนที่ผู้ดูแลระบบจะสามารถดำเนินการล้างข้อมูลหลังการรีเฟรช

นอกจากนี้ สถานะดังต่อไปนี้จะเปลี่ยนไปเมื่อคุณคัดลอกอินสแตนซ์:

- ผู้ใช้ทั้งหมดยกเว้นผู้ดูแลระบบถูกตั้งค่าเป็น **ปิดใช้งาน**

- ชุดงานทั้งหมดยกเว้นงานระบบบางงานจะถูกตั้งค่าเป็น **ระงับ**

## <a name="environment-admin"></a>รหัสสภาพแวดล้อม

ผู้ใช้ทั้งหมดในสภาพแวดล้อม Sandbox เป้าหมาย รวมถึงผู้ดูแลระบบ จะถูกแทนที่โดยผู้ใช้ของสภาพแวดล้อมต้นทาง ก่อนที่คุณจะคัดลอกอินสแตนซ์ โปรดตรวจสอบให้แน่ใจว่าคุณเป็นผู้ดูแลระบบในสภาพแวดล้อมต้นทาง ถ้าคุณไม่ได้ใช้เป็น คุณไม่สามารถลงชื่อเข้าสู่สภาพแวดล้อม Sandbox เป้าหมาย หลังจากที่การคัดลอกเสร็จสมบูรณ์แล้ว

ผู้ใช้ที่ไม่ใช่ผู้ดูแลระบบทั้งหมดในสภาพแวดล้อม Sandbox เป้าหมายจะถูกปิดใช้งานเพื่อป้องกันไม่ให้มีการลงชื่อเข้าใช้ในสภาพแวดล้อม Sandbox ผู้ดูแลระบบสามารถเป็นผู้ใช้ที่เปิดใช้งานได้ ถ้าจำเป็น

## <a name="apply-custom-fields-to-common-data-service"></a>ใช้ฟิลด์ที่กำหนดเองกับ Common Data Service

ถ้าคุณคัดลอกอินสแตนซ์ไปยังสภาพแวดล้อม Sandbox และต้องการรวมสภาพแวดล้อม Sandbox กับ Common Data Serviceคุณต้องนำฟิลด์ที่กำหนดเองไปใช้กับเอนทิตี้ Common Data Service ใหม่อีกครั้ง

สำหรับแต่ละฟิลด์ที่กำหนดเองที่มีการแสดงในเอนทิตี้ Common Data Service ให้ทำตามขั้นตอนต่อไปนี้:

1. ไปที่ฟิลด์ที่กำหนดเองและเลือก **แก้ไข**

2. ยกเลิกการเลือกฟิลด์ **เปิดใช้งานแล้ว** สำหรับแต่ละเอนทิตี้ cdm_ * ซึ่งเปิดใช้งานฟิลด์ที่กำหนดเอง

3. เลือก **ใช้การเปลี่ยนแปลง**

4. เลือก **แก้ไข** อีกครั้ง

5. เลือกฟิลด์ **เปิดใช้งานแล้ว** สำหรับแต่ละเอนทิตี้ cdm_ * ซึ่งเปิดใช้งานฟิลด์ที่กำหนดเอง

6. เลือก **ใช้การเปลี่ยนแปลง** อีกครั้ง

กระบวนการยกเลิกการเลือก การใช้การเปลี่ยนแปลง การเลือกใหม่ และการใช้การเปลี่ยนแปลงอีกครั้งจะพร้อมท์ Schema เพื่ออัพเดตใน Common Data Service ให้รวมฟิลด์ที่กำหนดเอง

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับฟิลด์ที่กำหนดเอง ให้ดูที่ [สร้างและทำงานกับฟิลด์ที่กำหนดเอง](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/get-started/user-defined-fields)

## <a name="see-also"></a>ดูเพิ่มเติมที่

[เตรียมใช้งาน Human Resources](hr-admin-setup-provision.md)</br>
[เอาอินสแตนซ์ออก](hr-admin-setup-remove-instance.md)</br>
[อัปเดตกระบวนการ](hr-admin-setup-update-process.md)

