---
title: ติดตามการดำเนินการของรูปแบบ ER เพื่อแก้ไขปัญหาประสิทธิภาพ
description: บทความนี้จะนำเสนอข้อมูลเกี่ยวกับวิธีการใช้คุณลักษณะการติดตามประสิทธิภาพในการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อแก้ไขปัญหาประสิทธิภาพการทำงาน
author: NickSelin
ms.date: 06/22/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.1
ms.openlocfilehash: 4ea6901f8d9632b021c35b9ee899385e688fc77e
ms.sourcegitcommit: 3289478a05040910f356baf1995ce0523d347368
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 07/01/2022
ms.locfileid: "9108870"
---
# <a name="trace-the-execution-of-er-formats-to-troubleshoot-performance-issues"></a>ติดตามการดำเนินการของรูปแบบ ER เพื่อแก้ไขปัญหาประสิทธิภาพการทำงาน

[!include[banner](../includes/banner.md)]

ในฐานะที่เป็นส่วนหนึ่งของกระบวนการในการออกแบบการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อสร้างเอกสารอิเล็กทรอนิกส์ คุณกำหนดวิธีการที่จะใช้ในการดึงข้อมูลออกจากแอพลิเคชัน และป้อนข้อมูลในเอาท์พุทที่สร้างขึ้น คุณลักษณะการติดตามประสิทธิภาพของ ER ช่วยลดเวลาและต้นทุนอย่างมากซึ่งเกี่ยวข้องในการรวบรวมรายละเอียดของการดำเนินการจัดรูปแบบ ER และการใช้เพื่อแก้ไขปัญหาประสิทธิภาพการทำงาน บทช่วยสอนนี้จะให้คำแนะนำเกี่ยวกับวิธีการดำเนินการติดตามประสิทธิภาพสำหรับรูปแบบ ER ที่ดำเนินการ และวิธีการใช้ข้อมูลจากการติดตามเหล่านี้เพื่อช่วยในการปรับปรุงประสิทธิภาพการทำงาน

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

เพื่อทำตัวอย่างในบทช่วยสอนนี้ให้เสร็จสมบูรณ์ คุณต้องมีการเข้าถึงต่อไปนี้:

- การเข้าถึงไปยังหนึ่งในบทบาทต่อไปนี้:

    - นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
    - ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
    - ผู้ดูแลระบบ

- การเข้าถึงไปยังอินสแตนซ์ของ Regulatory Configuration Services (RCS) ที่ได้เตรียมใช้งานสำหรับผู้เช่ารายเดียวกันกับแอพลิเคชันสำหรับหนึ่งในบทบาทต่อไปนี้:

    - นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
    - ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
    - ผู้ดูแลระบบ

นอกจากนี้ คุณต้องดาวน์โหลดและจัดเก็บไฟล์ต่อไปนี้โดยเฉพาะ

| ไฟล์                                  | ปริมาณความจุ                               |
|---------------------------------------|---------------------------------------|
| แบบจำลองการติดตามประสิทธิภาพการทำงาน รุ่น 1     | [การตั้งค่าคอนฟิกรูปแบบข้อมูล ER ตัวอย่าง](https://download.microsoft.com/download/0/a/a/0aa84e48-8040-4c46-b542-e3bf15c9b2ad/Performancetracemodelversion.1.xml)    |
| ข้อมูลเมตาการติดตามประสิทธิภาพการทำงาน รุ่น 1  | [การตั้งค่าคอนฟิกข้อมูลเมตา ER ตัวอย่าง](https://download.microsoft.com/download/a/9/3/a937e8c4-1f8a-43e4-83ee-7d599cf7d983/Performancetracemetadataversion.1.xml)      |
| การแม็ปการติดตามประสิทธิภาพการทำงาน รุ่น 1.1 | [การตั้งค่าคอนฟิกการแม็ปรูปแบบข้อมูล ER ตัวอย่าง](https://download.microsoft.com/download/7/7/3/77379bdc-7b22-4cfc-9b64-a9147599f931/Performancetracemappingversion1.1.xml) |
| รูปแบบการติดตามประสิทธิภาพการทำงาน รุ่น 1.1  | [การตั้งค่าคอนฟิกรูปแบบ ER ตัวอย่าง](https://download.microsoft.com/download/8/6/8/868ba581-5a06-459e-b173-fb00f038b37f/Performancetraceformatversion1.1.xml)       |

### <a name="configure-er-parameters"></a>ตั้งค่าคอนฟิกพารามิเตอร์ ER

การติดตามประสิทธิภาพ ER แต่ละรายการที่สร้างขึ้นในแอพลิเคชัน จะถูกจัดเก็บเป็นเอกสารแนบของเรกคอร์ดล็อกการดำเนินการ กรอบงานการจัดการเอกสาร (DM) ถูกใช้ในการจัดการเอกสารแนบเหล่านี้ คุณต้องตั้งค่าคอนฟิกพารามิเตอร์ ER ล่วงหน้า เพื่อระบุชนิดเอกสาร DM ที่ควรใช้เพื่อแนบการติดตามประสิทธิภาพ ในพื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์** เลือก **พารามิเตอร์การรายงานทางอิเล็กทรอนิกส์** จากนั้น บนหน้า **พารามิเตอร์การรายงานทางอิเล็กทรอนิกส์** บนแท็บ **เอกสารแนบ** ในฟิลด์ **อื่นๆ** ให้เลือกชนิดเอกสาร DM เพื่อใช้สำหรับการติดตามประสิทธิภาพ

![หน้าพารามิเตอร์การรายงานทางอิเล็กทรอนิกส์](./media/GER-PerfTrace-GER-Parameters-DocumentType.png)

เพื่อให้พร้อมใช้งานในฟิลด์การค้นหา **อื่นๆ** ชนิดเอกสาร DM ต้องมีการตั้งค่าคอนฟิกในลักษณะต่อไปนี้บนหน้า **ชนิดเอกสาร** (**การจัดการองค์กร \> การจัดการเอกสาร \> ชนิดเอกสาร**):

- **คลาส:** แนบไฟล์
- **กลุ่ม:** ไฟล์

![หน้าชนิดเอกสาร](./media/GER-PerfTrace-DM-DocumentType.png)

> [!NOTE]
> ชนิดเอกสารที่เลือกต้องพร้อมใช้งานในทุกๆ บริษัทของอินสแตนซ์ปัจจุบัน เพราะไฟล์แนบ DM เป็นแบบเฉพาะบริษัท

### <a name="configure-rcs-parameters"></a>ตั้งค่าคอนฟิกพารามิเตอร์ RCS

การติดตามประสิทธิภาพ ER ซึ่งสร้างขึ้นจะถูกนำเข้าไปยัง RCS สำหรับการวิเคราะห์ โดยใช้ตัวออกแบบรูปแบบ ER และตัวออกแบบการแม็ป ER เนื่องจากมีการจัดเก็บการติดตามประสิทธิภาพ ER เป็นเอกสารแนบของเรกคอร์ดบันทึกการดำเนินการที่เกี่ยวข้องกับรูปแบบ ER คุณต้องตั้งค่าคอนฟิกพารามิเตอร์ RCS ล่วงหน้า เพื่อระบุชนิดของเอกสาร DM ที่ควรใช้เพื่อแนบการติดตามประสิทธิภาพ ในอินสแตนซ์ของ RCS ที่จัดเตรียมให้กับบริษัทของคุณ ในพื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์** ให้เลือก **พารามิเตอร์การรายงานทางอิเล็กทรอนิกส์** จากนั้น บนหน้า **พารามิเตอร์การรายงานทางอิเล็กทรอนิกส์** บนแท็บ **เอกสารแนบ** ในฟิลด์ **อื่นๆ** ให้เลือกชนิดเอกสาร DM เพื่อใช้สำหรับการติดตามประสิทธิภาพ

![หน้าพารามิเตอร์การรายงานทางอิเล็กทรอนิกส์ใน RCS](./media/GER-PerfTrace-RCS-Parameters-DocumentType.png)

เพื่อให้พร้อมใช้งานในฟิลด์การค้นหา **อื่นๆ** ชนิดเอกสาร DM ต้องมีการตั้งค่าคอนฟิกในลักษณะต่อไปนี้บนหน้า **ชนิดเอกสาร** (**การจัดการองค์กร \> การจัดการเอกสาร \> ชนิดเอกสาร**):

- **คลาส:** แนบไฟล์
- **กลุ่ม:** ไฟล์

## <a name="design-an-er-solution"></a>ออกแบบโซลูชัน ER

สมมติว่าคุณได้เริ่มต้นการออกแบบโซลูชัน ER ใหม่เพื่อสร้างรายงานใหม่ที่แสดงธุรกรรมผู้จัดจำหน่าย ในปัจจุบัน คุณสามารถค้นหาธุรกรรมสำหรับผู้จัดจำหน่ายที่เลือกบนหน้า **ธุรกรรมผู้จัดจำหน่าย** (ไปยัง **บัญชีเจ้าหนี้ \> ผู้จัดจำหน่าย \> ผู้จัดจำหน่ายทั้งหมด** ให้เลือกผู้จัดจำหน่าย และจากนั้น ในบานหน้าต่างการดำเนินการ บนแท็บ **ผู้จัดจำหน่าย** ในกลุ่ม **ธุรกรรม** ให้เลือก **ธุรกรรม**) อย่างไรก็ตาม คุณต้องการให้มีธุรกรรมผู้จัดจำหน่ายทั้งหมดในเวลาเดียวกันในเอกสารอิเล็กทรอนิกส์หนึ่งรายการในรูปแบบ XML โซลูชันนี้จะประกอบด้วยการตั้งค่าคอนฟิก ER ต่างๆ ที่มีรูปแบบข้อมูลที่จำเป็นต้องใช้ ข้อมูลเมตา การแม็ปแบบจำลอง และส่วนประกอบรูปแบบ

1. ลงชื่อเข้าใช้อินสแตนซ์ของ RCS ที่ได้เตรียมใช้งานสำหรับบริษัทของคุณ
2. ในบทช่วยสอนนี้ คุณจะสร้างและปรับเปลี่ยนการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง **Litware, Inc.** ดังนั้น โปรดตรวจสอบให้แน่ใจว่าได้เพิ่มตัวให้บริการการตั้งค่าคอนฟิกนี้ลงใน RCS และได้เลือกเป็นใช้งานอยู่ สำหรับคำแนะนำ ให้ดูที่กระบวนงาน [สร้างตัวให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายเป็นใช้งานอยู่](tasks/er-configuration-provider-mark-it-active-2016-11.md)
3. ในพื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์** เลือกไทล์ **การตั้งค่าคอนฟิกการรายงาน**
4. ในหน้า **การตั้งค่าคอนฟิก** นำเข้าการตั้งค่าคอนฟิก ER ที่คุณดาวน์โหลดเป็นข้อกำหนดเบื้องต้นลงใน RCS ตามลำดับต่อไปนี้: รูปแบบข้อมูล ข้อมูลเมตา การแม็ปแบบจำลอง รูปแบบ สำหรับการตั้งค่าคอนฟิกแต่ละรายการ ทำตามขั้นตอนเหล่านี้:

    1. ในบานหน้าต่างการดำเนินการ เลือก **แลกเปลี่ยน \> โหลดจากไฟล์ XML**
    2. เลือก **เรียกดู** เพื่อเลือกไฟล์ที่เหมาะสมสำหรับการตั้งค่าคอนฟิก ER ที่จำเป็นในรูปแบบ XML
    3. เลือก **ตกลง**

    ![หน้าการตั้งค่าคอนฟิกใน RCS](./media/GER-PerfTrace-RCS-ImportedConfigurations.png)

## <a name="run-the-er-solution-to-trace-execution"></a>รันโซลูชัน ER เพื่อติดตามการดำเนินการ

สมมติว่าคุณได้ออกแบบโซลูชัน ER รุ่นแรกเสร็จเรียบร้อยแล้ว ขณะนี้คุณต้องการทดสอบในอินสแตนซ์ของคุณ และวิเคราะห์ประสิทธิภาพในการดำเนินงาน

### <a name="import-an-er-configuration-from-rcs-into-finance-and-operations"></a><a id='import-configuration'></a>นำเข้าการตั้งค่าคอนฟิก ER จาก RCS ไปยังการเงินและการดำเนินงาน

1. ลงชื่อเข้าใช้อินสแตนซ์แอพลิเคชันของคุณ
2. สำหรับบทช่วยสอนนี้ คุณจะนำเข้าการตั้งค่าคอนฟิกจากอินสแตนซ์ RCS ของคุณ (ที่ซึ่งคุณออกแบบส่วนประกอบ ER ของคุณ) ลงในอินสแตนซ์ของคุณ (ที่ซึ่งคุณทดสอบและใช้งานในที่สุด) ดังนั้น คุณต้องตรวจสอบให้แน่ใจว่ามีการจัดเตรียมอาร์ทิแฟกต์ที่จำเป็นทั้งหมดแล้ว สำหรับคำแนะนำ โปรดดูกระบวนงาน [นำเข้าการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) จาก Regulatory Configuration Services (RCS)](rcs-download-configurations.md)
3. ทำตามขั้นตอนต่อไปนี้เพื่อนำเข้าการตั้งค่าคอนฟิกจาก RCS ไปยังแอพลิเคชัน:

    1. ในพื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์** บนไทล์สำหรับผู้ให้บริการ การตั้งค่าคอนฟิก **Litware, Inc.** เลือก **ที่เก็บ**
    2. บนหน้า **ที่เก็บการตั้งค่าคอนฟิก** เลือกที่เก็บของชนิด **RCS** และจากนั้นเลือก **เปิด**
    3. บน FastTab **การตั้งค่าคอนฟิก** เลือกการตั้งค่าคอนฟิก **รูปแบบการติดตามประสิทธิภาพ**
    4. บน FastTab **รุ่น** เลือกรุ่น **1.1** ของการตั้งค่าคอนฟิกที่เลือก และจากนั้น เลือก **นำเข้า**

    ![หน้าที่เก็บการตั้งค่าคอนฟิก](./media/GER-PerfTrace-GER-ImportedConfigurations.png)

รุ่นที่สอดคล้องกันของรูปแบบข้อมูลและการตั้งค่าคอนฟิกการแม็ปแบบจำลอง จะถูกนำเข้าโดยอัตโนมัติเป็นข้อกำหนดเบื้องต้นสำหรับการตั้งค่าคอนฟิกรูปแบบ ER ที่นำเข้า

### <a name="turn-on-the-er-performance-trace"></a>เปิดการติดตามประสิทธิภาพ ER

1. ไปที่ **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> การตั้งค่าคอนฟิก**
2. ในหน้า **การตั้งค่าคอนฟิก** บนบานหน้าต่างการดำเนินการ บนแท็บ **การตั้งค่าคอนฟิก** ในกลุ่ม **การตั้งค่าล่วงหน้า** เลือก **พารามิเตอร์ผู้ใช้**
3. ในกล่องโต้ตอบ **พารามิเตอร์ผู้ใช้** ในส่วน **การติดตามการดำเนินการ** ให้ทำตามขั้นตอนเหล่านี้:

    1. ในฟิลด์ **รูปแบบการติดตามการดำเนินการ** ระบุรูปแบบของการติดตามประสิทธิภาพที่สร้างขึ้น ซึ่งควรมีการจัดเก็บรายละเอียดการดำเนินการในรูปแบบ ER และองค์ประกอบของการแม็ป

        - **ดีบักรูปแบบการติดตาม** – เลือกค่านี้ถ้าคุณวางแผนจะรันรูปแบบ ER เชิงโต้ตอบที่มีเวลาการดำเนินการสั้นๆ จากนั้นเริ่มคอลเลกชันของรายละเอียดเกี่ยวกับการดำเนินการรูปแบบ ER เมื่อมีการเลือกค่านี้ การติดตามประสิทธิภาพจะเก็บรวบรวมข้อมูลเกี่ยวกับเวลาที่ใช้ในการดำเนินการต่อไปนี้:

            - การรันแหล่งข้อมูลแต่ละแหล่งในการแม็ปแบบจำลองถูกเรียกเพื่อดึงข้อมูล
            - การประมวลผลรายการรูปแบบแต่ละรายการที่จะป้อนข้อมูลในเอาท์พุทที่ถูกสร้างขึ้น

            หากคุณเลือกค่า **ดีบักรูปแบบการติดตาม** คุณจะสามารถวิเคราะห์เนื้อหาของการติดตามได้โปรแกรมออกแบบการดําเนินการ ER คุณสามารถดูรูปแบบ ER หรือองค์ประกอบการแม็ปที่กล่าวถึงในการติดตามได้

        - **รูปแบบการติดตามรวม** – เลือกค่านี้ถ้าคุณวางแผนจะรันรูปแบบ ER ที่มีเวลาการดำเนินการยาวในโหมดชุดงาน จากนั้นเริ่มคอลเลกชันของรายละเอียดรวมเกี่ยวกับการดำเนินการรูปแบบ ER เมื่อมีการเลือกค่านี้ การติดตามประสิทธิภาพจะเก็บรวบรวมข้อมูลเกี่ยวกับเวลาที่ใช้ในการดำเนินการต่อไปนี้:

            - การรันแหล่งข้อมูลแต่ละแหล่งในการแม็ปแบบจำลองถูกเรียกเพื่อดึงข้อมูล
            - การรันแหล่งข้อมูลแต่ละแหล่งในการแม็ปรูปแบบถูกเรียกเพื่อดึงข้อมูล
            - การประมวลผลรายการรูปแบบแต่ละรายการที่จะป้อนข้อมูลในเอาท์พุทที่ถูกสร้างขึ้น

            ค่า **รูปแบบการติดตามแบบรวม** มีอยู่ใน Microsoft Microsoft Dynamics 365 Finance รุ่น 10.0.20 และใหม่กว่า

            ในตัวออกแบบรูปแบบ ER และตัวออกแบบการแม็ปแบบจำลอง ER คุณสามารถดูเวลาการดำเนินการรวมของส่วนประกอบหนึ่งๆ ได้ นอกจากนี้ การติดตามยังมีรายละเอียดเกี่ยวกับการดำเนินการ เช่น จํานวนการดำเนินการ และเวลาต่ำสุดและสูงสุดของการดำเนินการครั้งเดียว

            > [!NOTE]
            > การติดตามนี้จะรวบรวมตามพาธส่วนประกอบที่ติดตาม ดังนั้น สถิติอาจไม่ถูกต้อง เมื่อส่วนประกอบหลักเดียวมีส่วนประกอบรองที่ไม่มีชื่อหลายตัว หรือเมื่อส่วนประกอบรองหลายตัวมีชื่อเดียวกัน

    2. ตั้งค่าตัวเลือกต่อไปนี้เป็น **ใช่** เพื่อรวบรวมรายละเอียดเฉพาะของการดำเนินการของการแม็ปแบบจำลอง ER และส่วนประกอบรูปแบบ ER:

        - **รวบรวมสถิติการสอบถาม** – เมื่อเปิดตัวเลือกนี้ การติดตามประสิทธิภาพจะรวบรวมข้อมูลต่อไปนี้:

            - จำนวนของการเรียกฐานข้อมูลที่ทำโดยแหล่งข้อมูล
            - จำนวนครั้งของการเรียกการทำซ้ำไปยังฐานข้อมูล
            - รายละเอียดของคำสั่ง SQL ที่ใช้เพื่อทำการเรียกฐานข้อมูล

        - **ติดตามการเข้าถึงการแคช** – เมื่อเปิดตัวเลือกนี้ การติดตามประสิทธิภาพจะรวบรวมข้อมูลเกี่ยวกับการใช้แคชของการแม็ปแบบจำลอง ER
        - **ติดตามข้อมูลการเข้าถึง** – เมื่อเปิดตัวเลือกนี้ การติดตามประสิทธิภาพจะรวบรวมข้อมูลเกี่ยวกับจำนวนของการเรียกไปยังฐานข้อมูลสำหรับแหล่งข้อมูลที่ดำเนินการของชนิดรายการเรกคอร์ด
        - **การแจงนับรายการติดตาม** – เมื่อเปิดตัวเลือกนี้ การติดตามประสิทธิภาพจะรวบรวมข้อมูลเกี่ยวกับจำนวนของเรกคอร์ดที่ถูกร้องขอจากแหล่งข้อมูลของชนิดรายการเรกคอร์ด

    > [!NOTE]
    > พารามิเตอร์ในกล่องโต้ตอบ **พารามิเตอร์ของผู้ใช้** ที่เฉพาะเจาะจงสำหรับผู้ใช้และบริษัทปัจจุบัน

    ![กล่องโต้ตอบพารามิเตอร์ผู้ใช้](./media/GER-PerfTrace-GER-UserParameters.png)

### <a name="run-the-er-format"></a><a id='run-format'></a>รันรูปแบบ ER

1. เลือกบริษัท **DEMF**
2. ไปที่ **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> การตั้งค่าคอนฟิก**
3. บนหน้า **การตั้งค่าคอนฟิก** ในแผนภูมิการตั้งค่าคอนฟิก เลือกรายการ **รูปแบบการติดตามประสิทธิภาพ**
4. บนบานหน้าต่างการดำเนินการ เลือก **รัน**

โปรดสังเกตว่าไฟล์ที่สร้างขึ้นแสดงข้อมูลเกี่ยวกับธุรกรรม 265 รายการสำหรับผู้จัดจำหน่ายหกราย

## <a name="review-the-execution-trace"></a>ตรวจทานการติดตามการดำเนินการ

### <a name="export-the-generated-trace-from-the-application"></a><a id='export-trace'></a>ส่งออกการติดตามที่สร้างขึ้นจากแอพลิเคชัน

การติดตามประสิทธิภาพถูกแยกจากรูปแบบ ER ต้นทาง และสามารถทำให้เป็นแบบอนุกรมกับไฟล์ zip ภายนอก

1. ไปที่ **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> ล็อกดีบักการตั้งค่าคอนฟิก**
2. บนหน้า **บันทึกการรันการรายงานทางอิเล็กทรอนิกส์** ในบานหน้าต่างด้านซ้าย ในฟิลด์ **ชื่อการตั้งค่าคอนฟิก** เลือก **รูปแบบการติดตามประสิทธิภาพ** เพื่อค้นหาเรกคอร์ดล็อกที่สร้างขึ้นโดยการดำเนินการของการตั้งค่าคอนฟิก **รูปแบบการติดตามประสิทธิภาพ**
3. เลือกปุ่ม **เอกสารแนบ** (สัญลักษณ์คลิปหนีบกระดาษ) ในมุมขวาบนของหน้า หรือกด **Ctrl+Shift+A**

    ![ปุ่มเอกสารแนบในหน้าบันทึกการรันการรายงานทางอิเล็กทรอนิกส์](./media/GER-PerfTrace-GER-DebugLog.png)

4. บนหน้า **เอกสารแนบสำหรับบันทึกการรันการรายงานทางอิเล็กทรอนิกส์** ในบานหน้าต่างการดำเนินการ ให้เลือก **เปิด** เพื่อรับการติดตามประสิทธิภาพเป็นไฟล์ zip และจัดเก็บไว้ภายใน

    ![เอกสารแนบสำหรับบันทึกการรันการรายงานทางอิเล็กทรอนิกส์](./media/GER-PerfTrace-GER-DebugLog-AttachedTrace.png)

> [!NOTE]
> การติดตามที่สร้างขึ้นมีการอ้างอิงไปยังรายงาน ER ของแหล่งข้อมูลผ่านตัวระบุรายงานที่ไม่ซ้ำกันในรูปแบบ **GUID** เท่านั้น การกำหนดหมายเลขรุ่นของรูปแบบไม่ได้รับการพิจารณา

โปรดสังเกตว่าความสัมพันธ์ระหว่างการติดตามประสิทธิภาพที่ถูกสร้างขึ้นสำหรับรูปแบบ ER ที่ดำเนินการ และการแม็ปแบบจำลอง ER จะขึ้นอยู่กับตัวอธิบายรากที่ใช้และรูปแบบข้อมูลทั่วไป การกำหนดหมายเลขรุ่นของรูปแบบและการแม็ปแบบจำลองไม่ได้รับการพิจารณา นอกจากนี้ จะไม่มีการพิจารณาการตั้งค่าของแฟล็ก **ค่าเริ่มต้นสำหรับการแม็ปแบบจำลอง** สำหรับการแม็ปแบบจำลอง

### <a name="import-the-generated-trace-into-rcs"></a><a id='import-trace'></a>นำเข้าการติดตามที่สร้างลงใน RCS

1. ใน RCS พื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์** เลือกไทล์ **การตั้งค่าคอนฟิกการรายงาน**
2. ในหน้า **การตั้งค่าคอนฟิก** ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายรายการ **แบบจำลองการติดตามประสิทธิภาพ** และเลือกรายการ **รูปแบบการติดตามประสิทธิภาพ**
3. บนบานหน้าต่างการดำเนินการ เลือก **ตัวออกแบบ**
4. บนหน้า **ตัวออกแบบรูปแบบ** บนบานหน้าต่างการดำเนินการ ให้เลือก **การติดตามประสิทธิภาพ**
5. ในกล่องโต้ตอบ **การตั้งค่าผลการติดตามประสิทธิภาพ** ให้เลือก **นำเข้าการติดตามประสิทธิภาพ**
6. เลือก **เรียกดู** เพื่อเลือกไฟล์ zip ที่คุณส่งออกก่อนหน้านี้
7. เลือก **ตกลง**

    ![กล่องโต้ตอบการตั้งค่าผลการติดตามประสิทธิภาพใน RCS](./media/GER-PerfTrace-RCS-ImportedPerfTrace.png)

### <a name="use-the-performance-trace-for-analysis-in-rcs--format-execution"></a>ใช้การติดตามประสิทธิภาพสำหรับการวิเคราะห์ใน RCS – การดำเนินการรูปแบบ

1. ใน RCS บนหน้า **ตัวออกแบบรูปแบบ** ให้เลือก **ขยาย/ยุบ** เพื่อขยายเนื้อหาของรายการรูปแบบทั้งหมด

    โปรดสังเกตว่ามีการแสดงข้อมูลเพิ่มเติมสำหรับบางรายการของรูปแบบปัจจุบัน:

    - เวลาจริงที่ใช้ในการป้อนข้อมูลในเอาท์พุทที่สร้างขึ้นโดยใช้รายการรูปแบบ
    - เวลาเดียวกันที่แสดงเป็นเปอร์เซ็นต์ของเวลาทั้งหมดที่ใช้ในการสร้างเอาท์พุททั้งหมด

    ![หน้าตัวออกแบบรูปแบบใน RCS](./media/GER-PerfTrace-RCS-TraceInfoInFormat.png)

2. ปิดหน้า **ตัวออกแบบรูปแบบ**

### <a name="use-the-performance-trace-for-analysis-in-rcs--model-mapping"></a><a id='use-trace'></a>ใช้การติดตามประสิทธิภาพสำหรับการวิเคราะห์ใน RCS – การแม็ปรูปแบบ

1. ใน RCS บนหน้า **การตั้งค่าคอนฟิก** ในแผนภูมิการตั้งค่าคอนฟิก ให้เลือกรายการ **การแม็ปการติดตามประสิทธิภาพ**
2. บนบานหน้าต่างการดำเนินการ เลือก **ตัวออกแบบ**
3. เลือก **ตัวออกแบบ**
4. บนหน้า **ตัวออกแบบการแม็ปแบบจำลอง** บนบานหน้าต่างการดำเนินการ ให้เลือก **การติดตามประสิทธิภาพ**
5. เลือกการติดตามที่คุณนำเข้าก่อนหน้านี้
6. เลือก **ตกลง**

โปรดสังเกตว่าข้อมูลใหม่จะกลายเป็นพร้อมใช้งานสำหรับรายการแหล่งข้อมูลบางอย่างของการแม็ปแบบจำลองปัจจุบัน:

- เวลาจริงที่ใช้ในการเรียกข้อมูลโดยใช้แหล่งข้อมูล
- เวลาเดียวกันที่แสดงเป็นเปอร์เซ็นต์ของเวลาทั้งหมดที่ใช้ในการรันการแม็ปแบบจำลองทั้งหมด

โปรดสังเกตว่า ER แจ้งให้คุณทราบว่าการแม็ปแบบจำลองปัจจุบันจะทำซ้ำคำขอฐานข้อมูล ในขณะที่แหล่งข้อมูล VendTable/\<Relations/VendTrans.VendTable\_AccountNum ถูกรัน การทำซ้ำนี้เกิดขึ้นเนื่องจากรายการของธุรกรรมผู้จัดจำหน่ายถูกเรียกสองครั้งสำหรับเรกคอร์ดผู้จัดจำหน่ายที่ทำซ้ำแต่ละรายการ:

- มีการเรียกหนึ่งครั้งเพื่อป้อนรายละเอียดของแต่ละธุรกรรมในรูปแบบข้อมูล ซึ่งขึ้นกับการผูกข้อมูลที่ตั้งค่าคอนฟิก
- มีการทำการเรียกหนึ่งครั้งเพื่อป้อนจำนวนของธุรกรรมที่คำนวณได้สำหรับผู้จัดจำหน่ายแต่ละรายในรูปแบบข้อมูล

![ข้อความเกี่ยวกับการร้องขอฐานข้อมูลที่ซ้ำกันบนหน้าตัวออกแบบการแม็ปแบบจำลองใน RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping1.png)

ค่า **\[Q:530\]** บ่งชี้ว่าตาราง VendTrans ถูกเรียก 530 ครั้งเพื่อส่งคืนเรกคอร์ดจากตารางนั้นไปยังแหล่งข้อมูล VendTable/\<Relations/VendTrans.VendTable\_AccountNum ค่า **\[530\]** บ่งชี้ว่ามีการเรียกแหล่งข้อมูล VendTable/\<Relations/VendTrans.VendTable\_AccountNum ถูกเรียก 530 ครั้ง เพื่อส่งคืนเรกคอร์ดจากแหล่งข้อมูลนั้นและป้อนรายละเอียดจากรายการนั้นในรูปแบบข้อมูล

เราขอแนะนำให้คุณใช้การแคชสำหรับแหล่งข้อมูล VendTable/\<Relations/VendTrans.VendTable\_AccountNum เพื่อลดจำนวนของการเรียกที่ถูกทำเพื่อดูรายละเอียดสำหรับธุรกรรม 265 รายการ และช่วยปรับปรุงประสิทธิภาพการทำงานของการแม็ปแบบจำลอง

นอกจากนี้ ยังอาจเป็นประโยชน์ในการลดจำนวนการเรียกที่ทำไปยังแหล่งข้อมูล LedgerTransTypeList แหล่งข้อมูลนี้ใช้ในการเชื่อมโยงค่าแต่ละค่าของการแจงนับ **LedgerTransType** กับป้ายชื่อ โดยใช้แหล่งข้อมูลนี้ คุณสามารถค้นหาป้ายชื่อที่เหมาะสม และป้อนในรูปแบบข้อมูลสำหรับธุรกรรมผู้จัดจำหน่ายแต่ละราย จำนวนครั้งปัจจุบันของการเรียกไปยังแหล่งข้อมูลนี้ (9,027) ค่อนข้างสูงสำหรับธุรกรรม 265 รายการ

![หน้าตัวออกแบบการแม็ปแบบจำลองใน RCS ซึ่งแสดงการเรียก 9,027 รายการไปยังแหล่งข้อมูล](./media/GER-PerfTrace-RCS-TraceInfoInMapping1a.png)

## <a name="improve-the-model-mapping-based-on-information-from-the-execution-trace"></a>ปรับปรุงการแม็ปแบบจำลองตามข้อมูลจากการติดตามการดำเนินการ

### <a name="modify-the-logic-of-the-model-mapping"></a>ปรับเปลี่ยนตรรกะของการแม็ปแบบจำลอง

1. ทำตามขั้นตอนต่อไปนี้เพื่อใช้การแม็ปการติดตามประสิทธิภาพ เพื่อช่วยป้องกันการเรียกซ้ำไปยังฐานข้อมูล:

    1. ใน RCS บนหน้า **ตัวออกแบบการแม็ปแบบจำลอง** ในบานหน้าต่าง **แหล่งข้อมูล** ให้เลือกรายการ **VendTable**
    2. เลือก **แคช**
    3. ขยายรายการ **VendTable** ขยายรายการของความสัมพันธ์แบบหนึ่งต่อกลุ่มสำหรับแหล่งข้อมูล VendTable (รายการ **\<ความสัมพันธ์**) และเลือกรายการ **VendTrans.VendTable\_AccountNum**
    4. เลือก **แคช**

    ![การแคชการตั้งค่าเพื่อช่วยป้องกันการเรียกซ้ำ](./media/GER-PerfTrace-RCS-ChangeMapping-Cache.png)

2. ทำตามขั้นตอนต่อไปนี้เพื่อนำแหล่งข้อมูล LedgerTransTypeList เข้าไปในขอบเขตของแหล่งข้อมูล VendTable:

    1. ในบานหน้าต่าง **ชนิดแหล่งข้อมูล** ให้ขยายรายการ **ฟังก์ชัน** และเลือกรายการ **ฟิลด์ที่มีการคำนวณ**
    2. ในบานหน้าต่าง **แหล่งข้อมูล** ให้เลือกรายการ **VendTable**
    3. เลือก **เพิ่ม**
    4. ในฟิลด์ **ชื่อ** ให้ป้อน **\$TransType**
    5. เลือก **แก้ไขสูตร**
    6. ในฟิลด์ **สูตร** ให้ป้อน **LedgerTransTypeList**
    7. เลือก **บันทึก**
    8. ปิดหน้า **ตัวแก้ไขสูตร**
    9. คลิก **ตกลง**

3. ทำตามขั้นตอนต่อไปนี้เพื่อทำการแคชของฟิลด์ **\$TransType**:

    1. เลือกรายการ **LedgerTransTypeList**
    2. เลือก **แคช**
    3. เลือกรายการ **VendTable.\$TransType**
    4. เลือก **แคช**

    ![การแคชการตั้งค่าสำหรับฟิลด์ $TransType](./media/GER-PerfTrace-RCS-ChangeMapping-Cache2.png)

4. ทำตามขั้นตอนเหล่านี้เพื่อเปลี่ยนแปลงฟิลด์ **\$TransTypeRecord** เพื่อให้เริ่มต้นการใช้ฟิลด์ **\$TransType** ที่แคช:

    1. ในบานหน้าต่าง **แหล่งข้อมูล** ให้ขยายรายการ **VendTable** ขยายรายการ **\<ความสัมพันธ์** ขยายรายการ **VendTrans.VendTable\_AccountNum** และเลือกรายการ **VendTable. VendTrans.VendTable\_AccountNum.\$TransTypeRecord**
    2. เลือก **แก้ไข**
    3. เลือก **แก้ไขสูตร**
    4. ในฟิลด์ **สูตร** ให้ค้นหานิพจน์ต่อไปนี้:

        FIRSTORNULL (WHERE (LedgerTransTypeList, LedgerTransTypeList.Enum = \@.TransType))

    5. ในฟิลด์ **สูตร** ให้ป้อนนิพจน์ต่อไปนี้:

        FIRSTORNULL (WHERE (VendTable.'\$TransType', VendTable.'\$TransType'.Enum = \@.TransType))

    6. เลือก **บันทึก**
    7. ปิดหน้า **ตัวแก้ไขสูตร**
    8. เลือก **ตกลง**

5. เลือก **บันทึก**
6. ปิดหน้า **ตัวออกแบบการแม็ปแบบจำลอง**
7. ปิดหน้า **การแม็ปแบบจำลอง**

### <a name="complete-the-modified-version-of-the-er-model-mapping"></a>ดำเนินการรุ่นที่แก้ไขของการแม็ปแบบจำลอง ER ให้เสร็จสมบูรณ์

1. ใน RCS บนหน้า **การตั้งค่าคอนฟิก** บน FastTab **รุ่น** ให้เลือกรุ่น **1.2** ของการตั้งค่าคอนฟิก **การแม็ปการติดตามประสิทธิภาพ**
2. เลือก **เปลี่ยนแปลงสถานะ**
3. เลือก **เสร็จสมบูรณ์**

### <a name="import-the-modified-er-model-mapping-configuration-from-rcs-into-the-application"></a>นำเข้าการตั้งค่าคอนฟิกการแม็ปแบบจำลอง ER ที่แก้ไขจาก RCS ไปยังแอพลิเคชัน

ทำซ้ำขั้นตอนในส่วน [นำเข้าการตั้งค่าคอนฟิก ER จาก RCS ไปยังการเงินและการดำเนินงาน](#import-configuration) ก่อนหน้านี้ในบทความนี้ เพื่อนำเข้ารุ่น 1.2 ของการตั้งค่าคอนฟิก **การแม็ปการติดตามประสิทธิภาพ**

## <a name="run-the-modified-er-solution-to-trace-execution"></a>รันโซลูชัน ER ที่แก้ไขเพื่อติดตามการดำเนินการ

### <a name="run-the-er-format"></a>รันรูปแบบ ER

ทำซ้ำขั้นตอนในส่วน [รันรูปแบบ ER](#run-format) ก่อนหน้าในบทความนี้ เพื่อสร้างการติดตามประสิทธิภาพใหม่

## <a name="work-with-the-execution-trace"></a>ทำงานกับการสืบย้อนกลับการดำเนินการ

### <a name="export-the-generated-trace-from-the-application"></a>ส่งออกการติดตามที่สร้างขึ้นจากแอพลิเคชัน

ทำซ้ำขั้นตอนในส่วน [ส่งออกการติดตามที่สร้างขึ้นจากแอพลิเคชัน](#export-trace) ก่อนหน้านี้ในบทความนี้ เพื่อบันทึกการติดตามประสิทธิภาพใหม่ภายในเครื่อง

### <a name="import-the-generated-trace-into-rcs"></a>นำเข้าการติดตามที่สร้างลงใน RCS

ทำซ้ำขั้นตอนในส่วน [นำเข้าการติดตามที่สร้างขึ้นใน RCS](#import-trace) ก่อนหน้าในบทความนี้ เพื่อนำเข้าการติดตามประสิทธิภาพใหม่ไปยัง RCS

### <a name="use-the-performance-trace-for-analysis-in-rcs--model-mapping"></a>ใช้การติดตามประสิทธิภาพสำหรับการวิเคราะห์ใน RCS – การแม็ปรูปแบบ

ทำซ้ำขั้นตอนในส่วน [ใช้การติดตามประสิทธิภาพสำหรับการวิเคราะห์ใน RCS – การแม็ปแบบจำลอง](#use-trace) ก่อนหน้านี้ในบทความนี้ เพื่อวิเคราะห์การติดตามประสิทธิภาพล่าสุด

โปรดสังเกตว่าการปรับปรุงที่คุณทำไปยังการแม็ปแบบจำลอง มีการตัดการสอบถามที่ซ้ำกันไปยังฐานข้อมูล นอกจากนี้ ยังมีการลดจำนวนของการเรียกไปยังตารางฐานข้อมูลและแหล่งข้อมูลสำหรับการแม็ปแบบจำลองนี้ด้วย ดังนั้น ประสิทธิภาพการทำงานของโซลูชัน ER ทั้งหมดได้รับการปรับปรุง

![ข้อมูลการติดตามสำหรับแหล่งข้อมูล VendTable ในหน้าตัวออกแบบการแม็ปแบบจำลองใน RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping2.png)

ในข้อมูลการติดตาม ค่า **\[12\]** สำหรับแหล่งข้อมูล VendTable บ่งชี้ว่าแหล่งข้อมูลนี้ถูกเรียก 12 ครั้ง ค่า **\[Q:6\]** บ่งชี้ว่ามีการแปลการเรียก 6 ครั้งเป็นการเรียกฐานข้อมูลไปยังตาราง VendTable ค่า **\[C:6\]** บ่งชี้ว่าเรกคอร์ดที่นำมาใช้จากฐานข้อมูลถูกแคช และมีการประมวลผลการเรียกอีกหกครั้งโดยใช้แคช

โปรดสังเกตว่ามีการลดจำนวนการเรียกไปยังแหล่งข้อมูล LedgerTransTypeList จาก 9,027 เป็น 240

![ข้อมูลการติดตามสำหรับแหล่งข้อมูล LedgerTransTypeList ในหน้าตัวออกแบบการแม็ปแบบจำลองใน RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping2a.png)

## <a name="review-the-execution-trace-in-the-application"></a>ตรวจทานการติดตามการดำเนินการในแอพลิเคชัน

นอกจาก RCS รุ่นบางรุ่นอาจมีความสามารถสำหรับประสบการณ์นักออกแบบกรอบงาน ER รุ่นเหล่านี้มีตัวเลือก **เปิดใช้งานโหมดการออกแบบ** ที่สามารถเปิดได้ คุณสามารถค้นหาตัวเลือกนี้บนแท็บ **ทั่วไป** ของหน้า **พารามิเตอร์การรายงานทางอิเล็กทรอนิกส์** ซึ่งคุณสามารถเปิดได้จากพื้นที่ทำงาน **การรายงานทางอิเล็กทรอนิกส์**

![เปิดใช้งานตัวเลือกโหมดการออกแบบบนหน้าพารามิเตอร์การรายงานทางอิเล็กทรอนิกส์](./media/GER-PerfTrace-GER-Parameters-DesignMode.png)

ถ้าคุณใช้รุ่นใดรุ่นหนึ่งต่อไปนี้ คุณสามารถวิเคราะห์รายละเอียดของการติดตามประสิทธิภาพที่สร้างขึ้นโดยตรงในแอพลิเคชัน คุณไม่จำเป็นต้องส่งออกจากแอพลิเคชัน และนำเข้าไปยัง RCS

## <a name="review-the-execution-trace-by-using-external-tools"></a>ตรวจทานการติดตามการดำเนินการโดยใช้เครื่องมือภายนอก

### <a name="configure-user-parameters"></a>ตั้งค่าคอนฟิกพารามิเตอร์ผู้ใช้

1. ไปที่ **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> การตั้งค่าคอนฟิก**
2. ในหน้า **การตั้งค่าคอนฟิก** บนบานหน้าต่างการดำเนินการ บนแท็บ **การตั้งค่าคอนฟิก** ในกลุ่ม **การตั้งค่าล่วงหน้า** เลือก **พารามิเตอร์ผู้ใช้**
3. ในกล่องโต้ตอบ **พารามิเตอร์ผู้ใช้** ในส่วน **การติดตามการดำเนินการ** ในฟิลด์ **รูปแบบการติดตามการดำเนินการ** เลือก **PerfView XML**

### <a name="run-the-er-format"></a>รันรูปแบบ ER

ทำซ้ำขั้นตอนในส่วน [รันรูปแบบ ER](#run-format) ก่อนหน้าในบทความนี้ เพื่อสร้างการติดตามประสิทธิภาพใหม่

โปรดสังเกตว่าเว็บเบราเซอร์มีไฟล์ซิปสำหรับการดาวน์โหลด ไฟล์นี้มีการติดตามประสิทธิภาพในรูปแบบ PerfView จากนั้น คุณสามารถใช้เครื่องมือวิเคราะห์ประสิทธิภาพ PerfView เพื่อวิเคราะห์รายละเอียดของการดำเนินการของรูปแบบ ER

![ข้อมูลการติดตามประสิทธิภาพในรูปแบบ PerfView](./media/GER-PerfTrace2-PerfViewTrace1.PNG)

## <a name="use-external-tools-to-review-an-execution-trace-that-includes-database-queries"></a>ใช้เครื่องมือภายนอกเพื่อตรวจทานการติดตามการดำเนินการที่มีการสอบถามฐานข้อมูล

เนื่องจากมีการปรับปรุงที่ทำกับกรอบงาน ER การติดตามประสิทธิภาพที่ถูกสร้างขึ้นในรูปแบบ PerfView ขณะนี้มีรายละเอียดเพิ่มเติมเกี่ยวกับการดำเนินการรูปแบบ ER ใน Microsoft Dynamics 365 Finance รุ่น 10.0.4 (กรกฎาคม 2019) การติดตามนี้ยังสามารถรวมรายละเอียดของการสอบถาม SQL ที่ดำเนินการไปยังฐานข้อมูลแอพลิเคชันด้วย

### <a name="configure-user-parameters"></a>ตั้งค่าคอนฟิกพารามิเตอร์ผู้ใช้

1. ไปที่ **การจัดการองค์กร** \> **การรายงานทางอิเล็กทรอนิกส์** \> **การตั้งค่าคอนฟิก**
2. ในหน้า **การตั้งค่าคอนฟิก** บนบานหน้าต่างการดำเนินการ บนแท็บ **การตั้งค่าคอนฟิก** ในกลุ่ม **การตั้งค่าล่วงหน้า** เลือก **พารามิเตอร์ผู้ใช้**
3. ในกล่องโต้ตอบ **พารามิเตอร์ผู้ใช้** ในส่วน **การติดตามการดำเนินการ** ตั้งค่าพารามิเตอร์ต่อไปนี้:

    - ในฟิลด์ **รูปแบบการติดตามการดำเนินการ** ให้เลือก **PerfView XML**
    - ตั้งค่าตัวเลือก **รวบรวมสถิติการสอบถาม** เป็น **ใช่**
    - ตั้งค่าตัวเลือก **การสอบถามการติดตาม** เป็น **ใช่**

    ![ส่วนการติดตามการดำเนินการ, กล่องโต้ตอบพารามิเตอร์ผู้ใช้](./media/GER-PerfTrace2-GER-UserParameters.PNG)

### <a name="run-the-er-format"></a>รันรูปแบบ ER

ทำซ้ำขั้นตอนในส่วน [รันรูปแบบ ER](#run-format) ก่อนหน้าในบทความนี้ เพื่อสร้างการติดตามประสิทธิภาพใหม่

โปรดสังเกตว่าเว็บเบราเซอร์มีไฟล์ซิปสำหรับการดาวน์โหลด ไฟล์นี้มีการติดตามประสิทธิภาพในรูปแบบ PerfView จากนั้น คุณสามารถใช้เครื่องมือวิเคราะห์ประสิทธิภาพ PerfView เพื่อวิเคราะห์รายละเอียดของการดำเนินการของรูปแบบ ER การติดตามนี้มีรายละเอียดของการเข้าถึงฐานข้อมูล SQL ในระหว่างการดำเนินการของรูปแบบ ER

![ข้อมูลการติดตามสำหรับรูปแบบ ER ที่ดำเนินการใน PerfView](./media/GER-PerfTrace2-PerfViewTrace2.PNG)

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

- [ภาพรวมการรายงานทางอิเล็กทรอนิกส์](general-electronic-reporting.md)
- [ปรับปรุงประสิทธิภาพการทำงานของโซลูชัน ER โดยการเพิ่มแหล่งข้อมูลฟิลด์ที่มีการคำนวณแบบพารามิเตอร์](er-calculated-field-ds-performance.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

