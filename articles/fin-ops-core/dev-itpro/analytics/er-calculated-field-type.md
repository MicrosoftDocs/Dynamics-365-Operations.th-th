---
title: สนับสนุนการเรียกแบบพารามิเตอร์ ของแหล่งข้อมูล ER ของชนิดฟิลด์ที่มีการคำนวณ
description: หัวข้อนี้จะให้ข้อมูลเกี่ยวกับวิธีการใช้ชนิดฟิลด์ที่มีการคำนวณสำหรับแหล่งข้อมูล ER
author: NickSelin
ms.date: 08/06/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: fbe06f2f4f0b9e738f27e87ae3ed5d10998ce949b854d088520837cef3ed9a9d
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/05/2021
ms.locfileid: "6740370"
---
# <a name="support-parameterized-calls-of-er-data-sources-of-the-calculated-field-type"></a>สนับสนุนการเรียกแบบพารามิเตอร์ ของแหล่งข้อมูล ER ของชนิดฟิลด์ที่มีการคำนวณ

[!include [banner](../includes/banner.md)]

หัวข้อนี้จะอธิบายวิธีการออกแบบแหล่งข้อมูลของการรายงานทางอิเล็กทรอนิกส์ (ER) โดยใช้ชนิด **ฟิลด์ที่มีการคำนวณ** แหล่งข้อมูลนี้อาจประกอบด้วยนิพจน์ ER ที่ซึ่งเมื่อดำเนินการ สามารถควบคุมโดยค่าของอาร์กิวเมนต์พารามิเตอร์ที่ได้รับการตั้งค่าคอนฟิกในการผูกที่เรียกแหล่งข้อมูลนี้ โดยการตั้งค่าคอนฟิกการเรียกแบบพารามิเตอร์ของแหล่งข้อมูลดังกล่าว คุณสามารถนำแหล่งข้อมูลหนึ่งมาใช้ใหม่ในการผูกหลายจำนวน ซึ่งจะลดจำนวนแหล่งข้อมูลทั้งหมดที่ต้องมีการตั้งค่าคอนฟิกในการแม็ปแบบจำลอง ER หรือรูปแบบ ER นอกจากนี้ยังช่วยให้คอมโพเนนต์ ER ที่ตั้งค่าคอนฟิก ช่วยลดต้นทุนการบำรุงรักษา และต้นทุนการใช้งานของผู้บริโภครายอื่นๆได้ง่ายขึ้น

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น
เพื่อทำตัวอย่างในหัวข้อนี้ให้เสร็จสมบูรณ์ คุณต้องมีการเข้าถึงต่อไปนี้:

- การเข้าถึงบทบาทอย่างใดอย่างหนึ่งต่อไปนี้:

    - นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
    - ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
    - ผู้ดูแลระบบ

- การเข้าถึง Regulatory Configuration Services (RCS) ที่ได้เตรียมใช้งานสำหรับผู้เช่ารายเดียวกันกับ Finance and Operations สำหรับหนึ่งในบทบาทต่อไปนี้:

    - นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
    - ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
    - ผู้ดูแลระบบ

นอกจากนี้ คุณต้องดาวน์โหลดและจัดเก็บไฟล์ต่อไปนี้โดยเฉพาะ

| **เนื้อหา**                           | **ชื่อไฟล์**                                        |
|---------------------------------------|------------------------------------------------------|
| การตั้งค่าคอนฟิกรูปแบบข้อมูล ER ตัวอย่าง    | [แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.xml](https://mbs.microsoft.com/customersource/global/AX/downloads/hot-fixes/365optelecrepeg)     |
| การตั้งค่าคอนฟิกข้อมูลเมตา ER ตัวอย่าง      | [ข้อมูลเมตาเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.xml](https://mbs.microsoft.com/customersource/global/AX/downloads/hot-fixes/365optelecrepeg)  |
| การตั้งค่าคอนฟิกการแม็ปรูปแบบข้อมูล ER ตัวอย่าง | [การแม็ปเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.1.xml](https://mbs.microsoft.com/customersource/global/AX/downloads/hot-fixes/365optelecrepeg) |
| การตั้งค่าคอนฟิกรูปแบบ ER ตัวอย่าง        | [รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.1.xml](https://mbs.microsoft.com/customersource/global/AX/downloads/hot-fixes/365optelecrepeg)  |

## <a name="sign-in-to-your-rcs-instance"></a>ลงชื่อเข้าใช้อินสแตนซ์ RCS ของคุณ
ในตัวอย่างนี้ คุณจะสร้างการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง Litware, Inc. คุณต้องทำขั้นตอนเหล่านี้ในกระบวนการ [สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายว่า ใช้งานอยู่](tasks/er-configuration-provider-mark-it-active-2016-11.md) ให้เสร็จสมบูรณ์ก่อนเป็นอันดับแรก ใน RCS

1. บนแดชบอร์ดเริ่มต้น ให้เลือก **การรายงานทางอิเล็กทรอนิกส์**
2. เลือก **การตั้งค่าคอนฟิกการรายงาน**
3. นำเข้าการตั้งค่าคอนฟิกที่ดาวน์โหลดไปยัง RCS ในลำดับต่อไปนี้: รูปแบบข้อมูล, ข้อมูลเมตา, การแม็ปรูปแบบ, รูปแบบ ดำเนินการขั้นตอนต่อไปนี้ให้สำเร็จ สำหรับแต่ละการตั้งค่าคอนฟิก ER

    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** จากนั้นเลือกการตั้งค่าคอนฟิก ER ที่จำเป็นในรูปแบบ XML
    4. เลือก **ตกลง**

## <a name="review-the-provided-er-solution"></a>ตรวจทานโซลูชัน ER ที่ระบุ

### <a name="review-model-mapping"></a>ตรวจทานการแม็ปรูปแบบ

1. ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2. เลือก **การแม็ปเพื่อเรียนรู้การเรียบแบบพารามิเตอร์**
3. เลือก **ตัวออกแบบ**
4. เลือก **ตัวออกแบบ**  
   
    การแม็ปรูปแบบ ER นี้ ได้รับการออกแบบมาให้ทำสิ่งต่อไปนี้:

    - ดึงข้อมูลรายการรหัสภาษี (แหล่งข้อมูล **ภาษี**) ที่อยู่ในตาราง **TaxTable**
    - ดึงข้อมูลรายการธุรกรรมภาษี (แหล่งข้อมูล **ธุรกรรม**) ที่อยู่ในตาราง **TaxTrans**
    
        - จัดกลุ่มรายการของธุรกรรมที่นำมาใช้ (แหล่งข้อมูล **Gr**) โดยรหัสภาษี
        - คำนวณสำหรับการจัดกลุ่มธุรกรรมตามมูลค่ารวมสำหรับแต่ละรหัสภาษี:

            - ผลรวมของมูลค่าฐานภาษี
            - ผลรวมของมูลค่าภาษี
            - มูลค่าต่ำสุดของอัตราภาษีที่ใช้

    การแม็ปรูปแบบในการตั้งค่าคอนฟิกนี้จะใช้รูปแบบข้อมูลพื้นฐาน สำหรับรูปแบบ ER ใดๆ ที่สร้างขึ้นสำหรับรูปแบบนี้ และดำเนินการใน Finance and Operations ดังนั้นจึงมีการเปิดเผยเนื้อหาของแหล่งข้อมูล **ภาษี** และ **Gr** สำหรับรูปแบบ ER เช่น แหล่งข้อมูลที่เป็นนามธรรม

    ![หน้าตัวออกแบบการแม็ปรูปแบบแสดงแหล่งข้อมูลของภาษี และ Gr](media/er-calculated-field-type-01.png)

5.  ปิดหน้า **ตัวออกแบบการแม็ปรูปแบบ**
6.  ปิดหน้า **การแม็ปรูปแบบ**

### <a name="review-format"></a>ตรวจทานรูปแบบ

1. ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2. เลือก **รูปแบบเพื่อเรียนรู้การเรียบแบบพารามิเตอร์**
3. เลือก **ตัวออกแบบ** รูปแบบ ER นี้ ได้รับการออกแบบมาให้ทำสิ่งต่อไปนี้:

    - สร้างรายงานภาษี ในรูปแบบ XML
    - แสดงระดับของภาษีต่อไปนี้ ในรายงานภาษี: ปกติ, ลดลง และ ไม่มี
    - แสดงรายละเอียดหลายรายการในแต่ละระดับภาษี ที่มีรายละเอียดที่แตกต่างกันในแต่ละระดับ

    ![หน้าตัวออกแบบรูปแบบ](media/er-calculated-field-type-02.png)

4. เลือก **การแม็ป**
5. ขยายรายการ **รูปแบบ** **ข้อมูล** และ **สรุป** 

    ฟิลด์ที่มีการคำนวณ **Model.Data.Summary.Level** ประกอบด้วยนิพจน์ที่ส่งคืนรหัสของระดับภาษี (**ปกติ** **ลดลง** **ไม่มี** หรือ **อื่นๆ**) เป็นค่าข้อความสำหรับรหัสภาษีใดๆ ที่สามารถดึงข้อมูลมาจากแหล่งข้อมูล **Model.Data.Summary** ในเวลารัน

    ![หน้าตัวออกแบบรูปแบบที่แสดงรายละเอียดของแบบจำลองรูปแบบข้อมูลเพื่อเรียนรู้การเรียกแบบพารามิเตอร์](media/er-calculated-field-type-03.png)

6. ขยายรายการ **Model**.**Data2**
7. ขยายรายการ **Model**.**Data2.Summary2**
   
    แหล่งข้อมูล **Model**.**Data2.Summary2** ถูกตั้งค่าคอนฟิกให้จัดกลุ่มรายละเอียดธุรกรรมแหล่งข้อมูล **Model.Data.Summary** ตามระดับภาษี (ส่งคืนโดยฟิลด์ที่มีการคำนวณ **Model.Data.Summary.Level**) และคำนวณการรวม

    ![หน้าตัวออกแบบรูปแบบที่แสดงรายละเอียดของแหล่งข้อมูล Model.Data2.Summary2](media/er-calculated-field-type-04.png)

8. ตรวจทานฟิลด์ที่มีการคำนวณ **Model**.**Data2 Level1**, **Model**.**Data2 Level2** และ **Model**.**Data2 Level3** ฟิลด์ที่มีการคำนวณเหล่านี้จะใช้ในการกรองรายการเรกคอร์ด **Model**.**Data2 Summary2** และส่งคืนเฉพาะเรกคอร์ดที่แสดงถึงระดับภาษีเฉพาะ
9. ปิดหน้า **ตัวออกแบบรูปแบบ**

## <a name="create-a-derived-format"></a>สร้างรูปแบบที่ได้รับ
คุณสามารถปรับปรุงรูปแบบที่ระบุได้โดยการเพิ่มฟิลด์ที่มีการคำนวณหนึ่งฟิลด์ เพื่อกรองระดับภาษีที่จำเป็นแทนการใช้ฟิลด์สามฟิลด์ที่มีอยู่: **Model**.**Data2 Level1**, **Model**.**Data2 Level2** และ **Model**.**Data2 Level3** สามารถระบุระดับภาษีที่จำเป็น ในสถานที่ที่ฟิลด์ที่มีการคำนวณใหม่จะถูกเรียก

1. ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2. เลือก **รูปแบบเพื่อเรียนรู้การเรียบแบบพารามิเตอร์**
3. เลือก **สร้างการตั้งค่าคอนฟิก**
4. เลือก **ได้รับมาจากชื่อ: รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์, Microsoft**
5. ในฟิลด์ **ชื่อ** ป้อน **รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์ (กำหนดเอง)**
6. เลือก **สร้างการตั้งค่าคอนฟิก**

## <a name="configure-a-parameterized-calculated-field-that-returns-a-list-of-records"></a>ตั้งค่าคอนฟิกฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ ซึ่งส่งคืนรายการเรกคอร์ด

### <a name="start-adding-a-new-calculated-field"></a>เริ่มต้นการเพิ่มฟิลด์ที่มีการคำนวณใหม่

1. เลือก **ตัวออกแบบ**
2. เลือก **ขยาย/ยุบ** เพื่อขยายรายการรูปแบบทั้งหมด
3. เลือก **การแม็ป**
4. ขยายรายการ **Model**
5. เลือกรายการ **Model.Data2**
6. เลือก **เพิ่ม**
7. เลือก **ฟังก์ชัน\\ฟิลด์ที่มีการคำนวณ**
8. ในฟิลด์ **ชื่อ** ให้ป้อน **เงินสด**
9. เลือก **แก้ไขสูตร**

### <a name="define-a-parameter-for-adding-a-calculated-field"></a>กำหนดพารามิเตอร์สำหรับการเพิ่มฟิลด์ที่มีการคำนวณ

1. เลือก **พารามิเตอร์**
2. เลือก **ใหม่**
3. ในฟิลด์ **ชื่อ** ป้อน **ระดับภาษี**
4. ในฟิลด์ **ชนิด** เลือก **สตริง**

    ชนิดข้อมูลพื้นฐานเท่านั้นที่สามารถใช้ในการระบุชนิดของอาร์กิวเมนต์ของพารามิเตอร์ ดังนั้น ชนิด **รายการเรกคอร์ด** **เรกคอร์ด** และ **Enum** จึงไม่สามารถใช้สำหรับวัตถุประสงค์นี้ได้

    จำนวนสูงสุดของพารามิเตอร์ที่สามารถระบุสำหรับฟิลด์ที่มีการคำนวณเพียงครั้งเดียว คือ 8

    ![รายการแหล่งข้อมูลพารามิเตอร์](media/er-calculated-field-type-05.png)

5. เลือก **ตกลง**

โดยการเพิ่มพารามิเตอร์นี้ คุณระบุเงื่อนไขที่ต้องอยู่ในสถานที่ที่จะเรียกฟิลด์ที่มีการคำนวณนี้ เมื่อคุณเรียกฟิลด์ที่มีการคำนวณนี้ คุณต้องระบุอาร์กิวเมนต์ของพารามิเตอร์ **ระดับภาษี** เป็นค่าที่มีรูปแบบ **สตริง**

   ตรวจสอบให้แน่ใจว่าคุณได้กำหนดพารามิเตอร์เฉพาะสำหรับฟิลด์ที่มีการคำนวณที่มีอยู่ในคอนเทนเนอร์ (**รายการเรกคอร์ด** **เรกคอร์ด** หรือ **คอนเทนเนอร์** อย่างใดอย่างหนึ่งเท่านั้น)

   พารามิเตอร์ที่ตั้งค่าคอนฟิกจะพร้อมใช้งานในรายการของแหล่งข้อมูลสำหรับฟิลด์ที่มีการคำนวณนี้ คุณสามารถเพิ่มพารามิเตอร์ให้กับนิพจน์ที่ตั้งค่าคอนฟิก โดยการเลือก **เพิ่มแหล่งข้อมูล**

   ![ฟิลด์แหล่งข้อมูล](media/er-calculated-field-type-06.png)

### <a name="define-an-expression-for-adding-a-calculated-field"></a>กำหนดนิพจน์สำหรับการเพิ่มฟิลด์ที่มีการคำนวณ

1. ในฟิลด์ **สูตร** ป้อน: 

    **WHERE(\@.Summary2, \@.Summary2.grouped.Level =**
    
2. เลือกพารามิเตอร์ **ระดับภาษี** ในรายการของแหล่งข้อมูล
3. เลือก **เพิ่มแหล่งข้อมูล**
4. ในฟิลด์ **สูตร** ดำเนินการนิพจน์ขั้นสุดท้ายดังนี้:  

    **WHERE(\@.Summary2, \@.Summary2.grouped.Level = 'Taxation Level')**

5. เลือก **บันทึก**

    ![ข้อมูลของฟิลด์แหล่งข้อมูล](media/er-calculated-field-type-07.png)

6. ปิดหน้า **ตัวออกแบบสูตร**

### <a name="finish-adding-a-new-calculated-field"></a>เสร็จสิ้นการเพิ่มฟิลด์ที่มีการคำนวณใหม่

- เลือก **ตกลง**

บนหน้า **ตัวออกแบบรูปแบบ** ฟิลด์ที่มีการคำนวณของพารามิเตอร์การตั้งค่าคอนฟิก **ระดับ** ต้องมีอาร์กิวเมนต์ **สตริง**

![รายการที่ขยายของระดับฟิลด์ที่มีการคำนวณ](media/er-calculated-field-type-08.png)

### <a name="use-the-configured-calculated-field-for-binding-format-elements&quot;></a>ใช้ฟิลด์ที่มีการคำนวณที่ตั้งค่าคอนฟิกสำหรับองค์ประกอบรูปแบบการผูก

1. เลือก **Model.Data2.Levels** เพื่อเลือกฟิลด์ที่มีการคำนวณที่ตั้งค่าคอนฟิก
2. เลือกองค์ประกอบรูปแบบ **Statement.Taxation.Regular**
3. เลือก **ผูก**
4. เลือก **ใช่** เพื่อยืนยันการแทนที่ของแหล่งข้อมูลที่ใช้อยู่ในปัจจุบัน **Level1** โดยแหล่งข้อมูลใหม่ **Levels** ในองค์ประกอบรูปแบบซ้อนกันทั้งหมดขององค์ประกอบรูปแบบที่เลือก

    การผูกที่นำไปใช้ถูกสร้างขึ้นเป็นการเรียกของฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ โดยค่าเริ่มต้น ชื่อขององค์ประกอบรูปแบบที่ผูกไว้ถูกใช้เป็นอาร์กิวเมนต์สำหรับฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ ภายใต้เงื่อนไขต่อไปนี้:

      - ฟิลด์ที่มีการคำนวณมีที่การตั้งค่าคอนฟิกให้ใช้พารามิเตอร์เดียว
      - ชนิดข้อมูลของพารามิเตอร์นี้ ถูกกำหนดเป็น **สตริง**

    เมื่อชื่อขององค์ประกอบรูปแบบที่ผูกไว้ว่างเปล่า ชื่อแหล่งข้อมูลขององค์ประกอบนี้จะถูกใช้ในการผูกที่นำไปใช้

5. เลือกองค์ประกอบรูปแบบ **Statement.Taxation.Reduced**
6. เลือก **ผูก**
7. เลือก **ใช่** เพื่อยืนยันการแทนที่ของแหล่งข้อมูลที่ใช้อยู่ในปัจจุบัน **Level2** โดยแหล่งข้อมูลใหม่ **Levels** ในองค์ประกอบรูปแบบซ้อนกันทั้งหมดภายใต้องค์ประกอบรูปแบบที่เลือก
8. เลือกองค์ประกอบรูปแบบ **Statement.Taxation.None**
9. เลือก **ผูก**
10. เลือก **ใช่** เพื่อยืนยันการแทนที่ของแหล่งข้อมูลที่ใช้อยู่ในปัจจุบัน **Level3** โดยแหล่งข้อมูลใหม่ **Levels** ในองค์ประกอบรูปแบบซ้อนกันทั้งหมดภายใต้องค์ประกอบรูปแบบที่เลือก

   เมื่อคุณระบุอาร์กิวเมนต์ของฟิลด์ที่มีการคำนวณแบบพารามิเตอร์สำหรับองค์ประกอบ XML ซึ่งแสดงถึงระดับภาษี (ตัวอย่าง เช่น **Model.Data2.Levels(&quot;ลดลง")** เป็นค่าข้อความ) คุณไม่จำเป็นต้องทำแบบเดียวกันสำหรับแอททริบิวต์ XML ที่ซ้อนกัน— การผูกจะสืบทอดค่าของอาร์กิวเมนต์ที่กำหนดไว้ในระดับหลัก (**Model.Data2.Levels.aggregated.Base** ไม่ใช่ **Model.Data2.Levels("Reduced").aggregated.Base**) โดยอัตโนมัติ

ไม่สนับสนุนการเรียกซ้ำของฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ใดๆ

คุณสามารถเลือก **แก้ไขสูตร** และเปลี่ยนอาร์กิวเมนต์ที่ใช้เป็นค่าเริ่มต้นของฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ ในการผูกที่เลือก ถ้าอาร์กิวเมนต์นี้หายไป อาจทำให้เกิดข้อผิดพลาดในเวลาที่ใช้—ผู้ใช้จะได้รับการแจ้งเกี่ยวกับสถานการณ์ดังกล่าว เมื่อรูปแบบปัจจุบันได้มีการตรวจสอบ

![การแจ้งเตือนการเตือนการตรวจสอบความถูกต้อง](media/er-calculated-field-type-10.png)

## <a name="configure-a-parameterized-calculated-field-to-return-a-record"></a>ตั้งค่าคอนฟิกฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ เพื่อส่งคืนเรกคอร์ด
เมื่อฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ส่งคืนเรกคอร์ด คุณต้องสนับสนุนการผูกฟิลด์แต่ละฟิลด์ของเรกคอร์ดนี้ เพื่อจัดรูปแบบองค์ประกอบ ในกรณีดังกล่าว จะไม่มีการผูกหลักที่มีค่าของอาร์กิวเมนต์ในการเรียกฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ ซึ่งต้องมีการกำหนดค่านี้ในการผูกฟิลด์ของเรกคอร์ดเดียว

### <a name="start-adding-a-new-calculated-field"></a>เริ่มต้นการเพิ่มฟิลด์ที่มีการคำนวณใหม่

1. เลือกรายการ **Model.Data2**
2. เลือก **เพิ่ม**
3. เลือก **ฟังก์ชัน\\ฟิลด์ที่มีการคำนวณ**
4. ในฟิลด์ **ชื่อ** ให้ป้อน **LevelRecord**
5. เลือก **แก้ไขสูตร**

### <a name="define-a-parameter-for-adding-a-calculated-field"></a>กำหนดพารามิเตอร์สำหรับการเพิ่มฟิลด์ที่มีการคำนวณ

1. เลือก **พารามิเตอร์**
2. เลือก **ใหม่**
3. ในฟิลด์ **ชื่อ** ป้อน **ระดับภาษี**
4. ในฟิลด์ **ชนิด** เลือก **สตริง**
5. เลือก **ตกลง**

### <a name="define-an-expression-for-adding-a-calculated-field"></a>กำหนดนิพจน์สำหรับการเพิ่มฟิลด์ที่มีการคำนวณ

1. ในฟิลด์ **สูตร** ป้อนดังต่อไปนี้:  
    
    **FIRSTORNULL(\@.Levels(**

2. เลือกพารามิเตอร์ **ระดับภาษี**
3. เลือก **เพิ่มแหล่งข้อมูล**
4. ในฟิลด์ **สูตร** ผนวก **'ระดับภาษี'))** กับสิ่งที่คุณป้อนไว้ในขั้นตอนที่ 1 เพื่อจบนิพจน์ให้กับ:  
    
    **FIRSTORNULL(\@.Levels('Taxation Level'))**

5. เลือก **บันทึก**
6. ปิดหน้า **ตัวออกแบบสูตร**

### <a name="finish-adding-a-new-calculated-field"></a>เสร็จสิ้นการเพิ่มฟิลด์ที่มีการคำนวณใหม่

-   เลือก **ตกลง**

### <a name="use-the-configured-calculated-field-to-bind-format-elements"></a>ใช้ฟิลด์ที่มีการคำนวณที่ตั้งค่าคอนฟิกเพื่อผูกองค์ประกอบรูปแบบ

1. ขยาย **Model.Data2.LevelRecord** เพื่อเลือกฟิลด์ที่มีการคำนวณที่ตั้งค่าคอนฟิก
2. ขยายคอนเทนเนอร์ **Model.Data2.LevelRecord.aggregated** บองฟิลด์ที่มีการคำนวณที่ตั้งค่าคอนฟิก
3. เลือกฟิลด์ **Model.Data2.LevelRecord.aggregated.Base**
4. เลือกองค์ประกอบรูปแบบ **Statement.Taxation.None**
5. เลือก **ยกเลิกการผูก**
6. เลือกองค์ประกอบรูปแบบ **Statement.Taxation.None.Base**
7. เลือก **ผูก**
8. เลือก **แก้ไขสูตร**
9. เปลี่ยนนิพจน์เป็น **Model.Data2.LevelRecord("None").aggregated.Base**

![นิพจน์ที่อัปเดตแล้ว](media/er-calculated-field-type-11.png)

## <a name="remove-calculated-fields-that-are-not-used"></a>ลบฟิลด์ที่มีการคำนวณที่ไม่ได้ใช้

1. เลือก **Model.Data2.Level1**
2. เลือก **ลบ**
3. เลือก **Model.Data2.Level2**
4. เลือก **ลบ**
5. เลือก **Model.Data2.Level3**
6. เลือก **ลบ**
7. เลือก **บันทึก**

  > [!NOTE]
  > คุณนำฟิลด์ที่มีการคำนวณเดียวกัน **Model.Data2.Levels** มาใช้ซ้ำหลายครั้งในการผูกรูปแบบ เป็นการง่ายมากที่จะใช้และรักษาฟิลด์ที่มีการคำนวณเดียว แทนที่จะทำเช่นนี้สำหรับฟิลด์ที่คล้ายกันหลายฟิลด์

8. ปิดหน้า **ตัวออกแบบรูปแบบ**

## <a name="complete-adjusted-version-of-a-derived-format"></a>เวอร์ชันที่ปรับปรุงเสร็จสมบูรณ์ของรูปแบบที่ได้รับ

1. ในแท็บด่วน **เวอร์ชัน** เลือก **เปลี่ยนสถานะ**
2. เลือก **เสร็จสมบูรณ์**

## <a name="export-completed-version-of-a-derived-format"></a>ส่งออกเวอร์ชันที่เสร็จสมบูรณ์ของรูปแบบที่ได้รับ

1. เลือกรูปแบบ **รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์ (กำหนดเอง)** ในแผนภูมิการตั้งค่าคอนฟิก
2. ในแท็บด่วน **เวอร์ชัน** เลือกเวอร์ชันที่เสร็จสมบูรณ์ 1.1.1
3. เลือก **แลกเปลี่ยน**
4. เลือก **ส่งออกเป็นไฟล์ XML**
5. จัดเก็บการตั้งค่าคอนฟิกที่ดาวน์โหลดไว้ภายในเครื่องในรูปแบบ XML

## <a name="test-er-formats"></a>ทดสอบรูปแบบ ER 
คุณสามารถรันรูปแบบ ER เริ่มต้นและที่ปรับปรุงแล้ว เพื่อให้แน่ใจว่าฟิลด์ที่มีการคำนวณแบบพารามิเตอร์ที่ตั้งค่าคอนฟิกทำงานได้อย่างถูกต้อง

### <a name="import-er-configurations"></a>นำเข้าการตั้งค่าคอนฟิกของ ER
คุณสามารถนำเข้าการตั้งค่าคอนฟิกที่ตรวจทานจาก RCS โดยใช้ที่จัดเก็บ ER ของชนิด **RCS** หากคุณดำเนินการตามขั้นตอนในหัวข้อแล้ว [นำเข้าการตั้งค่าคอนฟิกการรายงานอิเล็กทรอนิกส์( ER) จากRegulatory Configuration Services (RCS)](rcs-download-configurations.md) ใช้ที่จัดเก็บ ER ที่ตั้งค่าคอนฟิกเพื่อนำเข้าการตั้งค่าคอนฟิกที่กล่าวถึงก่อนหน้าในหัวข้อนี้ไปยังสภาพแวดล้อมของคุณ มิฉะนั้น ทำตามขั้นตอนเหล่านี้:

1. เลือกบริษัท **DEMF** และในแดชบอร์ดเริ่มต้น เลือก **การรายงานทางอิเล็กทรอนิกส์**
2. เลือก **การตั้งค่าคอนฟิกการรายงาน**
3. นำเข้าการตั้งค่าคอนฟิกจาก ศูนย์ดาวน์โหลด Microsoft ในลำดับต่อไปนี้: รูปแบบข้อมูล, การแม็ปรูปแบบ, รูปแบบ ดำเนินการขั้นตอนต่อไปนี้ให้สำเร็จ สำหรับแต่ละการตั้งค่าคอนฟิก ER

    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** เพื่อเลือกการตั้งค่าคอนฟิก ER ที่จำเป็นในรูปแบบ XML
    4. เลือก **ตกลง**

4. นำเข้าการส่งออกจาก RCS เวอร์ชั่นเสร็จสมบูรณ์ 1.1.1 ของรูปแบบ **รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์ (กำหนดเอง)**

    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** เพื่อเลือกไฟล์ที่จัดเก็บภายใน **รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์ (กำหนดเอง)** ในรูปแบบ XML
    4. เลือก **ตกลง**

### <a name="run-er-formats"></a>รันรูปแบบ ER

1. ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2. เลือก **รูปแบบเพื่อเรียนรู้การเรียบแบบพารามิเตอร์**
3. เลือก **รัน** บน ribbon บนสุด
4. บันทึกผลลัพธ์ที่สร้างขึ้นภายใน
5. เลือกรายการ **รูปแบบเพื่อเรียนรู้การเรียกใช้แบบพารามิเตอร์ (กำหนดเอง)**
6. เลือก **รัน** บน ribbon บนสุด
7. บันทึกผลลัพธ์ที่สร้างขึ้นภายในเครื่อง 
8. เปรียบเทียบเนื้อหาของผลลัพธ์ที่สร้างขึ้น

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

- [โปรแกรมออกแบบสูตรในการรายงานทางอิเล็กทรอนิกส์ (ER)](general-electronic-reporting-formula-designer.md)
- [ปรับปรุงประสิทธิภาพการทำงานของโซลูชัน ER โดยการเพิ่มแหล่งข้อมูลฟิลด์ที่มีการคำนวณแบบพารามิเตอร์](er-calculated-field-ds-performance.md)



[!INCLUDE[footer-include](../../../includes/footer-banner.md)]