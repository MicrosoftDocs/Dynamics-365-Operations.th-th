---
title: ใช้แหล่งข้อมูล JOIN ในการแม็ปแบบจำลอง ER เพื่อดึงข้อมูลจากหลายตารางแอปพลิเคชัน
description: หัวข้อนี้อธิบายวิธีการที่คุณสามารถใช้แหล่งข้อมูลชนิด JOIN ในการรายงานทางอิเล็กทรอนิกส์ (ER)
author: NickSelin
ms.date: 04/26/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, EROperationDesigner
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-03-01
ms.dyn365.ops.version: Release 10.0.1
ms.openlocfilehash: 5b4899cad01a0ed2424dcc5d29e9fb5cca65a6a9
ms.sourcegitcommit: c08a9d19eed1df03f32442ddb65a2adf1473d3b6
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 07/06/2021
ms.locfileid: "6351108"
---
# <a name="use-join-data-sources-to-get-data-from-multiple-application-tables-in-electronic-reporting-er-model-mappings"></a>ใช้แหล่งข้อมูล JOIN ในการรับข้อมูลจากหลายตารางแอปพลิเคชันในการแม็ปแบบจำลองการรายงานทางอิเล็กทรอนิกส์ (ER)

[!include[banner](../includes/banner.md)]

ขณะที่กำหนดค่าการแม็ปหรือรูปแบบของแบบจำลองการรายงานทางอิเล็กทรอนิกส์ (ER) คุณสามารถ [เพิ่ม](#review) แหล่งข้อมูลที่จำเป็นจากชนิดของ **การรวม** ระหว่างการออกแบบ แหล่งข้อมูล **การรวม** จะถูกกำหนดเป็นชุดของหลายแหล่งข้อมูลที่จะมีการส่งคืนเป็นรายการเรกคอร์ด สำหรับแหล่งข้อมูลทุกประเภท ยกเว้นประเภทแรก คุณจำเป็นต้องกำหนดเงื่อนไขที่จำเป็นเพื่อรวมเรกคอร์ดของแหล่งข้อมูลปัจจุบันและแหล่งข้อมูลก่อนหน้า เมื่อรันไทม์ แหล่งข้อมูลที่กำหนดแล้วของชนิด **การรวม** [จะส่งคืน](#executeERformat) รายการเรกคอร์ดเดี่ยวที่มีฟิลด์จากเรกคอร์ดของแหล่งข้อมูลเรียกซ้อน

ขณะนี้ระบบสนับสนุนชนิดของการรวมต่อไปนี้:

- ตัวเชื่อมภายนอก (ด้านซ้าย):
    - รวมเรกคอร์ดทั้งหมดของแหล่งข้อมูลแรก (ด้านซ้ายสุด) แล้วจับคู่ใดๆ ตามเงื่อนไขที่กำหนดค่าไว้ของแหล่งข้อมูลที่สอง (ด้านขวาสุด)
- ตัวเชื่อมภายใน (ด้านขวา):
    - รวมเรกคอร์ดเฉพาะของแหล่งข้อมูลแรก (ด้านซ้ายสุด) และเฉพาะของแหล่งข้อมูลที่สอง (ด้านขวาสุด) จับคู่กันตามเงื่อนไขที่ได้กำหนดค่าไว้

ในแหล่งข้อมูล **การรวม** ที่กำหนดค่าไว้ เมื่อแหล่งข้อมูลทั้งหมดเป็นชนิด **เรกคอร์ดตาราง** การดำเนินการของแหล่งข้อมูล Join สามารถ [ดำเนินการที่ระดับฐานข้อมูลได้](#analyze) โดยใช้คำสั่ง SQL เดี่ยว รายงานนี้จะช่วยลดจำนวนของการเรียกฐานข้อมูล ซึ่งจะช่วยปรับปรุงประสิทธิภาพของการแม็ปแบบจำลอง มิฉะนั้น การดำเนินการของ **ข้อมูลการรวม** จะดำเนินการในหน่วยความจำ

> [!NOTE]
> การใช้ฟังก์ชัน **VALUEIN** ในนิพจน์ ER ที่ระบุเงื่อนไขสำหรับเรกคอร์ดการรวมในแหล่งข้อมูลของชนิด Join ยังไม่ได้รับการสนับสนุน เยี่ยมชมเพจ [โปรแกรมออกแบบสูตรในการรายงานทางอิเล็กทรอนิกส์](general-electronic-reporting-formula-designer.md) สำหรับรายละเอียดเพิ่มเติมเกี่ยวกับฟังก์ชันนี้

เมื่อต้องการเรียนรู้เพิ่มเติมเกี่ยวกับคุณลักษณะนี้ ให้ดำเนินการตัวอย่างในหัวข้อนี้ให้เสร็จสมบูรณ์

## <a name="example-use-join-data-sources-in-er-model-mappings"></a>ตัวอย่าง: ใช้แหล่งข้อมูล JOIN ในการแม็ปแบบจำลอง ER

ขั้นตอนต่อไปนี้จะอธิบายวิธีที่ผู้ดูแลระบบหรือนักพัฒนาการรายทางทางอิเล็กทรอนิกส์ จะสามารถกำหนดค่าการแม็ปแบบจำลองการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อรับข้อมูลจากหลายตารางแอปพลิเคชันในครั้งเดียว โดยใช้แหล่งข้อมูลจากชนิด **การรวม** เพื่อปรับปรุงประสิทธิภาพการเข้าถึงข้อมูล ขั้นตอนเหล่านี้สามารถดำเนินการได้สำหรับบริษัทใดๆ ของ Dynamics 365 Finance หรือ Regulatory Configuration Services (RCS)

### <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

เพื่อดำเนินการตามตัวอย่างในหัวข้อนี้ให้สมบูรณ์ คุณจำเป็นต้องมีสิทธิ์เข้าถึงสิ่งต่อไปนี้ โดยขึ้นอยู่กับว่าจะใช้บริการใดในการดำเนินการตามขั้นตอนต่อไปนี้:

**การเข้าถึง Finance สำหรับหนึ่งในบทบาทต่อไปนี้:**

- นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
- ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
- ผู้ดูแลระบบ

**การเข้าถึง RCS สำหรับหนึ่งในบทบาทต่อไปนี้:**

- นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
- ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
- ผู้ดูแลระบบ

คุณยังจำเป็นต้องดำเนินการขั้นตอนแรกให้เสร็จสิ้นในขั้นตอนกระบวนงาน [สร้างผู้ให้บริการการกำหนดค่าและทำเครื่องหมายเป็นใช้งานอยู่](tasks/er-configuration-provider-mark-it-active-2016-11.md)

นอกจากนี้ คุณยังต้องดาวน์โหลดและบันทึกไฟล์การตั้งค่าคอนฟิก ER ตัวอย่างต่อไปนี้ไว้ล่วงหน้า:

| **คำอธิบายเนื้อหา**  | **ชื่อไฟล์**   |
|--------------------------|-----------------|
| ไฟล์ตัวอย่างการกำหนดค่า **แบบจำลองข้อมูล ER** ซึ่งใช้เป็นแหล่งข้อมูลสำหรับตัวอย่าง| [แบบจำลองเพื่อเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml](https://download.microsoft.com/download/5/c/1/5c1d8a57-6ebd-425b-bc5d-c71dde92c6af/ModeltolearnJOINdatasources.version.1.xml) |
| ไฟล์ตัวอย่างการกำหนดค่า **การแม็ปแบบจำลอง ER** ซึ่งจะนำไปใช้งานกับแบบจำลองข้อมูล ER สำหรับตัวอย่าง | [การแม็ปเพื่อเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml](https://download.microsoft.com/download/9/2/f/92f339ca-41fc-4f5e-b458-6983c957d3dd/MappingtolearnJOINdatasources.version.1.1.xml)|
| ไฟล์ตัวอย่างการกำหนดค่า **รูปแบบ ER** ไฟล์นี้จะอธิบายถึงข้อมูลที่จะนำไปเติมเป็นส่วนประกอบของรูปแบบ ER สำหรับตัวอย่าง | [รูปแบบเพื่อเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml](https://download.microsoft.com/download/f/f/8/ff8f1b48-14d0-4c73-9145-bcdf8b5265bc/FormattolearnJOINdatasources.version.1.1.xml) |

### <a name="activate-a-configurations-provider"></a>เรียกใช้ผู้ให้บริการการกำหนดค่า

1. เข้าถึง Finance หรือ RCS อย่างใดอย่างหนึ่งในเซสชันแรกของเว็บเบราว์เซอร์ของคุณ
2. ไปที่ **การจัดการองค์กร \> พื้นที่ทำงาน \> การรายงานทางอิเล็กทรอนิกส์**
3. ในหน้า **การกำหนดค่าการแปลเป็นภาษาท้องถิ่น** ในส่วน **ผู้ให้บริการการกำหนดค่า** ตรวจสอบให้แน่ใจว่า ผู้ให้บริการการกำหนดค่า สำหรับบริษัทตัวอย่าง [Litware, Inc.](http://www.litware.com) ถูกแสดงและมีการทำเครื่องหมายเป็น **ใช้งานอยู่** ถ้าคุณไม่เห็นผู้ให้บริการการกำหนดค่านี้ ทำตามขั้นตอนในกระบวนงาน [สร้างผู้ให้บริการการตั้งค่าคอนฟิกและทำเครื่องหมายเป็นใช้งานอยู่](tasks/er-configuration-provider-mark-it-active-2016-11.md)

    ![พื้นที่ทำงานการรายงานทางอิเล็กทรอนิกส์](./media/GER-JoinDS-ActiveProvider.PNG)

### <a name="import-sample-er-configuration-files"></a>นำเข้าไฟล์ตัวอย่างการกำหนดค่า ER

1. เลือก **การตั้งค่าคอนฟิกการรายงาน**
2. นำเข้าไฟล์การกำหนดค่าแบบจำลองข้อมูล ER
    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** เพื่อค้นหาไฟล์ **แบบจำลองเพื่อการเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml**
    4. เลือก **ตกลง**
3. นำเข้าไฟล์การกำหนดค่าการแม็ปแบบจำลอง ER
    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** เพื่อค้นหาไฟล์ **การแม็ปเพื่อการเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml**
    4. เลือก **ตกลง**
4. นำเข้าไฟล์การกำหนดค่ารูปแบบ ER
    1. เลือก **แลกเปลี่ยน**
    2. เลือก **โหลดจากไฟล์ XML**
    3. เลือก **เรียกดู** เพื่อค้นหาไฟล์ **รูปแบบเพื่อการเรียนรู้แหล่งข้อมูล JOIN.รุ่น.1.1.xml**
    4. เลือก **ตกลง**
5. ในแผนภูมิการกำหนดค่า ขยายรายการ **แบบจำลองเพื่อการเรียนรู้แหล่งข้อมูล JOIN** และรายการแบบจำลองอื่น (เมื่อสามารถใช้งานได้)
6. สังเกตรายการของการตั้งค่าคอนฟิก ER ในแผนภูมิและรายละเอียดรุ่นบน FastTab **รุ่น** – ซึ่งจะใช้เป็นแหล่งของข้อมูลสำหรับรายงานตัวอย่างของคุณ

    ![หน้าการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์](./media/GER-JoinDS-ConfigurationsTree.PNG)

### <a name="turn-on-execution-trace-options"></a>เปิดใช้ตัวเลือการติดตามการดำเนินการ

1. เลือก **การกำหนดค่า**
2. เลือก **พารามิเตอร์ผู้ใช้**
3. ตั้งค่าพารามิเตอร์การติดตามการดำเนินการ ตามที่ปรากฏในภาพหน้าจอด้านล่าง

    ![หน้าพารามิเตอร์ผู้ใช้การรายงานทางอิเล็กทรอนิกส์](./media/GER-JoinDS-Parameters.PNG)

    เมื่อเปิดใช้งานพารามิเตอร์เหล่านี้แล้ว สำหรับการดำเนินการทุกรายการของไฟล์รูป ER ที่นำเข้ามา การติดตามการดำเนินการจะถูกสร้างขึ้น โดยใช้รายละเอียดของการติดตามการดำเนินการที่สร้างขึ้น คุณสามารถวิเคราะห์การดำเนินการของส่วนประกอบการแม็ปรูปแบบ ER และแบบจำลอง ER เยี่ยมชมเพจ [ติดตามการดำเนินการของรูปแบบ ER เพื่อแก้ปัญหาประสิทธิภาพ](trace-execution-er-troubleshoot-perf.md) สำหรับรายละเอียดเกี่ยวกับคุณลักษณะการติดตามการดำเนินการ ER

### <a name="review-er-model-mapping-part-1"></a>ตรวจทานการแม็ปแบบจำลอง ER (ส่วนที่ 1)

ตรวจทานการตั้งค่าของส่วนประกอบการแม็ปแบบจำลอง ER ส่วนประกอบถูกำหนดค่าให้เข้าถึงข้อมูลเกี่ยวกับรุ่นของการกำหนดค่า ER รายละเอียดของการกำหนดค่าและผู้ให้บริการการกำหนดค่าโดยไม่ใช้แหล่งข้อมูลของชนิด **การรวม**

1. เลือกการกำหนดค่า **การแม็ปเพื่อการเรียนรู้แหล่งข้อมูล JOIN**
2. เลือก **ตัวออกแบบ** เพื่อเปิดรายการของการแม็ป
3. เลือก **ตัวออกแบบ** เพื่อตรวจทานรายละเอียดการแม็ป
4. เลือก **แสดงรายละเอียด**
5. ในแผนภูมิการกำหนดค่า ขยายแบบจำลองข้อมูล **Set1** และ **Set1.Details** ของรายการ:

    1. การผูก **Details: Record list = Versions** บ่งชี้ถึงรายการ **Set1.Details** ถูกผูกกับแหล่งข้อมูล **รุ่น** ส่งคืนเรกคอร์ดของตาราง **ERSolutionVersionTable** แต่ละเรกคอร์ดของตารางนี้แสดงถึงรุ่นเดียวของการกำหนดค่า ER เนื้อหาของตารางนี้แสดงอยู่ใน FastTab **รุ่น** ในหน้า **การตั้งค่าคอนฟิก**
    2. การผูก **ConfigurationVersion: String = @.PublicVersionNumber** หมายความว่าค่าของรุ่นสาธารณะของรุ่นการกำหนดค่า ER แต่ละรุ่นถูกนำมาจากฟิลด์ **PublicVersionNumber** ของตาราง **ERSolutionVersionTable** แนะนำไปวางในรายการ **ConfigurationVersion**
    3. การผูก **ConfigurationTitle: String = @.'>Relations'.Solution.Name** บ่งชี้ว่าชื่อของการกำหนดค่า ER ถูกนำมาจากฟิลด์ **ชื่อ** ของตาราง **ERSolutionTable** ประเมินโดนใช้ความสัมพันธ์แบบกลุ่มต่อหนึ่ง (**'>Relations'**) ระหว่างตาราง **ERSolutionVersionTable** และ **ERSolutionTable** ชื่อของการกำหนดค่า ER ของอินสแตนซ์แอปพลิเคชันปัจจุบันจะแสดงในแผนภูมิการกำหนดค่าในเพจ **การกำหนดค่า**
    4. การผูก **@.'>Relations'.Solution.'>Relations'.SolutionVendor.Name** หมายความว่าชื่อของผู้ให้บริการการกำหนดค่าที่เป็นเจ้าของการกำหนดค่าปัจจุบันถูกนำมาจากฟิลด์ **ชื่อ** ของตาราง **ERVendorTable** ประเมินโดยใช้ความสัมพันธ์แบบกลุ่มต่อหนึ่งระหว่างตาราง **ERSolutionTable** และ **ERVendorTable** ชื่อของผู้ให้บริการการกำหนดค่า ER แสดงในแผนภูมิการกำหนดค่าในเพจ **การกำหนดค่า** ในหัวข้อของเพจสำหรับแต่ละการกำหนดค่า รายการทั้งหมดของผู้ให้บริการการกำหนดค่ามีอยู่ในเพจตาราง **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> ผู้ให้บริการการกำหนดค่า**

    ![หน้าตัวออกแบบการแม็ปแบบจำลอง ER รายการของรายการแบบจำลองข้อมูลที่ผูกไว้](./media/GER-JoinDS-Set1Review.PNG)

6. ในแผนภูมิการกำหนดค่า ขยายแบบจำลองข้อมูล **Set1.Summary** ของรายการ:

    1. การผูก **VersionsNumber: Integer = VersionsSummary.aggregated.VersionsNumber** บ่งชี้ว่ารายการ **Set1.Summary.VersionsNumber** ถูกผูกกับฟิลด์การรวม **VersionsNumber** ในแหล่งข้อมูล **VersionsSummary** ของชนิด **GroupBy** ที่ถูกกำหนดค่าไว้กับการส่งคืนจำนวนของเรกคอร์ดของตาราง **ERSolutionVersionTable** ผ่านแหล่งข้อมูล **Versions**

    ![แก้ไขหน้าพารามิเตอร์ 'จัดกลุ่มตาม'](./media/GER-JoinDS-Set1GroupByReview.PNG)

7. ปิดหน้า

### <a name="review-er-model-mapping-part-2"></a><a name="review"></a>ตรวจทานการแม็ปแบบจำลอง ER (ส่วนที่ 2)

ตรวจทานการตั้งค่าของส่วนประกอบการแม็ปแบบจำลอง ER ส่วนประกอบถูกกำหนดค่าเพื่อเข้าถึงข้อมูลเกี่ยวกับรุ่นของการกำหนดค่า ER รายละเอียดของการกำหนดค่าและผู้ให้บริการการกำหนดค่าด้วยชนิด **การรวม** ของแหล่งข้อมูล

1. ในแผนภูมิการกำหนดค่า ขยายแบบจำลองข้อมูล **Set2** และ **Set2.Details** ของรายการ: การผูก **Details: Record list = Details** บ่งชี้ว่ารายการ **Set2.Details** ถูกผูกกับแหล่งข้อมูล **รายละเอียด** ตามที่กำหนดค่าเป็นแหล่งข้อมูลของชนิด **การรวม**

    ![หน้าโปรแกรมออกแบบการแม็ปแบบจำลอง ER ที่แสดงรายการ Set2:รูปแบบข้อมูลเรกคอร์ด](./media/GER-JoinDS-Set2Review.PNG)

    แหล่งข้อมูล **การรวม** สามารถเพิ่มโดยการเลือกแหล่งข้อมูล **Functions\Join**:

    ![หน้าโปรแกรมออกแบบการแม็ปแบบจำลอง ER ชนิดแหล่งข้อมูล Join](./media/GER-JoinDS-AddJoinDS.PNG)

2. เลือกแหล่งข้อมูล **รายละเอียด**
3. เลือก **แก้ไข** ในบานหน้าต่าง **แหล่งข้อมูล**
4. เลือก **แก้ไขการรวม**
5. เลือก **แสดงรายละเอียด**

    ![หน้าพารามิเตอร์แหล่งข้อมูล JOIN](./media/GER-JoinDS-JoinDSEditor.PNG)

    เพจนี้ใช้เพื่อออกแบบแหล่งข้อมูลที่จำเป็นของ **ชนิดการรวม** เมื่อรันไทม์ แหล่งข้อมูลนี้จะสร้างรายการรวมเดี่ยวของเรกคอร์ดจากแหล่งข้อมูลในกริด **รายการที่รวมแล้ว** การรวมของเรกคอร์ดจะเริ่มจากแหล่งข้อมูล **ConfigurationProviders** ที่อยู่ในกริดเหมือนกับอันแรก (คอลัมน์ **ชนิด** จะว่างเปล่าสำหรับฟิลด์นั้น) เรกคอร์ดของทุกแหล่งข้อมูลจะถูกรวมตามลำดับไปยังเรกคอร์ดของแหล่งข้อมูลหลักตามลำดับในกริด แหล่งข้อมูลที่มีการรวมต้องถูกกำหนดค่าเป็นแหล่งข้อมูลเรียกซ้อนภายใต้แหล่งข้อมูลเป้าหมาย (แหล่งข้อมูล `1Versions` เรียกซ้อนอยู่ภายใต้ `1Configurations` แหล่งข้อมูล `1Configurations` เรียกซ้อนอยู่ภายใต้ **ConfigurationProviders**) แหล่งข้อมูลที่กำหนดค่าไว้แต่ละรายการจำเป็นต้องมีเงื่อนไขสำหรับการรวม ในแหล่งข้อมูลสำหรับ **การรวม** โดยเฉพาะครั้งนี้ การรวมต่อไปนี้จะถูกกำหนดเป็น:

    - แต่ละเรกคอร์ดของแหล่งข้อมูล **ConfigurationProviders** (อ้างอิงถึงตาราง **ERVendorTable** ) ถูกรวมกับเฉพาะเรกคอร์ดของ **1Configurations** (อ้างอิงถึงตาราง **ERSolutionTable**) มีค่าเดียวกันกับฟิลด์ **SolutionVendor** และ **RecId** ชนิด **ตัวเชื่อมภายใน** จะถูกใช้สำหรับการรวมครั้งนี้และเงื่อนไขต่อจากนี้สำหรับเรกคอร์ดที่ตรงกัน

    ตัวกรอง (Configurations, Configurations.SolutionVendor = ConfigurationProviders.RecId)

    - แต่ละเรกคอร์ดของแหล่งข้อมูล **1Configurations** (อ้างอิงถึงตาราง **ERSolutionTable**) ถูกรวมกับเฉพาะเรกคอร์ดของ **1Versions** (อ้างอิงถึงตาราง **ERSolutionVersionTable**) มีค่าเดียวกันกับฟิลด์ **Solution** และ **RecId** ชนิด **ตัวเชื่อมภายใน** จะถูกใช้สำหรับการรวมครั้งนี้และเงื่อนไขต่อจากนี้สำหรับเรกคอร์ดที่ตรงกัน

    ตัวกรอง (ConfigurationVersions, ConfigurationVersions.Solution = ConfigurationProviders.'1Configurations'.RecId)

    - ตัวเลือก **ดำเนินการ** ถูกกำหนดค่าเป็น **การสอบถาม** หมายความว่าแหล่งข้อมูลการรวมนี้จะถูกดำเนินการเมื่อรันไทม์บนระดับฐานข้อมูลเป็นการเรียก SQL โดยตรง

    สำหรับการรวมเรกคอร์ดของแหล่งข้อมูลแสดงถึงตารางแอปพลิเคชัน คุณสามารถระบุเงื่อนไขการรวมโดยการใช้คู่ของฟิลด์นอกจากที่ใช้อธิบายความสัมพันธ์ AOT ระหว่างตารางที่มีอยู่ ชนิดของการรวมนี้สามารถกดหนดค่าเพื่อดำเนินการที่ระดับฐานข้อมูลได้

6. ปิดหน้า
7. เลือก **ยกเลิก**
8. ในแผนภูมิการกำหนดค่า ขยายแบบจำลองข้อมูล **Set2.Summary** ของรายการ:

    - การผูก **VersionsNumber: Integer = DetailsSummary.aggregated.VersionsNumber** บ่งชี้ว่ารายการ **Set2.Summary.VersionsNumber** ถูกผูกกับฟิลด์การรวม **VersionsNumber** ในแหล่งข้อมูล **DetailsSummary** ของชนิด **GroupBy** ที่ถูกกำหนดค่าไว้กับการส่งคืนจำนวนของเรกคอร์ดที่รวมแล้วของแหล่งข้อมูล **รายละเอียด** ของชนิด **การรวม**
    - ตัวเลือกสถานที่ **การดำเนินการ** ถูกกำหนดค่าเป็น **การสอบถาม** หมายความว่าแหล่งข้อมูล **GroupBy** นี้จะถูกดำเนินการเมื่อรันไทม์เป็นการเรียก SQL โดยตรงที่ระดับฐานข้อมูล ลักษณะการทำงานนี้เป็นไปได้เนื่องจากแหล่งข้อมูลฐาน **รายละเอียด** ของชนิด **การรวม** ถูกกำหนดค่าเป็นดำเนินการที่ระดับฐานข้อมูล

    ![หน้าพารามิเตอร์แหล่งข้อมูล GROUPBY](./media/GER-JoinDS-Set2GroupByReview.PNG)

9. ปิดหน้า
10. เลือก **ยกเลิก**

### <a name="execute-er-format"></a><a name="executeERformat"></a> ดำเนินการรูปแบบ ER

1. เข้าถึง Finance หรือ RCS ในเซสชันที่สองของเว็บเบราว์เซอร์ของคุณโดยใช้ข้อมูลประจำตัวและบริษัทเดิมกับที่ใช้ในเซสชันแรก
2. ไปที่ **การจัดการองค์กร \> การรายงานทางอิเล็กทรอนิกส์ \> การตั้งค่าคอนฟิก**
3. ขยายการกำหนดค่า **แบบจำลองเพื่อการเรียนรู้แหล่งข้อมูล JOIN**
4. เลือกการกำหนดค่า **รูปแบบเพื่อการเรียนรู้แหล่งข้อมูล JOIN**
5. เลือก **ตัวออกแบบ**
6. เลือก **แสดงรายละเอียด**
7. เลือก **การแม็ป**
8. เลือก **ขยาย/ยุบ**

    รูปแบบนี้ได้รับการออกแบบมาเพื่อเติมข้อมูลไฟล์ข้อความที่สร้างขึ้นด้วยรายการใหม่สำหรับทุกๆ รุ่นของการกำหนดค่า ER (ลำดับ **รุ่น**) แต่ละรายการที่ถูกสร้างขึ้นจะประกอบด้วยชื่อของผู้ให้บริการการกำหนดค่าที่เป็นเจ้าของการกำหนดค่าปัจจุบัน ชื่อของการกำหนดค่า และรุ่นของการกำหนดค่าถูกคั่นด้วยเครื่องหมายอัฒภาค รายการสุดท้ายที่สร้างขึ้นจะประกอบด้วยจำนวนของรุ่นของการกำหนดค่า ER ที่พบ (ลำดับ **สรุป**)

    ![หน้าโปรแกรมออกแบบรูปแบบ ER แท็บรูปแบบ](./media/GER-JoinDS-FormatReview.PNG)

    แหล่งข้อมูล **ข้อมูล** และ **สรุป** จะถูกใช้เพื่อเติมรายละเอียดรุ่นการกำหนดค่าไปยังไฟล์ที่สร้างขึ้น:

    - ข้อมูลจากแบบจำลองข้อมูล **Set1** ถูกใช้เมื่อคุณเลือก **ไม่** สำหรับแหล่งข้อมูล **ตัวเลือก** เมื่อรันไทม์บนเพจโต้ตอบผู้ใช้ระหว่างการเรียกใช้รูปแบบ ER
    - ข้อมูลจากแบบจำลองข้อมูล **Set2** ถูกใช้เมื่อคุณเลือก **ใช่** สำหรับแหล่งข้อมูล **ตัวเลือก** เมื่อรันไทม์บนเพจโต้ตอบผู้ใช้

    ![หน้าโปรแกรมออกแบบรูปแบบ ER แท็บการแม็ป](./media/GER-JoinDS-FormatMappingReview.PNG)

9. เลือก **รัน**
10. ในเพจโต้ตอบ เลือก **ไม่** ในฟิลด์ **ใช้แหล่งข้อมูล JOIN**
11. เลือก **ตกลง**
12. ตรวจทานไฟล์ที่สร้างขึ้น

    ![พารามิเตอร์รายงานอิเล็กทรอนิกส์ที่สร้างไฟล์ไม่ได้ใช้แหล่งข้อมูล JOIN](./media/GER-JoinDS-Set1Run.PNG)

#### <a name="analyze-er-format-execution-trace"></a>วิเคราะห์การติดตามการเรียกใช้รูปแบบ ER

1. ในเซสชันแรกของ Finance หรือ RCS ให้เลือก **ตัวออกแบบ**
2. เลือก **การติดตามประสิทธิภาพ**
3. ในกริด **การติดตามประสิทธิภาพ** ให้เลือกเรกคอร์ดบนสุดของการติดตามการเรียกใช้ล่าสุดของรูปแบบ ER ที่ใช้ส่วนประกอบการแม็ปแบบจำลองปัจจุบัน
4. เลือก **ตกลง**

    สถิติการเรียกใช้จะช่วยแจ้งให้คุณทราบถึงการเรียกใช้ไปยังตารางแอปพลิเคชันที่ซ้ำกัน

    - **ERSolutionTable** ถูกเรียกหลายครั้งตามที่คุณมีเรกคอร์ดรุ่นการกำหนดค่าในตาราง **ERSolutionVersionTable** ขณะที่จำนวนของการเรียกอาจถูกลดจำนวนครั้งเพื่อปรับปรุงประสิทธิภาพ
    - **ERSolutionTable** ถูกเรียกสองครั้งตามต่อทุกเรกคอร์ดรุ่นการกำหนดค่าที่พบในตาราง **ERSolutionVersionTable** ขณะที่จำนวนของการเรียกอาจถูกลดด้วยเช่นกัน

    ![สถิติการดำเนินการในหน้าโปรแกรมออกแบบการแม็ปแบบจำลอง ER](./media/GER-JoinDS-Set1Run2.PNG)

5. ปิดหน้า

### <a name="execute-er-format"></a>ดำเนินการรูปแบบ ER

1. สลับไปยังแท็บเว็บเบราว์เซอร์ของคุณด้วยเซสชันที่สองของ Finance หรือ RCS
2. เลือก **รัน**
3. บนเพจโต้ตอบ ให้เลือก **ใช่** ในฟิลด์ **ใช้แหล่งข้อมูล JOIN**
4. เลือก **ตกลง**
5. ตรวจทานไฟล์ที่สร้างขึ้น

    ![พารามิเตอร์ของรายงานอิเล็กทรอนิกส์ที่สร้างไฟล์โดยใช้แหล่งข้อมูล JOIN](./media/GER-JoinDS-Set2Run.PNG)

#### <a name="analyze-er-format-execution-trace"></a><a name="analyze"></a> วิเคราะห์การติดตามการเรียกใช้รูปแบบ ER

1. ในเซสชันแรกของ Finance หรือ RCS ให้เลือก **ตัวออกแบบ**
2. เลือก **การติดตามประสิทธิภาพ**
3. ในกริด **การติดตามประสิทธิภาพ** ให้เลือกเรกคอร์ดบนสุดที่แสดงการติดตามการเรียกใช้ล่าสุดของรูปแบบ ER ที่ใช้ส่วนประกอบการแม็ปแบบจำลองปัจจุบัน
4. เลือก **ตกลง**

    สถิติจะแจ้งให้คุณทราบต่อไปนี้:

    - ฐานข้อมูลแอปพลิเคชันถูกเรียกหนึ่งครั้งเพื่อรับเรกคอร์ดจากตาราง **ERVendorTable**, **ERSolutionTable** และ **ERSolutionVersionTable** เพื่อเข้าถึงฟิลด์ที่จำเป็น

    ![รายละเอียดสถิติการดำเนินการในหน้าโปรแกรมออกแบบการแม็ปแบบจำลอง ER](./media/GER-JoinDS-Set2Run2.PNG)

    - ฐานข้อมูลแอปพลิเคชันถูกเรียกหนึ่งครั้งเพื่อคำนวณจำนวนของรุ่นการกำหนดค่าโดยใช้การรวมที่กำหนดค่าไว้ในแหล่งข้อมูล **รายละเอียด**

    ![หน้าโปรแกรมออกแบบการแม็ปแบบจำลอง ER ที่แสดงการเรียกฐานข้อมูลแอปพลิเคชัน](./media/GER-JoinDS-Set2Run3.PNG)

## <a name="limitations"></a>การจำกัด

ดังเช่นที่คุณสามารถเห็นได้จากตัวอย่างในหัวข้อนี้ แหล่งข้อมูล **JOIN** สามารถสร้างได้จากหลายแหล่งข้อมูลที่อธิบายชุดข้อมูลแต่ละชุดของเรกคอร์ดที่ต้องเข้าร่วมในที่สุด คุณสามารถตั้งค่าคอนฟิกแหล่งข้อมูลเหล่านั้นได้โดยใช้ฟังก์ชัน [ตัวกรอง](er-functions-list-filter.md) ER ที่มีอยู่ในตัว เมื่อคุณตั้งค่าคอนฟิกแหล่งข้อมูลเพื่อให้ถูกเรียกเกินแหล่งข้อมูล **JOIN** คุณสามารถใช้ช่วงของบริษัทเป็นส่วนหนึ่งของเงื่อนไขสําหรับการเลือกข้อมูล การดําเนินการเริ่มต้นของแหล่งข้อมูล **JOIN** ไม่สนับสนุนแหล่งข้อมูลชนิดนี้ ตัวอย่างเช่น เมื่อคุณเรียกแหล่งข้อมูลตาม [ตัวกรอง](er-functions-list-filter.md) ภายในขอบเขตของการดําเนินการของแหล่งข้อมูล **JOIN** ถ้าแหล่งข้อมูลที่เรียกประกอบด้วยช่วงของบริษัทเป็นส่วนหนึ่งของเงื่อนไขสําหรับการเลือกข้อมูล ข้อยกเว้นจะเกิดขึ้น

ใน Microsoft Dynamics 365 Finance รุ่น 10.0.12 (สิงหาคม 2563) คุณสามารถใช้ช่วงของบริษัทเป็นส่วนหนึ่งของเงื่อนไขสำหรับการเลือกข้อมูลในแหล่งข้อมูลตาม [ตัวกรอง](er-functions-list-filter.md) ที่เรียก ภายในขอบเขตของการดําเนินการของแหล่งข้อมูล **JOIN** เนื่องจากข้อจํากัดของตัวสร้าง [การสอบถาม](../dev-ref/xpp-library-objects.md#query-object-model) โปรแกรมประยุกต์ ช่วงของบริษัทได้รับการสนับสนุนเฉพาะแหล่งข้อมูลแรกของแหล่งข้อมูล **JOIN**

### <a name="example"></a>ตัวอย่าง

ตัวอย่างเช่น คุณต้องเรียกครั้งเดียวไปยังฐานข้อมูลโปรแกรมประยุกต์ เพื่อรับรายการธุรกรรมการค้าต่างประเทศของบริษัทหลายบริษัท และรายละเอียดของสินค้าในสินค้าคงคลังที่อ้างอิงถึงในธุรกรรมเหล่านั้น

ในกรณีนี้ คุณตั้งค่าคอนฟิกสิ่งประดิษฐ์ต่อไปนี้ในการแม็ปแบบจําลอง ER ของคุณ:

- แหล่งข้อมูลราก **อินทราสแทต** ที่แสดงถึงตาราง **อินทราสแทต**
- แหล่งข้อมูลราก **สินค้า** ที่แสดงถึงตาราง **InventTable**
- แหล่งข้อมูลราก **บริษัท** ที่ส่งคืนรายชื่อของบริษัท (**DEMF** และ **GBSI** ในตัวอย่างนี้) ที่ธุรกรรมต้องเข้าถึง รหัสบริษัทจะพร้อมใช้งานจากฟิลด์ **รหัสบริษัท**
- แหล่งข้อมูลราก **X1** ที่มีนิพจน์ `FILTER (Intrastat, VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code))` ในฐานะส่วนหนึ่งของการเลือกข้อมูล นิพจน์นี้ประกอบด้วยคํานิยามของช่วงบริษัท `VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code)`
- แหล่งข้อมูล **X2** เป็นรายการที่ซ้อนกันของแหล่งข้อมูล **X1** ซึ่งรวมนิจน์ของ `FILTER (Items, Items.ItemId = X1.ItemId)`

สุดท้ายนี้ คุณสามารถกําหนดค่าแหล่งข้อมูล **JOIN** ที่ **X1** เป็นแหล่งข้อมูลแรกและ **X2** เป็นแหล่งข้อมูลที่สอง คุณสามารถระบุ **การสอบถาม** เป็นตัวเลือก **การดําเนินการ** เพื่อบังคับให้ ER เรียกใช้แหล่งข้อมูลนี้ในระดับฐานข้อมูลเป็นการเรียก SQL โดยตรง

เมื่อเรียกใช้แหล่งข้อมูลที่ตั้งค่าคอนฟิกในขณะที่การดําเนินการ ER [ถูกติดตาม](trace-execution-er-troubleshoot-perf.md) รายงานต่อไปนี้จะแสดงในโปรแกรมออกแบบการแม็ปแบบจำลอง ER เพื่อส่วนหนึ่งของการติดตามประสิทธิภาพ ER

`SELECT ... FROM INTRASTAT T1 CROSS JOIN INVENTTABLE T2 WHERE ((T1.PARTITION=?) AND (T1.DATAAREAID IN (N'DEMF',N'GBSI') )) AND ((T2.PARTITION=?) AND (T2.ITEMID=T1.ITEMID AND (T2.DATAAREAID = T1.DATAAREAID) AND (T2.PARTITION = T1.PARTITION))) ORDER BY T1.DISPATCHID,T1.SEQNUM`

> [!NOTE]
> มีข้อผิดพลาดเกิดขึ้นถ้าคุณเรียกใช้แหล่งข้อมูล **JOIN** ที่ถูกกําหนดค่าเพื่อให้ประกอบด้วยเงื่อนไขการเลือกข้อมูลที่มีช่วงของบริษัทสําหรับแหล่งข้อมูลเพิ่มเติมของแหล่งข้อมูล **JOIN** ที่ดําเนินการ

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[ตัวออกแบบสูตรในการรายงานทางอิเล็กทรอนิกส์](general-electronic-reporting-formula-designer.md)

[การดำเนินการติดตามของรูปแบบ ER เพื่อแก้ไขปัญหาประสิทธิภาพการทำงาน](trace-execution-er-troubleshoot-perf.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
