---
title: ตั้งค่าคอนฟิกแหล่งข้อมูลการค้นหาเพื่อใช้พารามิเตอร์เฉพาะแอปพลิเคชันการรายงานทางอิเล็กทรอนิกส์
description: หัวข้อนี้อธิบายวิธีการตั้งค่าคอนฟิกแหล่งข้อมูลการค้นหาในรูปแบบการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อใช้พารามิเตอร์ที่ระบุไว้สำหรับแอปลิเคชันของ ER
author: NickSelin
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 2849df85c37c4ed00754be91b9a9708db1bb16b7d0eb49d3a61d169037687196
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/05/2021
ms.locfileid: "6723200"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a>ตั้งค่าคอนฟิกแหล่งข้อมูลการค้นหาเพื่อใช้พารามิเตอร์เฉพาะแอปพลิเคชันการรายงานทางอิเล็กทรอนิกส์ 

[!include[banner](../includes/banner.md)]

คุณลักษณะพารามิเตอร์เฉพาะของโปรแกรมประยุกต์ [การรายงานทางอิเล็กทรอนิกส์ (ER)](general-electronic-reporting.md) ให้คุณตั้งค่าคอนฟิกการกรองข้อมูลในรูปแบบ ER ซึ่งขึ้นอยู่กับชุดของกฎนามธรรม ชุดของกฎนี้สามารถตั้งค่าคอนฟิกให้ใช้แหล่งข้อมูลของชนิด **การค้นหา** ที่มีอยู่ในรูปแบบ ER คุณสามารถระบุกฎจริงนอกเหนือจากตัวออกแบบส่วนประกอบ ER โดยใช้อินเทอร์เฟสผู้ใช้ (UI) ซึ่งสร้างขึ้นโดยอัตโนมัติตามการตั้งค่าของแหล่งข้อมูล **การค้นหา** ของรูปแบบ ER และข้อมูลนิติบุคคลปัจจุบัน สุดท้ายแล้ว กฎที่ระบุจะเข้าถึงโดยแหล่งข้อมูล **การค้นหา** ของรูปแบบ ER เมื่อรันรูปแบบ ER นี้

> [!NOTE]
> ใช้แหล่งข้อมูลที่ตั้งค่าคอนฟิกของรูปแบบ ER ที่แก้ไขได้ เพื่อระบุข้อมูลแอปพลิเคชันที่ใช้เพื่อตั้งค่าคอนฟิกกฎจริง

ใช้ [โปรแกรมออกแบบการดําเนินการ ER](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) เพื่อเตรียมแหล่งข้อมูลของชนิด **การค้นหา** ให้เป็นรูปแบบ ER ของคุณ ต้องตั้งค่าคอนฟิกแหล่งข้อมูลเพื่ออธิบายลักษณะกฎนามธรรมของคุณ รวมถึงสิ่งต่อไปนี้:

   - ชุดพารามิเตอร์ของชนิดข้อมูลบางประเภท ซึ่งมีการระบุค่าเพื่อระบุกฎเดียว
   - ชนิดค่าของชนิดข้อมูลบางประเภทที่ส่งคืนโดยกฎหนึ่ง ๆ เมื่อกฎนี้ถือว่าเหมาะสมที่สุดระหว่างกฎอื่น ๆ

คุณสามารถตั้งค่าคอนฟิกชนิดของแหล่งข้อมูล **การค้นหา** ต่อไปนี้ โดยขึ้นอยู่กับชนิดของค่าที่ส่งคืนโดยกฎที่ตั้งค่าคอนฟิกใด ๆ:

   - ใช้ชนิด **รูปแบบข้อมูล\การค้นหา** เมื่อต้องส่งคืนค่าการแจงนับแบบจำลอง
   - ใช้ชนิด **การดําเนินการ\การค้นหาของ Dynamics 365** เมื่อต้องส่งคืนค่าการแจงนับแอปพลิเคชันหรือค่า [ชนิดข้อมูลแบบขยาย](../extensibility/extensible-edts.md) ของแอปพลิเคชัน
   - ใช้ชนิด **การแจงนับ\การค้นหารูปแบบ** เมื่อต้องส่งคืนค่าการแจงนับรูปแบบ

ภาพประกอบต่อไปนี้แสดงวิธีที่สามารถตั้งค่าคอนฟิกการแจงนับรูปแบบในรูปแบบ ER ตัวอย่าง

   ![การแสดงการแจงนับรูปแบบเป็นฐานของแหล่งข้อมูลการค้นหาที่ตั้งค่าคอนฟิก](./media/er-lookup-data-sources-img1.gif)

ในภาพต่อไปนี้จะแสดงส่วนประกอบของรูปแบบที่มีการตั้งค่าคอนฟิกให้รายงานภาษีชนิดต่าง ๆ ในส่วนอื่นของรายงานที่สร้างขึ้น

   ![การแสดงส่วนรูปแบบเพื่อรายงานภาษีชนิดต่างๆ แยกต่างหาก](./media/er-lookup-data-sources-img2.png)

ภาพประกอบต่อไปนี้แสดงวิธีการที่โปรแกรมออกแบบการดําเนินการ ER อนุญาตให้เพิ่มแหล่งข้อมูลของชนิด **การแจงนับ\การค้นหารูปแบบ**  แหล่งข้อมูลที่เพิ่มมีการตั้งค่าคอนฟิกเป็นส่งคืนค่าของการแจงนับรูปแบบ `List of taxation levels`

   ![การเพิ่มแหล่งข้อมูล ER ของชนิดการแจงนับ\การค้นหารูปแบบ](./media/er-lookup-data-sources-img3.gif)

ภาพอธิบายต่อไปนี้แสดงวิธีการตั้งค่าคอนฟิกแหล่งข้อมูลที่เพิ่มเพื่อใช้ฟิลด์ **รหัส** ของรายการเรกคอร์ด **Model.Data.Tax** ของแหล่งข้อมูล **แบบจำลอง** เป็นพารามิเตอร์ที่ต้องระบุให้กับทุกกฎที่ตั้งค่าคอนฟิก

![การตั้งค่าคอนฟิกพารามิเตอร์ของแหล่งข้อมูลที่เพิ่มของชนิดการแจงนับ\การค้นหารูปแบบ](./media/er-lookup-data-sources-img4.gif)

แหล่งข้อมูล `Model.Data.Tax` ที่เพิ่มมีการตั้งค่าคอนฟิกให้ระบุรหัสภาษีให้กับกฎที่ตั้งค่าคอนฟิกไว้ทุกกฎ โดยการเข้าถึงเรกคอร์ดของตารางแอปพลิเคชัน **TaxTable**

   ![ตรวจทานแหล่งข้อมูลการค้นหาของบริษัทเดียวของชนิดการแจงนับ\การค้นหารูปแบบ](./media/er-lookup-data-sources-img5.gif)

คุณสามารถตั้งค่ากฎการค้นหาของรูปแบบ ER ที่เลือกได้ โดยใช้ UI ที่สอดคล้องกับโครงสร้างของแหล่งข้อมูลที่ตั้งค่าคอนฟิกไว้โดยอัตโนมัติ ปัจจุบัน UI นี้ต้องการให้แต่ละกฎ คุณระบุค่าที่ส่งคืน `List of taxation levels` เป็นค่าการแจงหมายเลขรูปแบบรวมทั้งรหัสภาษีเป็นพารามิเตอร์

   ![ตั้งค่ากฎเกี่ยวกับแหล่งข้อมูลที่ตั้งค่าคอนฟิก](./media/er-lookup-data-sources-img6.gif)

รูปภาพประกอบต่อไปนี้แสดงวิธีตั้งค่าคอนฟิกแหล่งข้อมูล `Model.Data.Summary.LevelByLookup` ของชนิด **ฟิลด์ที่คํานวณได้** เพื่อเรียกแหล่งข้อมูล **การค้นหา** ที่ตั้งค่าคอนฟิกซึ่งให้พารามิเตอร์ที่กําหนด เมื่อต้องการประมวลผลการเรียกนี้ในช่วงรันไทม์ ER จะผ่านรายการกฎที่ตั้งค่าคอนฟิกไว้ในลำดับที่กําหนดเพื่อค้นหากฎแรกที่ตอบสนองเงื่อนไขที่ระบุ ในตัวอย่างนี้ กฎนี้จะมีรหัสภาษีที่ตรงกับกฎที่ระบุ ผลลัพธ์คือจะพบกฎที่เหมาะสมที่สุดและค่าการแจงนับที่มีการกำหนดค่ากฏที่พบจะถูกส่งคืนมาโดยแหล่งข้อมูลนี้

> [!NOTE]
> มีข้อยกเว้นเมื่อไม่พบกฎที่ใช้ได้ เมื่อต้องการป้องกันข้อยกเว้นเหล่านี้ ให้ตั้งค่าคอนฟิกกฎเพิ่มเติมตามหลังรายการกฎเพื่อจัดการกรณีเมื่อไม่ได้ตั้งค่าคอนฟิกหรือไม่ได้ให้ค่าไว้ ใช้ตัวเลือก **\*ไม่ว่าง\*** และ **\*ว่าง\*** ตามลำดับ  
>
> ![เพิ่มแหล่งข้อมูลเพื่อเรียกแหล่งข้อมูลการค้นหาที่ตั้งค่าคอนฟิก](./media/er-lookup-data-sources-img7.png)

เมื่อคุณตั้งค่าตัวเลือก **ระหว่างบริษัท** เป็น **ใช่** เพื่อแหล่งข้อมูลการค้นหาที่แก้ไขได้ คุณเพิ่มพารามิเตอร์ **บริษัท** ที่ต้องใช้ใหม่ในชุดพารามิเตอร์ของแหล่งข้อมูลนี้ ต้องระบุค่าของพารามิเตอร์ **บริษัท** ในช่วงรันไทม์เมื่อเรียกแหล่งข้อมูลการค้นหา เมื่อมีการระบุรหัสบริษัทในช่วงรันไทม์ มีการใช้กฎที่ตั้งค่าคอนฟิกไว้ให้กับบริษัทนี้เพื่อค้นหากฎที่เหมาะสมที่สุด และส่งคืนค่าที่สอดคล้องกัน ภาพอธิบายต่อไปนี้จะแสดงวิธีการและวิธีการตั้งค่าพารามิเตอร์ของแหล่งข้อมูลที่แก้ไขได้มีการเปลี่ยนแปลง

   ![ตรวจทานแหล่งข้อมูลการค้นหาระหว่างบริษัทของชนิดการแจงนับ\การค้นหารูปแบบ](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> เลือกทุกบริษัทโดยแยกต่างหากเพื่อตั้งค่าคอนฟิกชุดกฎของแหล่งข้อมูลการค้นหานี้ของรูปแบบ ER ที่แก้ไขได้ มีข้อยกเว้นเกิดขึ้นขณะรันไทม์เมื่อเรียกการค้นหาระหว่างบริษัทด้วยรหัสของบริษัทซึ่งการตั้งค่าการค้นหาไม่เสร็จสมบูรณ์
>
> ตรวจสอบให้แน่ใจว่าคุณให้สิทธิแก่ผู้ใช้ที่รันรูปแบบ ER ด้วยแหล่งข้อมูลการค้นหา **ระหว่างบริษัท** เพื่อเข้าถึงข้อมูลของบริษัททุกแห่งซึ่งอยู่ในขอบเขตของแหล่งข้อมูลนี้ มิฉะนั้น ข้อยกเว้นจะเกิดขึ้นในขณะรันไทม์

เริ่มต้นในรุ่น 10.0.19 ความสามารถแบบขยายของแหล่งข้อมูล **การค้นหา** พร้อมใช้งาน เมื่อคุณตั้งค่าตัวเลือก **ขยาย** เป็น **ใช่** เพื่อแหล่งข้อมูลการค้นหาที่แก้ไขได้ แหล่งข้อมูลการค้นหาที่ตั้งค่าคอนฟิกจะถูกแปลงไปยังแหล่งข้อมูลที่มีโครงสร้าง ซึ่งเสนอความสามารถเพิ่มเติมเพื่อวิเคราะห์ชุดกฎที่ตั้งค่าคอนฟิกไว้ ในแผนภาพต่อไปนี้แสดงการแปลงนี้

   ![ตรวจทานแหล่งข้อมูลการค้นหาแบบมีโครงสร้างของชนิดการแจงนับ\การค้นหารูปแบบ](./media/er-lookup-data-sources-img9.gif)

- รายการย่อย **การค้นหา** ได้รับการออกแบบเป็นฟังก์ชันเพื่อค้นหากฎที่เหมาะสมที่สุดจากชุดของกฎที่สามารถตั้งค่าคอนฟิกได้ ตามชุดพารามิเตอร์ที่ระบุ
- รายการย่อย **IsLookupResultSet** ได้รับการออกแบบเป็นฟังก์ชันที่จะยอมรับค่าที่ระบุของแหล่งข้อมูลการแจงหมายเลขพื้นฐานและส่งคืนค่า *บูลีน* เป็น **จริง** เมื่อชุดกฎมีอย่างน้อยหนึ่งกฎ ซึ่งมีการตั้งค่าคอนฟิกค่าการแจงหมายเลขที่ระบุเป็นค่าที่ส่งคืน ฟังก์ชันนี้จะส่งคืนค่า *บูลีน* เป็น **เท็จ** เมื่อไม่มีการตั้งค่าคอนฟิกกฎเพื่อส่งคืนค่าการแจงนับที่ระบุ
- รายการย่อย **การตั้งค่า** ได้รับการออกแบบเป็นฟังก์ชันที่จะส่งคืนชุดกฎที่ตั้งค่าคอนฟิกไว้เป็นเรกคอร์ดของรายการเรกคอร์ด ค่าที่ส่งคืนและชุดของพารามิเตอร์ของกฎที่ตั้งค่าคอนฟิกจะถูกนําเสนอในเรกคอร์ดที่ส่งคืนทุกเรกคอร์ด เป็นฟิลด์ของชนิดข้อมูลที่เกี่ยวข้องดังนี้

    - ค่าที่ส่งคืนแสดงเป็นฟิลด์ **ผลลัพธ์การค้นหา**
    - พารามิเตอร์ที่ตั้งค่าคอนฟิกจะแสดงเป็นฟิลด์ที่มีชื่อของพารามิเตอร์ (ฟิลด์ **รหัส** ในตัวอย่างนี้)

หากต้องการข้อมูลเพิ่มเติมเกี่ยวกับวิธีตั้งค่าคอนฟิกแหล่งข้อมูล **การค้นหา** โปรดดูที่ [ตั้งค่าคอนฟิกรูปแบบ ER เพื่อใช้พารามิเตอร์ที่ระบุไว้ต่อนิติบุคคล](er-app-specific-parameters-configure-format.md) หากต้องการทราบวิธีการตั้งค่ากฎการค้นหา โปรดดู [การตั้งค่าพารามิเตอร์ของรูปแบบ ER ต่อนิติบุคคล](er-app-specific-parameters-set-up.md)

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[ตั้งค่าคอนฟิกรูปแบบการรายงานทางอิเล็กทรอนิกส์เพื่อใช้พารามิเตอร์ที่ระบุสำหรับนิติบุคคลแต่ละรายการ](er-app-specific-parameters-configure-format.md)

[ตั้งค่าพารามิเตอร์ของรูปแบบการรายงานทางอิเล็กทรอนิกส์สำหรับนิติบุคคลแต่ละรายการ](er-app-specific-parameters-set-up.md)
