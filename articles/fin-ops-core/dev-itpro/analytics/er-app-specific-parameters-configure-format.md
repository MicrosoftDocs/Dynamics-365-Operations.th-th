---
title: ตั้งค่าคอนฟิกรูปแบบการรายงานทางอิเล็กทรอนิกส์เพื่อใช้พารามิเตอร์ที่ระบุสำหรับนิติบุคคลแต่ละรายการ
description: บทความนี้อธิบายวิธีการตั้งค่าคอนฟิกรูปแบบการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อใช้พารามิเตอร์ที่ระบุไว้สำหรับแต่ละนิติบุคคล
author: kfend
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.custom: ''
ms.assetid: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
ms.openlocfilehash: b81c9c8fd1639b9af53c8e15a041c00db8c19752
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/12/2022
ms.locfileid: "9292690"
---
# <a name="configure-er-formats-to-use-parameters-that-are-specified-per-legal-entity"></a>ตั้งค่าคอนฟิกรูปแบบ ER เพื่อใช้พารามิเตอร์ที่ระบุสำหรับแต่ละนิติบุคคล

[!include[banner](../includes/banner.md)]

## <a name="overview"></a>ภาพรวม

ในรูปแบบการรายงานทางอิเล็กทรอนิกส์ (ER) หลายรูปแบบที่คุณจะออกแบบ คุณต้องกรองข้อมูลโดยใช้ชุดของค่าที่เกี่ยวข้องกับแต่ละนิติบุคคลของอินสแตนซ์ของคุณ (ตัวอย่าง เช่น ชุดของรหัสภาษีที่จะกรองข้อมูลธุรกรรมภาษี) ในขณะนี้ เมื่อกรองชนิดนี้มีการตั้งค่าคอนฟิกในรูปแบบ ER ค่าที่ขึ้นอยู่กับนิติบุคคล (ตัวอย่าง เช่น รหัสภาษี) จะใช้ในนิพจน์ของรูปแบบ ER เพื่อระบุกฎการกรองข้อมูล ดังนั้น รูปแบบ ER จึงทำให้นิติบุคคล–เฉพาะเจาะจง และเพื่อสร้างรายงานที่จำเป็น คุณต้องสร้างสำเนาที่สืบทอดมาของรูปแบบ ER ดั้งเดิม สำหรับแต่ละนิติบุคคลที่คุณต้องรันรูปแบบ ER แต่ละรูปแบบ ER ที่สืบทอดมาต้องได้รับการแก้ไข เพื่อดึงข้อมูลค่านิติบุคคล–เฉพาะ ข้างใน ปรับใช้เมื่อใดก็ตามที่มีการอัพเดตเวอร์ชันดั้งเดิม (พื้นฐาน) แล้วส่งออกจากสภาพแวดล้อมการทดสอบ และนำเข้าไปยังสภาพแวดล้อมการใช้งานจริง เมื่อต้องปรับใช้สำหรับการใช้งานจริง และอื่นๆ ดังนั้น การบำรุงรักษาชนิดของโซลูชัน ER ที่ตั้งค่าคอนฟิกนี้ซับซ้อนและใช้เวลานานหลายประการดังนี้:

-   ยิ่งเป็นนิติบุคคลมากเท่าไร ยิ่งต้องรักษาการกำหนดค่ารูปแบบ ER มากเท่านั้น
-   การบำรุงรักษาของการตั้งค่าคอนฟิก ER กำหนดให้ผู้ใช้ที่เป็นธุรกิจต้องมีความรู้ ER

คุณลักษณะพารามิเตอร์เฉพาะของโปรแกรมประยุกต์ ER ให้ผู้ใช้ระดับสูงตั้งค่าคอนฟิกการกรองข้อมูลในรูปแบบ ER ซึ่งขึ้นอยู่กับชุดของกฎนามธรรม ชุดของกฎนี้สามารถตั้งค่าคอนฟิกให้ใช้แหล่งข้อมูลที่มีอยู่ในรูปแบบ ER ผู้ใช้ทางธุรกิจสามารถระบุกฎจริงนอกเหนือจากกรอบงาน ER โดยใช้อินเทอร์เฟสผู้ใช้ (UI) ซึ่งสร้างขึ้นโดยอัตโนมัติตามการตั้งค่าของรูปแบบ ER ที่สอดคล้องกัน และข้อมูลนิติบุคคลปัจจุบัน ที่จะเข้าถึงโดยแหล่งข้อมูลของรูปแบบ ER ชุดของกฎที่ระบุสำหรับรูปแบบ ER สามารถส่งออกจากนิติบุคคลปัจจุบันของอินสแตนซ์ Dynamics 365 Finance (การเงิน) จากนั้นจึงสามารถนำเข้าไปยังนิติบุคคลอื่นของอินสแตนซ์ทางการเงินเดียวกัน หรืออินสแตนซ์ที่แตกต่างกัน เป็นชุดของกฎสำหรับรูปแบบ ER เดียวกัน

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

การทำตัวอย่างในบทความนี้ให้เสร็จสมบูรณ์ คุณต้องเข้าถึงอินสแตนซ์ของ Regulatory Configuration Services (RCS) ที่ได้เตรียมใช้งานสำหรับผู้เช่ารายเดียวกันกับ Finance สำหรับหนึ่งในบทบาทต่อไปนี้:

- นักพัฒนาการรายงานทางอิเล็กทรอนิกส์
- ที่ปรึกษาด้านการทำงานของการรายงานทางอิเล็กทรอนิกส์
- ผู้ดูแลระบบ

เราขอแนะนำให้คุณทำตามขั้นตอนให้สำเร็จ ในบทความ [สนับสนุนการเรียกแบบใช้พารามิเตอร์ของแหล่งข้อมูล ER ของชนิดฟิลด์ที่คำนวณได้](er-calculated-field-type.md) ถ้าคุณดำเนินการขั้นตอนดังกล่าวเสร็จเรียบร้อยแล้ วคุณสามารถข้ามขั้นตอนในส่วน **นำเข้าการตั้งค่าคอนฟิก ER ลงใน RCS** ที่ตามมา

## <a name="import-er-configurations-into-rcs"></a>นำเข้าการตั้งค่าคอนฟิก ER ลงใน RCS

ดาวน์โหลดและจัดเก็บการตั้งค่าคอนฟิก ER ต่อไปนี้ไว้ภายในเครื่อง

| **คำอธิบายเนื้อหา**                        | **ชื่อไฟล์**                                        |
|------------------------------------------------|------------------------------------------------------|
| ไฟล์การตั้งค่าคอนฟิก **แบบจำลองข้อมูล ER** ตัวอย่าง    | [แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.xml](https://download.microsoft.com/download/2/d/b/2db913a0-3622-494e-91a2-97fc494af9b9/Modeltolearnparameterizedcalls.version.1.xml)     |
| ไฟล์การตั้งค่าคอนฟิก **ข้อมูลเมตา ER** ตัวอย่าง      | [ข้อมูลเมตาเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.xml](https://download.microsoft.com/download/1/b/3/1b343968-5a47-4000-b5a8-6487698ef4c0/Metadatatolearnparameterizedcalls.version.1.xml)  |
| ไฟล์การตั้งค่าคอนฟิก **การแม็ปแบบจำลอง ER** ตัวอย่าง | [การแม็ปเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.1.xml](https://download.microsoft.com/download/8/6/6/866e0ab6-2e05-4d98-9d52-d2da2038f6e4/Mappingtolearnparameterizedcalls.version.1.1.xml) |
| การตั้งค่าคอนฟิก **รูปแบบ ER** ตัวอย่าง             | [รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์.เวอร์ชั่น.1.1.xml](https://download.microsoft.com/download/e/3/9/e392eadc-b9b4-4834-95c3-b8066dd00b9c/Formattolearnparameterizedcalls.version.1.1.xml)  |

ถัดไป ลงชื่อเข้าใช้อินสแตนซ์ RCS ของคุณ

ในตัวอย่างนี้ คุณจะสร้างการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง Litware, Inc ก่อนที่คุณจะสามารถเพื่อทำตามขั้นตอนเหล่านี้ในกระบวนงาน คุณต้องทำขั้นตอนในบทความ [สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายว่าใช้งานอยู่](tasks/er-configuration-provider-mark-it-active-2016-11.md) ใน RCS ให้เสร็จสมบูรณ์ก่อน

1.  บนแดชบอร์ดเริ่มต้น ให้เลือก **การรายงานทางอิเล็กทรอนิกส์**
2.  เลือก **การตั้งค่าคอนฟิกการรายงาน**
3.  นำเข้าการตั้งค่าคอนฟิก ER ที่คุณดาวน์โหลดก่อนหน้านี้ ไปยัง RCS ในคำสั่งต่อไปนี้: แบบจำลองข้อมูล ข้อมูลเมตา การแม็ปแบบจำลอง และ รูปแบบ สำหรับการตั้งค่าคอนฟิก ER แต่ละรายการ ทำตามขั้นตอนเหล่านี้:

    1.  เลือก **แลกเปลี่ยน**
    2.  เลือก **โหลดจากไฟล์ XML**
    3.  เลือก **เรียกดู** เพื่อเลือกไฟล์สำหรับการตั้งค่าคอนฟิก ER ที่จำเป็นในรูปแบบ XML
    4.  เลือก **ตกลง**

## <a name="review-the-er-solution-that-is-provided"></a>ตรวจทานโซลูชัน ER ที่ระบุ

1.  ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2.  เลือกรายการ **รูปแบบเพื่อเรียนรู้การเรียกใช้แบบพารามิเตอร์**
3.  เลือก **ตัวออกแบบ**
4.  เลือก **ขยาย/ยุบ**

    รูปแบบ ER **รูปแบบเพื่อเรียนรู้การเรียกใช้แบบพารามิเตอร์** ถูกออกแบบมาเพื่อสร้างใบแจ้งยอดภาษีในรูปแบบ XML ซึ่งแสดงให้ทราบถึงระดับของภาษีต่างๆ (ปกติ ลดลง และ ไม่มี) แต่ละระดับมีจำนวนรายละเอียดแตกต่างกัน

    ![รูปแบบ ER หลายระดับ รูปแบบในการเรียนรู้การเรียกแบบใช้พารามิเตอร์](./media/RCS-AppSpecParms-ReviewFormat.PNG)

5.  บนแท็บ **การแม็ป** ให้ขยายรายการ **แบบจำลอง** **ข้อมูล** และ **สรุป**

    แหล่งข้อมูล **Model.Data.Summary** ส่งคืนรายการของธุรกรรมภาษี ธุรกรรมเหล่านี้ถูกสรุปโดยรหัสภาษี สำหรับแหล่งข้อมูลนี้ ฟิลด์ที่คำนวณได้ **Model.Data.Summary.Level** ถูกกำหนดค่าให้ส่งคืนรหัสสำหรับระดับภาษี ของเรกคอร์ดสรุปแต่ละเรกคอร์ด สำหรับรหัสภาษีที่สามารถดึงข้อมูลจากแหล่งข้อมูลในช่วงรันไทม์ **Model.Data.Summary** ฟิลด์ที่คำนวณได้จะส่งคืนค่ารหัสระดับภาษี (**ทั่วไป** **ลดลง** **ไม่มี** หรือ **อื่นๆ**) เป็นค่าข้อความ ฟิลด์ที่คำนวณได้ **Model.Data.Summary.Level** จะใช้เพื่อกรองข้อมูลเรกคอร์ดของแหล่งข้อมูล **Model.Data.Summary** และป้อนข้อมูลที่ถูกกรองในแต่ละองค์ประกอบ XML ที่แสดงถึงระดับภาษีโดยใช้ฟิลด์ **Model.Data2.Level1** **Model.Data2.Level2** และ **Model.Data2.Level3**

    ![รายการแหล่งข้อมูล Model.Data.Summary ของธุรกรรมภาษี](./media/RCS-AppSpecParms-ReviewFormat-Data2Fld.PNG)

    ฟิลด์ที่คำนวณได้ **Model.Data.Summary.Level** ซึ่งตั้งค่าคอนฟิก เพื่อให้มีนิพจน์ ER รหัสภาษี (**VAT19** **InVAT19** **VAT7** **InVAT7** **THIRD** และ **InVAT0**) เป็นฮาร์ดโค้ด ในการตั้งค่าคอนฟิกนี้ ดังนั้น รูปแบบ ER นี้ขึ้นอยู่กับนิติบุคคลที่มีการตั้งค่าคอนฟิกรหัสภาษีเหล่านี้

    ![ฟิลด์ที่คํานวณได้ของ Model.Data.Summary.Level ที่มีรหัสภาษีแบบฮาร์ดโค้ด](./media/RCS-AppSpecParms-ReviewFormat-LevelFld.PNG)

    การสนับสนุนชุดของรหัสภาษีที่แตกต่างกันสำหรับแต่ละนิติบุคคล คุณต้องปฏิบัติตามขั้นตอนต่อไปนี้:

    - สร้างเวอร์ชันที่สืบทอดมาของรูปแบบ ER สำหรับแต่ละนิติบุคคล
    - อัพเดตรหัสภาษีในฟิลด์ที่คำนวณได้ **Model.Data.Summary.Level** ตามการตั้งค่านิติบุคคล

6.  ปิดหน้า **ตัวออกแบบรูปแบบ**

## <a name="create-a-derived-format"></a>สร้างรูปแบบที่ได้รับ

ถัดไป คุณจะใช้คุณลักษณะการทำงานของพารามิเตอร์เฉพาะโปรแกรมประยุกต์ ER เพื่อสนับสนุนชุดของรหัสภาษีที่แตกต่างกัน สำหรับแต่ละนิติบุคคลในรูปแบบ ER เดียว

1.  ในแผนภูมิการตั้งค่าคอนฟิก ให้ขยายเนื้อหาของรายการ **แบบจำลองเพื่อเรียนรู้การเรียกแบบพารามิเตอร์**
2.  เลือกรายการ **รูปแบบเพื่อเรียนรู้การเรียกใช้แบบพารามิเตอร์**
3.  เลือก **สร้างการตั้งค่าคอนฟิก**
4.  เลือกตัวเลือก **ได้รับมาจากชื่อ: รูปแบบเพื่อเรียนรู้การเรียกแบบพารามิเตอร์, Microsoft**
5.  ในฟิลด์ **ชื่อ** ป้อน **รูปแบบเพื่อเรียนรู้การค้นหาข้อมูล LE**
6.  เลือก **สร้างการตั้งค่าคอนฟิก**

## <a name="configure-a-derived-format"></a>ตั้งค่าคอนฟิกรูปแบบที่สืบทอดมา

### <a name="add-a-format-enumeration"></a>เพิ่มการแจงนับรูปแบบ

ถัดไป คุณจะเพิ่มการแจงนับรูปแบบ ER ใหม่ ค่าของการแจงนับรูปแบบนี้ จะนำเสนอให้กับผู้ใช้ทางธุรกิจ ซึ่งจะระบุชุดที่ไม่ขึ้นอยู่กับรหัสภาษีสำหรับระดับภาษีต่างๆ ที่ใช้ในรูปแบบ ER

1.  เลือก **ตัวออกแบบ**
2.  เลือก **รูปแบบการแจงนับ**
3.  เลือก **เพิ่ม**
4.  ในฟิลด์ **ชื่อ** ป้อน **รายการของระดับภาษี**
5.  เลือก **บันทึก**
6.  บนแท็บ **ค่ารูปแบบการแจงนับ** เลือก **เพิ่ม**
7.  ในฟิลด์ **ชื่อ** ป้อน **ภาษีปกติ**
8.  เลือก **เพิ่ม** อีกครั้ง
9.  ในฟิลด์ **ชื่อ** ป้อน **ภาษีที่ลดลง**
10. เลือก **เพิ่ม** อีกครั้ง
11. ในฟิลด์ **ชื่อ** ป้อน **ไม่มีภาษี**
12. เลือก **เพิ่ม** อีกครั้ง
13. ในฟิลด์ **ชื่อ** ให้ป้อน **อื่นๆ**

    ![เรกคอร์ดใหม่ในหน้าการแจงนับรูปแบบ](./media/RCS-AppSpecParms-ConfigureFormat-Enum.PNG)

    เนื่องจากผู้ใช้ที่เป็นธุรกิจอาจใช้ภาษาต่างๆ เพื่อระบุชุดของรหัสภาษีที่ไม่ขึ้นอยู่กับค่าที่เป็นของนิติบุคคล เราขอแนะนำให้คุณแปลค่าของการแจงนับนี้เป็นภาษาที่ได้รับการตั้งค่าคอนฟิกเป็นภาษาที่ต้องการสำหรับผู้ใช้เหล่านั้นในการเงิน

14. เลือกเรกคอร์ด **ไม่มีภาษี**
15. คลิก ในฟิลด์ **ป้ายชื่อ**
16. เลือก **การแปล**
17. ในบานหน้าต่าง **การแปลข้อความ** ในฟิลด์ **รหัสป้ายชื่อ** ให้ป้อน **LBL_LEVELENUM_NO**
18. ในฟิลด์ **ข้อความในภาษาเริ่มต้น** ให้ป้อน **ไม่มีภาษี**
19. ในฟิลด์ **ภาษา** เลือก **DE**
20. ในฟิลด์ **ข้อความที่แปล** ให้ป้อน **ไม่มีภาษี**
21. เลือก **การแปล**

    ![slide out ของการแปลข้อความ](./media/RCS-AppSpecParms-ConfigureFormat-EnumTranslate.PNG)

22. เลือก **บันทึก**
23. ปิดหน้า **การแจงนับรูปแบบ**

### <a name="add-a-new-lookup-data-source"></a>เพิ่มแหล่งข้อมูลการค้นหาใหม่

ถัดไป คุณจะเพิ่มแหล่งข้อมูลใหม่เพื่อระบุวิธีการที่ผู้ใช้ทางธุรกิจจะระบุกฎที่เป็นไปตามนิติบุคคล เพื่อจดจำระดับภาษีที่ถูกต้อง สำหรับแต่ละเรกคอร์ดธุรกรรมสรุป

1.  บนแท็บ **การแม็ป** ให้เลือก **เพิ่ม**
2.  เลือก **รูปแบบการแจงนับ\การค้นหา**

    คุณสามารถระบุได้ว่ากฎแต่ละกฎที่ผู้ใช้ธุรกิจระบุสำหรับการรับรู้ระดับภาษี จะส่งคืนค่าของการแจงนับรูปแบบ ER โปรดสังเกตว่าชนิดแหล่งข้อมูล **การค้นหา** สามารถเข้าถึงได้ภายใต้ **แบบจำลองข้อมูล** และบล็อค **Dynamics 365 for Operations** ที่เพิ่มมา ไปยังบล็อค **การแจงนับของรูปแบบ** ดังนั้น การแจงนับแบบจำลองข้อมูล ER และการแจงนับของโปรแกรมประยุกต์ สามารถใช้เพื่อระบุชนิดของค่าที่ส่งคืน สำหรับแหล่งข้อมูลของชนิดนั้น หากต้องการทราบเกี่ยวกับแหล่งข้อมูล **การค้นหา** ให้ดูที่ [ตั้งค่าคอนฟิกแหล่งข้อมูลการค้นหา เพื่อใช้ลักษณะการเช่น พารามิเตอร์เฉพาะโปรแกรมประยุกต์ ER](er-lookup-data-sources.md)
    
3.  ในฟิลด์ **ชื่อ** ให้ป้อน **ตัวเลือก**
4.  ในฟิลด์ **การแจงนับรูปแบบ** ป้อน **รายการของระดับภาษี**

    คุณได้ระบุ สำหรับแต่ละกฎที่ระบุไว้ในแหล่งข้อมูลนี้ ผู้ใช้ที่เป็นธุรกิจต้องเลือกค่าของการแจงนับรูปแบบ **รายการของระดับภาษี** เป็นค่าที่ส่งคืน
    
5.  เลือก **แก้ไขการค้นหา**
6.  เลือก **คอลัมน์**
7.  ขยายรายการ **Model**
8.  ขยายรายการ **ข้อมูล**
9.  ขยายรายการ **ภาษี**
10. เลือกรายการ **Model.Data.Tax.Code**
11. เลือกปุ่ม **เพิ่ม** (ลูกศรขวา)

    ![slide out ของคอลัมน์](./media/RCS-AppSpecParms-ConfigureFormat-Lookup1.PNG)

    คุณได้ระบุ สำหรับแต่ละกฎที่ระบุไว้ในแหล่งข้อมูลนี้สำหรับการรับรู้ระดับภาษี ผู้ใช้ที่เป็นธุรกิจต้องเลือกค่ารหัสภาษีเป็นเงี่อนไข รายการของรหัสภาษีที่ผู้ใช้ทางธุรกิจสามารถเลือกได้จะถูกส่งคืนโดยแหล่งข้อมูล **Model.Data.Tax** เนื่องจากแหล่งข้อมูลนี้มีฟิลด์ **ชื่อ** ชื่อรหัสภาษีจะแสดงขึ้นสำหรับแต่ละค่ารหัสภาษี ในการค้นหาที่นำเสนอให้แก่ผู้ใช้ทางธุรกิจ
    
12. เลือก **ตกลง**

    ![หน้าตัวออกแบบการค้นหา](./media/RCS-AppSpecParms-ConfigureFormat-Lookup2.PNG)

    ผู้ใช้ทางธุรกิจสามารถเพิ่มกฎหลายกฎเป็นเรกคอร์ดของแหล่งข้อมูลนี้ แต่ละเรกคอร์ดจะมีการกำหนดหมายเลขโดยรหัสบรรทัด กฎจะถูกประเมินตามลำดับหมายเลขบรรทัดที่เพิ่มขึ้น

    เนื่องจากคุณเลือกฟิลด์ **รหัสภาษี** เป็นเงื่อนไขสำหรับกฎในแหล่งข้อมูลการค้นหานี้ และเนื่องจาก **รหัสภาษี** ถูกตั้งค่าเป็นฟิลด์ของชนิดข้อมูล **สตริง** แต่ละกฎจะถูกประเมินที่รันไทม์ โดยการเปรียบเทียบรหัสภาษีที่ส่งผ่านไปยังแหล่งข้อมูลที่มีรหัสภาษีที่กำหนดไว้ในเรกคอร์ดนี้ของแหล่งข้อมูล

    เมื่อพบกฎที่เป็นไปตามเงื่อนไขที่ตั้งค่าคอนฟิก แหล่งข้อมูลนี้จะส่งคืนค่าการค้นหาของกฎที่กำหนดไว้ในฟิลด์ **ผลการค้นหา** ถ้าไม่พบกฎ ข้อยกเว้นจะถูกโยนเพื่อแจ้งให้ผู้ใช้ทราบว่าแหล่งข้อมูลปัจจุบันไม่สามารถส่งคืนค่าที่ถูกต้องได้

13. เลือก **บันทึก**
14. ปิดหน้า **ตัวออกแบบการค้นหา**
15. เลือก **ตกลง**

    โปรดสังเกตว่าคุณได้เพิ่มแหล่งข้อมูลใหม่ที่จะส่งคืนระดับภาษีเป็นค่าของการแจงนับรูปแบบ **รายการของระดับภาษี** สำหรับรหัสภาษีใดๆ ที่ส่งผ่านไปยังแหล่งข้อมูลเป็นอาร์กิวเมนต์ของพารามิเตอร์ **รหัส** ของชนิดข้อมูล **สตริง**
    
    ![หน้าตัวออกแบบรูปแบบที่มีแหล่งข้อมูลใหม่](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld.PNG)

    การประเมินกฎที่ตั้งค่าคอนฟิก จะขึ้นอยู่กับชนิดข้อมูลของฟิลด์ที่เลือกเพื่อกำหนดเงื่อนไขของกฎเหล่านั้น เมื่อคุณเลือกฟิลด์ที่มีการตั้งค่าคอนฟิกเป็นฟิลด์ของชนิดข้อมูล **ตัวเลข** หรือ **วันที่** เกณฑ์จะแตกต่างจากเงื่อนไขที่อธิบายไว้ก่อนหน้านี้สำหรับชนิดข้อมูล **สตริง** สำหรับฟิลด์ **ตัวเลข** และ **วันที่** กฎต้องมีการระบุเป็นช่วงของค่า เงื่อนไขของกฎจะถูกพิจารณาความพึงพอใจ เมื่อค่าที่ส่งผ่านไปยังแหล่งข้อมูลอยู่ในช่วงที่ตั้งค่าคอนฟิก
    
    ภาพประกอบต่อไปนี้ แสดงตัวอย่างของการตั้งค่าของชนิดนี้ นอกจากฟิลด์ **Model.Data.Tax.Code** ของชนิดข้อมูล **สตริง** ฟิลด์ **Model.Tax.Summary.Base** ของชนิดข้อมูล **จริง** จะใช้เพื่อระบุเงื่อนไขสำหรับแหล่งข้อมูลการค้นหา
    
    ![หน้าตัวออกแบบการค้นหาที่มีคอลัมน์เพิ่มเติม](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld2.PNG)

    เนื่องจากฟิลด์ **Model.Data.Tax.Code** และ **Model.Tax.Summary.Base** ถูกเลือกสำหรับแหล่งข้อมูลการค้นหานี้ แต่ละกฎของแหล่งข้อมูลนี้จะได้รับการตั้งค่าคอนฟิกในลักษณะต่อไปนี้:
    
    -   ในรายการที่แสดง ค่าของการแจงนับรูปแบบ **รายการของระดับภาษี** ต้องถูกเลือกเป็นค่าที่ส่งคืน
    -   รหัสภาษีต้องถูแป้อน เป็นเงื่อนไขของกฎนี้ เฉพาะรหัสภาษีที่ได้รับมาจากแหล่งข้อมูล **Model.Data.Tax** เท่านั้น ที่สามารถใช้แหล่งข้อมูลภาษีได้
    -   ค่าต่ำสุดและสูงสุดของจำนวนเงินฐานภาษี ต้องถูกป้อนค่าตามเงื่อนไขของกฎนี้

    ต่อไปนี้เป็นวิธีการประเมินแต่ละกฎของแหล่งข้อมูลนี้เมื่อรันไทม์:
    -   รหัสของชนิดข้อมูล **สตริง** ที่ส่งผ่านไปยังแหล่งข้อมูลนี้ เท่ากับรหัสภาษีของกฎหรือไม่
    -   ค่าของชนิดข้อมูล **จริง** ที่ส่งผ่านไปยังแหล่งข้อมูลนี้ อยู่ระหว่างค่าต่ำสุดและค่าสูงสุดที่ระบุหรือไม่

    กฎจะมีผลบังคับใช้เมื่อเงื่อนไขทั้งสองเป็นที่น่าพอใจ

### <a name="translate-the-label-of-the-lookup-data-source-that-was-added"></a>แปลป้ายชื่อของแหล่งข้อมูลการค้นหาที่ถูกเพิ่ม

เนื่องจากผู้ใช้ทางธุรกิจอาจใช้ภาษาต่างๆ เพื่อระบุชุดของรหัสภาษีที่ไม่ขึ้นอยู่กับนิติบุคคล เราขอแนะนำให้คุณแปลป้ายชื่อของแหล่งข้อมูลการค้นหาใดๆ ที่คุณเพิ่ม ซึ่งจะแสดงในแต่ละภาษีที่ผู้ใช้ต้องการบนหน้าที่สัมพันธ์กัน

1.  เลือกแหล่งข้อมูล **Model.Data.Selector**
2.  เลือก **แก้ไข**
3.  คลิก ในฟิลด์ **ป้ายชื่อ**
4.  เลือก **การแปล**
5.  ในบานหน้าต่าง **การแปลข้อความ** ในฟิลด์ **รหัสป้ายชื่อ** ให้ป้อน **LBL_SELECTOR_DS**
6.  ในฟิลด์ **ข้อความในภาษาเริ่มต้น** ป้อน **เลือกระดับภาษีตามรหัสภาษี**
7.  ในฟิลด์ **ภาษา** เลือก **DE**
8.  ในฟิลด์ **ข้อความที่แปล** ให้ป้อน **เลือกระดับภาษีสำหรับรหัสภาษี**
9.  เลือก **การแปล**
10. เลือก **ตกลง**

    ![Slide out ของคุณสมบัติแหล่งข้อมูล](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFldTranslate.PNG)

### <a name="add-a-new-field-to-consume-the-configured-lookup"></a>เพิ่มฟิลด์ใหม่เพื่อใช้การค้นหาที่ตั้งค่าคอนฟิก

1.  ขยายรายการ **Model.Data**
2.  เลือกรายการ **Model.Data.Summary**
3.  เลือก **เพิ่ม**
4.  เลือก **ฟังก์ชัน/ฟิลด์ที่คำนวณได้**
5.  ในฟิลด์ **ชื่อ** ให้ป้อน **LevelByLookup**
6.  เลือก **แก้ไขสูตร**
7.  ใน **ฟิลด์สูตร** ให้ป้อน **Model.Selector(Model.Data.Summary.Code)**
8.  เลือก **บันทึก**

    ![การเพิ่ม Model.Selector (Model.Data.Summary.Code) ลงในหน้าตัวออกแบบสูตร](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld.PNG)

9.  ปิดหน้า **ตัวแก้ไขสูตร**
10. เลือก **ตกลง**

    ![หน้าตัวออกแบบรูปแบบที่มีการเพิ่มสูตรใหม่](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld2.PNG)

    โปรดสังเกตว่าฟิลด์ที่คำนวณได้ **LevelByLookup** ที่คุณเพิ่ม จะส่งคืนระดับภาษีเป็นค่าของการแจงนับรูปแบบ **รายการของระดับภาษี** สำหรับเรกคอร์ดธุรกรรมภาษีแบบสรุปแต่ละเรกคอร์ด รหัสภาษีของเรกคอร์ดจะถูกส่งผ่านไปยังแหล่งข้อมูลการค้นหา **Model.Selector** และชุดของกฎสำหรับแหล่งข้อมูลนี้จะใช้ในการเลือกระดับภาษีที่ถูกต้อง

### <a name="add-a-new-format-enumeration-based-data-source"></a>เพิ่มแหล่งข้อมูลตามการแจงนับรูปแบบใหม่

ถัดไป คุณจะเพิ่มแหล่งข้อมูลใหม่ที่อ้างอิงถึงการแจงนับรูปแบบที่คุณเพิ่มไว้ก่อนหน้านี้ ค่าของแหล่งข้อมูลนี้จะใช้ในนิพจน์รูปแบบ ER ในภายหลัง

1.  เลือก **เพิ่มราก**
2.  เลือก **การแจงนับรูปแบบ\การแจงนับ**
3.  ในฟิลด์ **ชื่อ** ป้อน **TaxationLevel**
4.  ในฟิลด์ **การแจงนับรูปแบบ** ป้อน **รายการของระดับภาษี**
5.  เลือก **บันทึก**

### <a name="modify-an-existing-field-to-start-to-use-the-lookup"></a>แก้ไขฟิลด์ที่มีอยู่เพื่อเริ่มต้นใช้งานการค้นหา

ถัดไป คุณจะแก้ไขฟิลด์ที่คำนวณที่มีอยู่เพื่อให้ใช้แหล่งข้อมูลการค้นหาที่ตั้งค่าคอนฟิก เพื่อส่งคืนค่าระดับภาษีที่ถูกต้อง ทั้งนี้ขึ้นอยู่กับรหัสภาษี

1.  เลือกรายการ **Model.Data.Summary.Level**
2.  เลือก **แก้ไข**
3.  เลือก **แก้ไขสูตร**

    โปรดสังเกตว่านิพจน์ปัจจุบันของฟิลด์ **Model.Data.Summary.Level** จะรวมรหัสภาษีที่มีรหัสแบบตายตัวต่อไปนี้:
    
    CASE (@.Code, "VAT19", "Regular", "InVAT19", "Regular", "VAT7", "Reduced", "InVAT7", "Reduced", "THIRD", "None", "InVAT0", "None", "Other")

4.  ในฟิลด์ **สูตร** ให้ป้อน **CASE(@.LevelByLookup, TaxationLevel.'Regular taxation', "Regular", TaxationLevel.'Reduced taxation', "Reduced", TaxationLevel.'No taxation', "None", "Other")**

    ![หน้าตัวออกแบบการดำเนินงาน ER](./media/RCS-AppSpecParms-ConfigureFormat-ChangeLookupFld.PNG)
    
    โปรดสังเกตว่านิพจน์ของฟิลด์ **Model.Data.Summary.Level** จะส่งคืนระดับภาษี ขึ้นอยู่กับรหัสภาษีของเรกคอร์ดปัจจุบัน และชุดของกฎที่ผู้ใช้ทางธุรกิจมีการตั้งค่าคอนฟิกในแหล่งข้อมูลการค้นหา **Model.Data.Selector**
    
5.  เลือก **บันทึก**
6.  ปิดหน้า **ตัวออกแบบสูตร**
7.  เลือก **ตกลง**
8.  เลือก **บันทึก**
9.  ปิดหน้า **ตัวออกแบบรูปแบบ**

## <a name="complete-the-draft-version-of-a-derived-format"></a>เวอร์ชันแบบร่างเสร็จสมบูรณ์ของรูปแบบที่ได้รับ

1.  บน FastTab **เวอร์ชัน** เลือก **เปลี่ยนสถานะ**
2.  เลือก **เสร็จสมบูรณ์**
3.  เลือก **ตกลง**

## <a name="export-completed-version-of-modified-format"></a>ส่งออกเวอร์ชันที่เสร็จสมบูรณ์ของรูปแบบที่แก้ไขแล้ว

1.  ในแผนภูมิการตั้งค่าคอนฟิก ให้เลือกรายการ **รูปแบบเพื่อเรียนรู้วิธีการค้นหาข้อมูล LE**
2.  บน FastTab **เวอร์ชัน** ให้เลือกเรกคอร์ดที่มีสถานะเป็น **เสร็จสมบูรณ์**
3.  เลือก **แลกเปลี่ยน**
4.  เลือก **ส่งออกเป็นไฟล์ XML**
5.  เลือก **ตกลง**
6.  เว็บเบราเซอร์จะดาวน์โหลดไฟล์ **รูปแบบเพื่อเรียนรู้วิธีการค้นหา LE data.xml** จัดเก็บไฟล์นี้ไว้ภายในเครื่อง

ทำซ้ำขั้นตอนในส่วนนี้ สำหรับรายการหลักของรูปแบบ **รูปแบบเพื่อเรียนรู้วิธีการค้นหารูปแบบข้อมูล LE** และจัดเก็บไฟล์ต่อไปนี้ในเครื่อง:

-   รูปแบบเพื่อเรียนรู้ calls.xml แบบพารามิเตอร์
-   การแม็ปเพื่อเรียนรู้ calls.xml แบบพารามิเตอร์
-   แบบจำลองเพื่อเรียนรู้ calls.xml แบบพารามิเตอร์

การเรียนรู้วิธีการรูปแบบ ER **เรียนรู้วิธีการค้นหาข้อมูล LE** ที่ตั้งค่าคอนฟิก เพื่อตั้งค่ารหัสภาษีของชุดที่ขึ้นกับนิติบุคคล เพื่อกรองธุรกรรมภาษี โดยระดับภาษีที่ต่างกัน ให้ทำตามขั้นต่อนในบทความ [ตั้งค่าพารามิเตอร์ของรูปแบบ ER สำหรับแต่ละนิติบุคคล](er-app-specific-parameters-set-up.md) ให้เสร็จสมบูรณ์

## <a name="additional-resources"></a>ทรัพยากรเพิ่มเติม

[ตัวออกแบบสูตรในการรายงานทางอิเล็กทรอนิกส์](general-electronic-reporting-formula-designer.md)

[ตั้งค่าพารามิเตอร์ของรูปแบบการรายงานทางอิเล็กทรอนิกส์สำหรับนิติบุคคลแต่ละรายการ](er-app-specific-parameters-set-up.md)

[ตั้งค่าคอนฟิกแหล่งข้อมูลการค้นหาเพื่อใช้คุณลักษณะพารามิเตอร์เฉพาะโปรแกรมประยุกต์ ER](er-lookup-data-sources.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
