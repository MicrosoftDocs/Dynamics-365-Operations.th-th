---
title: แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)
description: หัวข้อนี้อธิบายวิธีการที่คุณสามารถใช้แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 1a5c05b65c9022220056947471e95b703d923dc5
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/05/2020
ms.locfileid: "4680841"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a>แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)

[!include[banner](../includes/banner.md)]

คุณสามารถออกแบบรูปแบบการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อสร้างเอกสารขาออกได้ในหลายรูปแบบ เมื่อเอกสารถูกสร้างขึ้น รูปแบบ ER เรียกแหล่งข้อมูลที่มีการตั้งค่าคอนฟิกในการแม็ปแบบจำลอง ER ที่สอดคล้องกัน ในการตั้งค่าคอนฟิกการเข้าถึงตารางแอพลิเคชันสำหรับการเรียกเรกคอร์ด คุณสามารถใช้แหล่งข้อมูล ER ของชนิด **ตารางเรกคอร์ด** ได้ เมื่อตารางในการเข้าถึงเป็นตารางที่ใช้ร่วมกัน (นั่นคือ ตารางซึ่งข้อมูลถูกบันทึกโดยไม่มีตัวระบุบริษัท) แหล่งข้อมูลนี้ส่งคืนเรกคอร์ดทั้งหมด เมื่อตารางในการเข้าถึงเป็นตารางที่ขึ้นอยู่กับบริษัท (นั่นคือ ตารางซึ่งข้อมูลถูกบันทึกสำหรับแต่ละบริษัท) แหล่งข้อมูลนี้ส่งกลับเฉพาะเรกคอร์ดที่ได้รับการบันทึกสำหรับบริษัทปัจจุบัน (นั่นคือ บริบทบริษัทที่รูปแบบ ER กำลังรันภายใต้)

ทุกๆ แหล่งข้อมูลของชนิด **ตารางเรกคอร์ด** ในการแม็ปแบบจำลอง สามารถถูกทำเครื่องหมายเป็นแหล่งข้อมูลข้ามบริษัทได้ในขณะนี้ ดังนั้น คุณสามารถใช้แหล่งข้อมูลของชนิด **ตารางเรกคอร์ด** เพื่อเข้าถึงข้อมูลข้ามบริษัทในตารางแอพลิเคชันได้

ถ้าคุณทำเครื่องหมายแหล่งข้อมูลเป็นข้ามบริษัท ลักษณะการทำงานต่อไปนี้จะเกิดขึ้น:

- สำหรับแหล่งข้อมูลที่อ้างอิงถึงตารางที่ใช้ร่วมกันใดๆ ยกเว้น CompanyInfo แหล่งข้อมูลจะส่งคืนเรกคอร์ดทั้งหมดที่มีอยู่ในตารางอ้างอิง 
- สำหรับแหล่งข้อมูลที่อ้างอิงถึงตาราง CompanyInfo แม้ว่า CompanyInfo จะเป็นตารางที่ใช้ร่วมกัน แหล่งข้อมูลจะส่งคืนเรกคอร์ดที่ประกอบด้วยตัวระบุของบริษัทจากขอบเขตที่กำหนดไว้
- สำหรับตารางที่ขึ้นอยู่กับบริษัทใดๆ แหล่งข้อมูลจะส่งคืนเรกคอร์ดของตารางอ้างอิงที่ประกอบด้วยตัวระบุของบริษัทจากขอบเขตที่กำหนดไว้

ในกล่องโต้ตอบการสอบถามระบบ เมื่อตัวเลือก **ขอการสอบถาม** เปิดอยู่สำหรับแหล่งข้อมูลใดๆ ที่ถูกทำเครื่องหมายเป็นข้ามบริษัท คุณสามารถเลือกบริษัทอย่างน้อยหนึ่งแห่งที่จะรวมไว้ในแท็บ **ช่วงบริษัท** ได้ด้วยตนเอง

> [!IMPORTANT]
> เช่นเดียวกับตัวกรองข้อมูลอื่นๆ ตัวกรองบริษัทจะยังคงเป็นค่าที่ใช้ล่าสุดสำหรับการสอบถาม เมื่อคุณรันรูปแบบ ER ตัวกรองจะไม่ถูกเปลี่ยนโดยอัตโนมัติ ถ้าคุณเปลี่ยนค่าข้ามบริษัทสำหรับแหล่งข้อมูล เมื่อต้องการใช้ค่าข้ามบริษัทต่างๆ สำหรับแหล่งข้อมูลอื่น ลบการเลือกเฉพาะผู้ใช้ที่สอดคล้องกัน

สำหรับทุกๆ แหล่งข้อมูลที่ถูกทำเครื่องหมายเป็นข้ามบริษัท คุณสามารถเลือกเรกคอร์ดที่คุณต้องการโดยใช้ฟังก์ชัน **ตัวกรอง** และ **สถานที่** ในนิพจน์ ER ได้ ฟิลด์ **dataAreaID** ยังสามารถถูกใช้เป็นตัวระบุของบริษัทได้ด้วย ในปัจจุบัน ฟิลด์ **dataAreaID** ถูกจำกัดชนิดของเงื่อนไขต่อไปนี้ เมื่อมีการใช้ฟังก์ชัน **ตัวกรอง** :

- เฉพาะเงื่อนไขที่มีการเปรียบเทียบฟิลด์ **dataAreaID** เดียวจะได้รับการสนับสนุน
- เฉพาะการเปรียบเทียบที่มีนิพจน์ที่ไม่ขึ้นอยู่กับรายการเรกคอร์ดจะได้รับอนุญาต

ดังนั้น นิพจน์ต่อไปนี้ถูกต้อง

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

โดยค่าเริ่มต้น ขอบเขตจะรวมบริษัททั้งหมดของแอพลิเคชันปัจจุบัน อย่างไรก็ตาม สามารถถูกจำกัดได้ เมื่อต้องการจำกัดขอบเขตของการเข้าถึงข้อมูลข้ามบริษัทสำหรับรูปแบบ ER เดียว กำหนดลำดับชั้นขององค์กรเฉพาะให้กับรูปแบบ เมื่อมีการกำหนดลำดับชั้นสำหรับรูปแบบ ER เฉพาะเรกคอร์ดสำหรับนิติบุคคลที่จะแสดงอยู่ในลำดับชั้นที่มอบหมายจะมีการส่งกลับ ถึงแม้ว่ารูปแบบจะเรียกแหล่งข้อมูลข้ามบริษัท เมื่อมีการกำหนดข้อมูลอ้างอิงให้กับลำดับชั้นที่ไม่มีอยู่สำหรับรูปแบบ ER จะมีการใช้ขอบเขตเริ่มต้น และรูปแบบจะเรียกใช้แหล่งข้อมูลข้ามบริษัท ในสถานการณ์นี้ จะมีการส่งคืนเรกคอร์ดสำหรับบริษัทแอพลิเคชันทั้งหมด

หมายเหตุ เมื่อตัวเลือก **ใช้แบบร่าง** เปิดอยู่สำหรับที่กำหนดให้กับรูปแบบลำดับชั้นขององค์กรของรูปแบบ ER เดี่ยว นิติบุคคลจากเวอร์ชันแบบร่างของลำดับชั้นนี้จะถูกใช้ในการระบุขอบเขตสำหรับแหล่งข้อมูลข้ามบริษัท ถ้าไม่มีเวอร์ชันแบบร่างอยู่ นิติบุคคลจากเวอร์ชันที่เผยแพร่ล่าสุดของลำดับชั้นขององค์กรนี้จะถูกใช้สำหรับสิ่งนี้

หมายเหตุ เมื่อตัวเลือก **ใช้แบบร่าง** ปิดอยู่สำหรับที่กำหนดให้กับรูปแบบลำดับชั้นขององค์กรของรูปแบบ ER เดี่ยว นิติบุคคลจากเวอร์ชันที่เผยแพร่ล่าสุดของลำดับชั้นองค์กรนี้จะถูกใช้ในการระบุขอบเขตสำหรับแหล่งข้อมูลข้ามบริษัท ประสิทธิภาพวันที่ของลำดับชั้นขององค์กรยังไม่ได้รับการสนับสนุนในกรอบงาน ER

คุณสามารถกำหนดลำดับชั้นให้กับรูปแบบในหน้าเฉพาะที่สามารถเข้าถึงได้จากพื้นที่ทำงาน ER หรือโดยใช้รายการเมนู **การจัดการองค์กร \> รายงานทางอิเล็กทรอนิกส์ \> ตัวกรองนิติบุคคลสำหรับรูปแบบ** ได้ ในการเข้าถึงหน้า ต้องมีการมอบสิทธิ์ **รักษาตัวกรองนิติบุคคลสำหรับรูปแบบ** (ERMaintainFormatMappingLegalEntityFilters) ให้กับผู้ใช้ มีการใช้ข้อจำกัดขอบเขตของเอนทิตีนิติบุคคลตามลำดับชั้นสำหรับรูปแบบจะถูกใช้ นอกเหนือจากข้อจำกัดที่ผู้ใช้สามารถระบุด้วยตนเองในกล่องโต้ตอบการสอบถามของระบบ ส่วนร่วมของข้อจำกัดเหล่านี้จะถูกใช้ เมื่อมีการรันรูปแบบ

หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับคุณลักษณะนี้ เล่นคู่มืองาน **ER เข้าถึงเรกคอร์ดของตารางที่ขึ้นกับบริษัทในโหมดข้ามบริษัท** ซึ่งเป็นส่วนหนึ่งของกระบวนการทางธุรกิจ 7.5.4.3 จัดหา/พัฒนาส่วนประกอบของบริการ/โซลูชันด้านไอที (10677) และคุณสามารถดาวน์โหลดได้จาก [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684) คู่มืองานนี้แนะนำคุณเกี่ยวกับกระบวนการในการตั้งค่าคอนฟิกการแม็ปแบบจำลอง ER และรูปแบบ ER ในการเข้าถึงตารางแอพลิเคชันในโหมดข้ามบริษัท

ดาวน์โหลดไฟล์ต่อไปนี้เพื่อดำเนินการคู่มืองานให้เสร็จสมบูรณ์:

- [การตั้งค่าคอนฟิกแบบจำลอง ER - CrossCompanyDataAccessModel.xml](https://go.microsoft.com/fwlink/?linkid=874111)
- [การตั้งค่าคอนฟิกรูปแบบ ER - CrossCompanyDataAccessFormat](https://go.microsoft.com/fwlink/?linkid=874111)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]