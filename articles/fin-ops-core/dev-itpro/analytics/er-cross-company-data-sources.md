---
title: แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)
description: หัวข้อนี้อธิบายวิธีการที่คุณสามารถใช้แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)
author: NickSelin
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 25c665c797d0cea10cbe337e86be4a07f1f5074a
ms.sourcegitcommit: ab3f5d0da6eb0177bbad720e73c58926d686f168
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/26/2021
ms.locfileid: "5944472"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="99fd2-103">แหล่งข้อมูลระหว่างบริษัทในการรายงานทางอิเล็กทรอนิกส์ (ER)</span><span class="sxs-lookup"><span data-stu-id="99fd2-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="99fd2-104">คุณสามารถออกแบบรูปแบบการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อสร้างเอกสารขาออกได้ในหลายรูปแบบ</span><span class="sxs-lookup"><span data-stu-id="99fd2-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="99fd2-105">เมื่อเอกสารถูกสร้างขึ้น รูปแบบ ER เรียกแหล่งข้อมูลที่มีการตั้งค่าคอนฟิกในการแม็ปแบบจำลอง ER ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="99fd2-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="99fd2-106">ในการตั้งค่าคอนฟิกการเข้าถึงตารางแอพลิเคชันสำหรับการเรียกเรกคอร์ด คุณสามารถใช้แหล่งข้อมูล ER ของชนิด **ตารางเรกคอร์ด** ได้</span><span class="sxs-lookup"><span data-stu-id="99fd2-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="99fd2-107">เมื่อตารางในการเข้าถึงเป็นตารางที่ใช้ร่วมกัน (นั่นคือ ตารางซึ่งข้อมูลถูกบันทึกโดยไม่มีตัวระบุบริษัท) แหล่งข้อมูลนี้ส่งคืนเรกคอร์ดทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="99fd2-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="99fd2-108">เมื่อตารางในการเข้าถึงเป็นตารางที่ขึ้นอยู่กับบริษัท (นั่นคือ ตารางซึ่งข้อมูลถูกบันทึกสำหรับแต่ละบริษัท) แหล่งข้อมูลนี้ส่งกลับเฉพาะเรกคอร์ดที่ได้รับการบันทึกสำหรับบริษัทปัจจุบัน (นั่นคือ บริบทบริษัทที่รูปแบบ ER กำลังรันภายใต้)</span><span class="sxs-lookup"><span data-stu-id="99fd2-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="99fd2-109">ทุกๆ แหล่งข้อมูลของชนิด **ตารางเรกคอร์ด** ในการแม็ปแบบจำลอง สามารถถูกทำเครื่องหมายเป็นแหล่งข้อมูลข้ามบริษัทได้ในขณะนี้</span><span class="sxs-lookup"><span data-stu-id="99fd2-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="99fd2-110">ดังนั้น คุณสามารถใช้แหล่งข้อมูลของชนิด **ตารางเรกคอร์ด** เพื่อเข้าถึงข้อมูลข้ามบริษัทในตารางแอพลิเคชันได้</span><span class="sxs-lookup"><span data-stu-id="99fd2-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="99fd2-111">ถ้าคุณทำเครื่องหมายแหล่งข้อมูลเป็นข้ามบริษัท ลักษณะการทำงานต่อไปนี้จะเกิดขึ้น:</span><span class="sxs-lookup"><span data-stu-id="99fd2-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="99fd2-112">สำหรับแหล่งข้อมูลที่อ้างอิงถึงตารางที่ใช้ร่วมกันใดๆ ยกเว้น CompanyInfo แหล่งข้อมูลจะส่งคืนเรกคอร์ดทั้งหมดที่มีอยู่ในตารางอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="99fd2-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="99fd2-113">สำหรับแหล่งข้อมูลที่อ้างอิงถึงตาราง CompanyInfo แม้ว่า CompanyInfo จะเป็นตารางที่ใช้ร่วมกัน แหล่งข้อมูลจะส่งคืนเรกคอร์ดที่ประกอบด้วยตัวระบุของบริษัทจากขอบเขตที่กำหนดไว้</span><span class="sxs-lookup"><span data-stu-id="99fd2-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="99fd2-114">สำหรับตารางที่ขึ้นอยู่กับบริษัทใดๆ แหล่งข้อมูลจะส่งคืนเรกคอร์ดของตารางอ้างอิงที่ประกอบด้วยตัวระบุของบริษัทจากขอบเขตที่กำหนดไว้</span><span class="sxs-lookup"><span data-stu-id="99fd2-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="99fd2-115">ในกล่องโต้ตอบการสอบถามระบบ เมื่อตัวเลือก **ขอการสอบถาม** เปิดอยู่สำหรับแหล่งข้อมูลใดๆ ที่ถูกทำเครื่องหมายเป็นข้ามบริษัท คุณสามารถเลือกบริษัทอย่างน้อยหนึ่งแห่งที่จะรวมไว้ในแท็บ **ช่วงบริษัท** ได้ด้วยตนเอง</span><span class="sxs-lookup"><span data-stu-id="99fd2-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="99fd2-116">เช่นเดียวกับตัวกรองข้อมูลอื่นๆ ตัวกรองบริษัทจะยังคงเป็นค่าที่ใช้ล่าสุดสำหรับการสอบถาม เมื่อคุณรันรูปแบบ ER</span><span class="sxs-lookup"><span data-stu-id="99fd2-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="99fd2-117">ตัวกรองจะไม่ถูกเปลี่ยนโดยอัตโนมัติ ถ้าคุณเปลี่ยนค่าข้ามบริษัทสำหรับแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="99fd2-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="99fd2-118">เมื่อต้องการใช้ค่าข้ามบริษัทต่างๆ สำหรับแหล่งข้อมูลอื่น ลบการเลือกเฉพาะผู้ใช้ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="99fd2-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="99fd2-119">สำหรับทุกๆ แหล่งข้อมูลที่ถูกทำเครื่องหมายเป็นข้ามบริษัท คุณสามารถเลือกเรกคอร์ดที่คุณต้องการโดยใช้ฟังก์ชัน **ตัวกรอง** และ **สถานที่** ในนิพจน์ ER ได้</span><span class="sxs-lookup"><span data-stu-id="99fd2-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="99fd2-120">ฟิลด์ **dataAreaID** ยังสามารถถูกใช้เป็นตัวระบุของบริษัทได้ด้วย</span><span class="sxs-lookup"><span data-stu-id="99fd2-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="99fd2-121">ในปัจจุบัน ฟิลด์ **dataAreaID** ถูกจำกัดชนิดของเงื่อนไขต่อไปนี้ เมื่อมีการใช้ฟังก์ชัน **ตัวกรอง** :</span><span class="sxs-lookup"><span data-stu-id="99fd2-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="99fd2-122">เฉพาะเงื่อนไขที่มีการเปรียบเทียบฟิลด์ **dataAreaID** เดียวจะได้รับการสนับสนุน</span><span class="sxs-lookup"><span data-stu-id="99fd2-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="99fd2-123">เฉพาะการเปรียบเทียบที่มีนิพจน์ที่ไม่ขึ้นอยู่กับรายการเรกคอร์ดจะได้รับอนุญาต</span><span class="sxs-lookup"><span data-stu-id="99fd2-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="99fd2-124">ดังนั้น นิพจน์ต่อไปนี้ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="99fd2-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="99fd2-125">โดยค่าเริ่มต้น ขอบเขตจะรวมบริษัททั้งหมดของแอพลิเคชันปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="99fd2-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="99fd2-126">อย่างไรก็ตาม สามารถถูกจำกัดได้</span><span class="sxs-lookup"><span data-stu-id="99fd2-126">However, it can be restricted.</span></span> <span data-ttu-id="99fd2-127">เมื่อต้องการจำกัดขอบเขตของการเข้าถึงข้อมูลข้ามบริษัทสำหรับรูปแบบ ER เดียว กำหนดลำดับชั้นขององค์กรเฉพาะให้กับรูปแบบ</span><span class="sxs-lookup"><span data-stu-id="99fd2-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="99fd2-128">เมื่อมีการกำหนดลำดับชั้นสำหรับรูปแบบ ER เฉพาะเรกคอร์ดสำหรับนิติบุคคลที่จะแสดงอยู่ในลำดับชั้นที่มอบหมายจะมีการส่งกลับ ถึงแม้ว่ารูปแบบจะเรียกแหล่งข้อมูลข้ามบริษัท</span><span class="sxs-lookup"><span data-stu-id="99fd2-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="99fd2-129">เมื่อมีการกำหนดข้อมูลอ้างอิงให้กับลำดับชั้นที่ไม่มีอยู่สำหรับรูปแบบ ER จะมีการใช้ขอบเขตเริ่มต้น และรูปแบบจะเรียกใช้แหล่งข้อมูลข้ามบริษัท</span><span class="sxs-lookup"><span data-stu-id="99fd2-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="99fd2-130">ในสถานการณ์นี้ จะมีการส่งคืนเรกคอร์ดสำหรับบริษัทแอพลิเคชันทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="99fd2-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="99fd2-131">หมายเหตุ เมื่อตัวเลือก **ใช้แบบร่าง** เปิดอยู่สำหรับที่กำหนดให้กับรูปแบบลำดับชั้นขององค์กรของรูปแบบ ER เดี่ยว นิติบุคคลจากเวอร์ชันแบบร่างของลำดับชั้นนี้จะถูกใช้ในการระบุขอบเขตสำหรับแหล่งข้อมูลข้ามบริษัท</span><span class="sxs-lookup"><span data-stu-id="99fd2-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="99fd2-132">ถ้าไม่มีเวอร์ชันแบบร่างอยู่ นิติบุคคลจากเวอร์ชันที่เผยแพร่ล่าสุดของลำดับชั้นขององค์กรนี้จะถูกใช้สำหรับสิ่งนี้</span><span class="sxs-lookup"><span data-stu-id="99fd2-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="99fd2-133">หมายเหตุ เมื่อตัวเลือก **ใช้แบบร่าง** ปิดอยู่สำหรับที่กำหนดให้กับรูปแบบลำดับชั้นขององค์กรของรูปแบบ ER เดี่ยว นิติบุคคลจากเวอร์ชันที่เผยแพร่ล่าสุดของลำดับชั้นองค์กรนี้จะถูกใช้ในการระบุขอบเขตสำหรับแหล่งข้อมูลข้ามบริษัท</span><span class="sxs-lookup"><span data-stu-id="99fd2-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="99fd2-134">ประสิทธิภาพวันที่ของลำดับชั้นขององค์กรยังไม่ได้รับการสนับสนุนในกรอบงาน ER</span><span class="sxs-lookup"><span data-stu-id="99fd2-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="99fd2-135">คุณสามารถกำหนดลำดับชั้นให้กับรูปแบบในหน้าเฉพาะที่สามารถเข้าถึงได้จากพื้นที่ทำงาน ER หรือโดยใช้รายการเมนู **การจัดการองค์กร \> รายงานทางอิเล็กทรอนิกส์ \> ตัวกรองนิติบุคคลสำหรับรูปแบบ** ได้</span><span class="sxs-lookup"><span data-stu-id="99fd2-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="99fd2-136">ในการเข้าถึงหน้า ต้องมีการมอบสิทธิ์ **รักษาตัวกรองนิติบุคคลสำหรับรูปแบบ** (ERMaintainFormatMappingLegalEntityFilters) ให้กับผู้ใช้</span><span class="sxs-lookup"><span data-stu-id="99fd2-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="99fd2-137">มีการใช้ข้อจำกัดขอบเขตของเอนทิตีนิติบุคคลตามลำดับชั้นสำหรับรูปแบบจะถูกใช้ นอกเหนือจากข้อจำกัดที่ผู้ใช้สามารถระบุด้วยตนเองในกล่องโต้ตอบการสอบถามของระบบ</span><span class="sxs-lookup"><span data-stu-id="99fd2-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="99fd2-138">ส่วนร่วมของข้อจำกัดเหล่านี้จะถูกใช้ เมื่อมีการรันรูปแบบ</span><span class="sxs-lookup"><span data-stu-id="99fd2-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="99fd2-139">หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับคุณลักษณะนี้ เล่นคู่มืองาน **ER เข้าถึงเรกคอร์ดของตารางที่ขึ้นกับบริษัทในโหมดข้ามบริษัท** ซึ่งเป็นส่วนหนึ่งของกระบวนการทางธุรกิจ 7.5.4.3 จัดหา/พัฒนาส่วนประกอบของบริการ/โซลูชันด้านไอที (10677) และคุณสามารถดาวน์โหลดได้จาก [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684)</span><span class="sxs-lookup"><span data-stu-id="99fd2-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="99fd2-140">คู่มืองานนี้แนะนำคุณเกี่ยวกับกระบวนการในการตั้งค่าคอนฟิกการแม็ปแบบจำลอง ER และรูปแบบ ER ในการเข้าถึงตารางแอพลิเคชันในโหมดข้ามบริษัท</span><span class="sxs-lookup"><span data-stu-id="99fd2-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="99fd2-141">ดาวน์โหลดไฟล์ต่อไปนี้เพื่อดำเนินการคู่มืองานให้เสร็จสมบูรณ์:</span><span class="sxs-lookup"><span data-stu-id="99fd2-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="99fd2-142">การตั้งค่าคอนฟิกแบบจำลอง ER - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="99fd2-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://download.microsoft.com/download/4/2/5/4258f891-7054-4821-aedd-3721ba25fdd5/CrossCompanyDataAccessModel.xml)
- [<span data-ttu-id="99fd2-143">การตั้งค่าคอนฟิกรูปแบบ ER - CrossCompanyDataAccessFormat</span><span class="sxs-lookup"><span data-stu-id="99fd2-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://download.microsoft.com/download/3/2/1/321deb75-3ba9-4323-99bf-207a52c60b5c/CrossCompanyDataAccessFormat.xml)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
