---
title: การล้างข้อมูลการย้าย ER
description: หัวข้อนี้อธิบายวิธีที่คุณสามารถใช้ฟังก์ชันการล้างข้อมูลการย้าย ER เพื่อแก้ไขปัญหาเกี่ยวกับแม่แบบ ER
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: 090badd48785dfacf5942426d0fe53629f3c0cda
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321813"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="a5d6f-103">การล้างข้อมูลการย้าย ER</span><span class="sxs-lookup"><span data-stu-id="a5d6f-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="a5d6f-104">เมื่อคุณจัดการอินสแตนซ์ Finance ของคุณ คุณอาจตัดสินใจที่จะโยกย้ายอินสแตนซ์ปัจจุบันของคุณไปยังที่ตั้งอื่น</span><span class="sxs-lookup"><span data-stu-id="a5d6f-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="a5d6f-105">ตัวอย่างเช่น คุณอาจโยกย้ายอินสแตนซ์การผลิตของคุณ ไปยังสภาพแวดล้อม sandbox ใหม่</span><span class="sxs-lookup"><span data-stu-id="a5d6f-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="a5d6f-106">ถ้าคุณได้ตั้งค่าคอนฟิกกรอบงานการรายงานทางอิเล็กทรอนิกส์ (ER) เพื่อจัดเก็บแม่แบบในที่เก็บข้อมูล Blob ของ Microsoft Azure แล้วตาราง **DocuValue** ในสภาพแวดล้อม sandbox ใหม่ จะอ้างอิงถึงอินสแตนซ์ของที่เก็บข้อมูล Blob ในสภาพแวดล้อมการผลิต</span><span class="sxs-lookup"><span data-stu-id="a5d6f-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="a5d6f-107">อย่างไรก็ตาม อินสแตนซ์นี้ไม่สามารถเข้าถึงได้จากสภาพแวดล้อม sandbox เนื่องจากกระบวนการย้ายไม่สนับสนุนการย้ายของวัตถุในที่เก็บข้อมูล Blob</span><span class="sxs-lookup"><span data-stu-id="a5d6f-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="a5d6f-108">แต่คาดว่า ในสภาพแวดล้อม sandbox ใหม่ คุณอ้างอิงถึงอินสแตนซ์ของ Blob ที่เก็บในสภาพแวดล้อม sandbox ที่ยังไม่ได้รับแม่แบบ ER</span><span class="sxs-lookup"><span data-stu-id="a5d6f-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="a5d6f-109">ดังนั้น ถ้าคุณพยายามที่จะเรียกใช้กรอบงาน ER ซึ่งใช้เแม่แบบเพื่อสร้างเอกสารทางธุรกิจ แล้วมีข้อยกเว้นเกิดขึ้น และคุณจะได้รับการแจ้งเตือนเกี่ยวกับแม่แบบที่ขาดหายไป</span><span class="sxs-lookup"><span data-stu-id="a5d6f-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="a5d6f-110">แล้วคุณยังถูกแนะนำให้ใช้ตัวเลือกการล้างข้อมูลการย้าย ER เพื่อลบแล้วนำเข้าการตั้งค่าคอนฟิกรูปแบบ ER ที่มีเท็มเพลตได้อีกครั้ง</span><span class="sxs-lookup"><span data-stu-id="a5d6f-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="a5d6f-111">[![การรันรูปแบบ ER](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="a5d6f-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="a5d6f-112">คุณจะได้รับข้อผิดพลาดคล้ายกัน ถ้าคุณนําทางไปยังหน้า **การตั้งค่าคอนฟิก** (**การจัดการองค์กร** \> **การรายงานทางอิเล็กทรอนิกส์** \> **การตั้งค่าคอนฟิก**) และในแผนภูมิการตั้งค่าคอนฟิก พยายามลบการตั้งค่าคอนฟิกรูปแบบ ER ที่ใช้แม่แบบ</span><span class="sxs-lookup"><span data-stu-id="a5d6f-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="a5d6f-113">[![การลบรูปแบบ ER](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="a5d6f-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="a5d6f-114">ดําเนินการขั้นตอนต่อไปนี้เพื่อแก้ไขปัญหาเกี่ยวกับแม่แบบ ER ที่คุณไม่สามารถเข้าถึงได้</span><span class="sxs-lookup"><span data-stu-id="a5d6f-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="a5d6f-115">ไปที่ **การจัดการองค์กร** \> **ประจำงวด** \> หน้า **การล้างข้อมูลการย้าย**</span><span class="sxs-lookup"><span data-stu-id="a5d6f-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="a5d6f-116">เลือกการตั้งค่าคอนฟิกรูปแบบ ER ที่ไม่สามารถดําเนินการหรือลบได้</span><span class="sxs-lookup"><span data-stu-id="a5d6f-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="a5d6f-117">เลือก **ลบ**</span><span class="sxs-lookup"><span data-stu-id="a5d6f-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="a5d6f-118">ยืนยันการลบการตั้งค่าคอนฟิกรูปแบบ ER ที่เลือก</span><span class="sxs-lookup"><span data-stu-id="a5d6f-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="a5d6f-119">[นําเข้า](download-electronic-reporting-configuration-lcs.md) การตั้งค่าคอนฟิกรูปแบบ ER ที่ลบไปยังอินสแตนซ์ Finance ปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="a5d6f-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="a5d6f-120">การใช้งาน</span><span class="sxs-lookup"><span data-stu-id="a5d6f-120">Applicability</span></span>

> <span data-ttu-id="a5d6f-121">[สําคัญ] ตัวเลือก **การล้างข้อมูลการย้าย** ถูกกําหนดเป้าหมายเฉพาะสําหรับการตั้งค่าคอนฟิกรูปแบบ ER ที่ประกอบด้วยแม่แบบ ER ที่ไม่สามารถเข้าถึงได้เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="a5d6f-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="a5d6f-122">เมื่อคุณลบการตั้งค่าคอนฟิกรูปแบบ ER โดยใช้ตัวเลือก **การล้างข้อมูลการย้าย** ER ลบแม่แบบที่เกี่ยวข้องกับสิ่งประดิษฐ์การตั้งค่าคอนฟิกในฐานข้อมูลใบสมัครเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="a5d6f-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="a5d6f-123">การมีอยู่ของแฟ้มที่ตั้งจริงที่เหมาะสมในการจัดเก็บ Blob จะไม่ผ่านการตรวจสอบ</span><span class="sxs-lookup"><span data-stu-id="a5d6f-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="a5d6f-124">แต่จะสันนิษฐานว่าไม่มีแทน</span><span class="sxs-lookup"><span data-stu-id="a5d6f-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="a5d6f-125">ดังนั้น ไม่ใช้ตัวเลือก **การล้างข้อมูลการย้าย** เป็นทางเลือกสําหรับตัวเลือกการลบการตั้งค่าคอนฟิก ER บนหน้า **การตั้งค่าคอนฟิก**</span><span class="sxs-lookup"><span data-stu-id="a5d6f-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="a5d6f-126">ใช้ตัวเลือก **การล้างข้อมูลการย้าย** เฉพาะเมื่อตัวเลือกการลบการตั้งค่าคอนฟิก ER บนหน้า **การตั้งค่าคอนฟิก** ล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="a5d6f-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="a5d6f-127">ถ้าคุณใช้ตัวเลือก **การล้างข้อมูลการย้าย** เพื่อลบการตั้งค่าคอนฟิกแม่แบบ ER เมื่อแม่แบบที่อ้างอิงถึงพร้อมใช้งานในการเก็บข้อมูล Blob คุณลบเฉพาะสิ่งประดิษฐ์การตั้งค่าคอนฟิกที่เกี่ยวข้องในฐานข้อมูลใบสมัครเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="a5d6f-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="a5d6f-128">แฟ้มที่มีอยู่จริงของแม่แบบในการจัดเก็บ Blob ยังคงอยู่</span><span class="sxs-lookup"><span data-stu-id="a5d6f-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="a5d6f-129">ไม่สามารถเขียนทับแฟ้มในที่เก็บข้อมูล Blob ได้อีกต่อไป</span><span class="sxs-lookup"><span data-stu-id="a5d6f-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="a5d6f-130">สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217)</span><span class="sxs-lookup"><span data-stu-id="a5d6f-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="a5d6f-131">นอกจากนี้ คุณจะไม่สามารถนําเข้าการตั้งค่าคอนฟิกที่ถูกลบอีกครั้งโดยใช้การล้างข้อมูลการย้ายในสภาพแวดล้อมนี้</span><span class="sxs-lookup"><span data-stu-id="a5d6f-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="a5d6f-132">เมื่อต้องการแก้ไขปัญหานี้ คุณจําเป็นต้องค้นหาแฟ้มที่สอดคล้องกันในการจัดเก็บ Blob และลบด้วยตนเอง</span><span class="sxs-lookup"><span data-stu-id="a5d6f-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="a5d6f-133">[![การนำเข้ารูปแบบ ER](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="a5d6f-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="a5d6f-134">ปัญหาที่คล้ายกันอาจเกิดขึ้น ถ้าคุณย้ายอินสแตนซ์ของโปรแกรมประยุกต์ไปยังตําแหน่งที่ตั้งอื่นที่ถูกใช้เป็นเป้าหมายการย้ายมากกว่าหนึ่งครั้ง และที่เก็บข้อมูล Blob ประกอบด้วยแฟ้มแม่แบบ ER อยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="a5d6f-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="a5d6f-135">เนื่องจากคุณสามารถมีการตั้งค่าคอนฟิกกรอบงาน ER หลายรูปแบบ กระบวนการนี้อาจใช้เวลานาน</span><span class="sxs-lookup"><span data-stu-id="a5d6f-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="a5d6f-136">ดังนั้น การใช้คุณลักษณะ [ที่เก็บสํารองของแม่แบบ ER](er-backup-storage-templates.md) เพื่อกู้คืนโดยอัตโนมัติแม่แบบที่มีการอ้างอิงที่ไม่ทำงานจึงเป็นที่ต้องการ</span><span class="sxs-lookup"><span data-stu-id="a5d6f-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>
