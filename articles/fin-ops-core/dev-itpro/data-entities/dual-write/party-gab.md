---
title: ฝ่ายและสมุดที่อยู่สากล
description: หัวข้อนี้จะอธิบายถึงฟังก์ชันฝ่ายและสมุดที่อยู่สากลของการรวมแบบสองทิศทาง
author: RamaKrishnamoorthy
ms.date: 03/10/2022
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2021-02-22
ms.openlocfilehash: 2e0d16b29a71da23acc925c09c87f0bb4776759c
ms.sourcegitcommit: 6dc2b877cf8ea9185a07964ec05c5ddb7a78471b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 03/12/2022
ms.locfileid: "8407776"
---
# <a name="party-and-global-address-book"></a>ฝ่ายและสมุดที่อยู่สากล

[!include [banner](../../includes/banner.md)]



*ฝ่าย* และ *สมุดที่อยู่สากล* เป็นแนวคิดในแอปพลิเคชันการเงินและการดำเนินงาน ฝ่ายอาจเป็นองค์กรหรือบุคคล ซึ่งมีความสะดวกสบายในการจัดเก็บและจัดการคุณสมบัติของฝ่าย เช่น ชื่อ ภาษา ผู้ติดต่อ และที่อยู่ จากนั้นเมื่อค่าคุณสมบัติเปลี่ยนแปลงในที่เดียว ค่าคุณสมบัติจะสะท้อนอยู่ในทุกที่ซึ่งฝ่ายเกี่ยวข้อง

## <a name="party"></a>ฝ่าย

ฝ่ายเป็นบุคคลหรือองค์กรที่เกี่ยวข้องกับธุรกิจ เมื่อใช้แนวคิดของฝ่าย บุคคลหรือองค์กรสามารถมีบทบาทมากกว่าหนึ่งบทบาท (เช่น ผู้ปฏิบัติงาน ลูกค้า ผู้จัดจำหน่าย หรือผู้ติดต่อ) ในธุรกิจได้ บทบาทจะขึ้นอยู่กับบริบทและวัตถุประสงค์ ต่อไปนี้เป็นบทบาทตัวอย่างจากบริษัทสมมติสองบริษัท Contoso และ Fabrikam:

+ **ผู้ปฏิบัติงาน** – พนักงาน ตัวอย่างคือ พนักงานของ Contoso
+ **ผู้จัดจำหน่าย** – องค์กรของซัพพลายเออร์ หรือเจ้าของรายเดียวที่จัดหาสินค้าหรือบริการให้กับธุรกิจ ตัวอย่างเช่น หาก Fabrikam ขายวัสดุให้กับ Contoso ดังนั้น Fabrikam คือผู้จัดจำหน่ายของ Contoso
+ **ผู้ติดต่อ** – บุคคลที่จะติดต่อ ตัวอย่างเช่น หาก Contoso ซื้อวัสดุจาก Fabrikam พนักงานของ Contoso จะติดต่อผู้ติดต่อที่ Fabrikam
+ **ลูกค้า** – บุคคลหรือบริษัทที่ซื้อสิ่งต่างๆ จากบริษัท ตัวอย่างเช่น หาก Contoso ซื้อวัสดุจาก Fabrikam ดังนั้น Contoso เป็นลูกค้าของ Fabrikam

แบบจำลองฝ่ายมักใช้เพื่อแสดงความสัมพันธ์แบบกลางถึงซับซ้อนระหว่างองค์กรและบุคคล โดยเฉพาะอย่างยิ่ง เมื่อฝ่ายมีบทบาทมากกว่าหนึ่งบทบาท ต่อไปนี้เป็นตัวอย่างทั่วไปบางรายการ:

+ ฝ่ายอาจเป็นทั้งลูกค้าและผู้จัดจำหน่าย ตัวอย่างเช่น ในอเมริกาเหนือ Fabrikam ขายสายไฟให้กับ Contoso และซื้อลําโพงที่ประกอบชิ้นส่วนจาก Contoso ในยุโรป Fabrikam ขายอะไหล่ให้กับ Contoso แต่ไม่ซื้อสิ่งใดๆ จาก Contoso
+ ฝ่ายอาจเป็นทั้งพนักงานและลูกค้า ตัวอย่างเช่น พนักงานของ Contoso ซื้ออุปกรณ์อิเล็กทรอนิกส์จาก Contoso เพื่อการใช้งานส่วนบุคคล
+ อาจมีความสัมพันธ์แบบกลุ่มต่อกลุ่ม (N:N) ระหว่างบุคคลและองค์กร ตัวอย่างเช่น Fabrikam จัดหาผู้เชี่ยวชาญด้านการบริการและว่าจ้างผู้ประสานงานด้านการจัดวาง ผู้ประสานงานด้านการจัดวางจับคู่ผู้เชี่ยวชาญด้านการบริการกับการร้องของานจากลูกค้าของ Fabrikam หลายราย Contoso เป็นหนึ่งในลูกค้าของ Fabrikam เมื่อ Contoso ต้องการผู้เชี่ยวชาญด้านการบริการ Contoso จะติดต่อผู้ประสานงานด้านการจัดวางซึ่งช่วยในการร้องขอ เนื่องจากผู้ประสานงานด้านการจัดวางจะจัดการคำขอของลูกค้าทั้งหมด ความสัมพันธ์แบบ N:N จะเกี่ยวข้องด้วย

รูปภาพต่อไปนี้แสดงแบบจำลองข้อมูลสำหรับฝ่าย:

![แบบจำลองข้อมูลสำหรับฝ่าย](media/party-gab-image1.png)

> [!TIP]
> เมื่อคุณพยายามสร้างเรกคอร์ดบัญชีใหม่ ให้ใช้ฟิลด์ **ฝ่าย** เพื่อค้นหาเรกคอร์ดตามชื่อ ด้วยวิธีนี้ หากคุณพบเรกคอร์ด คุณเพียงแต่ต้องเลือกเรกคอร์ดนั้น ระบบจะเติมข้อมูลทั้งหมดจากฝ่ายโดยอัตโนมัติ คุณไม่ต้องป้อนข้อมูลในฟิลด์ที่ต้องใช้ทั้งหมดด้วยตนเอง พฤติกรรมนี้สามารถดูได้ในหน้า **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** แบบสำเร็จรูป

การรวมแบบสองทิศทางไม่สนับสนุนบทบาทของฝ่ายทั้งหมดของแอปการเงินและการดำเนินงาน สำหรับรายการของบทบาทฝ่ายทั้งหมด ดู [ภาพรวมสมุดที่อยู่สากล](../../../fin-ops/organization-administration/overview-global-address-book.md)

### <a name="global-address-book"></a>สมุดที่อยู่สากล

สมุดที่อยู่สากลคือไดเรกทอรีของที่อยู่ไปรษณีย์และที่อยู่อิเล็กทรอนิกส์ขององค์กรและบุคคลที่เข้าร่วมในธุรกิจ

สมุดที่อยู่สากลจัดเก็บและจัดการที่อยู่ไปรษณีย์และที่อยู่อิเล็กทรอนิกส์มากเท่าที่ต้องการ ตัวอย่างเช่น Fabrikam มีปั๊มน้ำมัน 50 แห่ง สถานที่แต่ละแห่งจะมีที่อยู่ไปรษณีย์ ที่อยู่อีเมล และหมายเลขโทรศัพท์ที่ต่างกัน การซื้อทางธุรกิจทั้งหมดมีการเรียกเก็บเงินไปยังปั๊มน้ำมันหลัก แต่จะถูกจัดส่งโดยตรงไปยังปั๊มน้ำมันเฉพาะที่ร้องขอการซื้อ สมุดที่อยู่สากลจะจัดเก็บปั๊มน้ำมันหลักเป็นที่อยู่ในการเรียกเก็บเงินสำหรับ Fabrikam และจัดเก็บปั๊มน้ำมันแต่ละแห่งเป็นที่อยู่ในการจัดส่ง ที่อยู่สามารถถูกจัดเก็บได้เพียงครั้งเดียว และถูกดึงข้อมูลตามความต้องการสำหรับใบเสนอราคาและใบสั่ง

ขึ้นอยู่กับบริบททางธุรกิจ บุคคลหรือองค์กรอาจมีมากกว่าหนึ่งบทบาท และที่อยู่ไปรษณีย์และที่อยู่อิเล็กทรอนิกส์เดียวกันอาจใช้กับบทบาททั้งหมด ในกรณีนี้ การเปลี่ยนแปลงของที่อยู่ในบทบาทหนึ่งควรปรากฏในบทบาทอื่น ๆ ทั้งหมด สมุดที่อยู่สากลจัดเก็บและจัดการที่อยู่แบบสากล

แผนภาพต่อไปนี้แสดงแบบจำลองข้อมูลสำหรับสมุดที่อยู่สากล

![แบบจำลองข้อมูลสำหรับสมุดที่อยู่สากล](media/party-gab-image2.png)

## <a name="contact"></a>การติดต่อ

ในแอปการมีส่วนร่วมของลูกค้า ผู้ติดต่อ คือบุคคล อย่างไรก็ตาม ตาราง **ผู้ติดต่อ** ถูกโหลดมากเกินเพื่อแสดงถึงบุคคล ผู้ใช้พอร์ทัล ลูกค้าธุรกิจ-ผู้บริโภค (B2C) หรือผู้จัดจำหน่าย การแสดงเป็นแบบไม่ชัดเจน และคุณไม่สามารถบอกความแตกต่างได้โดยไม่ตรวจสอบธุรกรรมที่เกี่ยวข้อง ตาราง **ผู้ติดต่อ** ถูกจํากัดให้มีความสัมพันธ์แบบหนึ่งต่อหนึ่ง (1:1) กับตาราง **บัญชี** ในฐานะส่วนหนึ่งของแบบจําลองของฝ่ายและสมุดที่อยู่สากล การรวมแบบสองทิศทางจะระบุคุณสมบัติที่ชัดแจ้งสำหรับการจัดประเภท และช่วยให้สามารถมีความสัมพันธ์แบบ N:N ระหว่าง ผู้ติดต่อ และองค์กรได้ (เอนทิตี **บัญชี** หรือ **ผู้จัดจำหน่าย**)

มีแถว **ผู้ติดต่อ** อยู่สองชนิด:

+ **ผู้ติดต่อแบบมีแถบ** – แถว **ผู้ติดต่อ** ที่มีค่าบังคับในฟิลด์ **บริษัท**
+ **ผู้ติดต่อแบบไม่มีแถบ** – แถว **ผู้ติดต่อ** ที่มีฟิลด์ **บริษัท** ที่ว่างเปล่า

ตาราง **ผู้ติดต่อ** สามารถจัดเก็บชนิดของแถวต่อไปนี้ได้:

| ชนิดของแถว | คำอธิบาย |
|----------|-------------|
| บุคคลที่เป็นลูกค้า (ตัวอย่างเช่น ผู้ติดต่อที่ขายได้ หรือลูกค้า B2C) | เรกคอร์ดผู้ติดต่อแบบมีแถบที่ซึ่งฟิลด์ **บริษัท** ไม่ว่างเปล่า และฟิลด์ **เป็นลูกค้า** ถูกตั้งค่าเป็น **ใช่** |
| บุคคลที่เป็นผู้จัดจำหน่าย (ตัวอย่างเช่น เจ้าของรายเดียว เช่น ผู้จัดจำหน่าย) | เรกคอร์ดผู้ติดต่อแบบมีแถบที่ซึ่งฟิลด์ **บริษัท** ไม่ว่างเปล่า และฟิลด์ **เป็นผู้จัดจำหน่าย** ถูกตั้งค่าเป็น **ใช่** |
| บุคคลที่เป็นทั้งลูกค้าและผู้จัดจำหน่าย | เรกคอร์ดผู้ติดต่อแบบมีแถบที่ซึ่งฟิลด์ **บริษัท** ไม่ว่างเปล่า ฟิลด์ **เป็นลูกค้า** ถูกตั้งค่าเป็น **ใช่** และฟิลด์ **เป็นผู้จัดจำหน่าย** ถูกตั้งค่าเป็น **ใช่** บุคคลอาจเป็นทั้งผู้ผลิตสำหรับผลิตภัณฑ์หนึ่งและผู้บริโภคสำหรับผลิตภัณฑ์อื่น ทั้งแอปการเงินและการดำเนินงานและการรวมแบบสองทิศทางสนับสนุนความสัมพันธ์นี้ |
| บุคคลที่เป็นผู้ติดต่อสำหรับองค์กร แต่ไม่ใช่ลูกค้าหรือผู้จัดจำหน่าย | เรกคอร์ดผู้ติดต่อแบบไม่มีแถบที่ซึ่งฟิลด์ **บริษัท** ว่างเปล่า ฟิลด์ **เป็นลูกค้า** ถูกตั้งค่าเป็น **ไม่** และฟิลด์ **เป็นผู้จัดจำหน่าย** ถูกตั้งค่าเป็น **ไม่** |

## <a name="contact-for-party-table"></a>ตารางผู้ติดต่อสำหรับฝ่าย

ตาราง **ผู้ติดต่อสำหรับฝ่าย** จัดเก็บและจัดการความสัมพันธ์ N:N ระหว่างแถว **บัญชี** และแถว **ผู้ติดต่อ** ซึ่งสามารถกรองแถว **ผู้ติดต่อ** แบบมีแถบออกจากแถวแบบไม่มีแถบ และเชื่อมโยงเฉพาะแถว **ผู้ติดต่อ** แบบมีแถบกับแถว **บัญชี** หรือแถว **ผู้จัดจำหน่าย** เท่านั้น

ตัวอย่างเช่น Natasha Jones และ Miguel Reyes คือสัตวแพทย์ที่ดูแลฟาร์มในพื้นที่ของพวกเขา Natasha ให้บริการพื้นที่ Seattle และ Miguel ให้บริการพื้นที่ Kent ในแอปการมีส่วนร่วมของลูกค้า ฟาร์มจะถูกแสดงในฐานะลูกค้าและสัตวแพทย์คือผู้ติดต่อ เรกคอร์ด **ผู้ติดต่อ** เดียวสำหรับ Natasha จะเชื่อมโยงกับฟาร์มทั้งหมดที่ Natasha ทำงานด้วย ในทำนองเดียวกัน เรกคอร์ด **ผู้ติดต่อ** เดียวสำหรับ Miguel จะเชื่อมโยงกับฟาร์มทั้งหมดที่ Miguel ทำงานด้วย

ความสัมพันธ์เหล่านี้ถูกจัดเก็บอยู่ในตาราง **ผู้ติดต่อสำหรับฝ่าย** คุณสามารถดูข้อมูลได้ในหน้า **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** แบบสำเร็จรูป:

+ ในหน้า **บัญชี** คุณสามารถใช้แท็บ **ผู้ติดต่อที่สัมพันธ์กัน** เพื่อเชื่อมโยงผู้ติดต่อหนึ่งรายหรือมากกว่ากับแถว **บัญชี** ด้วยวิธีนี้ คุณกำลังกําหนดผู้ติดต่อสำหรับองค์กร จากนั้น คุณสามารถเลือกผู้ติดต่อหนึ่งคนเป็นผู้ติดต่อหลักหนึ่งคนของบัญชี ถ้าคุณใช้หน้า **สร้างด่วน** คุณจะสามารถเลือกผู้ติดต่อได้เท่านั้น ลักษณะจะเหมือนกันเมื่อคุณใช้หน้า **ผู้จัดจำหน่าย** และชนิดเรกคอร์ดเป็น **องค์กร**
+ ในหน้า **ผู้ติดต่อ** เมื่อแถวเป็นลูกค้า ผู้จัดจำหน่าย หรือทั้งสองอย่าง (ผู้ติดต่อแบบมีแถบ) คุณสามารถใช้แท็บ **ผู้ติดต่อที่สัมพันธ์กัน** เพื่อเชื่อมโยงผู้ติดต่อหนึ่งรายการหรือมากกว่า ด้วยวิธีนี้ คุณกำลังกําหนดผู้ติดต่อสำหรับลูกค้าหรือผู้จัดจำหน่าย B2C จากนั้น คุณสามารถเลือกผู้ติดต่อหนึ่งคนเป็นผู้ติดต่อหลักหนึ่งคน ถ้าคุณใช้หน้า **สร้างด่วน** คุณจะสามารถเลือกผู้ติดต่อได้เท่านั้น
+ ในหน้า **ผู้ติดต่อ** เมื่อแถวเป็นผู้ติดต่อ (ผู้ติดต่อแบบไม่มีแถบ) คุณสามารถใช้แท็บ **องค์กรที่สัมพันธ์กัน** เพื่อเชื่อมโยงลูกค้าหรือผู้จัดจำหน่ายหนึ่งรายหรือมากกว่า ด้วยวิธีนี้ คุณกำลังกําหนดลูกค้าหรือผู้จัดจำหน่ายให้กับผู้ติดต่อสำหรับลูกค้าหรือผู้จัดจำหน่ายพื้นฐาน ลูกค้าหรือผู้จัดจำหน่ายอาจเป็นองค์กร บุคคล หรือทั้งสองอย่าง คุณสามารถเลือกค่าได้เพียงค่าเดียวจากฟิลด์สี่ฟิลด์ในแต่ละครั้ง:

    + ถ้าคุณเลือกค่าในฟิลด์ **รหัสฝ่าย** จากนั้น ผู้ติดต่อพื้นฐานจะถูกมอบหมายให้กับบทบาททั้งหมดของฝ่ายที่เลือก
    + ถ้าคุณเลือกค่าในฟิลด์ **ผู้ติดต่อที่เกี่ยวข้อง** จากนั้น คุณจะเลือกผู้ติดต่อแบบมีแถบที่มีชนิดเป็น **บุคคล**
    + ถ้าคุณเลือกค่าในฟิลด์ **บัญชีที่สัมพันธ์กัน** หรือ **ผู้จัดจำหน่ายที่สัมพันธ์กัน** คุณจะเลือกองค์กร

    ![แท็บองค์กรที่เกี่ยวข้องในหน้าผู้ติดต่อ](media/party-gab-image3.png)

    โดยไม่พิจารณาตัวเลือกของคุณ การเชื่อมโยงจะถูกสร้างขึ้นในระดับฝ่าย ซึ่งสามารถใช้ได้กับบทบาททั้งหมดของฝ่ายและถูกจัดเก็บในเอนทิตี **ผู้ติดต่อสำหรับฝ่าย**

> [!NOTE]
> ชื่อที่แสดงสำหรับตาราง **ผู้ติดต่อสำหรับฝ่าย** ในแอปการมีส่วนร่วมของลูกค้า คือ **ผู้ติดต่อสำหรับลูกค้า/ผู้จัดจำหน่าย**

เมื่อคุณเปิดแถว **ผู้ติดต่อ** ที่มีการตั้งค่าทั้งฟิลด์ **เป็นลูกค้า** และ **เป็นผู้จัดจำหน่าย** เป็น **ไม่** แท็บ **องค์กรที่สัมพันธ์กัน** จะแสดงขึ้น ใช้แท็บเพื่อเชื่อมโยงองค์กรของลูกค้าหรือผู้จัดจำหน่ายหนึ่งองค์กรหรือมากกว่ากับผู้ติดต่อ

เมื่อคุณเปิดแถว **ผู้ติดต่อ** ที่มีการตั้งค่าฟิลด์ **เป็นลูกค้า** หรือ **เป็นผู้จัดจำหน่าย** เป็น **ไม่** แท็บ **ผู้ติดต่อที่สัมพันธ์กัน** จะแสดงขึ้น ใช้แท็บนี้เพื่อเชื่อมโยงผู้ติดต่อหนึ่งรายหรือมากกว่านั้น

## <a name="postal-addresses"></a>ที่อยู่ไปรษณีย์

แท็บ **ที่อยู่** ใหม่ได้รับการแนะนำบนหน้า **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** แท็บนี้จะสนับสนุนที่อยู่ไปรษณีย์หลายที่อยู่โดยใช้กริด ดังที่แสดงในภาพต่อไปนี้

![กริดสำหรับที่อยู่ไปรษณีย์](media/party-gab-image4.png)

กริดประกอบด้วยคอลัมน์ต่อไปนี้:

+ **บทบาทที่อยู่ไปรษณีย์** – วัตถุประสงค์ของที่อยู่ไปรษณีย์
+ **เป็นหลัก** – ค่าที่บ่งชี้ว่าที่อยู่เป็นที่อยู่หลักหรือไม่
+ **หมายเลขที่อยู่** – ลำดับของที่อยู่

คุณสามารถใช้ปุ่ม **ที่อยู่ใหม่** เหนือกริดเพื่อสร้างที่อยู่ไปรษณีย์ได้มากเท่าที่คุณต้องการ

ฟิลด์ **ที่อยู่ 1** และ **ที่อยู่ 2** บนแท็บ **สรุป** ของหน้า **บัญชี** จะตรงกับที่อยู่ **การจัดส่ง** และ **ใบแจ้งหนี้** ตามลําดับ

![แท็บสรุปสำหรับที่อยู่ไปรษณีย์](media/party-gab-image5.png)

ฟิลด์ **ที่อยู่ 1** **ที่อยู่ 2** และ **ที่อยู่ 3** บนแท็บ **สรุป** ของหน้า **ผู้ติดต่อ** จะตรงกับที่อยู่ **ธุรกิจ** **การจัดส่ง** และ **ใบแจ้งหนี้** ตามลําดับ

## <a name="electronic-addresses"></a>ที่อยู่อิเล็กทรอนิกส์

แท็บ **ที่อยู่อิเล็กทรอนิกส์** ใหม่ได้รับการแนะนำบนหน้า **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** แท็บนี้จะสนับสนุนที่อยู่อิเล็กทรอนิกส์หลายที่อยู่โดยใช้กริด ดังที่แสดงในภาพต่อไปนี้

![กริดสำหรับที่อยู่อิเล็กทรอนิกส์](media/party-gab-image6.png)

กริดประกอบด้วยคอลัมน์ต่อไปนี้:

+ **ชนิด** – ชนิดของที่อยู่อิเล็กทรอนิกส์
+ **เป็นหลัก** ค่าที่บ่งชี้ว่าที่อยู่เป็นที่อยู่หลักหรือไม่
+ **วัตถุประสงค์** – วัตถุประสงค์ของที่อยู่อิเล็กทรอนิกส์

คุณสามารถใช้ปุ่ม **ที่อยู่อิเล็กทรอนิกส์ใหม่** เหนือกริดเพื่อสร้างที่อยู่ได้มากเท่าที่คุณต้องการ

ที่อยู่อิเล็กทรอนิกส์จะพร้อมใช้งานบนกริดนี้เท่านั้น ในรุ่นในอนาคต ฟิลด์ที่อยู่ไปรษณีย์และที่อยู่อิเล็กทรอนิกส์ทั้งหมดจะถูกลบออกจากแท็บอื่น ๆ ตัวอย่างเช่น แท็บ **สรุป** และ **รายละเอียด** รายละเอียดผู้ติดต่อที่แสดงบนแท็บ **รายละเอียด** เป็นสำเนาของที่อยู่อิเล็กทรอนิกส์หลักแบบอ่านอย่างเดียว เช่น โทรศัพท์หลัก อีเมลหลัก โทรศัพท์หลัก โทรสารหลัก และรหัส Twitter หลัก ในระหว่างกระบวนการคุณวุฒิสายงานของลูกค้าเป้าหมาย คุณสามารถระบุทั้งหมายเลขโทรศัพท์ธุรกิจและหมายเลขโทรศัพท์เคลื่อนที่ หมายเลขโทรศัพท์ธุรกิจจะถือเป็นโทรศัพท์หลัก ถ้า **IsNoile=No** และหมายเลขโทรศัพท์เคลื่อนที่ถือเป็นโทรศัพท์รองถ้า **IsMobile=Yes**

> [!TIP]
> ใช้แท็บ **ที่อยู่** และ **ที่อยู่อิเล็กทรอนิกส์** บนฟอร์ม **บัญชี** และ **ผู้ติดต่อ** เพื่อจัดการที่อยู่ไปรษณีย์และที่อยู่อิเล็กทรอนิกส์ วิธีการนี้จะตรวจสอบให้แน่ใจว่าข้อมูลที่อยู่จะซิงโครไนส์กับแอปการเงินและการดำเนินงาน

## <a name="setup"></a>ตั้งค่า

1. เปิดสภาพแวดล้อมแอปการมีส่วนร่วมของลูกค้า

2. ติดตั้งรุ่นล่าสุด (2.2.2.60 หรือใหม่กว่า) [โซลูชันการประสานกันของแอปพลิเคชันการรวมแบบสองทิศทาง](https://aka.ms/dual-write-app)

3. ติดตั้ง [ฝ่ายการรวมแบบสองทิศทางและโซลูชันสมุดที่อยู่สากล](https://aka.ms/dual-write-gab)

4. เปิดแอปการเงินและการดำเนินงาน นําทางไปยังโมดูลการจัดการข้อมูลและเลือกแท็บการรวมแบบสองทิศทาง หน้าการจัดการการรวมแบบสองทิศทางจะเปิดขึ้น

5. นําโซลูชันทั้งสองที่ติดตั้งในขั้นตอนที่ 2 และ 3 ไปใช้โดยใช้ฟังก์ชัน [Apply Solution](link-your-environment.md)

6. หยุดแผนผังต่อไปนี้ เนื่องจากไม่ต้องใช้อีกต่อไป แต่ให้เรียกใช้แผนผัง `Contacts V2 (msdyn_contactforparties)` แทน

    + CDS Contacts V2 และ Contacts (อ้างอิงถึงผู้ติดต่อของลูกค้า)
    + CDS Contacts V2 และ Contacts (อ้างอิงถึงผู้ติดต่อของผู้จัดจำหน่าย)

7. การแมปเอนทิตีต่อไปนี้มีการอัปเดตสำหรับฟังก์ชันของฝ่าย ดังนั้น ต้องใช้รุ่นล่าสุดกับการแมปเหล่านี้

    แผนผัง | อัปเดตเป็นรุ่นนี้ | การเปลี่ยนแปลง
    ---|---|---
    `CDS Parties (msdyn_parties)`| 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Contacts V2 (msdyn_contactforparties)`| 1.0.0.5 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Customers V3 (accounts)` | 1.0.0.5 |ลบ `PartyNumber` และฟิลด์อื่นที่เกี่ยวข้องกับฝ่าย เช่น ชื่อ รายละเอียดส่วนตัว ฟิลด์ที่อยู่ไปรษณีย์ และที่อยู่ผู้ติดต่อทางอิเล็กทรอนิกส์
    `Customer V3 (contacts)` | 1.0.0.5 | ลบ `PartyNumber` และฟิลด์อื่นที่เกี่ยวข้องกับฝ่าย เช่น ชื่อ รายละเอียดส่วนตัว ฟิลด์ที่อยู่ไปรษณีย์ และที่อยู่ผู้ติดต่อทางอิเล็กทรอนิกส์
    `Vendors V2 (msdyn_vendors)` | 1.0.0.6 | ลบ `PartyNumber` และฟิลด์อื่นที่เกี่ยวข้องกับฝ่าย เช่น ชื่อ รายละเอียดส่วนตัว ฟิลด์ที่อยู่ไปรษณีย์ และที่อยู่ผู้ติดต่อทางอิเล็กทรอนิกส์
    `CDS Sales quotation headers (quotes)` | 1.0.0.7 | แทนที่ผู้ติดต่อด้วยการอ้างอิง `ContactforParty`
    `Sales invoice headers V2 (invoices)` | 1.0.0.4 | แทนที่ผู้ติดต่อด้วยการอ้างอิง `ContactforParty`
    `CDS Sales order headers (salesorders)` | 1.0.0.5 | แทนที่ผู้ติดต่อด้วยการอ้างอิง `ContactforParty`
    `CDS Party postal address locations (msdyn_partypostaladdresses)` | 1.0.0.1  | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `CDS postal address history V2 (msdyn_postaladdresses)` | 1.0.0.1 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `CDS postal address locations (msdyn_postaladdresscollections)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Party Contacts V3 (msdyn_partyelectronicaddresses)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Complimentary Closings ( msdyn_compliemntaryclosings)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Decision making roles (msdyn_decisionmakingroles)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Loyalty levels (msdyn_loyaltylevels)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Contact person titles (msdyn_salescontactpersontitles)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Personal character types (msdyn_personalcharactertypes)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Salutations (msdyn_salutations)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้
    `Employment job functions (msdyn_employmentjobfunctions)` | 1.0.0.0 | นี่คือแผนผังใหม่ที่เพิ่มเป็นส่วนหนึ่งของการนำออกใช้นี้

8. ก่อนเรียกใช้แผนผังข้างต้น คุณต้องอัปเดตคีย์การรวมด้วยตนเองตามที่อธิบายไว้ในขั้นตอนต่อไปนี้ จากนั้น เลือก **บันทึก**

    | แผนผัง | คีย์ |
    |-----|------|
    | บัญชี |  accountnumber [หมายเลขบัญชี]<br>msdyn_company.cdm_companycode [บริษัท (รหัสบริษัท)] |
    | การติดต่อ | msdyn_contactpersonid [หมายเลขบัญชี/รหัสผู้ติดต่อ]<br>msdyn_company.cdm_companycode [บริษัท (รหัสบริษัท)] |
    | ผู้ติดต่อของลูกค้า/ผู้จัดจำหน่าย | msdyn_contactforpartynumber [หมายเลขผู้ติดต่อของฝ่าย]<br>msdyn_associatedcompanyid.cdm_companycode [บริษัทที่สัมพันธ์กัน (รหัสบริษัท)] |
    | ผู้จัดจำหน่าย | msdyn_vendoraccountnumber [หมายเลขบัญชีผู้จัดจำหน่าย]<br>msdyn_company.cdm_companycode [บริษัท (รหัสบริษัท)]|

9. ใน Dataverse ขีดจํากัดอักขระของกฎการตรวจหาข้อมูลจะเพิ่มขึ้นจาก 450 เป็น 700 อักขระ ขีดจํากัดนี้ช่วยให้คุณสามารถเพิ่มคีย์หนึ่งคีย์หรือมากกว่าในกฎการตรวจหาข้อมูลซ้อน ขยายกฎการตรวจหาข้อมูลซ้อนสำหรับตาราง **บัญชี** โดยตั้งค่าฟิลด์ต่อไปนี้

    | ฟิลด์ | มูลค่า |
    |-------|-------|
    | ชื่อ | บัญชีที่มีชื่อบัญชีเดียวกัน |
    | คำอธิบาย | ตรวจสอบเรกคอร์ดบัญชีมีค่าเดียวกันในแอททริบิวต์ชื่อบัญชี |
    | ชนิดเรกคอร์ดพื้นฐาน | บัญชี |
    | ชนิดเรกคอร์ดการจับคู่ | บัญชี |
    | ชื่อบัญชี (ฟิลด์) | ตรงกันทุกประการ |
    | บริษัท (ฟิลด์) | ตรงกันทุกประการ |
    | ชนิดของความสัมพันธ์ (ฟิลด์) | ตรงกันทุกประการ |
    | รหัสฝ่าย (ฟิลด์) | ตรงกันทุกประการ |
    | เลือก (ฟิลด์) | (ว่างเปล่า) |

    ![ทำสำเนากฎสำหรับบัญชี](media/duplicate-rule-1.PNG)

10. ขยายกฎการตรวจหาข้อมูลซ้อนสำหรับตาราง **ผู้ติดต่อ** โดยตั้งค่าฟิลด์ต่อไปนี้

    | ฟิลด์ | มูลค่า |
    |-------|-------|
    | ชื่อ | ผู้ติดต่อที่มีชื่อและนามสกุลเหมือนกัน |
    | คำอธิบาย | ตรวจสอบเรกคอร์ดผู้ติดต่อที่มีค่าเหมือนกันในฟิลด์ชื่อและนามสกุล |
    | ชนิดเรกคอร์ดพื้นฐาน | การติดต่อ |
    | ชนิดเรกคอร์ดการจับคู่ | การติดต่อ |
    | ชื่อ (ฟิลด์) | ตรงกันทุกประการ |
    | นามสกุล (ฟิลด์) | ตรงกันทุกประการ |
    | บริษัท (ฟิลด์) | ตรงกันทุกประการ |
    | รหัสฝ่าย (ฟิลด์) | ตรงกันทุกประการ |
    | เลือก (ฟิลด์) | (ว่างเปล่า) |

    ![คัดลอกกฎสำหรับผู้ติดต่อ](media/duplicate-rule-2.PNG)

11. ถ้าคุณเป็นผู้ใช้การรวมแบบสองทิศทางที่มีอยู่ ให้ปฏิบัติตามคําแนะนําใน [การอัปเกรดไปยังฝ่ายและสมุดที่อยู่สากล](upgrade-party-gab.md) และอัปเกรดข้อมูลของคุณ **อย่าดําเนินการในขั้นตอนที่ 12 หากไม่ดําเนินการตามขั้นตอนนี้ให้เสร็จสมบูรณ์** ถ้าคุณเป็นผู้ใช้การรวมแบบสองทิศทางใหม่ ให้ดําเนินการต่อในขั้นตอนที่ 12

12. หากคุณเป็นผู้ใช้การรวมแบบสองทิศทางที่มีอยู่ ให้ทำตามขั้นตอนที่ 11 จากนั้นคุณสามารถเรียกใช้แผนผังตามลำดับต่อไปนี้ หากคุณเป็นลูกค้าผู้ใช้การรวมแบบสองทิศทางใหม่ คุณสามารถดําเนินการต่อได้ทันที ถ้าคุณได้รับข้อความแสดงผิดพลาดที่ระบุว่า "การตรวจสอบความถูกต้องของโครงการล้มเหลว ฟิลด์ปลายทางที่ขาดหายไป..." ให้เปิดแผนผังและเลือก **รีเฟรชตาราง** แล้วเรียกใช้แผนผัง

    แอปการเงินและการดำเนินงาน | แอปการมีส่วนร่วมของลูกค้า  
    ----------------------------|------------------------
    [ฝ่าย CDS](mapping-reference.md#220) | msdyn_parties
    [สถานที่ของที่อยู่ทางไปรษณีย์ของ CDS](mapping-reference.md#234) | msdyn_postaladdresscollections
    [ประวัติที่อยู่ทางไปรษณีย์ของ CDS V2](mapping-reference.md#235) | msdyn_postaladdresses
    [สถานที่ของที่อยู่ทางไปรษณีย์ของฝ่าย CDS](mapping-reference.md#233) | msdyn_partypostaladdresses
    [ผู้ติดต่อของฝ่าย V3](mapping-reference.md#236) | msdyn_partyelectronicaddresses
    [ลูกค้า V3](mapping-reference.md#101) | บัญชี
    [ลูกค้า V3](mapping-reference.md#116) | ผู้ติดต่อ
    [ผู้จัดจำหน่าย V2](mapping-reference.md#202) | msdyn_vendors
    [ตำแหน่งของผู้ติดต่อ](mapping-reference.md#223) | msdyn_salescontactpersontitles
    [คำลงท้าย](mapping-reference.md#222) | msdyn_complimentaryclosings
    [คำขึ้นต้น](mapping-reference.md#228) | msdyn_salutations
    [บทบาทในการตัดสินใจ](mapping-reference.md#224) | msdyn_decisionmakingroles
    [ฟังก์ชันงานในการจ้างงาน](mapping-reference.md#225) | msdyn_employmentjobfunctions
    [ระดับของสมาชิก](mapping-reference.md#226) | msdyn_loyaltylevels
    [ชนิดลักษณะส่วนบุคคล](mapping-reference.md#227) | msdyn_personalcharactertypes
    [ผู้ติดต่อ V2](mapping-reference.md#221) | msdyn_contactforparties
    [ส่วนหัวของใบเสนอราคาขาย CDS](mapping-reference.md#215) | ใบเสนอราคา
    [ส่วนหัวของใบสั่งขาย CDS](mapping-reference.md#217) | salesorders
    [ส่วนหัวของใบแจ้งหนี้การขาย V2](mapping-reference.md#118) | ใบแจ้งหนี้

> [!NOTE]
> แผนผัง `CDS Contacts V2 (contacts)` คือแผนผังที่คุณหยุดไว้ในขั้นตอนที่ 1 เมื่อคุณพยายามเรียกใช้แผนผังอื่น แผนที่ 2 เหล่านี้อาจปรากฏในรายชื่อผู้อยู่ในอุปการะ อย่าเรียกใช้แผนผังเหล่านี้
>
> ถ้าติดตั้งโซลูชันฝ่ายและสมุดที่อยู่สากลแล้ว คุณต้องปิดใช้งานปลั๊กอินที่ชื่อ `Microsoft.Dynamics.SCMExtended.Plugins.Plugins.LeadPrimaryContactPostCreate: QualifyLead of lead` ถ้าคุณยกเลิกการติดตั้งโซลูชันฝ่ายและสมุดที่อยู่สากล คุณต้องเปิดใช้งานปลั๊กอินอีกครั้ง
>
> ฟิลด์ `msdyn_*partynumber` (ฟิลด์ข้อความบรรทัดเดียว) ที่รวมอยู่ในตาราง **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** ไม่ควรใช้ต่อไป ชื่อป้ายชื่อมีชื่อนําหน้า **(ไม่ได้สนับสนุน)** เพื่อความชัดเจน ใช้ฟิลด์ **msdyn_partyid** แทน ฟิลด์เป็นการค้นหาตาราง **msdyn_party**

> ชื่อตาราง | ฟิลด์เก่า | ฟิลด์ใหม่
> --------|-------|--------
> บัญชี | `msdyn_partynumber` | `msdyn_partyid`
> การติดต่อ | `msdyn_partynumber` | `msdyn_partyid`
> msdyn_vendor | `msdyn_vendorpartynumber` | `msdyn_partyid`

## <a name="templates"></a>เทมเพลต

การรวบรวมของแผนผังตารางทำงานร่วมกันสำหรับการโต้ตอบของฝ่ายและสมุดที่อยู่สากล ดังที่แสดงในตารางต่อไปนี้

| แอปการเงินและการดำเนินงาน | แอปการมีส่วนร่วมของลูกค้า | คำอธิบาย |
|----------------------------|-------------------------|-------------|
| [ตำแหน่งของผู้ติดต่อ](mapping-reference.md#223) | msdyn\_salescontactpersontitles |
| [ลูกค้า V3](mapping-reference.md#101) | บัญชี |
| [ลูกค้า V3](mapping-reference.md#116) | ผู้ติดต่อ |
| [ฝ่าย CDS](mapping-reference.md#220) | msdyn\_parties |
| [สถานที่ของที่อยู่ทางไปรษณีย์ของฝ่าย CDS](mapping-reference.md#233) | msdyn\_partypostaladdresses |
| [ประวัติที่อยู่ทางไปรษณีย์ของ CDS V2](mapping-reference.md#235) | msdyn\_postaladdresses |
| [สถานที่ของที่อยู่ทางไปรษณีย์ของ CDS](mapping-reference.md#234) | msdyn\_postaladdresscollections |
| [ส่วนหัวของใบเสนอราคาขาย CDS](mapping-reference.md#215) | ใบเสนอราคา |
| [ส่วนหัวของใบสั่งขาย CDS](mapping-reference.md#217) | salesorders |
| [คำลงท้าย](mapping-reference.md#222) | msdyn\_complimentaryclosings |
| [ผู้ติดต่อ V2](mapping-reference.md#221) | msdyn\_contactforparties |
| [บทบาทในการตัดสินใจ](mapping-reference.md#224) | msdyn\_decisionmakingroles |
| [ฟังก์ชันงานในการจ้างงาน](mapping-reference.md#225) | msdyn\_employmentjobfunctions |
| [ระดับของสมาชิก](mapping-reference.md#226) | msdyn\_loyaltylevels |
| [ผู้ติดต่อของฝ่าย V3](mapping-reference.md#236) | msdyn\_partyelectronicaddresses |
| [ชนิดลักษณะส่วนบุคคล](mapping-reference.md#227) | msdyn\_personalcharactertypes |
| [ส่วนหัวของใบแจ้งหนี้การขาย V2](mapping-reference.md#118) | ใบแจ้งหนี้ |
| [คำขึ้นต้น](mapping-reference.md#228) | msdyn\_salutations |
| [ผู้จัดจำหน่าย V2](mapping-reference.md#202) | msdyn\_vendors |

สำหรับข้อมูลเพิ่มเติม ให้ดูที่  [การอ้างอิงการทำแผนที่แบบสองทิศทาง](mapping-reference.md)

## <a name="known-issues-and-limitations"></a>ปัญหาที่ทราบและข้อจํากัด

+ ในแอปการเงินและการดำเนินงาน เมื่อคุณสร้างลูกค้าพร้อมกับที่อยู่และบันทึกที่อยู่ ที่อยู่อาจไม่ซิงโครไนส์กับตาราง **ที่อยู่** ที่เป็นเพราะปัญหาการจัดลำดับแพลตฟอร์มแบบสองทิศทาง วิธีแก้ไขปัญหา ให้สร้างลูกค้าก่อนแล้วบันทึก จากนั้นเพิ่มที่อยู่
+ ในแอปการเงินและการดำเนินงาน เมื่อเรกคอร์ดลูกค้ามีที่อยู่หลักและคุณสร้างผู้ติดต่อใหม่ของลูกค้ารายนั้น เรกคอร์ดผู้ติดต่อจะรับช่วงที่อยู่หลักจากเรกคอร์ดลูกค้าที่เชื่อมโยง ซึ่งจะเกิดขึ้นกับผู้ติดต่อผู้จัดจำหน่ายด้วย Dataverse ไม่สนับสนุนพฤติกรรมนี้อยู่ในขณะนี้ ถ้าเปิดใช้งานการรวมแบบสองทิศทาง ผู้ติดต่อของลูกค้าที่ได้รับสืบทอดที่อยู่หลักมาจากแอปการเงินและการดำเนินงานจะถูกซิงโครไนส์ไปยัง Dataverse พร้อมกับที่อยู่ของลูกค้า
+ ที่อยู่อิเล็กทรอนิกส์ตั้งค่าบนแท็บที่อยู่อิเล็กทรอนิกส์ของฟอร์ม **บัญชี** **ผู้ติดต่อ** และ **ผู้จัดจำหน่าย** จากตาราง `msdyn_partyelectronicaddress` ข้อมูลนี้ไม่ไหลไปยังธุรกรรมที่เกี่ยวข้อง เช่น ใบสั่งขาย ใบเสนอราคา และใบสั่งซื้อ เราวางแผนที่จะแก้ไขปัญหานี้ในการนำออกใช้ส่วนเพิ่ม ข้อมูลที่มีอยู่ในฟิลด์ที่อยู่อิเล็กทรอนิกส์ในบัญชีและเรกคอร์ดผู้ติดต่อจะยังคงงานในธุรกรรมต่อไป เช่น ใบสั่งขาย ใบเสนอราคา และใบสั่งซื้อ
+ ในแอปการเงินและการดำเนินงาน คุณสามารถสร้างเรกคอร์ดผู้ติดต่อจากฟอร์ม **เพิ่มผู้ติดต่อ** เมื่อคุณพยายามสร้างผู้ติดต่อใหม่จากฟอร์ม **ดูผู้ติดต่อ** การดำเนินการจะล้มเหลว นี่เป็นปัญหาที่ทราบ

    ![ปัญหาที่ทราบในการเพิ่มผู้ติดต่อ](media/party-gab-contact-issue.png)

+ **การซิงโครไนส์เริ่มต้น** ไม่สนับสนุนฟิลด์เวลา **พร้อมใช้งานจาก** และ **พร้อมใช้งานถึง** บน **ContactForParty** เนื่องจาก DIXF จะแปลงค่า เป็นสตริงแทนจํานวนเต็ม การแปลงจะทริกเกอร์ข้อผิดพลาด `Cannot convert the literal '<say 08:00:00>’ to the expected type edm.int32`
+ เมื่อใช้ที่อยู่ไปรษณีย์มากกว่าหนึ่งเหตุผล ตัวอย่างเช่น ที่อยู่การสื่อสารทางธุรกิจและที่อยู่ในการเรียกเก็บเงิน ควรจะปรากฏเป็น `Business;Invoice` ดังที่แสดงในภาพต่อไปนี้ ถ้าคุณเพิ่มช่องว่างระหว่างค่า คุณจะได้รับข้อผิดพลาด

    ![ปัญหาที่ทราบเกี่ยวกับที่อยู่](media/party-gab-address-issue.png)

+ คุณไม่สามารถป้อนที่อยู่ไปรษณีย์ที่มีวันที่แบบไปข้างหน้าโดยใช้แอปการเงินและการดำเนินงานพร้อมการรวมแบบสองทิศทาง เนื่องจาก Dataverse ไม่สนับสนุนการมีผลบังคับของวันที่ ถ้าคุณป้อนที่อยู่ไปรษณีย์ที่มีวันที่ในอนาคตโดยใช้แอปการเงินและการดำเนินงาน ที่อยู่ดังกล่าวจะซิงโครไนส์กับ Dataverse ทั้งหมดและคุณจะเห็นที่อยู่บนอินเทอร์เฟสผู้ใช้ทันที การอัปเดตใด ๆ ในเรกคอร์ดนี้จะส่งผลให้เกิดข้อผิดพลาดเนื่องจากเป็นการอัปเดตในอนาคตไม่ใช่ปัจจุบันในแอปการเงินและการดำเนินงาน
