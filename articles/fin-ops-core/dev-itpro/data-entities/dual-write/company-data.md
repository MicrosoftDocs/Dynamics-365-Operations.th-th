---
title: แนวคิดของบริษัทใน Common Data Service
description: หัวข้อนี้อธิบายการรวมของข้อมูลบริษัทระหว่าง Finance and Operations และ Common Data Service
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 46a6ed9763781de8e05cff7adadf75fe2a931fdc
ms.sourcegitcommit: 0a741b131ed71f6345d4219a47cf5f71fec6744b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/13/2020
ms.locfileid: "3997537"
---
# <a name="company-concept-in-common-data-service"></a>แนวคิดของบริษัทใน Common Data Service

[!include [banner](../../includes/banner.md)]


ใน Finance and Operations แนวคิดของ *บริษัท* เป็นทั้งโครงสร้างทางกฎหมายและการสร้างธุรกิจ นอกจากนี้ ยังเป็นขอบเขตความปลอดภัยและการมองเห็นสำหรับข้อมูล ผู้ใช้มักจะทำงานในบริบทของบริษัทเดียว และข้อมูลส่วนใหญ่จะถูกแบ่งโดยบริษัท

Common Data Service ไม่มีแนวคิดที่เทียบเท่ากัน แนวคิดที่ใกล้เคียงที่สุดคือ *หน่วยธุรกิจ* ซึ่งส่วนใหญ่แล้วเป็นขอบเขตความปลอดภัยและการมองเห็นสำหรับข้อมูลผู้ใช้ แนวคิดนี้ไม่มีผลกระทบทางกฎหมายหรือทางธุรกิจเดียวกันกับแนวคิดของบริษัท

เนื่องจากหน่วยธุรกิจและบริษัทไม่มีแนวคิดที่เทียบเท่ากัน คุณจึงไม่สามารถบังคับการแม็ปแบบหนึ่งต่อหนึ่ง (1:1) ระหว่างรายการเหล่านั้น เพื่อวัตถุประสงค์ของการรวม Common Data Service อย่างไรก็ตาม เนื่องจากผู้ใช้ต้อง โดยค่าเริ่มต้น จะสามารถดูเรกคอร์ดเดียวกันได้ในแอพลิเคชัน และ Common Data Service Microsoft ได้แนะนำเอนทิตีใหม่ใน Common Data Service ที่มีชื่อว่า cdm\_Company เอนทิตีนี้เทียบเท่ากับเอนทิตีของบริษัทในแอพลิเคชัน เพื่อช่วยรับประกันว่าความสามารถในการมองเห็นของเรกคอร์ดเทียบเท่ากับแอพลิเคชั่นและ Common Data Service แบบสำเร็จรูป และเราขอแนะนำขั้นตอนต่อไปนี้สำหรับข้อมูลใน Common Data Service:

+ สำหรับเรกคอร์ดของบริษัท Finance and Operations แต่ละรายการที่เปิดใช้งานสำหรับการเขียนแบบคู่ จะมีการสร้างเรกคอร์ด cdm\_Company ที่เกี่ยวข้อง
+ เมื่อมีการสร้าง cdm\_Company และมีการเปิดใช้งานสำหรับการเขียนแบบคู่ จะมีการสร้างหน่วยธุรกิจเริ่มต้นที่มีชื่อเดียวกัน แม้ว่าทีมงานเริ่มต้นจะถูกสร้างขึ้นโดยอัตโนมัติสำหรับหน่วยธุรกิจนั้น แต่ไม่มีการใช้หน่วยธุรกิจ
+ มีการสร้างทีมเจ้าของที่แยกต่างหากที่มีชื่อเดียวกัน นอกจากนี้ ยังมีการเชื่อมโยงกับหน่วยธุรกิจ
+ โดยค่าเริ่มต้น เจ้าของของเรกคอร์ดใดๆ ที่สร้างขึ้นและมีการเขียนแบบคู่ไปยัง Common Data Service จะถูกตั้งค่าเป็นทีมงาน "เจ้าของ DW" ที่เชื่อมโยงกับหน่วยธุรกิจที่เกี่ยวข้อง

ภาพประกอบต่อไปนี้แสดงตัวอย่างของการตั้งค่าข้อมูลนี้ใน Common Data Service

![การตั้งค่าข้อมูลใน Common Data Service](media/dual-write-company-1.png)

เนื่องจากการตั้งค่าคอนฟิกนี้ เรกคอร์ดใด ๆ ที่เกี่ยวข้องกับบริษัท USMF จะเป็นเจ้าของโดยทีมงานที่เชื่อมโยงกับหน่วยธุรกิจ USMF ใน Common Data Service ดังนั้น ผู้ใช้ใดๆ ที่มีการเข้าถึงหน่วยธุรกิจนั้นผ่านทางบทบาทความปลอดภัยที่ถูกตั้งค่าเป็นความสามารถในการมองเห็นระดับหน่วยธุรกิจ ในขณะนี้สามารถดูเรกคอร์ดเหล่านั้นได้ ตัวอย่างต่อไปนี้แสดงวิธีการที่สามารถใช้ทีมงานเพื่อให้การเข้าถึงที่ถูกต้องแก่เรกคอร์ดเหล่านั้น

+ บทบาท "ผู้จัดการฝ่ายขาย" ถูกกำหนดให้กับสมาชิกของทีมงาน "ฝ่ายขาย USMF"
+ ผู้ใช้ที่มีบทบาท "ผู้จัดการฝ่ายขาย" สามารถเข้าถึงเรกคอร์ดบัญชีใดๆ ที่เป็นสมาชิกของหน่วยธุรกิจเดียวกันที่พวกเขาเป็นสมาชิก
+ ทีมงาน "การขาย USMF" เชื่อมโยงกับหน่วยธุรกิจ USMF ที่กล่าวถึงก่อนหน้านี้
+ ดังนั้น สมาชิกของทีม "ฝ่ายขาย USMF" สามารถดูบัญชีใดๆ ที่เป็นเจ้าของโดยผู้ใช้ "USMF DW" ซึ่งจะมาจากเอนทิตีบริษัท USMF ใน Finance and Operations

![วิธีการที่จะสามารถใช้ทีมได้](media/dual-write-company-2.png)

เมื่อภาพประกอบก่อนหน้านี้แสดงขึ้น การแม็ป 1:1 นี้ระหว่างหน่วยธุรกิจ บริษัท และทีม เป็นเพียงจุดเริ่มต้น ในตัวอย่างนี้ จะมีการสร้างหน่วยธุรกิจ "ยุโรป" ใหม่ด้วยตนเองใน Common Data Service เป็นรายการหลักสำหรับทั้ง DEMF และ ESMF หน่วยธุรกิจรากใหม่นี้ไม่เกี่ยวข้องกับการเขียนแบบคู่ อย่างไรก็ตาม คุณสามารถใช้เพื่อให้สมาชิกของทีมงาน "การขาย EUR" มีการเข้าถึงข้อมูลบัญชีทั้งใน DEMF และ ESMF โดยการตั้งค่าการแสดงผลข้อมูลเป็น **BU หลัก/รอง** ในบทบาทความปลอดภัยที่เกี่ยวข้อง

หัวข้อสุดท้ายเพื่อหารือเกี่ยวกับวิธีการเขียนแบบคู่กำหนดทีมงานของเจ้าของที่ควรกำหนดเรกคอร์ดให้ ลักษณะการทำงานนี้จะถูกควบคุมโดยฟิลด์ **ทีมงานที่เป็นเจ้าของเริ่มต้น** บนเรกคอร์ด cdm\_Company เมื่อมีการเปิดใช้งานเรกคอร์ด dm\_Company สำหรับการเขียนแบบคู่ ปลั๊กอินจะสร้างหน่วยธุรกิจที่เกี่ยวข้องและทีมงานของเจ้าของ (ถ้าไม่ได้มีอยู่แล้ว) และตั้งค่าฟิลด์ **ทีมงานที่เป็นเจ้าของเริ่มต้น** ผู้ดูแลระบบสามาเปลี่ยนฟิลด์นี้เป็นค่าอื่นได้ อย่างไรก็ตาม ผู้ดูแลระบบไม่สามารถล้างฟิลด์ ตราบใดที่เอนทิตีถูกเปิดใช้งานสำหรับการเขียนแบบคู่

> [!div class="mx-imgBorder"]
![ฟิลด์ทีมที่เป็นเจ้าของเริ่มต้น](media/dual-write-default-owning-team.jpg)

## <a name="company-striping-and-bootstrapping"></a>การแบ่งและการระดมทุนของบริษัท

การรวม Common Data Service นำพาริตี้ของบริษัทมาโดยใช้ตัวระบุบริษัทเพื่อแบ่งข้อมูล เมื่อภาพประกอบต่อไปนี้แสดงขึ้น เอนทิตีเฉพาะบริษัททั้งหมดจะถูกขยายเพื่อให้มีความสัมพันธ์แบบกลุ่มต่อหนึ่ง (N:1) กับ cdm\_เอนทิตีของบริษัท

> [!div class="mx-imgBorder"]
![ความสัมพันธ์แบบ N:1 ระหว่างเอนทิตีเฉพาะบริษัทและเอนทิตี cdm_Company](media/dual-write-bootstrapping.png)

+ สำหรับเรกคอร์ด หลังจากที่มีการเพิ่มและบันทึกบริษัท ค่าจะกลายเป็นแบบอ่านอย่างเดียว ดังนั้น ผู้ใช้ควรตรวจสอบให้แน่ใจว่าได้เลือกบริษัทที่ถูกต้อง
+ เฉพาะเรกคอร์ดที่มีข้อมูลของบริษัทเท่านั้นที่มีสิทธิ์ในการเขียนแบบคู่ระหว่างแอพลิเคชันและ Common Data Service
+ สำหรับข้อมูล Common Data Service ที่มีอยู่ ประสบการณ์ระดมทุนที่นำโดยผู้ดูแลระบบจะพร้อมใช้งานเร็วๆ นี้


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a>เติมข้อมูลชื่อบริษัทอัตโนมัติในแอปการมีส่วนร่วมของลูกค้า

การเติมข้อมูลชื่อบริษัทอัตโนมัติในแอปการมีส่วนร่วมของลูกค้ามีหลายวิธี

+ ถ้าคุณเป็นผู้ดูแลระบบ คุณสามารถตั้งค่าบริษัทเริ่มต้นด้วยการไปยัง **การตั้งค่าขั้นสูง > ระบบ > ความปลอดภัย > ผู้ใช้** เปิดแบบฟอร์ม **ผู้ใช้** และในส่วน **ข้อมูลองค์กร** ให้กำหนดค่า **บริษัทเป็นค่าเริ่มต้นในแบบฟอร์ม**

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="ตั้งค่าบริษัทเริ่มต้นในส่วนข้อมูลองค์กร":::

+ ถ้าคุณมีสิทธิ์ **การเขียน** ในเอนทิตี้ **SystemUser** สำหรับ **ระดับของหน่วยธุรกิจ** คุณสามารถเปลี่ยนบริษัทเริ่มต้นในแบบฟอร์มใดๆ ได้โดยการเลือกบริษัทจากเมนูแบบหล่นลงของ **บริษัท**

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="การเปลี่ยนชื่อบริษัทในบัญชีใหม่":::

+ หากคุณมีสิทธิ์ **การเขียน** ข้อมูลในบริษัทมากกว่าหนึ่งบริษัท คุณสามารถเปลี่ยนบริษัทเริ่มต้นได้ด้วยการเลือกเรกคอร์ดที่เป็นของบริษัทอื่น

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="การเลือกเรกคอร์ดจะเปลี่ยนบริษัทเริ่มต้น":::

+ หากคุณเป็นผู้ตั้งค่าคอนฟิกระบบหรือผู้ดูแลระบบ และคุณต้องการเติมข้อมูลบริษัทอัตโนมัติในแบบฟอร์มที่กำหนดเอง คุณก็สามารถใช้ [เหตุการณ์แบบฟอร์ม](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids) เพิ่มการอ้างอิง JavaScript ไปยัง **msdyn_/DefaultCompany.js** และใช้เหตุการณ์ต่อไปนี้ คุณสามารถใช้แบบฟอร์มสำเร็จรูปใดๆ ก็ได้ ตัวอย่างเช่น แบบฟอร์ม **บัญชี**

    + เหตุการณ์ **OnLoad** สำหรับแบบฟอร์ม: ตั้งค่าฟิลด์ **defaultCompany**
    + เหตุการณ์ **OnChange** สำหรับฟิลด์ **บริษัท** : ตั้งค่าฟิลด์ **updateDefaultCompany**

## <a name="apply-filtering-based-on-the-company-context"></a>ใช้การกรองตามบริบทของบริษัท

เมื่อต้องการใช้การกรองตามบริบทของบริษัทในแบบฟอร์มที่กำหนดเองของคุณ หรือในฟิลด์การค้นหาแบบกำหนดเองที่เพิ่มเข้าในแบบฟอร์มมาตรฐาน ให้เปิดแบบฟอร์มและใช้ส่วน **การกรองเรกคอร์ดที่เกี่ยวข้อง** เพื่อใช้ตัวกรองบริษัท คุณต้องตั้งค่านี้สำหรับฟิลด์การค้นหาแต่ละฟิลด์ที่จำเป็นต้องมีการกรองตามบริษัทพื้นฐานของเรกคอร์ดที่กำหนด การตั้งค่าดังกล่าวแสดงสำหรับ **บัญชี** ในภาพประกอบต่อไปนี้

:::image type="content" source="media/apply-company-context.png" alt-text="ใช้บริบทของบริษัท":::

