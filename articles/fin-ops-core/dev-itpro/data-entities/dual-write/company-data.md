---
title: แนวคิดของบริษัทใน Dataverse
description: หัวข้อนี้อธิบายการรวมของข้อมูลบริษัทระหว่าง Finance and Operations และ Dataverse
author: RamaKrishnamoorthy
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 6a858135d377b30d6e8885ae18b2dc50da11813b
ms.sourcegitcommit: a202bf67c3c2c054e2a47cb7b3145cb7c0ee635e
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/25/2021
ms.locfileid: "5941040"
---
# <a name="company-concept-in-dataverse"></a>แนวคิดของบริษัทใน Dataverse

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


ใน Finance and Operations แนวคิดของ *บริษัท* เป็นทั้งโครงสร้างทางกฎหมายและการสร้างธุรกิจ นอกจากนี้ ยังเป็นขอบเขตความปลอดภัยและการมองเห็นสำหรับข้อมูล ผู้ใช้มักจะทำงานในบริบทของบริษัทเดียว และข้อมูลส่วนใหญ่จะถูกแบ่งโดยบริษัท

Dataverse ไม่มีแนวคิดที่เทียบเท่ากัน แนวคิดที่ใกล้เคียงที่สุดคือ *หน่วยธุรกิจ* ซึ่งส่วนใหญ่แล้วเป็นขอบเขตความปลอดภัยและการมองเห็นสำหรับข้อมูลผู้ใช้ แนวคิดนี้ไม่มีผลกระทบทางกฎหมายหรือทางธุรกิจเดียวกันกับแนวคิดของบริษัท

เนื่องจากหน่วยธุรกิจและบริษัทไม่มีแนวคิดที่เทียบเท่ากัน คุณจึงไม่สามารถบังคับการแม็ปแบบหนึ่งต่อหนึ่ง (1:1) ระหว่างรายการเหล่านั้น เพื่อวัตถุประสงค์ของการรวม Dataverse อย่างไรก็ตาม เนื่องจากโดยค่าเริ่มต้น ผู้ใช้ต้องสามารถดูแถวเดียวกันได้ในแอปพลิเคชันและ Dataverse Microsoft ได้แนะนำตารางใหม่ใน Dataverse ที่มีชื่อว่า cdm\_Company ตารางนี้เทียบเท่ากับตารางของบริษัทในแอปพลิเคชัน เพื่อช่วยรับประกันว่าความสามารถในการมองเห็นของแถวเทียบเท่ากับแอปพลิเคชั่นและ Dataverse แบบสำเร็จรูป เราขอแนะนำขั้นตอนต่อไปนี้สำหรับข้อมูลใน Dataverse:

+ สำหรับแถวของบริษัท Finance and Operations แต่ละแถวที่เปิดใช้งานสำหรับการรวมแบบสองทิศทาง จะมีการสร้างแถว cdm\_Company ที่เกี่ยวข้อง
+ เมื่อมีการสร้างแถว cdm\_Company และมีการเปิดใช้งานสำหรับการรวมแบบสองทิศทาง จะมีการสร้างหน่วยธุรกิจเริ่มต้นที่มีชื่อเดียวกัน แม้ว่าทีมงานเริ่มต้นจะถูกสร้างขึ้นโดยอัตโนมัติสำหรับหน่วยธุรกิจนั้น แต่ไม่มีการใช้หน่วยธุรกิจ
+ มีการสร้างทีมเจ้าของที่แยกต่างหากที่มีชื่อเดียวกัน นอกจากนี้ ยังมีการเชื่อมโยงกับหน่วยธุรกิจ
+ โดยค่าเริ่มต้น เจ้าของของแถวใดๆ ที่สร้างขึ้นและมีการรวมแบบสองทิศทางไปยัง Dataverse จะถูกตั้งค่าเป็นทีมงาน "เจ้าของ DW" ที่เชื่อมโยงกับหน่วยธุรกิจที่เกี่ยวข้อง

ภาพประกอบต่อไปนี้แสดงตัวอย่างของการตั้งค่าข้อมูลนี้ใน Dataverse

![การตั้งค่าข้อมูลใน Dataverse](media/dual-write-company-1.png)

เนื่องจากการตั้งค่าคอนฟิกนี้ แถวใด ๆ ที่เกี่ยวข้องกับบริษัท USMF จะเป็นเจ้าของโดยทีมงานที่เชื่อมโยงกับหน่วยธุรกิจ USMF ใน Dataverse ดังนั้น ผู้ใช้ใดๆ ที่มีการเข้าถึงหน่วยธุรกิจนั้นผ่านทางบทบาทความปลอดภัยที่ถูกตั้งค่าเป็นความสามารถในการมองเห็นระดับหน่วยธุรกิจ สามารถดูแถวเหล่านั้นได้ในขณะนี้ ตัวอย่างต่อไปนี้แสดงวิธีการที่สามารถใช้ทีมงานเพื่อให้การเข้าถึงที่ถูกต้องแก่แถวเหล่านั้น

+ บทบาท "ผู้จัดการฝ่ายขาย" ถูกกำหนดให้กับสมาชิกของทีมงาน "ฝ่ายขาย USMF"
+ ผู้ใช้ที่มีบทบาท "ผู้จัดการฝ่ายขาย" สามารถเข้าถึงแถวบัญชีใดๆ ที่เป็นสมาชิกของหน่วยธุรกิจเดียวกันที่พวกเขาเป็นสมาชิก
+ ทีมงาน "การขาย USMF" เชื่อมโยงกับหน่วยธุรกิจ USMF ที่กล่าวถึงก่อนหน้านี้
+ ดังนั้น สมาชิกของทีมงาน "ฝ่ายขาย USMF" สามารถดูบัญชีใดๆ ที่เป็นเจ้าของโดยผู้ใช้ "USMF DW" ซึ่งจะมาจากตารางบริษัท USMF ใน Finance and Operations

![วิธีการที่จะสามารถใช้ทีมได้](media/dual-write-company-2.png)

เมื่อภาพประกอบก่อนหน้านี้แสดงขึ้น การแม็ป 1:1 นี้ระหว่างหน่วยธุรกิจ บริษัท และทีม เป็นเพียงจุดเริ่มต้น ในตัวอย่างนี้ จะมีการสร้างหน่วยธุรกิจ "ยุโรป" ใหม่ด้วยตนเองใน Dataverse เป็นรายการหลักสำหรับทั้ง DEMF และ ESMF หน่วยธุรกิจรากใหม่นี้ไม่เกี่ยวข้องกับการเขียนแบบคู่ อย่างไรก็ตาม คุณสามารถใช้เพื่อให้สมาชิกของทีมงาน "การขาย EUR" มีการเข้าถึงข้อมูลบัญชีทั้งใน DEMF และ ESMF โดยการตั้งค่าการแสดงผลข้อมูลเป็น **BU หลัก/รอง** ในบทบาทความปลอดภัยที่เกี่ยวข้อง

หัวข้อสุดท้ายเพื่อหารือเกี่ยวกับวิธีการรวมแบบสองทิศทาง จะกำหนดทีมงานของเจ้าของที่ควรกำหนดแถวให้ ลักษณะการทำงานนี้จะถูกควบคุมโดยคอลัมน์ **ทีมงานที่เป็นเจ้าของเริ่มต้น** บนแถว cdm\_Company เมื่อมีการเปิดใช้งานแถว dm\_Company สำหรับการรวมแบบสองทิศทาง ปลั๊กอินจะสร้างหน่วยธุรกิจและทีมงานที่เป็นเจ้าของที่เกี่ยวข้อง (ถ้าไม่ได้มีอยู่แล้ว) และตั้งค่าคอลัมน์ **ทีมงานที่เป็นเจ้าของเริ่มต้น** ผู้ดูแลระบบสามาเปลี่ยนคอลัมน์นี้เป็นค่าอื่นได้ อย่างไรก็ตาม ผู้ดูแลระบบไม่สามารถล้างคอลัมน์ได้ ตราบใดที่ตารางถูกเปิดใช้งานสำหรับการรวมแบบสองทิศทาง

> [!div class="mx-imgBorder"]
![คอลัมน์ทีมที่เป็นเจ้าของเริ่มต้น](media/dual-write-default-owning-team.jpg)

## <a name="company-striping-and-bootstrapping"></a>การแบ่งและการระดมทุนของบริษัท

การรวม Dataverse นำพาริตี้ของบริษัทมาโดยใช้ตัวระบุบริษัทเพื่อแบ่งข้อมูล เมื่อภาพประกอบต่อไปนี้แสดงขึ้น ตารางเฉพาะบริษัททั้งหมดจะถูกขยายเพื่อให้มีความสัมพันธ์แบบกลุ่มต่อหนึ่ง (N:1) กับตาราง cdm\_Company

> [!div class="mx-imgBorder"]
![ความสัมพันธ์แบบ N:1 ระหว่างตารางเฉพาะบริษัทและตาราง cdm_Company](media/dual-write-bootstrapping.png)

+ สำหรับแถว หลังจากที่มีการเพิ่มและบันทึกบริษัท ค่าจะกลายเป็นแบบอ่านอย่างเดียว ดังนั้น ผู้ใช้ควรตรวจสอบให้แน่ใจว่าได้เลือกบริษัทที่ถูกต้อง
+ เฉพาะแถวที่มีข้อมูลของบริษัทเท่านั้นที่มีสิทธิ์ในการรวมแบบสองทิศทางระหว่างแอปพลิเคชันและ Dataverse
+ สำหรับข้อมูล Dataverse ที่มีอยู่ ประสบการณ์ระดมทุนที่นำโดยผู้ดูแลระบบจะพร้อมใช้งานเร็วๆ นี้


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a>เติมข้อมูลชื่อบริษัทอัตโนมัติในแอปการมีส่วนร่วมของลูกค้า

การเติมข้อมูลชื่อบริษัทอัตโนมัติในแอปการมีส่วนร่วมของลูกค้ามีหลายวิธี

+ ถ้าคุณเป็นผู้ดูแลระบบ คุณสามารถตั้งค่าบริษัทเริ่มต้นด้วยการไปยัง **การตั้งค่าขั้นสูง > ระบบ > ความปลอดภัย > ผู้ใช้** เปิดแบบฟอร์ม **ผู้ใช้** และในส่วน **ข้อมูลองค์กร** ให้กำหนดค่า **บริษัทเป็นค่าเริ่มต้นในแบบฟอร์ม**

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="ตั้งค่าบริษัทเริ่มต้นในส่วนข้อมูลองค์กร":::

+ ถ้าคุณมีสิทธิ์ **เขียน** ในตาราง **SystemUser** สำหรับระดับของ **หน่วยธุรกิจ** คุณสามารถเปลี่ยนบริษัทเริ่มต้นในฟอร์มใดๆ ได้โดยการเลือกบริษัทจากเมนูแบบหล่นลงของ **บริษัท**

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="การเปลี่ยนชื่อบริษัทในบัญชีใหม่":::

+ หากคุณมีการเข้าถึง **การเขียน** ไปยังข้อมูลในบริษัทมากกว่าหนึ่งแห่ง คุณสามารถเปลี่ยนบริษัทเริ่มต้นได้ด้วยการเลือกแถวที่เป็นของบริษัทอื่น

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="การเลือกแถวจะเปลี่ยนบริษัทเริ่มต้น":::

+ หากคุณเป็นผู้ตั้งค่าคอนฟิกระบบหรือผู้ดูแลระบบ และคุณต้องการเติมข้อมูลบริษัทอัตโนมัติในแบบฟอร์มที่กำหนดเอง คุณก็สามารถใช้ [เหตุการณ์แบบฟอร์ม](/powerapps/developer/model-driven-apps/clientapi/events-forms-grids) เพิ่มการอ้างอิง JavaScript ไปยัง **msdyn_/DefaultCompany.js** และใช้เหตุการณ์ต่อไปนี้ คุณสามารถใช้แบบฟอร์มสำเร็จรูปใดๆ ก็ได้ ตัวอย่างเช่น แบบฟอร์ม **บัญชี**

    + เหตุการณ์ **OnLoad** สำหรับฟอร์ม: ตั้งค่าคอลัมน์ **defaultCompany**
    + เหตุการณ์ **OnChange** สำหรับคอลัมน์ **บริษัท**: ตั้งค่าคอลัมน์ **updateDefaultCompany**

## <a name="apply-filtering-based-on-the-company-context"></a>ใช้การกรองตามบริบทของบริษัท

เมื่อต้องการใช้การกรองตามบริบทของบริษัทในฟอร์มที่กำหนดเองของคุณ หรือในคอลัมน์การค้นหาแบบกำหนดเองที่เพิ่มเข้าในฟอร์มมาตรฐาน ให้เปิดฟอร์มและใช้ส่วน **การกรองเรกคอร์ดที่เกี่ยวข้อง** เพื่อใช้ตัวกรองบริษัท คุณต้องตั้งค่านี้สำหรับคอลัมน์การค้นหาแต่ละคอลัมน์ที่จำเป็นต้องมีการกรองตามบริษัทพื้นฐานในแถวที่กำหนด การตั้งค่าดังกล่าวแสดงสำหรับ **บัญชี** ในภาพประกอบต่อไปนี้

:::image type="content" source="media/apply-company-context.png" alt-text="ใช้บริบทของบริษัท":::



[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]