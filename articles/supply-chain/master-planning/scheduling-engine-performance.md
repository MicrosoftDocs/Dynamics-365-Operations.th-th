---
title: ปรับปรุงประสิทธิภาพของกลไกการจัดกำหนดการ
description: หัวข้อนี้จะให้ข้อมูลเกี่ยวกับกลไกการจัดกำหนดการและวิธีการปรับปรุงประสิทธิภาพการทำงาน
author: ChristianRytt
manager: tfehr
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: kamaybac
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: 1c1b940754021956998fe27ba16020d4b16aedf1
ms.sourcegitcommit: 49f3011b8a6d8cdd038e153d8cb3cf773be25ae4
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/16/2020
ms.locfileid: "4015078"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="b84ba-103">ปรับปรุงประสิทธิภาพของกลไกการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="b84ba-104">กลไกการจัดกำหนดการทรัพยากรจะใช้เมื่อจัดกำหนดการกระบวนการผลิตสำหรับใบสั่งผลิตที่วางแผนไว้และที่นำออกใช้</span><span class="sxs-lookup"><span data-stu-id="b84ba-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="b84ba-105">กลไกจัดการถูกนำออกใช้ในครั้งแรกโดยเป็นส่วนหนึ่งของ Dynamics AX 2012 และผ่านการปรับปรุงหลายครั้งตั้งแต่การนำออกใช้</span><span class="sxs-lookup"><span data-stu-id="b84ba-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="b84ba-106">[ปัญหาเกี่ยวกับการจัดกำหนดการร้านค้าของงาน](https://en.wikipedia.org/wiki/Job_shop_scheduling) เป็นปัญหาแบบรวม ที่ซับซ้อนมาก ซึ่งเวลาที่ใช้ในการแก้ไขปัญหามีการเติบโตตามจำนวนตัวแปรการตัดสินใจแบบเท่าทวีคูณ</span><span class="sxs-lookup"><span data-stu-id="b84ba-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="b84ba-107">บ่อยครั้งที่ลูกค้าตั้งค่ากระบวนการผลิตและข้อมูลที่เกี่ยวข้องในลักษณะที่ส่งผลให้เกิดปัญหาการจัดกำหนดการที่ไม่สามารถแก้ไขได้ในเวลาที่เหมาะสม แม้กระทั่งบนฮาร์ดแวร์สมัยใหม่ที่สุด</span><span class="sxs-lookup"><span data-stu-id="b84ba-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="b84ba-108">หัวข้อนี้จะช่วยให้คุณเข้าใจกลไกการจัดกำหนดการและวิธีการตั้งค่าเฉพาะมีผลกระทบต่อประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="b84ba-109">เมื่อมีการปรับปรุงประสิทธิภาพการทำงานของการจัดกำหนดการ คำแนะนำทั่วไปจะแนะนำให้ลดความซับซ้อนของปัญหาที่กลไกจัดการต้องการแก้ไข</span><span class="sxs-lookup"><span data-stu-id="b84ba-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="b84ba-110">ปัจจัยหลักบางประการที่อาจส่งผลกระทบต่อประสิทธิภาพการทำงานรวมถึง:</span><span class="sxs-lookup"><span data-stu-id="b84ba-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="b84ba-111">กระบวนการผลิตที่มีการดำเนินงานหลายอย่าง</span><span class="sxs-lookup"><span data-stu-id="b84ba-111">Routes with many operations</span></span>
- <span data-ttu-id="b84ba-112">กระบวนการผลิตที่มีการดำเนินงานที่เกิดขึ้นควบคู่กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-112">Routes with parallel operations</span></span>
- <span data-ttu-id="b84ba-113">การดำเนินงานที่มีปริมาณทรัพยากรสูงกว่าหนึ่งรายการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="b84ba-114">การดำเนินงานที่มีทรัพยากรที่ใช้ได้หลายอย่าง</span><span class="sxs-lookup"><span data-stu-id="b84ba-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="b84ba-115">การใช้ฮาร์ดลิงค์</span><span class="sxs-lookup"><span data-stu-id="b84ba-115">Use of hard links</span></span>
- <span data-ttu-id="b84ba-116">การใช้กำลังการผลิตที่มีจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-116">Use of finite capacity</span></span>
- <span data-ttu-id="b84ba-117">จำนวนของปฏิทินที่แตกต่างกันที่ใช้</span><span class="sxs-lookup"><span data-stu-id="b84ba-117">The number of different calendars used</span></span>
- <span data-ttu-id="b84ba-118">จำนวนช่องเวลาการทำงานสำหรับแต่ละวันในปฏิทิน</span><span class="sxs-lookup"><span data-stu-id="b84ba-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="b84ba-119">ระยะเวลารวมของกระบวนการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-119">Total duration of the route</span></span>
- <span data-ttu-id="b84ba-120">การรันกลไกการจัดกำหนดการหลายชุดควบคู่กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="b84ba-121">ภาพรวมของโฟลว์การจัดกำหนดการพื้นฐาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="b84ba-122">เมื่อต้องการทำความเข้าใจวิธีการตั้งค่าที่กำหนดอาจส่งผลกระทบต่อประสิทธิภาพการทำงาน ควรทำความเข้าใจบางอย่างเกี่ยวกับโฟลว์ของกระบวนการทำงาน ทั้งภายในกลไกจัดการและในรหัส X++ ที่อยู่รอบๆ</span><span class="sxs-lookup"><span data-stu-id="b84ba-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="b84ba-123">กระบวนการพื้นฐานของการจัดกำหนดการใบสั่งประกอบด้วยขั้นตอนหลักสามขั้นตอน:</span><span class="sxs-lookup"><span data-stu-id="b84ba-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="b84ba-124">**การโหลดข้อมูล** – ที่นี่ แบบจำลองข้อมูล X++ จะกลายเป็นแบบจำลองข้อมูลภายในของกลไกจัดการในรูปแบบของงานและข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="b84ba-125">**การจัดกำหนดการ** – นี่คือต้นทางหลักสำหรับการจัดกำหนดการที่ประมวลผลแบบจำลองและข้อจำกัดที่กำหนด และสร้างผลลัพธ์</span><span class="sxs-lookup"><span data-stu-id="b84ba-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="b84ba-126">ในระหว่างกระบวนการนี้ กลไกจัดการจะร้องขอข้อมูลเวลาการทำงานและการจองกำลังการผลิตที่มีอยู่จาก X++ ตามความจำเป็น</span><span class="sxs-lookup"><span data-stu-id="b84ba-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="b84ba-127">**บันทึกข้อมูล** – ผลลัพธ์ของกลไกจัดการในฟอร์มของช่องการจองกำลังการผลิตของงานจะถูกประมวลผลโดยรหัส X++ เพื่อบันทึกการจองกำลังการผลิต และอัปเดตเวลาเริ่มต้นและเวลาสิ้นสุดของงาน/การดำเนินงาน/ใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="b84ba-128">โหลดข้อมูลลงในกลไกจัดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-128">Load data into the engine</span></span>

<span data-ttu-id="b84ba-129">กลไกการจัดกำหนดการมีรูปแบบข้อมูลที่เป็นนามธรรมมากกว่าฐานข้อมูล Supply Chain Management เนื่องจากได้รับการสร้างขึ้นเป็นกลไกจัดการทั่วไปที่สามารถจัดการกับแหล่งข้อมูลที่แตกต่างกันได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="b84ba-130">แนวคิดของกระบวนการผลิต การดำเนินงานรอง และเวลาที่ใช้ในการผลิตต้องเป็น "แปล" เป็นแบบจำลองงานทั่วไปและข้อจำกัดที่กลไกจัดการแสดง</span><span class="sxs-lookup"><span data-stu-id="b84ba-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="b84ba-131">ตรรกะสำหรับการสร้างแบบจำลองมีจำนวนตรรกะทางธุรกิจที่สำคัญและแตกต่างกันไปขึ้นอยู่กับข้อมูลต้นทาง</span><span class="sxs-lookup"><span data-stu-id="b84ba-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="b84ba-132">คลาส X++ ที่รับผิดชอบคือ `WrkCtrScheduler` และมีคลาสที่สืบทอดมาสำหรับใบสั่งผลิตที่วางแผน ใบสั่งผลิตที่นำออกใช้ และการคาดการณ์โครงการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="b84ba-133">ตัวอย่างเช่น พิจารณากระบวนการผลิตที่แสดงอยู่ในตารางและรูปภาพต่อไปนี้ ซึ่งดูเหมือนง่าย</span><span class="sxs-lookup"><span data-stu-id="b84ba-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="b84ba-134">การดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-134">Oper.</span></span> <span data-ttu-id="b84ba-135">ลำดับที่</span><span class="sxs-lookup"><span data-stu-id="b84ba-135">No.</span></span> | <span data-ttu-id="b84ba-136">ลำดับความสำคัญ</span><span class="sxs-lookup"><span data-stu-id="b84ba-136">Priority</span></span> | <span data-ttu-id="b84ba-137">เวลาเซ็ตอัพ</span><span class="sxs-lookup"><span data-stu-id="b84ba-137">Setup time</span></span> | <span data-ttu-id="b84ba-138">เวลาที่ใช้ในการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-138">Run time</span></span> | <span data-ttu-id="b84ba-139">เวลาในการรอหลังจาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-139">Queue time after</span></span> | <span data-ttu-id="b84ba-140">ปริมาณทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-140">Quantity of resources</span></span> | <span data-ttu-id="b84ba-141">ถัดไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="b84ba-142">10</span><span class="sxs-lookup"><span data-stu-id="b84ba-142">10</span></span> | <span data-ttu-id="b84ba-143">หลัก</span><span class="sxs-lookup"><span data-stu-id="b84ba-143">Primary</span></span> | <span data-ttu-id="b84ba-144">1.00</span><span class="sxs-lookup"><span data-stu-id="b84ba-144">1.00</span></span> | <span data-ttu-id="b84ba-145">2.00</span><span class="sxs-lookup"><span data-stu-id="b84ba-145">2.00</span></span> | | <span data-ttu-id="b84ba-146">1</span><span class="sxs-lookup"><span data-stu-id="b84ba-146">1</span></span> | <span data-ttu-id="b84ba-147">20</span><span class="sxs-lookup"><span data-stu-id="b84ba-147">20</span></span> |
| <span data-ttu-id="b84ba-148">10</span><span class="sxs-lookup"><span data-stu-id="b84ba-148">10</span></span> | <span data-ttu-id="b84ba-149">รองอันดับที่&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="b84ba-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="b84ba-150">1</span><span class="sxs-lookup"><span data-stu-id="b84ba-150">1</span></span> | <span data-ttu-id="b84ba-151">20</span><span class="sxs-lookup"><span data-stu-id="b84ba-151">20</span></span> |
| <span data-ttu-id="b84ba-152">20</span><span class="sxs-lookup"><span data-stu-id="b84ba-152">20</span></span> | <span data-ttu-id="b84ba-153">หลัก</span><span class="sxs-lookup"><span data-stu-id="b84ba-153">Primary</span></span> | | <span data-ttu-id="b84ba-154">3.00</span><span class="sxs-lookup"><span data-stu-id="b84ba-154">3.00</span></span> | <span data-ttu-id="b84ba-155">1.00</span><span class="sxs-lookup"><span data-stu-id="b84ba-155">1.00</span></span> | <span data-ttu-id="b84ba-156">3</span><span class="sxs-lookup"><span data-stu-id="b84ba-156">3</span></span> | <span data-ttu-id="b84ba-157">0</span><span class="sxs-lookup"><span data-stu-id="b84ba-157">0</span></span> |

<span data-ttu-id="b84ba-158">![ตัวอย่างไดอะแกรม rout](media/scheduling-engine-route.png "ตัวอย่างไดอะแกรมกระบวนการผลิต")</span><span class="sxs-lookup"><span data-stu-id="b84ba-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="b84ba-159">เมื่อส่งไปยังกลไกจัดการ จะถูกแบ่งออกเป็นแปดงาน ดังที่แสดงในภาพประกอบต่อไปนี้ (เลือกรูปเพื่อขยาย)</span><span class="sxs-lookup"><span data-stu-id="b84ba-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="b84ba-160">[![การจัดกำหนดการงานกลไกจัดการ](media/scheduling-engine-jobs.png "การจัดกำหนดการงานกลไกจัดการ")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="b84ba-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="b84ba-161">ลิงค์มาตรฐานระหว่างงานสองอย่างคือ `FinishStart` หมายความว่าเวลาสิ้นสุดของงานหนึ่งต้องอยู่ก่อนเวลาเริ่มต้นของงานอื่น</span><span class="sxs-lookup"><span data-stu-id="b84ba-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="b84ba-162">เนื่องจากการตั้งค่าต้องได้รับการดำเนินการโดยทรัพยากรเดียวกันที่จะดำเนินการในภายหลัง จึงมีข้อจำกัด `OnSameResource` ระหว่างการตั้งค่า</span><span class="sxs-lookup"><span data-stu-id="b84ba-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="b84ba-163">ระหว่างงานสำหรับการดำเนินงานหลักและรองสำหรับ10 มีลิงค์ `StartStart` และ `FinishFinish` ซึ่งหมายความว่างานต้องทั้งเริ่มต้นและสิ้นสุดในเวลาเดียวกัน และมีข้อจำกัด `NotOnSameResource` ซึ่งจะป้องกันไม่ให้มีทรัพยากรเดียวกันสำหรับการดำเนินงานหลักและรอง</span><span class="sxs-lookup"><span data-stu-id="b84ba-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="b84ba-164">สำหรับการดำเนินงาน 20 ที่มีการตั้งค่าปริมาณของทรัพยากรเป็น3 งานในกระบวนการถูกแบ่งเป็นงานที่แตกต่างกันสามงาน ที่งานทั้งหมดต้องรันในเวลาเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="b84ba-165">ในกรณีนี้ กลุ่มของกระบวนการผลิตได้รับการตั้งค่าให้ไม่จองกำลังการผลิตสำหรับคิวหลังจากนั้น ซึ่งเป็นเหตุให้มีเพียงงานเดียวสำหรับคิวหลังจากนั้นเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="b84ba-166">กลไกการจัดกำหนดการเข้าใจแนวคิดของงานเท่านั้น และไม่มีแนวคิดการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="b84ba-167">ซึ่งหมายความว่าเมื่อทำการจัดตารางการผลิตระดับการดำเนินงาน การดำเนินงานจะถูกแบ่งเป็นงาน แม้ว่าจะไม่ถูกรักษาไว้ในฐานข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b84ba-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="b84ba-168">สำหรับแต่ละงานเราจะกำหนดความต้องการกำลังการผลิตตามความต้องการของงาน (จำนวนวินาทีที่จำเป็น)</span><span class="sxs-lookup"><span data-stu-id="b84ba-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="b84ba-169">ทั้งนี้ขึ้นอยู่กับวิธีการกำหนดคความต้องการทรัพยากร เราอาจ สำหรับแต่ละงาน ส่งรายการของทรัพยากรที่เกี่ยวข้องทั้งหมดที่มีผลบังคับใช้ ที่งานอาจรันและความต้องการกำลังการผลิตสำหรับทรัพยากรเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="b84ba-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="b84ba-170">ถึงแม้ว่าจะมีการส่งรายการทรัพยากรที่เกี่ยวข้องในเมื่อสร้างแบบจำลอง กลไกจัดการจะยังคงต้องตรวจสอบให้แน่ใจว่าการกำหนดทรัพยากรมีผลบังคับใช้จริงสำหรับระยะเวลาของงานทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="b84ba-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="b84ba-171">การจัดกำหนดการกลไกจัดการภายใน</span><span class="sxs-lookup"><span data-stu-id="b84ba-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="b84ba-172">การจัดกำหนดการกลไกจัดการอินเทอร์เฟส</span><span class="sxs-lookup"><span data-stu-id="b84ba-172">Scheduling engine interface</span></span>

<span data-ttu-id="b84ba-173">เพื่อให้ได้แนวคิดเกี่ยวกับวิธีการทำงานของกลไกจัดการภายใน ดีที่สุดที่จะดูฟังก์ชันการทำงานที่แสดงภายนอก</span><span class="sxs-lookup"><span data-stu-id="b84ba-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="b84ba-174">ใน X++ อินเทอร์เฟสหลักคือ `WrkCtrSchedulerEngineInterface`</span><span class="sxs-lookup"><span data-stu-id="b84ba-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="b84ba-175">มีวิธีการที่อธิบายไว้ในส่วนย่อยต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="b84ba-176">กลไกจัดการทั่วไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-176">General engine</span></span>

| <span data-ttu-id="b84ba-177">**วิธีการ**</span><span class="sxs-lookup"><span data-stu-id="b84ba-177">**Method**</span></span> | <span data-ttu-id="b84ba-178">**วัตถุประสงค์**</span><span class="sxs-lookup"><span data-stu-id="b84ba-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="b84ba-179">จัดกำหนดการงานที่โหลดทั้งหมดและส่งคืนรหัสข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="b84ba-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="b84ba-180">เรียกดูผลลัพธ์ของการจัดกำหนดการและงานที่เกิดข้อผิดพลาดแรกสำหรับลำดับที่ระบุโดยงานที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="b84ba-181">ตรวจสอบความถูกต้องของการจองกำลังการผลิตสำหรับงานทั้งหมดที่จัดเก็บโดยกลไกจัดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="b84ba-182">ส่งการลงเวลาไปยังกลไกจัดการที่กำหนดไว้สำหรับการจองกำลังการผลิตใหม่ทั้งหมด สำหรับงานที่จัดกำหนดการไว้ในแคชของกลไกจัดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="b84ba-183">เพิ่มคำนำหน้าคุณสมบัติให้ชุดของคุณสมบัติที่ใช้ เมื่อมีการรวมกำลังการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="b84ba-184">เพิ่มทรัพยากรลงในกลุ่มทรัพยากรกลไกการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="b84ba-185">เพิ่มกลุ่มทรัพยากรลงในกลุ่มของกลุ่มทรัพยากรกลไกการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="b84ba-186">เพิ่มทรัพยากรเป็นสมาชิกของกลุ่มทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="b84ba-187">เพิ่มเป้าหมายการเพิ่มประสิทธิภาพการจัดกำหนดการ (ระยะเวลาหรือระดับความสำคัญ)</span><span class="sxs-lookup"><span data-stu-id="b84ba-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="b84ba-188">งานแต่ละงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-188">Individual jobs</span></span>

| <span data-ttu-id="b84ba-189">**วิธีการ**</span><span class="sxs-lookup"><span data-stu-id="b84ba-189">**Method**</span></span> | <span data-ttu-id="b84ba-190">**วัตถุประสงค์**</span><span class="sxs-lookup"><span data-stu-id="b84ba-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="b84ba-191">เพิ่มเรกคอร์ดข้อมูลงานที่แจ้งให้กลไกจัดการเกี่ยวกับงานที่ควรมีการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="b84ba-192">เพิ่มข้อจำกัดที่งานควรสิ้นสุดในวันที่และเวลาที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="b84ba-193">เพิ่มข้อจำกัดที่งานควรเริ่มในวันที่และเวลาที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="b84ba-194">กำหนดข้อจำกัดที่งานอาจครอบคลุมถึงจำนวนวันที่สูงสุดที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="b84ba-195">เพิ่มข้อจำกัดที่งานต้องจัดกำหนดการในทรัพยากรที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="b84ba-196">เพิ่มระดับความสำคัญของการผูกงานสำหรับการจับคู่ (งาน ระดับข้อจำกัด)</span><span class="sxs-lookup"><span data-stu-id="b84ba-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="b84ba-197">ค่าระดับความสำคัญสูงหมายความว่าตัวแปรงานจะถูกผูกไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="b84ba-198">งานจะได้รับการประมวลผลก่อนงานที่มีค่าระดับความสำคัญต่ำกว่าในลำดับเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="b84ba-199">เพิ่มข้อมูลปริมาณการใช้กำลังการผลิตสำหรับงาน (เช่น รันไทม์ของงานที่จำเป็น) โดยไม่ขึ้นอยู่กับทรัพยากรที่จะรันงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="b84ba-200">เพิ่มทรัพยากรลงในชุดของทรัพยากรที่อาจจะใช้ในการทำงาน และระบุกำลังการผลิตที่จำเป็นเมื่อรันทรัพยากรนั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="b84ba-201">เพิ่มข้อมูลเป้าหมายของงานสำหรับระดับข้อจำกัดที่ระบุ (เวลาสิ้นสุดแรกสุด หรือเวลาเริ่มต้นล่าสุด)</span><span class="sxs-lookup"><span data-stu-id="b84ba-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="b84ba-202">เพิ่มระดับความสำคัญที่จะใช้เมื่อมีการจัดกำหนดการการผลิตระดับงานในทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="b84ba-203">ระบุเวลาของงานที่ขึ้นอยู่กับทรัพยากรที่จะจัดกำหนดการงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="b84ba-204">ระบุเวลาของงานที่ไม่ขึ้นอยู่กับทรัพยากรที่จะจัดกำหนดการงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="b84ba-205">ทำเครื่องหมายงานสำหรับการจัดกำหนดการในระดับกลุ่มทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="b84ba-206">ตั้งค่าว่าอนุญาตให้ preemption สำหรับงานในทรัพยากร (ถ้ากลไกจัดการสามารถจัดกำหนดการงานในช่องกำลังการผลิตที่ไม่ติดกัน)</span><span class="sxs-lookup"><span data-stu-id="b84ba-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="b84ba-207">ตั้งค่าจำนวนทรัพยากรที่จำเป็นสำหรับการจัดกำหนดการงาน (สำหรับการจัดตารางการผลิตระดับการดำเนินงานเท่านั้น)</span><span class="sxs-lookup"><span data-stu-id="b84ba-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="b84ba-208">ข้อจำกัดระหว่างงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-208">Constraints between jobs</span></span>

| <span data-ttu-id="b84ba-209">**วิธีการ**</span><span class="sxs-lookup"><span data-stu-id="b84ba-209">**Method**</span></span> | <span data-ttu-id="b84ba-210">**วัตถุประสงค์**</span><span class="sxs-lookup"><span data-stu-id="b84ba-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="b84ba-211">เพิ่มลิงค์ (เช่น การเสร็จสิ้น\>การเริ่มต้น) ระหว่างงานสองงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="b84ba-212">กำหนดข้อจำกัดของงานที่ไม่สามารถสิ้นสุดก่อนการสิ้นสุดของงานอื่นบวกเวลาหน่วง</span><span class="sxs-lookup"><span data-stu-id="b84ba-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="b84ba-213">เพิ่มข้อจำกัดว่าช่องกำลังการผลิตที่จองไว้สำหรับงานต้องอยู่บนเวลาการทำงานที่ตัดกันสำหรับสองทรัพยากรที่ใช้โดยงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="b84ba-214">เพิ่มข้อจำกัดที่กำหนดวิธีการเรียงลำดับงาน เมื่อปริมาณของสินค้าที่กำหนดสามารถย้ายไปมาระหว่างสองทรัพยากร ในขณะที่ทรัพยากรแรกยังคงประมวลผลไม่เสร็จ เพื่อให้ทรัพยากรที่สองสามารถเริ่มต้นการประมวลผลได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="b84ba-215">เพิ่มข้อจำกัดที่สองงานไม่ควรมีการจัดกำหนดการในทรัพยากรเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="b84ba-216">เพิ่มข้อจำกัดที่สองงานต้องใช้การจัดกำหนดการในทรัพยากรเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="b84ba-217">เพิ่มข้อจำกัดที่งานต้องเสร็จสิ้นโดยมีการจองกำลังการผลิตสำหรับช่องเวลาเดียวกันกับงานหลัก</span><span class="sxs-lookup"><span data-stu-id="b84ba-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="b84ba-218">เพิ่มข้อมูลเกี่ยวกับงานที่เป็นงานหลักในชุดงานที่ทำควบคู่กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="b84ba-219">โปรแกรมแก้ปัญหา</span><span class="sxs-lookup"><span data-stu-id="b84ba-219">Solver</span></span>

<span data-ttu-id="b84ba-220">ตัวกลไกจัดการเป็นโปรแกรมแก้ปัญหาข้อจำกัดเฉพาะที่มีการเพิ่มศึกษาสำนึกที่กำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="b84ba-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="b84ba-221">โปรแกรมแก้ปัญหาขึ้นอยู่กับองค์ประกอบหลักสองประการ คือ ตัวแปรและข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="b84ba-222">ตัวแปร</span><span class="sxs-lookup"><span data-stu-id="b84ba-222">Variable</span></span>

<span data-ttu-id="b84ba-223">ตัวแปรแสดงถึงโดเมนของค่าที่เป็นไปได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="b84ba-224">กลไกการจัดกำหนดการมีตัวแปรอยู่สองชนิด:</span><span class="sxs-lookup"><span data-stu-id="b84ba-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="b84ba-225">**ตัวแปรวันที่และเวลา** - มีโดเมนของวันที่และเวลาทั้งหมด และโดเมนสามารถจำกัดโดยการย้ายขอบด้านล่างและด้านบนสำหรับเวลาของตัวแปรที่อยู่ใกล้กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="b84ba-226">**ตัวแปรของทรัพยากร** - มีโดเมนของทรัพยากรที่เกี่ยวข้อง และสามารถจำกัดโดเมนได้โดยการตัดทรัพยากรออกจากรายการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="b84ba-227">ข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-227">Constraint</span></span>

<span data-ttu-id="b84ba-228">ข้อจำกัดทำงานกับตัวแปรโดยการจำกัดโดเมนของตนเอง แต่จะขึ้นอยู่กับตัวแปร เพื่อให้มีการเรียกใช้เมื่อมีการเปลี่ยนแปลงตัวแปร</span><span class="sxs-lookup"><span data-stu-id="b84ba-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="b84ba-229">กระบวนการ "การเผยแพร่ข้อจำกัด" คือ เมื่อข้อจำกัดทำหน้าที่ฟังก์ชันหลัก และรายงานกลับไปยังตรรกะหลักหากประสบความสำเร็จ</span><span class="sxs-lookup"><span data-stu-id="b84ba-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="b84ba-230">ตัวแปรจะถือว่าถูกผูกไว้เมื่อไม่สามารถจำกัดเพิ่มเติมได้ ซึ่งสำหรับตัวแปร วันที่และเวลา หมายความว่ามีขอบด้านบนและด้านล่างเดียวกัน และสำหรับตัวแปร ทรัพยากร ที่มีเพียงทรัพยากรที่เกียวข้องอันเดียวเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="b84ba-231">เมื่อมีการผูกตัวแปรทั้งหมด ระบบจะพบโซลูชัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="b84ba-232">ระดับข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-232">Constraint levels</span></span>

<span data-ttu-id="b84ba-233">เมื่อดำเนินการจัดกำหนดการเป็นส่วนหนึ่งของระยะความครอบคลุมของการวางแผนความต้องการวัสดุ (MRP) ใบสั่งจะมีการจัดกำหนดการย้อนหลังจากวันที่ของความต้องการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="b84ba-234">อย่างไรก็ตาม ถ้าไม่สามารถค้นหาตารางเวลาที่เริ่มต้นในวันนี้หรือหลังจากนี้ และสิ้นสุดก่อนวันที่ความต้องการ ทิศทางการจัดกำหนดการจะเปลี่ยนเป็นไปข้างหน้าจากวันนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="b84ba-235">กฎทางธุรกิจหลักนี้ได้รับการจัดการโดยการจัดระดับข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="b84ba-236">ถ้าไม่พบโซลูชันเมื่อใช้ข้อจำกัดในระดับสูงสุด ข้อจำกัดในระดับดังกล่าวจะถูกทิ้งไปทั้งหมด และระดับที่ต่ำกว่าจะถูกใช้</span><span class="sxs-lookup"><span data-stu-id="b84ba-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="b84ba-237">ใน Praxis หมายความว่าสำหรับการจัดกำหนดการแบบย้อนหลัง แบบจำลองจะมีระดับ1 ที่มีเป้าหมายงานเป็นเวลาเริ่มต้นล่าสุดให้ข้อจำกัดเวลาสิ้นสุดสูงสุด (วันที่ของความต้องการ) และระดับ0 ที่มีเป้าหมายงานเป็นเวลาสิ้นสุดเร็วที่สุด และให้ข้อจำกัดของเวลาเริ่มต้นต่ำสุดเป็นวันนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="b84ba-238">อัลกอริทึม</span><span class="sxs-lookup"><span data-stu-id="b84ba-238">Algorithm</span></span>

<span data-ttu-id="b84ba-239">ขั้นตอนหลักของอัลกอริทึมงกลไกจัดการ ได้แก่:</span><span class="sxs-lookup"><span data-stu-id="b84ba-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="b84ba-240">ค้นหาลำดับ (กลุ่มงาน) ซึ่งสามารถแก้ไขได้ต่างหาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="b84ba-241">ลองค้นหาโซลูชันเริ่มต้นสำหรับลำดับสำหรับระดับข้อจำกัดสูงสุด</span><span class="sxs-lookup"><span data-stu-id="b84ba-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="b84ba-242">เรียงลำดับงานในลำดับตามเป้าหมายและระดับความสำคัญของงาน เพื่อให้พบงานเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="b84ba-243">วนรอบของงานในลำดับต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="b84ba-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="b84ba-244">ค้นหาข้อจำกัดทั้งหมดที่จำเป็นต้องแพร่กระจาย และรันการเผยแพร่</span><span class="sxs-lookup"><span data-stu-id="b84ba-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="b84ba-245">ถ้ามีการผูกตัวแปรทั้งหมดสำหรับงาน ดังนั้นโซลูชันสำหรับงานถูกพบแล้ว</span><span class="sxs-lookup"><span data-stu-id="b84ba-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="b84ba-246">ถ้าตัวแปรตัวใดตัวหนึ่งไม่สามารถผูกได้โดยไม่ละเมิดข้อจำกัด ให้ย้อนกลับการผูกตัวแปร ลองใช้ค่าอื่นในโดเมน (สำหรับตัวแปรของทรัพยากร) และรันการเผยแพร่ข้อจำกัดอีกครั้ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="b84ba-247">ถ้าไม่พบโซลูชันใดๆ ดังนั้นข้อจำกัดทั้งหมดในระดับข้อจำกัดปัจจุบันถูกเอาออกแล้ว ระดับข้อจำกัดลดลง (ถ้ามีระดับต่ำกว่า) และการค้นหาโซลูชันลองดำเนินการใหม่อีกครั้งด้วยชุดข้อจำกัดใหม่</span><span class="sxs-lookup"><span data-stu-id="b84ba-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="b84ba-248">ถ้าพบโซลูชันที่เป็นไปได้ ระยะการเพิ่มประสิทธิภาพจะเริ่ม ซึ่งจะพยายามหาโซลูชันที่ดียิ่งขึ้นจนกว่าจะหมดเวลาการเพิ่มประสิทธิภาพแล้ว หรือชุดทรัพยากรทั้งหมดหมดแล้ว</span><span class="sxs-lookup"><span data-stu-id="b84ba-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="b84ba-249">โปรแกรมแก้ปัญหาข้อจำกัดไม่ทราบข้อกำหนดของอัลกอริทึมการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="b84ba-250">ซึ่งอยู่ในคำนิยามและการรวมกันของข้อจำกัดต่างๆ ที่ "มายากล" เกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="b84ba-251">การกำหนดเวลาทำงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-251">Determining working times</span></span>

<span data-ttu-id="b84ba-252">ข้อจำกัด (ภายใน) ส่วนใหญ่ในกลไกจัดการจะควบคุมเวลาการทำงานและกำลังการผลิตของทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="b84ba-253">อย่างเช่น งานคือการข้ามช่องเวลาการทำงานสำหรับทรัพยากรจากจุดที่กำหนดในทิศทางที่กำหนด และค้นหาช่วงเวลาที่ยาวเพียงพอที่งานที่ต้องการความจุ (เวลา) สามารถบรรจุได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="b84ba-254">เมื่อต้องการทำเช่นนี้ กลไกจัดการจำเป็นต้องทราบเวลาการทำงานของทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="b84ba-255">ตรงกันข้ามกับข้อมูลแบบจำลองหลัก เวลาการทำงานจะถูก *โหลดแบบขี้เกียจ* หมายความว่ามีการโหลดเข้าไปในกลไกจัดการตามความจำเป็น</span><span class="sxs-lookup"><span data-stu-id="b84ba-255">Opposite to the main model data, the working times are *lazy loaded* , meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="b84ba-256">เหตุผลสำหรับวิธีการนี้ คือมีเวลาการทำงานบ่อยครั้งใน Supply Chain Management สำหรับปฏิทินสำหรับรอบระยะเวลายาวมาก และโดยทั่วไปมีปฏิทินจำนวนมาก ดังนั้นข้อมูลจะมีขนาดใหญ่มากให้โหลดล่วงหน้า</span><span class="sxs-lookup"><span data-stu-id="b84ba-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="b84ba-257">ข้อมูลปฏิทินมีการร้องขอโดยกลไกจัดการในกลุ่ม โดยเรียกวิธีการคลาส X++ `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`</span><span class="sxs-lookup"><span data-stu-id="b84ba-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="b84ba-258">คำขอมีไว้สำหรับรหัสปฏิทินที่ระบุในช่วงเวลาที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="b84ba-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="b84ba-259">ทั้งนี้ขึ้นอยู่กับสถานะของแคชในเซิร์ฟเวอร์ใน Supply Chain Management แต่ละคำขอเหล่านี้อาจสิ้นสุดลงในการเรียกฐานข้อมูลต่างๆ ซึ่งใช้เวลานาน (สัมพันธ์กับเวลาการคำนวณแบบบริสุทธิ์)</span><span class="sxs-lookup"><span data-stu-id="b84ba-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="b84ba-260">นอกจากนี้ ถ้าปฏิทินมีข้อกำหนดเวลาการทำงานที่ซับซ้อนมากพร้อมกับช่วงเวลาการทำงานหลายช่วงต่อวัน ซึ่งจะเพิ่มเวลาที่ใช้ในการบรรทุกสินค้า</span><span class="sxs-lookup"><span data-stu-id="b84ba-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="b84ba-261">เมื่อข้อมูลเวลาการทำงานถูกโหลดในกลไกการจัดกำหนดการ การดำเนินการนี้จะถูกเก็บไว้ในแคชของภายในสำหรับปฏิทินที่ระบุ ซึ่งหมายความว่าถ้างานหรือทรัพยากรอื่นๆ ใช้ปฏิทินเดียวกัน จะทำให้การค้นหาครั้งถัดไปสามารถดำเนินการได้อย่างรวดเร็วจากหน่วยความจำ</span><span class="sxs-lookup"><span data-stu-id="b84ba-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="b84ba-262">สาเหตุที่พบโดยทั่วไปของประสิทธิภาพที่แย่ประการหนึ่งคือ ถ้ามีการใช้รหัสปฏิทินแยกต่างหากสำหรับแต่ละทรัพยากร เนื่องจากข้อมูลจะต้องมีการร้องขอสำหรับแต่ละปฏิทิน ถึงแม้ว่าเนื้อหาของปฏิทินอาจเหมือนกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="b84ba-263">กำลังการผลิตมีจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-263">Finite capacity</span></span>

<span data-ttu-id="b84ba-264">เมื่อใช้กำลังการผลิตมีจำกัด ช่องเวลาการทำงานจากปฏิทินจะถูกแบ่ง และลดตามการจองกำลังการผลิตที่มีอยู่</span><span class="sxs-lookup"><span data-stu-id="b84ba-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="b84ba-265">การจองเหล่านี้จะถูกนำมาใช้โดยผ่านคลาส `WrkCtrSchedulingInteropDataProvider` เดียวกันกับปฏิทิน แต่จะใช้วิธีการ `getCapacityReservations`</span><span class="sxs-lookup"><span data-stu-id="b84ba-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="b84ba-266">เมื่อจัดกำหนดการในระหว่างการวางแผนหลัก การจองสำหรับแผนหลักเฉพาะจะมีการพิจารณา และถ้าเปิดใช้งานในหน้า **พารามิเตอร์การวางแผนหลัก** จะมีการรวมการจองสินค้าจากใบสั่งผลิตที่ยืนยันด้วยเช่นกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="b84ba-267">ในทำนองเดียวกัน เมื่อจัดกำหนดการใบสั่งผลิต นอกจากนี้คุณยังสามารถรวมการจองสินค้าจากแผนการใบสั่งที่มีอยู่ได้ด้วย</span><span class="sxs-lookup"><span data-stu-id="b84ba-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="b84ba-268">การใช้กำลังการผลิตจำกัดจะทำให้การจัดกำหนดการทำงานนานขึ้น เนื่องจากสาเหตุหลายประการดังต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="b84ba-269">การดึงข้อมูลกำลังการผลิตจากฐานข้อมูลเป็นการดำเนินงานที่ช้า และการแคชฝั่งฝั่งเซิร์ฟเวอร์ของข้อมูลกำลังการผลิตโดยทั่วไปจะไม่ดีเท่ากับเวลาการทำงาน เนื่องจากไม่ได้ใช้ร่วมกันระหว่างทรัพยากรต่างๆ เหมือนปฏิทินทั่วไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="b84ba-270">จำนวนช่องเวลาการทำงานที่จะดำเนินการเพิ่มขึ้นเนื่องจากการแบ่ง และช่องสำหรับรอบระยะเวลายาวต้องมีการตรวจสอบก่อนที่จะพบโซลูชัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="b84ba-271">หลังจากการจัดกำหนดการเสร็จสมบูรณ์แล้ว ต้องดำเนินการตรวจสอบความขัดแย้งของการจองสินค้า (โปรดดูที่หัวข้อ "การรันการจัดตารางการผลิตระดับ" แบบขนาน "สำหรับรายละเอียด)</span><span class="sxs-lookup"><span data-stu-id="b84ba-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="b84ba-272">การตรวจสอบชุดของทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-272">Examining the resource combinations</span></span>

<span data-ttu-id="b84ba-273">ถ้าลำดับงานมีลิงค์ `FinishStart` มาตรฐานเท่านั้น หมายความว่าฟอร์มจะเป็นกลุ่มอย่างง่ายโดยไม่มีสาขาใดๆ ผลลัพธ์ที่ดีที่สุด (เห็นจากใบสั่งเดียว ไม่ใช่ข้ามใบสั่ง) สามารถทำได้โดยหาทางออกที่ดีที่สุดสำหรับงานแรก แล้วเลื่อนไปหาทางออกที่ดีที่สุดสำหรับงานถัดไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="b84ba-274">วิธีการแก้ปัญหาที่ดีที่สุดสำหรับงานหมายถึงการค้นหาทรัพยากรที่จะได้รับวันที่เริ่มต้นและวันที่สิ้นสุดของงานที่ใกล้เคียงกับเป้าหมายของงาน (ในการจัดกำหนดการไปข้างหน้า ซึ่งหมายความว่าการได้รับวันที่สิ้นสุดของงานเร็วที่สุดเท่าที่จะเป็นไปได้) ในขณะที่ยังคงมีข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="b84ba-275">เมื่อมีงานที่มีคู่ขนาน ให้ค้นหาวิธีการแก้ไขปัญหาอาจเกี่ยวข้องกับการตรวจสอบชุดข้อมูลที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="b84ba-276">จำนวนของชุดทรัพยากรที่เป็นไปได้ คือผลิตภัณฑ์ของจำนวนของทรัพยากรที่ใช้ได้สำหรับงานคู่ขนานที่เชื่อมโยง</span><span class="sxs-lookup"><span data-stu-id="b84ba-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="b84ba-277">โดยเฉพาะอย่างยิ่งเมื่อจัดกำหนดการใบสั่งย้อนหลังจากวันที่ของความต้องการ อาจใช้เวลาสักครู่เพื่อให้ตรรกะตระหนักว่าไม่มีวิธีการแก้ไขปัญหาที่จะทำให้งานคู่ขนานพอดีก่อนวันที่วันนี้ เนื่องจากจะต้องตรวจสอบชุดข้อมูลทั้งหมด เนื่องจากอาจมีทรัพยากรบางอย่างที่มีประสิทธิภาพสูงกว่าหรือปฏิทินอื่นที่อาจจะให้ผลลัพธ์</span><span class="sxs-lookup"><span data-stu-id="b84ba-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="b84ba-278">ซึ่งหมายความว่า ถ้าไม่ได้ตั้งค่าขีดจำกัดการหมดเวลาไว้ จะมีการรันเป็นเวลานานก่อนที่จะเปลี่ยนทิศทางไปข้างหน้า</span><span class="sxs-lookup"><span data-stu-id="b84ba-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="b84ba-279">ตรรกะแบบรวมนี้ยังหมายความว่าการเพิ่มทรัพยากรที่ใช้ได้มากขึ้นอาจทำให้กลไกจัดการทำงานช้าลง</span><span class="sxs-lookup"><span data-stu-id="b84ba-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="b84ba-280">ถ้าเกิดปัญหาด้านประสิทธิภาพเมื่อมีการดำเนินงานและการจัดกำหนดการแบบขนานที่มีกำลังการผลิตมีจำกัด สามารถแก้ไขได้ส่วนหนึ่งโดยตัวออกแบบของกระบวนการผลิตจะมีการตัดสินใจว่าควรจะใช้ทรัพยากรใดบ้างและกำหนดทรัพยากรโดยตรงบนการดำเนินงาน (เนื่องจากกลไกจัดการในกรณีส่วนใหญ่จะมีการสิ้นสุดการเบิกทรัพยากรเดียวกัน เพราะฉะนั้นผลจะเหมือนกัน)</span><span class="sxs-lookup"><span data-stu-id="b84ba-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="b84ba-281">ฮาร์ดลิงค์</span><span class="sxs-lookup"><span data-stu-id="b84ba-281">Hard links</span></span>

<span data-ttu-id="b84ba-282">การตั้งค่าชนิดของลิงค์ระหว่างงานสองงานเป็นแบบฮาร์ด ให้ตรวจสอบให้แน่ใจว่าไม่มีช่องว่างระหว่างความสำเร็จของงานหนึ่งและจุดเริ่มต้นของหนึ่งงานถัดไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="b84ba-283">การทำเช่นนี้อาจเป็นประโยชน์อย่างมากในสถานการณ์ เช่ นเมื่อโลหะถูกทำให้ร้อนในงานหนึ่ง และดำเนินการต่อไปในงานถัดไปที่ไม่ต้องการให้มีโลหะเย็นลงในระหว่างนั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="b84ba-284">ด้วยลิงค์แบบนุ่มนวลมาตรฐานและการจัดกำหนดการแบบไปข้างหน้า ถ้ากระบวนการผลิตมีการจัดกลุ่มแบบง่ายๆ โดยไม่มีสาขาใดๆ ผลลัพธ์สามารถทำได้โดยการหาทางออกสำหรับงานแรกที่ตรงกับข้อจำกัดของตนเอง แล้วเลื่อนผ่านสายโซ่เผยแพร่เวลาสิ้นสุดจากงานก่อนหน้านี้ไปยังงานถัดไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="b84ba-285">ถ้างานปัจจุบันไม่พบกำลังการผลิตใดๆ เวลาเริ่มต้นสำหรับฟิลด์นี้จะถูกย้ายออกไปโดยไม่มีผลใดๆ สำหรับงานก่อนหน้านี้ที่อาจสร้างช่องว่างระหว่างงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="b84ba-286">อย่างไรก็ตามการใช้ฮาร์ดลิงค์ (โดยเฉพาะอย่างยิ่งในการเชื่อมต่อที่มีกำลังการผลิตมีจำกัด) สำหรับสถานการณ์จำลองเดียวกัน ข้อเท็จจริงที่ว่างานหนึ่งในภายหลังในห่วงโซ่จะไม่พบกำลังการผลิต จะหมายถึงงานที่จัดกำหนดการไว้ก่อนหน้านี้ทั้งหมดจะต้อง "ลาก" ไปพร้อมๆ กันและจัดกำหนดการอีกครั้ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="b84ba-287">โดยเฉพาะอย่างยิ่งในสถานการณ์ที่มีการโหลดสูงสำหรับหลายทรัพยากร ฮาร์ดลิงค์อาจทำให้เกิดปฏิกิริยาลูกโซ่ที่งานจะมีผลกระทบต่อกัน และจำนวนของการเกิดซ้ำจะต้องดำเนินการก่อนที่จะทำให้ผลการปฏิบัติตามกำหนดเวลาที่เป็นไปได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="b84ba-288">การรันกลไกการจัดกำหนดการควบคู่กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="b84ba-289">เมื่อดำเนินการจัดกำหนดการเป็นส่วนหนึ่งของการรันการวางแผนหลัก ซึ่งจะใช้ตัวช่วยซึ่งเธรดผู้ช่วยเหลือของการวางแผนหลักแต่ละเธรดยังสามารถเบิกงานการจัดกำหนดการใบสั่งผลิตได้ด้วย</span><span class="sxs-lookup"><span data-stu-id="b84ba-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="b84ba-290">ซึ่งหมายความว่ากลไกการจัดกำหนดการหลายกลไกสามารถรันพร้อมกันได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="b84ba-291">ในขณะที่ เธรดโดยทั่วไปมีผลประโยชน์ด้านประสิทธิภาพที่สำคัญสูง นอกจากนี้ยังมีเสียทำงานบางอย่างเมื่อเป็นเรื่องการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="b84ba-292">ใน MRP ใบสั่งผลิตทั้งหมดสำหรับระดับรายการวัสดุและส่วนประกอบ (BOM) ที่กำหนดจะมีการจัดกำหนดการในลำดับวันที่ความต้องการ ซึ่งหมายความว่าใบสั่งเหล่านั้นมีวันที่ความต้องการแรกสุดควรได้รับการจัดกำหนดการก่อน จึงจะมีโอกาสสูงสุดในการได้รับกำลังการผลิตของทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="b84ba-293">อย่างไรก็ตาม การเบิกหลายกลไกจากรายการของใบสั่งที่ไม่มีกำหนดการไม่สามารถมั่นใจได้อีกต่อไป เนื่องจากการดำเนินการนี้อาจทำได้เร็วกว่าอีกครั้งหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="b84ba-294">นอกจากนี้ เมื่อจัดตารางการผลิตโดยใช้กำลังการผลิตมีจำกัด และเมื่ออินสแตนซ์กลไกจัดการพยายามจัดกำหนดการใบสั่งที่อาจใช้ทรัพยากรเดียวกันในช่วงเวลาเดียวกัน สภาวะการแย่งชิงอาจเกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="b84ba-295">จำนวนของเงื่อนไขการแย่งชิงดังกล่าวจะถูกบันทึกในฟิลด์ **ความขัดแย้งในการจัดกำหนดการ** บนหน้าประวัติการวางแผนหลัก</span><span class="sxs-lookup"><span data-stu-id="b84ba-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="b84ba-296">ตรรกะการแก้ปัญหาความขัดแย้งมีดังต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="b84ba-297">จัดกำหนดการใบสั่ง (ล็อค-ฟรี) และรับการจองกำลังการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="b84ba-298">ใช้ล็อค</span><span class="sxs-lookup"><span data-stu-id="b84ba-298">Take the lock.</span></span>
- <span data-ttu-id="b84ba-299">ตรวจสอบว่ามีการจองกำลังการผลิตใหม่อยู่สำหรับทรัพยากรที่จัดกำหนดการไว้ในช่วงเวลาหรือไม่</span><span class="sxs-lookup"><span data-stu-id="b84ba-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="b84ba-300">ถ้าไม่มี ให้เขียนกำลังการผลิตและปล่อยล็อค</span><span class="sxs-lookup"><span data-stu-id="b84ba-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="b84ba-301">ถ้าใช่ ให้ปล่อยล็อค และจัดกำหนดการใบสั่งใหม่ตั้งแต่เริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="b84ba-302">ดังนั้น เมื่อจัดกำหนดการกับอินสแตนซ์กลไกจัดการหลายรายการ ผลลัพธ์ไม่ถูกกำหนดโดยสมบูรณ์ เนื่องจากจะขึ้นอยู่กับช่วงเวลาที่แน่นอนของแต่ละเธรด</span><span class="sxs-lookup"><span data-stu-id="b84ba-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="b84ba-303">ประสิทธิภาพการจัดตารางการผลิตระดับการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-303">Operation scheduling performance</span></span>

<span data-ttu-id="b84ba-304">ถึงแม้ว่าการจัดตารางการผลิตระดับการดำเนินงานก็เรียกอีกอย่างว่าการวางแผนกำลังการผลิตที่ตัดหยาบ ซึ่งมองเห็นจากมุมมองของกลไกจัดการ ก็อาจเป็นปัญหาหนักเพื่อแก้ไขถ้าใช้กำลังการผลิตมีจำกัดเป็นข้อมูลที่จำเป็นในการกำหนดความเป็นไปได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="b84ba-305">กำลังการผลิตของกลุ่มทรัพยากรจะขึ้นอยู่กับว่ามีทรัพยากรใดบ้างและเท่าไหร่บ้างที่เป็นสมาชิกของกลุ่มทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="b84ba-306">กลุ่มทรัพยากรในตัวเองไม่มีกำลังการผลิตใดๆ&mdash;เฉพาะเมื่อทรัพยากรเป็นสมาชิกของกลุ่มเท่านั้นที่จะมีกำลังการผลิตเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="b84ba-307">เนื่องจากการเป็นสมาชิกของกลุ่มทรัพยากรอาจแตกต่างกันไปตามเวลาที่ต้องใช้กำลังการผลิตสำหรับแต่ละวัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="b84ba-308">ในการจัดตารางการผลิตระดับการดำเนินงาน ปฏิทินของกลุ่มทรัพยากรจะใช้เพื่อกำหนดเวลาเริ่มต้นและเวลาสิ้นสุดสำหรับแต่ละการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="b84ba-309">ซึ่งหมายความว่าปฏิทินของกลุ่มทรัพยากรวางขีดจำกัดเวลาการดำเนินงานที่สามารถจัดตารางการผลิตสำหรับการดำเนินงานหนึ่งวันในหนึ่งกลุ่มทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="b84ba-310">ตรงข้ามปฏิทินสำหรับทรัพยากร ที่ระบุจะมีการละเว้นข้อมูลประสิทธิภาพของปฏิทินสำหรับกลุ่มทรัพยากร เนื่องจากจะแสดงถึงชั่วโมงที่เปิดค้างไว้และไม่มีกำลังการผลิตที่แท้จริง</span><span class="sxs-lookup"><span data-stu-id="b84ba-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="b84ba-311">ตัวอย่างเช่น ถ้าเวลาการทำงานสำหรับกลุ่มทรัพยากรในวันที่เฉพาะหนึ่งมีตั้งแต่ 8:00 ถึง 16:00 การดำเนินงานหนึ่งไม่สามารถใส่โหลดเพิ่มเติมบนกลุ่มทรัพยากรกว่าสิ่งที่สามารถพอดีกับ 8 ชั่วโมง ไม่ว่าจะมีกำลังการผลิตเท่าไรที่กลุ่มทรัพยากรมีอยู่ทั้งหมดในวันนั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="b84ba-312">กำลังการผลิตที่พร้อมใช้งานอาจจำกัดจำนวนงานในศูนย์การผลิตต่อไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="b84ba-313">จำนวนงานในศูนย์การผลิตจากการจัดตารางการผลิตระดับงานในทรัพยากรทั้งหมดที่รวมอยู่ในกลุ่มทรัพยากรในวันที่กำหนด จะถือว่ามีการคำนวณกำลังการผลิตที่พร้อมใช้งานสำหรับกลุ่มทรัพยากรในวันเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="b84ba-314">สำหรับวันที่แต่ละวัน จะมีการคำนวณดังนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-314">For each date, the calculation is:</span></span>

<span data-ttu-id="b84ba-315">*กำลังการผลิตของกลุ่มทรัพยากรที่พร้อมใช้งาน = กำลังการผลิตสำหรับทรัพยากรในกลุ่มตามจำนวนงานการจัดตารางงานตามปฏิทิน &ndash; ของทรัพยากรในการดำเนินงานของกลุ่ม &ndash; ที่จัดตารางจำนวนงานการผลิตทรัพยากรในการดำเนินการของกลุ่ม &ndash; ที่จัดกำหนดการจำนวนงานในกลุ่มทรัพยากร*</span><span class="sxs-lookup"><span data-stu-id="b84ba-315">*Available resource group capacity = Capacity for resources in the group based on their calendar &ndash; Job scheduled load on the resources in the group &ndash; Operations scheduled load on the resources in the group &ndash; Operations scheduled load on the resource group*</span></span>

<span data-ttu-id="b84ba-316">บนแท็บ **ความต้องการทรัพยากร** บนขั้นตอนของกระบวนการผลิตคุณสามารถระบุความต้องการทรัพยากรโดยใช้ทรัพยากรหนึ่งๆ (ซึ่งกรณีที่การดำเนินงานจะได้รับการจัดตารางการผลิตโดยใช้ทรัพยากรนั้น) สำหรับกลุ่มทรัพยากร สำหรับชนิดของทรัพยากร หรือสำหรับความสามารถในการมีความสามารถทักษะหลักสูตรหรือใบรับรองหนึ่งรายการขึ้นไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-316">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="b84ba-317">ในขณะที่การใช้ตัวเลือกเหล่านี้ทั้งหมดให้ความยืดหยุ่นที่ดีในการออกแบบกระบวนการผลิต นอกจากนี้ยังทำให้ การจัดกำหนดการซับซ้อนสำหรับกลไกจัดการ เนื่องจากกำลังการผลิตต้องมีการลงบัญชีสำหรับแต่ละ "คุณสมบัติ" (ชื่อนามธรรมที่ใช้ในโปรแกรมสำหรับความสามารถทักษะและอื่นๆ)</span><span class="sxs-lookup"><span data-stu-id="b84ba-317">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="b84ba-318">กำลังการผลิตของกลุ่มทรัพยากรสำหรับความสามารถ คือผลรวมของกำลังการผลิตสำหรับทรัพยากรทั้งหมดในกลุ่มทรัพยากร ที่มีความสามารถในการสอบถาม</span><span class="sxs-lookup"><span data-stu-id="b84ba-318">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="b84ba-319">ถ้าทรัพยากรในกลุ่มมีความสามารถ จะไม่มีการพิจารณาระดับของกำลังการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-319">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="b84ba-320">ในการจัดตารางการผลิตระดับการดำเนิน งานกำลังการผลิตที่พร้อมใช้งานสำหรับความสามารถบางอย่างสำหรับกลุ่มทรัพยากรจะถูกลดลง เมื่อมีการโหลดพร้อมกับการดำเนินงานที่จำเป็นต้องมีความสามารถในการสอบถาม</span><span class="sxs-lookup"><span data-stu-id="b84ba-320">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="b84ba-321">ถ้าการดำเนินงานจำเป็นต้องมีมากกว่าหนึ่งความสามารถ กำลังการผลิตจะมีการลดสำหรับความสามารถที่จำเป็นทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="b84ba-321">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="b84ba-322">สำหรับวันที่แต่ละวัน จะมีการคำนวณที่จำเป็นดังนี้</span><span class="sxs-lookup"><span data-stu-id="b84ba-322">For each date, the required calculation is:</span></span>

<span data-ttu-id="b84ba-323">*กำลังการผลิตที่พร้อมใช้งานสำหรับความสามารถ = กำลังการผลิตสำหรับงานความสามารถที่ &ndash; ที่จัดกำหนดการไว้สำหรับจำนวนงานบนทรัพยากรที่มีความสามารถเฉพาะซึ่งรวมอยู่ในการดำเนินงานของกลุ่มทรัพยากร &ndash; ที่จัดกำหนดการไว้สำหรับจำนวนงานบนทรัพยากรที่มีความสามารถเฉพาะซึ่งรวมอยู่ในการดำเนินงานของกลุ่มทรัพยากร &ndash; ที่จัดกำหนดการสำหรับจำนวนงานบนกลุ่มทรัพยากรเองด้วยตนเอง ซึ่งจำเป็นต้องใช้ความสามารถเฉพาะ*</span><span class="sxs-lookup"><span data-stu-id="b84ba-323">*Available capacity for a capability = Capacity for the capability &ndash; Job scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resource group itself that require the specific capability*</span></span>

<span data-ttu-id="b84ba-324">ซึ่งหมายความว่าถ้ามีโหลดบนทรัพยากรที่ระบุ จำนวนงานในศูนย์การผลิตจะถือว่าเป็นการคำนวณปริมาณการใช้กำลังการผลิตที่มีอยู่ของกลุ่มทรัพยากร เนื่องจากจำนวนงานในศูนย์การผลิตที่ระบุจะลดส่วนจัดสรรของกลุ่มทรัพยากรสำหรับความสามารถในการทำงานไม่ว่าจำนวนงานในศูนย์การผลิตที่ระบุจะสำหรับความสามารถนั้นหรือไม่</span><span class="sxs-lookup"><span data-stu-id="b84ba-324">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="b84ba-325">ถ้ามีโหลดในระดับกลุ่มทรัพยากร จะถือว่าเป็นการคำนวณกำลังการผลิตที่พร้อมใช้งานของกลุ่มทรัพยากรต่อความสามารถเฉพาะ เมื่อจำนวนงานในศูนย์การผลิตมาจากการดำเนินงานที่จำเป็นต้องใช้ความสามารถเฉพาะเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b84ba-325">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="b84ba-326">ตรรกะด้านบนซับซ้อน เนื่องจากเป็นแบบเดียวกันสำหรับแต่ละชนิดของ "คุณสมบัติ" เพื่อให้การใช้การจัดกำหนดการการดำเนินงานที่มีกำลังการผลิตจำกัดต้องมีการป้อนข้อมูลเป็นจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-326">The above logic is complicated, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="b84ba-327">การดูอินพุทและเอาท์พุทของกลไกจัดการการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-327">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="b84ba-328">เมื่อต้องการดูรายละเอียดเฉพาะของข้อมูลป้อนเข้าและผลลัพธ์ของกระบวนการจัดกำหนดการ ให้เปิดใช้งานการบันทึก โดยไปที่ **การจัดการองค์กร \> การตั้งค่า \> การจัดกำหนดการ \> ส่วนควบคุมการจัดกำหนดการการติดตาม**</span><span class="sxs-lookup"><span data-stu-id="b84ba-328">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="b84ba-329">บนหน้านี้ ให้เลือก **เปิดใช้งานการบันทึก** ในบานหน้าต่างการดำเนินการก่อน</span><span class="sxs-lookup"><span data-stu-id="b84ba-329">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="b84ba-330">จากนั้นรันการจัดตารางการผลิตที่ต้องการสำหรับใบสั่งผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-330">Then run the scheduling for the production order.</span></span> <span data-ttu-id="b84ba-331">เมื่อเสร็จสมบูรณ์ ให้กลับไปที่หน้า **ส่วนควบคุมการติดตามการจัดกำหนดการ** และเลือก **ปิดใช้งานการบันทึก** ในบานหน้าต่างการดำเนินการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-331">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="b84ba-332">รีเฟรชหน้า และรายการใหม่จะปรากฏในกริด</span><span class="sxs-lookup"><span data-stu-id="b84ba-332">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="b84ba-333">เลือกรายการใหม่และเลือก **ดาวน์โหลด** บนบานหน้าต่างการดำเนินการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-333">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="b84ba-334">การทำเช่นนี้จะช่วยให้คุณมีโฟลเดอร์บีบอัด .zip ที่มีไฟล์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="b84ba-334">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="b84ba-335">**Log.txt** - นี่คือไฟล์บันทึกที่อธิบายขั้นตอนที่กลไกจัดการผ่าน</span><span class="sxs-lookup"><span data-stu-id="b84ba-335">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="b84ba-336">ซึ่งมีความซับซ้อนมากและค่อนข้างน่ากังวล แต่เมื่อใช้เป็นส่วนหนึ่งของการทดลองกับการตั้งค่ากระบวนการผลิต เพื่อแก้ไขปัญหาประสิทธิภาพ การทำงานแรกที่จะค้นหา คือความแตกต่างในเวลาระหว่างรายการแรกและรายการสุดท้าย ซึ่งจะช่วยให้เวลาที่แน่นอนที่จะใช้กำหนดตารางทำงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-336">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="b84ba-337">**XmlModel.xml** - ซึ่งประกอบด้วยแบบจำลองที่สร้างขึ้นใน X++ และที่กลไกจัดการดำเนินการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-337">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="b84ba-338">`JobId` ใช้ในไฟล์ที่สัมพันธ์กับ `RecId` จากตารางต้นทางที่มีงาน (`ReqRouteJob` หรือ `ProdRouteJob`)</span><span class="sxs-lookup"><span data-stu-id="b84ba-338">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="b84ba-339">สิ่งทั่วไปในการค้นหาในไฟล์นี้ คือวันที่ที่กำหนดไว้ใน `ConstraintJobStartsAt` และ `ConstraintJobEndsAt` ตามที่คาดไว้ว่าคุณสมบัติ `JobGoal` ถูกตั้งค่าไว้อย่างถูกต้อง และมีการเชื่อมโยงกับงานที่เกี่ยวข้องกับแต่ละอื่นๆ ผ่านข้อจำกัด `JobLink`</span><span class="sxs-lookup"><span data-stu-id="b84ba-339">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="b84ba-340">**XmlSlots.xml** - ซึ่งประกอบด้วยเวลาการทำงาน และการจองกำลังการผลิตทั้งหมดที่กลไกจัดการร้องขอ</span><span class="sxs-lookup"><span data-stu-id="b84ba-340">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="b84ba-341">เวลาทำงานของปฏิทินและการจองจะถูกร้องขอโดยกลไกจัดการสำหรับรอบระยะเวลาที่พยายามจะวางงาน (และบัฟเฟอร์พิเศษ) ดังนั้นถ้าไฟล์มีเวลามากในอนาคต -ก็อาจเป็นการบ่งชี้ว่ามีปัญหาเกิดขึ้นกับการตั้งค่า</span><span class="sxs-lookup"><span data-stu-id="b84ba-341">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="b84ba-342">โหนด `ResourceProperty` จะแสดงสำหรับทรัพยากรแต่ละกลุ่ม และความสามารถในการเชื่อมโยงกับแต่ละรอบระยะเวลา</span><span class="sxs-lookup"><span data-stu-id="b84ba-342">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="b84ba-343">**Result.xm** - ซึ่งประกอบด้วยผลลัพธ์ของการรันการจัดกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-343">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="b84ba-344">โปรดทราบว่าฟังก์ชันการสืบค้นกลับจะสามารถเพิ่มค่าประสิทธิภาพที่สำคัญได้ ดังนั้นจึงใช้สำหรับการตรวจสอบการจัดกำหนดการของใบสั่งเฉพาะในลักษณะที่ควบคุม</span><span class="sxs-lookup"><span data-stu-id="b84ba-344">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="b84ba-345">ถ้ามีการเปิดใช้งานในระหว่างการวางแผนหลักรัน จะทำให้ทำงานได้อย่างรวดเร็วถึงขีดจำกัดของขนาดและหยุด</span><span class="sxs-lookup"><span data-stu-id="b84ba-345">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="b84ba-346">ประสิทธิภาพการแก้ไขปัญหา</span><span class="sxs-lookup"><span data-stu-id="b84ba-346">Troubleshooting performance</span></span>

<span data-ttu-id="b84ba-347">ในขณะที่สามารถเข้าใจได้จากส่วนก่อนหน้านี้ทั้งหมด มีบางอย่างเมื่อมีการตั้งค่าการตั้งค่า และการใช้งานของกลไกจัดการการจัดกำหนดการ ซึ่งอาจทำให้เกิดปัญหาประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-347">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="b84ba-348">รายการตรวจสอบต่อไปนี้สามารถใช้สำหรับการแก้ไขปัญหาดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="b84ba-348">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="b84ba-349">สิ่งสำคัญ คือต้องดูจุดทั้งหมด เนื่องจากจะเป็นการรวมกันของหลายปัจจัยที่นำไปสู่ปัญหา</span><span class="sxs-lookup"><span data-stu-id="b84ba-349">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="b84ba-350">การดำเนินการจัดกำหนดการเป็นส่วนหนึ่งของ MRP เมื่อไม่ต้องการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-350">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="b84ba-351">ถึงแม้ว่าจะมีการใช้กระบวนการผลิตสำหรับวัตถุประสงค์ของการควบคุมการผลิต เช่น การคิดต้นทุน และการรายงานอาจไม่จำเป็นต้องพิจารณาในระหว่าง MRP</span><span class="sxs-lookup"><span data-stu-id="b84ba-351">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="b84ba-352">ในบางกรณี การมีระยะเวลารอคอยสินค้าสำหรับการผลิตมาตรฐานที่ระบุไว้สำหรับสินค้าจะมีเพียงพอสำหรับการวางแผน</span><span class="sxs-lookup"><span data-stu-id="b84ba-352">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="b84ba-353">เมื่อต้องการปิดการจัดกำหนดการกระบวนการผลิต ให้ตั้งค่ากรอบเวลากำลังการผลิตเป็นศูนย์</span><span class="sxs-lookup"><span data-stu-id="b84ba-353">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="b84ba-354">ถ้าการจัดกำหนดการควรจะทำแล้ว ควรตั้งค่ากรอบเวลากำลังการผลิตอย่างระมัดระวั งเนื่องจากไม่จำเป็นต้องคำนึงถึงกระบวนการผลิตสำหรับกรอบเวลาการครอบคลุมของ MRP</span><span class="sxs-lookup"><span data-stu-id="b84ba-354">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="b84ba-355">โปรดทราบว่าถ้าใบสั่งไม่มีการจัดกำหนดการในระหว่าง MRP แสดงว่าใบสั่งนี้จะต้องมีการจัดกำหนดการไว้เมื่อมีการยืนยันแผนการใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-355">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="b84ba-356">ซึ่งหมายความว่ากระบวนการยืนยันจะใช้เวลานานขึ้น ทั้งนี้ขึ้นอยู่กับจำนวนของแผนการใบสั่งที่แนะนำที่ได้รับการยืนยัน ผลกำไรประสิทธิภาพการทำงานระหว่าง MRP อาจสูญเสียที่การยืนยันยอด</span><span class="sxs-lookup"><span data-stu-id="b84ba-356">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="b84ba-357">กระบวนการผลิตที่มีการดำเนินงานที่ไม่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="b84ba-357">Route with unnecessary operations</span></span>

<span data-ttu-id="b84ba-358">เมื่อออกแบบกระบวนการผลิต จึงเป็นการดึงดูดให้ลองแบบจำลองโลกจริงอย่างแน่นอนโดยมีขั้นตอนทั้งหมดในการผลิตที่ผ่านไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-358">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="b84ba-359">ในขณะที่การดำเนินการนี้อาจเป็นประโยชน์ในบางกรณี ก็ไม่ดีสำหรับประสิทธิภาพเนื่องจากแบบจำลองกลไกจัดการต้องมีการทำงานในระดับที่ใหญ่ขึ้น (ทั้งในแง่ของงานและข้อจำกัด) และคำสั่ง SQL เพิ่มเติมจะถูกดำเนินการสำหรับการแทรก และการอัพเดตงาน และการจองกำลังการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-359">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="b84ba-360">นอกจากนี้ ยังมีผลกระทบต่อเนื่องของความคืบหน้าของรายงานในครั้งสุดท้ายของงาน ซึ่งสามารถลดการลงรายการบัญชีอัตโนมัติได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-360">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="b84ba-361">ถ้าไม่มีการใช้ข้อมูลสำหรับสิ่งใดก็ตาม จะมีการสร้างจำนวนงานในศูนย์การผลิตที่ไม่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="b84ba-361">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="b84ba-362">เราขอแนะนำให้คุณสร้างการดำเนินงานที่จำเป็นสำหรับการจัดกำหนดการอย่างเคร่งครัดเท่านั้น (ซึ่งโดยทั่วไปจะเป็นทรัพยากรคอขวด) และ/หรือวัตถุประสงค์ของการคำนวณต้นทุน</span><span class="sxs-lookup"><span data-stu-id="b84ba-362">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="b84ba-363">อีกทางหนึ่งคือ คุณควรจัดกลุ่มการดำเนินงานที่แตกต่างกันเล็กน้อยในการดำเนินงานที่มีขนาดใหญ่กว่า ซึ่งแสดงถึงส่วนใหญ่ของกระบวนการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-363">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="b84ba-364">การดำเนินงานที่มีทรัพยากรที่ใช้ได้หลายอย่าง</span><span class="sxs-lookup"><span data-stu-id="b84ba-364">Many applicable resources for an operation</span></span>

<span data-ttu-id="b84ba-365">จำนวนของทรัพยากรที่ใช้ได้สำหรับการดำเนินงานจะขึ้นอยู่กับความต้องการทรัพยากรที่ตั้งค่าไว้ในความสัมพันธ์ของการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-365">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="b84ba-366">ความต้องการอาจเป็นสำหรับทรัพยากรเฉพาะ (บุคคล) หรืออาจยึดตามการเป็นสมาชิกของทรัพยากรของกลุ่มทรัพยากรหรือความสามารถ</span><span class="sxs-lookup"><span data-stu-id="b84ba-366">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="b84ba-367">ถ้าการจัดตารางการผลิตไม่ได้ดำเนินการโดยใช้กำลังการผลิตมีจำกัด และทรัพยากรที่ใช้ได้ทั้งหมดจะมีปฏิทินและประสิทธิภาพเดียวกัน กลไกจัดการกำหนดการจะสิ้นสุดการเลือกทรัพยากรเดียวกันสำหรับการดำเนินงาน แต่เฉพาะหลังจากลองใช้ทรัพยากรที่เกี่ยวข้องทั้งหมด เพื่อตรวจสอบว่ามีสิ่งที่ "ดีกว่า" นอกเหนือจากผู้อื่นหรือไม่</span><span class="sxs-lookup"><span data-stu-id="b84ba-367">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="b84ba-368">ในกรณีนี้ จำนวนงานในศูนย์การผลิตของการจัดกำหนดการอาจลดลงอย่างมาก เพียงแค่กำหนดทรัพยากรที่ระบุให้กับการดำเนินงานในเวลาที่ออกแบบกระบวนการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-368">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="b84ba-369">กระบวนการผลิตที่มีการดำเนินงานที่เกิดขึ้นควบคู่กัน</span><span class="sxs-lookup"><span data-stu-id="b84ba-369">Route with parallel operations</span></span>

<span data-ttu-id="b84ba-370">ในขณะที่การดำเนินงานที่เกิดขึ้นควบคู่กัน (หลัก/รอง) เป็นเครื่องมือที่มีประสิทธิภาพในการจำลองสถานการณ์จำลอง เช่น เมื่อเครื่องจักรและผู้ปฏิบัติงานมีทั้งสองอย่างที่จำเป็นในการดำเนินงานที่เฉพาะเจาะจง ยังเป็นแหล่งที่มาของปัญหาประสิทธิภาพการทำงานจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-370">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="b84ba-371">ถ้ามีการกำหนดความต้องการสำหรับแต่ละทรัพยากรให้กับทั้งการดำเนินงานหลักและรอง ซึ่งโดยปกติแล้วจะไม่มีปัญหา</span><span class="sxs-lookup"><span data-stu-id="b84ba-371">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="b84ba-372">แต่ถ้ามีทรัพยากรที่เป็นไปได้หลายอย่างสำหรับการดำเนินงานแต่ละครั้ง ก็จะเพิ่มความซับซ้อนในการคำนวณที่สำคัญให้กับการจัดตารางการผลิต</span><span class="sxs-lookup"><span data-stu-id="b84ba-372">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="b84ba-373">อีกทางหนึ่งสำหรับการใช้การดำเนินงานแบบขนานอาจเป็นแบบจำลองคู่กับทรัพยากร "เสมือน" (ซึ่งจะแสดงถึงทีมงานที่อยู่ในระหว่างการดำเนินงานเสมอ) หรือไม่ใช่แบบจำลองอย่างใดอย่างหนึ่งของการดำเนินงาน ถ้าไม่ได้แสดงถึงคอขวด</span><span class="sxs-lookup"><span data-stu-id="b84ba-373">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="b84ba-374">กระบวนการผลิตที่มีปริมาณทรัพยากรสูงกว่า 1 รายการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-374">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="b84ba-375">ถ้าการตั้งค่าปริมาณของทรัพยากรจำเป็นสำหรับการดำเนินงานที่สูงกว่าหนึ่งรายการนั้น ดังนั้นจะมีผลอย่างมีประสิทธิภาพเช่นเดียวกับการใช้การดำเนินงานหลัก/รอง เนื่องจากมีการส่งงานขนานหลายงานไปยังกลไกจัดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-375">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="b84ba-376">อย่างไรก็ตาม สำหรับกรณีนี้ไม่มีตัวเลือกในการใช้การกำหนดทรัพยากรที่เฉพาะเจาะจง เนื่องจากปริมาณที่สูงกว่าหนึ่งต้องมีมากกว่าหนึ่งทรัพยากรที่ใช้ได้สำหรับการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-376">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="b84ba-377">การใช้ที่มากเกินไปของกำลังการผลิตที่มีจำกัด</span><span class="sxs-lookup"><span data-stu-id="b84ba-377">Excessive use of finite capacity</span></span>

<span data-ttu-id="b84ba-378">การใช้กำลังการผลิตมีจำกัดต้องให้กลไกจัดการโหลดข้อมูลกำลังการผลิตจากฐานข้อมูล และสามารถมีค่าใช้จ่ายในการคำนวณได้ เนื่องจากจะทำงานได้ยากขึ้นโดยเฉพาะในสภาพแวดล้อมที่มีการจองทรัพยากรใกล้ถึงกำลังการผลิตสูงสุด</span><span class="sxs-lookup"><span data-stu-id="b84ba-378">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="b84ba-379">ด้วยเหตุนี้ จึงมีความสำคัญในการประเมินอย่างรอบคอบว่าทรัพยากรจำเป็นต้องใช้กำลังการผลิตมีจำกัด หรือสามารถจองเกินเวลาได้หรือไม่</span><span class="sxs-lookup"><span data-stu-id="b84ba-379">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="b84ba-380">เนื่องจากอาจมีความแตกต่างระหว่างทรัพยากรกำลังการผลิตที่มีจำกัดในความสำคัญของการจองเกิน เราขอแนะนำให้ใช้ตัวเลือกคอขวดบนทรัพยากรร่วมกับค่าแยกต่างหากในแผน "กรอบเวลากำลังการผลิตสำหรับทรัพยากรคอขวด"</span><span class="sxs-lookup"><span data-stu-id="b84ba-380">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="b84ba-381">การใช้แนวคิดคอขวดสามารถเปิดใช้งานได้ โดยกรอบเวลากำลังการผลิตแบบมีจำกัดโดยทั่วไปอาจลดลง</span><span class="sxs-lookup"><span data-stu-id="b84ba-381">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="b84ba-382">การตั้งค่าฮาร์ดลิงค์</span><span class="sxs-lookup"><span data-stu-id="b84ba-382">Setting hard links</span></span>

<span data-ttu-id="b84ba-383">ชนิดของลิงค์มาตรฐานของกระบวนการผลิตเป็นแบบ *ชั่วคราว* ซึ่งหมายความว่ามีช่องว่างในเวลาที่อนุญาตระหว่างเวลาที่เสร็จสิ้นของการดำเนินงานหนึ่ง และจุดเริ่มต้นของการดำเนินงานถัดไป</span><span class="sxs-lookup"><span data-stu-id="b84ba-383">The standard link type of the route is *soft* , which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="b84ba-384">การอนุญาตให้นี้อาจมีผลกระทบร้าย ซึ่งถ้าวัสดุหรือกำลังการผลิตไม่พร้อมใช้งานสำหรับการดำเนินงานอย่างใดอย่างหนึ่งสำหรับเวลานานมาก การผลิตอาจไม่ได้ใช้งานอยู่สักระยะ หมายความว่าการเพิ่มขึ้นของงานกำลังดำเนินการอยู่</span><span class="sxs-lookup"><span data-stu-id="b84ba-384">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="b84ba-385">การทำเช่นนี้จะไม่เกิดขึ้นกับการเชื่อมโยงแบบถาวร เนื่องจากจุดเสร็จสิ้นและเริ่มต้องจัดแนวเดียวกันอย่างสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="b84ba-385">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="b84ba-386">แต่การตั้งค่าการเชื่อมโยงแบบถาวรทำให้เกิดปัญหาการจัดกำหนดการยากขึ้น เนื่องจากต้องมีการคำนวณเวลาการทำงานและกำลังการผลิตสำหรับสองทรัพยากรของการดำเนินงาน</span><span class="sxs-lookup"><span data-stu-id="b84ba-386">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="b84ba-387">ถ้ามีการดำเนินการที่เกี่ยวข้องกับการดำเนินงานแบบขนาน นี่จะเพิ่มเวลาการคำนวณที่สำคัญ</span><span class="sxs-lookup"><span data-stu-id="b84ba-387">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="b84ba-388">ถ้าทรัพยากรของการดำเนินการทั้งสองมีปฏิทินที่แตกต่างกันที่ไม่ได้รับการทับซ้อนทั้งหมด ปัญหาคือ ไม่สามารถแก้ไขได้</span><span class="sxs-lookup"><span data-stu-id="b84ba-388">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="b84ba-389">เราขอแนะนำให้ใช้การเชื่อมโยงแบบถาวรเฉพาะเมื่อจำเป็นต้องใช้อย่างเด็ดขาด และควรพิจารณาอย่างถี่ถ้วนถ้าจำเป็นสำหรับการดำเนินงานของกระบวนการผลิตแต่ละครั้ง</span><span class="sxs-lookup"><span data-stu-id="b84ba-389">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="b84ba-390">เมื่อต้องการลดงานที่อยู่ระหว่างดำเนินการโดยไม่ใช้ลิงค์ถาวร คำแนะนำคือการจัดกำหนดการใบสั่งสองครั้งด้วยการเปลี่ยนไปใช้ทิศทางตรงกันข้ามสำหรับการผ่านที่สอง</span><span class="sxs-lookup"><span data-stu-id="b84ba-390">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="b84ba-391">ถ้ากำหนดการแรกย้อนหลังจากวันที่จัดส่งแล้ว ควรจะทำการส่งต่อจากวันที่เริ่มต้นตามกำหนดการ</span><span class="sxs-lookup"><span data-stu-id="b84ba-391">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="b84ba-392">การดำเนินการนี้จะทำให้งานถูกบีบอัดมากที่สุดเท่าที่จะเป็นไปได้ เพื่อให้งานระหว่างทำถูกย่อให้สั้นลง</span><span class="sxs-lookup"><span data-stu-id="b84ba-392">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="b84ba-393">ปฏิทินแยกต่างหากสำหรับแต่ละทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="b84ba-393">Separate calendar for each resource</span></span>

<span data-ttu-id="b84ba-394">แหล่งข้อมูลหลักอย่างใดอย่างหนึ่งของข้อมูลสำหรับกลไกจัดการการจัดกำหนดการ คือข้อมูลปฏิทิน ซึ่งอาจมีราคาแพงกว่าโหลดจากฐานข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b84ba-394">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="b84ba-395">เนื่องจากมีการสร้างปฏิทินตามแม่แบบดังกล่าว ซึ่งจะถูกดึงดูดเพื่อสร้างปฏิทินสำหรับแต่ละทรัพยากร แล้วปรับปรุงข้อมูลในปฏิทินนี้ เมื่อทรัพยากรหยุดทำงานและมีปัญหาอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="b84ba-395">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="b84ba-396">อย่างไรก็ตาม การดำเนินการนี้จะจำกัดความสามารถของกลไกจัดการในการแคชข้อมูลของปฏิทิน เนื่องจากจะต้องมีการร้องขอข้อมูลใหม่สำหรับแต่ละทรัพยากร และอาจเป็นแหล่งที่มาของปัญหาประสิทธิภาพการทำงานจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-396">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="b84ba-397">แต่เราขอแนะนำให้คุณใช้ปฏิทินให้มากที่สุดเท่าที่จะเป็นไปได้ระหว่างทรัพยากร แล้วควบคุมการเปลี่ยนแปลงที่หยุดทำงาน โดยกำหนดรหัสปฏิทินอื่นสำหรับรอบระยะเวลา</span><span class="sxs-lookup"><span data-stu-id="b84ba-397">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="b84ba-398">จำนวนช่องเวลาการทำงานสูงสำหรับแต่ละวันในปฏิทิน</span><span class="sxs-lookup"><span data-stu-id="b84ba-398">High number of working time slots per calendar day</span></span>

<span data-ttu-id="b84ba-399">เนื่องจากกลไกจัดการทำงานโดยการตรวจสอบช่องเวลาทีละหนึ่งสำหรับกำลังการผลิต ซึ่งเป็นประโยชน์ในการลดจำนวนของช่องเวลาสำหรับแต่ละวันในปฏิทิน</span><span class="sxs-lookup"><span data-stu-id="b84ba-399">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="b84ba-400">การดำเนินการนี้อาจทำได้เช่นเดียวกับ การพิจารณาว่ามีความสำคัญต่อกำหนดการผลลัพธ์เพื่อสะท้อนให้เห็นว่า ผู้ปฏิบัติงานมีเวลาหยุดพัก 5 นาทีทุกชั่วโมง</span><span class="sxs-lookup"><span data-stu-id="b84ba-400">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="b84ba-401">การหมดเวลาของการจัดกำหนดการมีขนาดใหญ่ (หรือไม่มี)</span><span class="sxs-lookup"><span data-stu-id="b84ba-401">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="b84ba-402">คุณสามารถปรับปรุงประสิทธิภาพของกลไกจัดการการจัดกำหนดการโดยใช้พารามิเตอร์ที่พบบนหน้า **พารามิเตอร์การจัดกำหนดการ**</span><span class="sxs-lookup"><span data-stu-id="b84ba-402">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="b84ba-403">การตั้งค่า **การหมดเวลาการจัดกำหนดการที่เปิดใช้งาน** และ **การหมดเวลาที่เปิดใช้งานการเพิ่มประสิทธิภาพ** ควรตั้งค่าเป็น **ใช่** เสมอ</span><span class="sxs-lookup"><span data-stu-id="b84ba-403">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="b84ba-404">ถ้าตั้งค่าเป็น **ไม่** การจัดกำหนดการอาจอาจรันอนันต์ถ้ามีการสร้างกระบวนการผลิตที่เป็นไปไม่ได้ที่มีหลายตัวเลือก</span><span class="sxs-lookup"><span data-stu-id="b84ba-404">If set to **No** , the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="b84ba-405">ค่าสำหรับ **เวลาการจัดกำหนดการสูงสุดสำหรับแต่ละลำดับ** ควบคุมจำนวนวินาทีที่สามารถใช้ในการค้นหาวิธีการแก้ไขสำหรับลำดับเดียว (ในกรณีส่วนใหญ่ลำดับจะตรงกับใบสั่งเดียว)</span><span class="sxs-lookup"><span data-stu-id="b84ba-405">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="b84ba-406">ค่าที่จะใช้ที่นี่จะขึ้นอยู่กับความซับซ้อนของกระบวนการผลิต และการตั้งค่า เช่น กำลังการผลิตมีจำกัด แต่ค่าสูงสุดประมาณ 30 วินาทีเป็นจุดเริ่มต้นที่ดี</span><span class="sxs-lookup"><span data-stu-id="b84ba-406">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="b84ba-407">ค่าสำหรับ **การเพิ่มประสิทธิภาพความพยายามในการเพิ่มประสิทธิภาพ** ควบคุมจำนวนวินาทีที่ใช้มากที่สุดในการค้นหาวิธีการแก้ปัญหาที่ดีกว่าที่พบในครั้งแรก</span><span class="sxs-lookup"><span data-stu-id="b84ba-407">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="b84ba-408">การดำเนินการนี้จะมีผลกระทบต่อกระบวนการผลิตที่ใช้การดำเนินงานขนาน เนื่องจากจำเป็นต้องใช้ในการทดสอบชุดต่างๆ</span><span class="sxs-lookup"><span data-stu-id="b84ba-408">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="b84ba-409">ค่าที่ตั้งค่าไว้สำหรับการใช้การหมดเวลาจะถูกใช้ทั้งสำหรับการจัดกำหนดการของใบสั่งผลิตที่นำออกใช้ และแผนการใบสั่งเป็นส่วนหนึ่งของ MRP</span><span class="sxs-lookup"><span data-stu-id="b84ba-409">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="b84ba-410">ด้วยเหตุนี้ การตั้งค่าที่มีค่าสูงมากอาจเพิ่มในเวลารันของ MRP อย่างมาก เมื่อรันแผนงานที่มีแผนการใบสั่งผลิตจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="b84ba-410">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>
