---
title: การตั้งค่าสถานการณ์จำลองสำหรับเครื่องมือ IoT
description: หัวข้อนี้จะอธิบายถึงวิธีการตั้งค่าคอนฟิกสถานการณ์จำลองสำหรับเครื่องมือ IoT ใน Microsoft Dynamics 365 Supply Chain Management
author: robinarh
manager: tfehr
ms.date: 08/16/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: rhaertle
ms.search.scope: Core, Operations
ms.custom: ''
ms.search.region: Global
ms.author: rhaertle
ms.search.validFrom: 2020-04-04
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: d1deaa2130b63272da39a42315c6a1bc4b7ccb8a
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/13/2020
ms.locfileid: "4438733"
---
# <a name="scenario-setup-for-iot-intelligence"></a>การตั้งค่าสถานการณ์จำลองสำหรับเครื่องมือ IoT

[!include [banner](../../includes/banner.md)]

หัวข้อนี้จะอธิบายถึงวิธีการตั้งค่าคอนฟิกสถานการณ์จำลองสำหรับเครื่องมือ IoT ใน Microsoft Dynamics 365 Supply Chain Management ก่อนที่คุณจะสามารถตั้งค่าสถานการณ์ คุณต้อง [ตั้งค่า Microsoft Dynamics Lifecycle Services (LCS)](iot-lcs-setup.md)

ในหัวข้อนี้คุณจะตั้งค่าคอนฟิกสถานการณ์จำลอง **การหยุดทำงานของอุปกรณ์** เพื่อให้สร้างการแจ้งเตือนใน Supply Chain Management เมื่อเครื่องจักรหยุดทำงาน หัวข้อนี้จะแสดงวิธีการตั้งค่าคอนฟิกสถานการณ์ **คุณภาพของผลิตภัณฑ์** เพื่อให้มีการสร้างการแจ้งเตือนถ้าแอททริบิวต์ของรายการอยู่นอกช่วงที่ระบุและวิธีการตั้งค่าคอนฟิกสถานการณ์ **การล่าช้าในการผลิต** เพื่อให้มีการสร้างการแจ้งเตือนถ้าปริมาณการผลิตต่ำกว่าค่าขีดจำกัด

## <a name="configure-the-equipment-downtime-scenario-in-supply-chain-management"></a>ตั้งค่าคอนฟิกสถานการณ์จำลอง การหยุดทำงานของอุปกรณ์ ใน Supply Chain Management

สถานการณ์ **การหยุดทำงานของอุปกรณ์** แม็ปสัญญาณ **PartOut** ไปยังขีดจำกัดการแจ้งเตือนเครื่องจักร เครื่องจักรจะถูกตรวจสอบเฉพาะเมื่อมีการเลือกเครื่องจักรสำหรับสถานการณ์และเมื่อตั้งค่าเป็น **กำลังทำงาน** ใน Supply Chain Management ถ้าเวลาตั้งแต่สัญญาณ **PartOut** ที่รับล่าสุดของเครื่องจักรที่ได้รับล่าสุดมากกว่าขีดจำกัด การแจ้งเตือน **เครื่องจักรหยุดทำงาน** จะถูกทริกเกอร์ ถ้าเครื่องจักรยังคงทำงานอยู่จะมีการทริกเกอร์การแจ้งเตือน **เครื่องจักรทำงาน** เมื่อได้รับสัญญาณ **PartOut** ถัดไป ถ้าเครื่องจักรหยุดทำงานนาน 30 นาที การแจ้งเตือน **เครื่องจักรหยุดทำงาน** จะถูกทริกเกอร์

สถานการณ์จำลองของ **การหยุดทำงานของอุปกรณ์** มีความเชื่อมโยงต่อกันต่อไปนี้:

+ การแจ้งเตือนถูกทริกเกอร์เฉพาะเมื่อใบสั่งผลิตทำงานอยู่บนเครื่องจักรที่ถูกแม็ป
+ จะต้องส่งสัญญาณที่แสดงถึงสัญญาณ **PartOut** ของเครื่องจักรที่ถูกแม็ปไปยังฮับ IoT และมีชื่อคุณสมบัติที่ไม่ซ้ำกัน
+ คุณสมบัติ **การประทับเวลา** UNIX โดยที่ค่าแสดงเป็นมิลลิวินาที (ms) ต้องมีอยู่ในข้อความฮับ IoT ของ Azure

การตั้งค่าคอนฟิกสถานการณ์ ให้ทำตามขั้นตอนเหล่านี้

1. ลงชื่อเข้าใช้ Supply Chain Management
2. เปิดใช้งานข้อมูลแฟล็กลักษณะการทำงานของเครื่องมือ IoT สำหรับข้อมูลเพิ่มเติม ดูที่ [ภาพรวมการจัดการคุณลักษณะ](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview)
3. ตั้งค่าคอนฟิกหน่วยเมตริก สำหรับข้อมูลเพิ่มเติมเกี่ยว ดูที่ [วิธีการตั้งค่าคอนฟิกหน่วยเมตริก](iot-metrics-setup.md#configure-metrics)
4. ไปที่ **การควบคุมการผลิต \> การตั้งค่า \> เครื่องมือ IoT \> การจัดการสถานการณ์**
6. บนไทล์ **การหยุดทำงานของอุปกรณ์** ให้เลือก **ตั้งค่าคอนฟิก** เพื่อเปิดวิซาร์ดการตั้งค่าคอนฟิก

   หน้าแรกในวิซาร์ดคือหน้า **นิยามเค้าร่างของเซ็นเซอร์อุปกรณ์** ในหน้านี้ เป้าหมายของคุณคือการตั้งค่าเค้าร่างใน Supply Chain Management เพื่อให้ตรงกับรูปแบบ JavaScript Object Notation (JSON) ของข้อความฮับ IoT สามารถกำหนดเค้าร่างข้อความหลายแบบได้ สำหรับข้อมูลเพิ่มเติม ให้ดูที่ [รูปแบบเค้าร่างข้อความสำหรับฮับ IoT](iot-schema-format.md) ในตัวอย่างนี้ ส่วนของข้อความนี้จะประกอบด้วยชุดของข้อความที่มีรูปแบบต่อไปนี้

    ```json
    {
        "timestamp": 1576016821614,
        "payload": [
            {
                "id": "IoTInt.Machine1225.PartOut",
                "timestamp": 1576016821614,
                "value": True
            },
            {
                "id": "IoTInt.Machine1226.PartOut",
                "timestamp": 1576016991616,
                "value": True
            }
        ]
    }
    ```

7. เพิ่มแถวลงในตาราง และตั้งค่าต่อไปนี้:

    1. ตั้งค่าฟิลด์ **ชื่อเค้าร่าง** เป็น **รหัส**
    2. ตั้งค่าฟิลด์ **พาธเค้าร่าง** เป็น **/payload\[\*\]/id**
    3. ตั้งค่าฟิลด์ **คำอธิบาย** เป็น **รหัสข้อความ**

8. เพิ่มอีกแถวลงในตาราง และตั้งค่าต่อไปนี้:

    1. ตั้งค่าฟิลด์ **ชื่อเค้าร่าง** เป็น **การประทับเวลา**
    2. ตั้งค่าฟิลด์ **พาธเค้าร่าง** เป็น **/payload\[\*\]/timestamp**
    3. ตั้งค่าฟิลด์ **คำอธิบาย** เป็น **การประทับเวลาข้อความ**

9. เพิ่มอีกแถวลงในตาราง และตั้งค่าต่อไปนี้:

    1. ตั้งค่าฟิลด์ **ชื่อเค้าร่าง** เป็น **ค่า**
    2. ตั้งค่าฟิลด์ **พาธเค้าร่าง** เป็น **/payload\[\*\]/value**
    3. ตั้งค่าฟิลด์ **คำอธิบาย** เป็น **ค่าข้อความ**

    > [!NOTE]
    > คุณไม่จำเป็นต้องกำหนดคุณสมบัติทั้งหมดในข้อความ กำหนดเฉพาะคุณสมบัติที่คุณต้องการ ในขั้นตอนก่อนหน้านี้ คุณไม่ได้สร้างแถวสำหรับ **การประทับเวลาระดับราก** พาธสำหรับ **การประทับเวลาระดับราก** จะเป็น **/timestamp**

10. เลือก **ถัดไป** เพื่อไปยังหน้า **แม็ปเค้าร่างของเซ็นเซอร์อุปกรณ์**
11. ในแถวสำหรับ **รหัสทรัพยากรอุปกรณ์** ในฟิลด์ **ชื่อเค้าร่าง** เลือก **รหัส**
12. ในแถวสำหรับ **เวลา UTC** ในฟิลด์ **ชื่อเค้าร่าง** เลือก **การประทับเวลา**
13. ในแถวสำหรับ **สัญญาณที่ผลิตของส่วนประกอบ** ในฟิลด์ **ชื่อเค้าร่าง** เลือก **ค่า**
14. เลือก **ถัดไป** เพื่อไปที่หน้า **การตั้งค่าคอนฟิกรหัสทรัพยากรอุปกรณ์**
15. ทำตามขั้นตอนเหล่านี้เพื่อแม็ปค่าในข้อความฮับ IoT กับทรัพยากร Supply Chain Management:

    1. ในตาราง **ค่าข้อมูลของสัญญาณ** ให้เพิ่มแถวใหม่ ในฟิลด์ **ค่า** ให้ป้อน **IoTInt.Machine1225.PartOut** ค่านี้มาจากคุณสมบัติ **รหัส** JSON ในข้อความฮับ IoT
    2. เลือก **บันทึก**
    3. ในตาราง **การแม็ปเรกคอร์ดธุรกิจ** ให้เลือก **สร้าง** ค่าเริ่มต้นสำหรับฟิลด์ **ชนิดเรกคอร์ดธุรกิจ** ถูกเติมโดยอัตโนมัติ และคุณไม่จำเป็นต้องเปลี่ยนแปลง
    4. ในฟิลด์ **เรกคอร์ดธุรกิจ** ให้เลือกทรัพยากรเครื่องจักร Supply Chain Management ที่ค่าสัญญาณนี้จะถูกส่งมา
    5. เลือก **บันทึก**
    6. ทำซ้ำขั้นตอนเหล่านี้เพื่อเพิ่มการแม็ปเรกคอร์ดธุรกิจใหม่สำหรับ **Machine1226** คุณสามารถแม็ปค่าข้อมูลของสัญญาณหลายค่ากับเรกคอร์ดเดียวใน Supply Chain Management

16. ใช้คอลัมน์ **ที่เลือก** เพื่อเลือกเครื่องจักรที่คุณต้องการประมวลผล คุณไม่จำเป็นต้องกำหนดค่าสัญญาณทั้งหมดและคุณไม่จำเป็นต้องเลือกเครื่องจักรทั้งหมด
17. เลือก **ถัดไป** เพื่อไปที่หน้า **การตั้งค่าคอนฟิกของสัญญาณที่ผลิตของส่วนประกอบ**
18. ในตาราง **ค่าข้อมูลของสัญญาณ** ให้เพิ่มแถวและตั้งค่าฟิลด์ **ค่า** เป็น **จริง** ค่านี้มาจากคุณสมบัติ **ค่า** JSON ในข้อความฮับ IoT คุณสามารถเพิ่มค่ามากเท่าที่คุณต้องการสำหรับสถานการณ์จำลองของคุณ
19. เลือก **บันทึก**
20. เลือก **ถัดไป** เพื่อไปยังหน้า **ขีดจำกัดการหยุดทำงานของอุปกรณ์** เครื่องจักรแสดงรายการเป็นเครื่องจักรที่ถูกแม็ปไปยังค่าสัญญาณก่อนหน้านี้ ในหน้านี้ คุณจะกำหนดขีดจำกัดเพื่อตรวจสอบว่าเครื่องจักรหยุดทำงานหรือไม่ ตัวอย่างเช่น ถ้าคุณตั้งค่าขีดจำกัดเป็น **10** Supply Chain Management จะสร้างข้อความแจ้งเตือนถ้าไม่ได้รับสัญญาณ **PartOut** จากเครื่องจักรเป็นเวลา 10 นาที
21. เลือก **ถัดไป** เพื่อไปยังหน้า **เปิดใช้งานสถานการณ์จำลอง** ตั้งค่าตัวเลือกเพื่อเปิดใช้งานสถานการณ์
22. เลือก **เสร็จสิ้น**

การตั้งค่าสถานการณ์เสร็จสมบูรณ์แล้ว เครื่องมือ IoT จะเริ่มการประมวลผลข้อความฮับ IoT โดยอัตโนมัติ

## <a name="configure-the-product-quality-scenario-in-supply-chain-management"></a>ตั้งค่าคอนฟิกสถานการณ์จำลอง คุณภาพผลิตภัณฑ์ ใน Supply Chain Management

สถานการณ์จำลอง **คุณภาพผลิตภัณฑ์** สร้างการแจ้งเตือนถ้าแอททริบิวต์ของสินค้าอยู่นอกช่วงที่ระบุ ตัวอย่างเช่น เซ็นเซอร์ส่งน้ำหนักของสินค้าแต่ละรายการไปยังฮับ IoT ถ้าสินค้ามีน้ำหนักเกินหรือเบาเกินไป จะมีการสร้างการแจ้งเตือนใน Supply Chain Management

สถานการณ์ **คุณภาพของผลิตภัณฑ์** มีความเชื่อมโยงต่อกันต่อไปนี้:

+ การแจ้งเตือนสามารถทริกเกอร์เฉพาะเมื่อมีการเรียกใช้ใบสั่งผลิตภัณฑ์บนเครื่องจักรที่ถูกแม็ปและผลิตผลิตภัณฑ์ที่มีแอททริบิวต์ชุดงานที่ถูกแม็ป
+ จะต้องส่งสัญญาณที่แสดงถึงแอททริบิวต์ของชุดงานไปยังฮับ IoT และมีชื่อคุณสมบัติที่ไม่ซ้ำกัน
+ คุณสมบัติ **การประทับเวลา** UNIX โดยที่ค่าแสดงเป็น ms ต้องมีอยู่ในข้อความฮับ IoT

## <a name="configure-the-production-delays-scenario-in-supply-chain-management"></a>ตั้งค่าคอนฟิกสถานการณ์จำลอง ความล่าช้าในการผลิต ใน Supply Chain Management

สถานการณ์จำลอง **ความล่าช้าในการผลิต** จะสร้างการแจ้งเตือนถ้าปริมาณการผลิตอยู่ต่ำกว่าค่าขีดจำกัด ในสถานการณ์นี้ มีการส่งสัญญาณ **PartOut** ไปยังฮับ IoT สำหรับสินค้าแต่ละรายการที่ผลิต ใน Supply Chain Management จะมีการคำนวณการล่าช้าของใบสั่งตามจำนวนเวลาที่ใบสั่งผลิตมีการจัดกำหนดการให้ทำงาน จำนวนของสินค้าที่ควรจะผลิต จำนวนของเวลาที่งานกำลังดำเนินอยู่ และจำนวนของสัญญาณ **PartOut** ที่ได้รับ การแจ้งเตือนความล่าช้าถูกสร้างขึ้นถ้าจำนวนของสัญญาณ **PartOut** สำหรับงานอยู่ต่ำกว่าค่าขีดจำกัด

สถานการณ์ **การล่าช้าในการผลิต** มีความเชื่อมโยงต่อกันต่อไปนี้:

+ การแจ้งเตือนถูกทริกเกอร์เฉพาะเมื่อใบสั่งผลิตทำงานอยู่บนเครื่องจักรที่ถูกแม็ป
+ จะต้องส่งสัญญาณที่แสดงถึงสัญญาณ **PartOut** ของเครื่องจักรที่ถูกแม็ปไปยังฮับ IoT ของ Azure และมีชื่อคุณสมบัติที่ไม่ซ้ำกัน
+ คุณสมบัติ **การประทับเวลา** UNIX โดยที่ค่าแสดงเป็น ms ต้องมีอยู่ในข้อความฮับ IoT

## <a name="disable-a-scenario"></a>ปิดใช้งานสถานการณ์

หากต้องการปิดใช้งานสถานการณ์จำลอง ให้ทำตามขั้นตอนเหล่านี้

1. ใน Supply Chain Management ให้ไปยัง **การควบคุมการผลิต \> การตั้งค่า \> เครื่องมือ IoT \> การจัดการสถานการณ์**
2. บนไทล์สำหรับสถานการณ์ ให้เลือก **ตั้งค่าคอนฟิก**
3. เลือก **ถัดไป** เพื่อไปยังหน้าสุดท้ายของวิซาร์ด
4. ตั้งค่าตัวเลือกเพื่อปิดใช้งานสถานการณ์


[!INCLUDE[footer-include](../../includes/footer-banner.md)]