---
title: ตั้งค่าทรัพยากร Azure สำหรับเครื่องมือ IoT
description: หัวข้อนี้จะอธิบายถึงวิธีการสร้างและตั้งค่าคอนฟิกทรัพยากร Microsoft Azure ที่จำเป็นสำหรับเครื่องมือ IoT
author: robinarh
manager: tfehr
ms.date: 08/16/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: ''
ms.custom: ''
ms.search.region: Global
ms.author: rhaertle
ms.search.validFrom: 2020-04-04
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: cd06410dd6260e6a371b0044546be7f8c9957c80
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/15/2021
ms.locfileid: "4989832"
---
# <a name="set-up-azure-resources-for-iot-intelligence"></a>ตั้งค่าทรัพยากร Azure สำหรับเครื่องมือ IoT

[!include [banner](../../includes/banner.md)]

หัวข้อนี้จะอธิบายถึงวิธีการสร้างและตั้งค่าคอนฟิกทรัพยากร Microsoft Azure ที่จำเป็นสำหรับเครื่องมือ IoT

## <a name="create-azure-resources"></a>สร้างแหล่งข้อมูล Azure

ทำตามขั้นตอนต่อไปนี้เพื่อสร้างฮับ IoT แคช Redis และ Key Vault ที่สามารถเข้าถึงได้โดย Microsoft Dynamics 365 Supply Chain Management

### <a name="verify-that-the-microsoft-dynamics-erp-microservices-first-party-app-id-is-in-your-tenant"></a>ตรวจสอบว่ารหัสของแอปพลิเคชันของบุคคลที่หนึ่งของ Microsoft Dynamics ERP Microservices อยู่ในผู้เช่าของคุณหรือไม่

เมื่อต้องการตรวจสอบว่ารหัสแอปพลิเคชันของแอปพลิเคชันของบุคคลที่หนึ่งของ Microsoft Dynamics ERP Microservices อยู่ในผู้เช่าของคุณ ให้ทำตามขั้นตอนต่อไปนี้

1. ล็อกอินไปยังพอร์ทัล Azure ที่ <https://portal.azure.com>
2. ไปที่ **Azure Active Directory**
3. ไปที่ **แอปพลิเคชันองค์กร**
4. ในฟิลด์ **ชนิดของแอปพลิเคชัน** เลือก **แอปพลิเคชัน Microsoft**
5. ในฟิลด์การค้นหา ป้อน **Microsoft Dynamics ERP Microservices**
6. ตรวจสอบว่า **Microsoft Dynamics ERP Microservices** อยู่ในรายการ แอปพลิเคชันอื่นมีชื่อที่คล้ายกัน ดังนั้น ควรตรวจสอบให้แน่ใจว่าคุณค้นหาแอปพลิเคชันที่ถูกต้อง รหัสของแอปพลิเคชันคือ **0cdb527f-a8d1-4bf8-9436-b352c68682b2**

    ถ้าแอปพลิเคชันไม่ได้อยู่ในรายการ คุณต้องเพิ่มไปยังผู้เช่าของคุณ:

    1. ในพอร์ทัล Azure บนแถบเครื่องมือ ให้เลือกปุ่มเพื่อเปิด Azure Cloud Shell
    2. รันคำสั่ง **Install-Module AzureAD** ป้อน **Y** เพื่อติดตั้งโมดูล
    3. รันคำสั่ง **Get-InstalledModule -Name "AzureAD"** เพื่อตรวจสอบว่ามีการติดตั้งโมดูล
    4. รันคำสั่ง **Connect-AzureAD -Confirm** เพื่อรันการตรวจสอบความถูกต้อง
    5. รันคำสั่ง **New-AzureADServicePrincipal -AppId 0cdb527f-a8d1-4bf8-9436-b352c68682b2**

    ขณะนี้คุณสามารถทำซ้ำขั้นตอนที่1 ถึง 6 เพื่อตรวจสอบว่ารหัสของแอปอยู่ในผู้เช่าของคุณหรือไม่

### <a name="create-a-key-vault-resource"></a>สร้างทรัพยากร Key Vault

เมื่อต้องการสร้างทรัพยากร Key Vault ให้ทำตามขั้นตอนเหล่านี้

1. ในพอร์ทัล Azure สร้างหรือไปที่กลุ่มทรัพยากร
2. เลือก **เพิ่ม**
3. บนหน้า **สร้าง** ในฟิลด์การค้นหา ให้ป้อน **Key Vault** จากนั้น เลือก **สร้าง**
4. บนหน้า **สร้าง Key vault** ในฟิลด์ **ชื่อของ Key Vault** ให้ป้อนชื่อ
5. ตรวจทานค่าเริ่มต้นแล้วเลือก **ตรวจทาน + สร้าง**
6. เลือก **สร้าง**

มีการสร้าง Key Vault ไว้ในพื้นหลัง

### <a name="create-an-iot-hub-resource"></a>สร้างทรัพยากรฮับ IoT

เมื่อต้องการสร้างทรัพยากรฮับ IoT ให้ทำตามขั้นตอนเหล่านี้

1. สร้างหรือไปที่กลุ่มทรัพยากร
2. เลือก **เพิ่ม**
3. บนหน้า **สร้าง** ในฟิลด์การค้นหา ให้ป้อน **ฮับ IoT** จากนั้น เลือก **สร้าง**
4. ในฟิลด์ **ชื่อฮับ IoT** ให้ป้อนชื่อ
5. ตรวจทานค่าเริ่มต้นแล้วเลือก **ตรวจทาน + สร้าง**
6. เลือก **สร้าง**

มีการสร้างฮับ IoT ไว้ในพื้นหลัง

> [!NOTE]
> เราขอแนะนำให้คุณสร้างทรัพยากรฮับ IoT เดียวเท่านั้นสำหรับแต่ละสภาพแวดล้อม

### <a name="create-a-redis-cache-resource"></a>สร้างทรัพยากรแคช Redis

เมื่อต้องการสร้างทรัพยากรแคช Redis ให้ทำตามขั้นตอนเหล่านี้

1. สร้างหรือไปที่กลุ่มทรัพยากร
2. เลือก **เพิ่ม**
3. บนหน้า **สร้าง** ในฟิลด์การค้นหา ให้ป้อน **แคช Azure สำหรับ Redis** จากนั้น เลือก **สร้าง**
4. ในฟิลด์ **ชื่อ DNS** ให้ป้อนชื่อ
5. ตรวจทานค่าเริ่มต้นแล้วเลือก **สร้าง**

มีการสร้างแคช Redis ไว้ในพื้นหลัง

> [!NOTE]
> เราขอแนะนำให้คุณสร้างแคช Redis เดียวเท่านั้นสำหรับแต่ละสภาพแวดล้อม

ขณะนี้มีการสร้างทรัพยากรทั้งหมดแล้ว

## <a name="configure-the-azure-resources"></a>ตั้งค่าคอนฟิกทรัพยากร Azure

### <a name="configure-the-iot-hub"></a>ตั้งค่าคอนฟิกฮับ IoT

หากต้องการตั้งค่าคอนฟิกฮับ IoT ให้ทำตามขั้นตอนเหล่านี้

1. ในทรัพยากรของคุณ ให้เลือกทรัพยากรฮับ IoT
2. ในบานหน้าต่างนำทางด้านซ้ายให้เลือก **ปลายทางที่มีอยู่แล้ว**
3. ภายใต้ **กลุ่มผู้บริโภค** ให้วางกลุ่มผู้บริโภคต่อไปนี้ กลุ่มผู้บริโภคเหล่านี้จะสอดคล้องกับสถานการณ์สำเร็จรูป

    + microsoft.dynamics.iotintelligence-1
    + microsoft.dynamics.iotintelligence-2
    + microsoft.dynamics.iotintelligence-3

### <a name="configure-the-key-vault"></a>ตั้งค่าคอนฟิก Key Vault

หากต้องการตั้งค่าคอนฟิก Key Vault ให้ทำตามขั้นตอนเหล่านี้

1. ในทรัพยากรของคุณ ให้เลือกทรัพยากร Key Vault
2. ในบานหน้าต่างนำทางทางด้านซ้าย ให้เลือก **นโยบายการเข้าถึง**
3. เลือก **เพิ่มนโยบายการเข้าถึง**
4. บนหน้า **เพิ่มนโยบายการเข้าถึง** ในฟิลด์ **สิทธิ์ลับ** เลือก **รับ** และ **แสดงรายการ**
5. คลิกใน **หลักการเลือก**
6. ในกล่องโต้ตอบ **หลัก** ให้ค้นหาและเลือก **Microsoft Dynamics ERP Microservices** แล้วเลือก **เลือก**
7. เลือก **เพิ่ม**
8. เลือก **บันทึก**

ขณะนี้แอปพลิเคชันมีสิทธิ์เข้าถึงข้อมูลลับใน Key Vault

### <a name="save-the-iot-hub-connection-string-secret"></a>บันทึกข้อมูลลับของสตริงการเชื่อมต่อฮับ IoT

เมื่อต้องการบันทึกข้อมูลลับสำหรับสตริงการเชื่อมต่อฮับ IoT ให้ทำตามขั้นตอนต่อไปนี้

1. ในทรัพยากรของคุณ ให้เลือกทรัพยากรฮับ IoT
2. ในบานหน้าต่างนำทางด้านซ้ายให้เลือก **ปลายทางที่มีอยู่แล้ว**
3. คัดลอกค่าในฟิลด์ **ปลายทางฮับเหตุการณ์ที่เข้ากันได้**
4. ไปที่ทรัพยากร Key Vault
5. ในบานหน้าต่างนำทางด้านซ้าย ให้เลือก **ข้อมูลลับ**
6. เลือก **สร้าง/นำเข้า**
7. ในฟิลด์ **ชื่อ** ป้อนชื่อ
8. ในฟิลด์ **ค่า** ให้วางค่าปลายทางที่คุณคัดลอกไว้ก่อนหน้านี้
9. เลือก **สร้าง**

### <a name="save-the-redis-cache-connection-string-secret"></a>บันทึกข้อมูลลับของสตริงการเชื่อมต่อแคช Redis

เมื่อต้องการบันทึกข้อมูลลับสำหรับสตริงการเชื่อมต่อแคช Redis ให้ทำตามขั้นตอนต่อไปนี้

1. ในทรัพยากรของคุณ ให้เลือกทรัพยากรแคช Redis
2. เลือก **คีย์การเข้าถึง**
3. การคัดลอกค่าในฟิลด์ **สตริงการเชื่อมต่อหลัก**
4. ไปที่ทรัพยากร Key Vault
5. ในบานหน้าต่างนำทางด้านซ้าย ให้เลือก **ข้อมูลลับ**
6. เลือก **สร้าง/นำเข้า**
7. ในฟิลด์ **ชื่อ** ป้อนชื่อ
8. ในฟิลด์ **ค่า** ให้วางสตริงการเชื่อมต่อที่คุณคัดลอกไว้ก่อนหน้านี้
9. เลือก **สร้าง**

> [!NOTE]
> เมื่อใดก็ตามที่คุณอัปเดตสตริงการเชื่อมต่ออใดๆ คุณต้องอัปเดตค่าข้อมูลลับเช่นกัน

ขณะนี้คุณได้เสร็จสิ้นการเตรียมใช้งานทรัพยากร Azure ที่จำเป็นแล้ว ขั้นตอนต่อไปคือการ [ติดตั้ง Add-in เครื่องมือ IoT ใน Microsoft Dynamics Lifecycle Services (LCS)](iot-lcs-setup.md)
