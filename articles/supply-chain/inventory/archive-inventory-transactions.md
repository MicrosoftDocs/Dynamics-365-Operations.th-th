---
title: เก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง
description: หัวข้อนี้อธิบายวิธีการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง เพื่อช่วยปรับปรุงประสิทธิภาพของระบบ
author: sherry-zheng
ms.date: 03/01/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventTransArchiveProcessForm
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-03-01
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: b740da1a8a349f4a1a80b41bf717c388fd3db0c0
ms.sourcegitcommit: d18d9cdb175c9d42eafbed66352c24b2aa94258b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/13/2021
ms.locfileid: "5881843"
---
# <a name="archive-inventory-transactions"></a>เก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง

[!include [banner](../../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

เมื่อเวลาผ่านไป ตารางธุรกรรมของสินค้าคงคลัง (`InventTrans`) จะยังคงเพิ่มขึ้นและใช้พื้นที่ฐานข้อมูลมากขึ้น ดังนั้น การสอบถามที่ถูกสร้างขึ้นเทียบกับตารางจะช้าลงทีละน้อย หัวข้อนี้อธิบายวิธีการที่คุณสามารถใช้คุณลักษณะ *การเก็บถาวรของธุรกรรมสินค้าคงคลัง* เพื่อเก็บถาวรข้อมูลเกี่ยวกับธุรกรรมของสินค้าคงคลัง เพื่อช่วยปรับปรุงประสิทธิภาพของระบบ

> [!NOTE]
> สามารถเก็บถาวรได้เฉพาะธุรกรรมของสินค้าคงคลังที่อัพเดตทางการเงินในรอบระยะเวลาบัญชีแยกประเภทที่ปิดแล้วที่เลือกเท่านั้น หากต้องการเก็บถาวร ธุรกรรมของสินค้าคงคลังขาออกที่อัพเดตทางการเงิน ต้องมีสถานะการตัดสินค้าจากคลังเป็น *ขายแล้ว* และธุรกรรมของสินค้าคงคลังขาเข้าต้องมีสถานะการรับสินค้าเป็น *ซื้อแล้ว*

เมื่อคุณเก็บถาวรธุรกรรมของสินค้าคงคลัง ธุรกรรมที่เกี่ยวข้องทั้งหมดจะถูกย้ายไปยังตาราง `InventTransArchive` ธุรกรรมการออกสินค้าคงคลังและธุรกรรมการรับสต็อกจะถูกเก็บถาวรโดยแยกต่างหาก ตามชุดข้อมูลของรหัสสินค้า (`itemId`) และรหัสมิติสินค้าคงคลัง (`inventDimId`) และธุรกรรมเหล่านั้นจะถูกจัดวางลงในสรุปการตัดสินค้าจากคลังและสรุปธุรกรรมการรับสินค้า

ถ้าชุดของ `itemId` และ `inventDimId` มีธุรกรรมการรับสินค้าหรือการตัดสินค้าจากคลังเพียงธุรกรรมเดียว ธุรกรรมจะไม่ถูกเก็บถาวร

## <a name="turn-on-the-feature-in-your-system"></a>เปิดใช้งานคุณลักษณะการทำงานในระบบของคุณ

ถ้าระบบของคุณยังไม่ได้รวมคุณลักษณะที่อธิบายไว้ในหัวข้อนี้ ให้ไปที่ [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) และเปิดคุณลักษณะ *การเก็บถาวรของธุรกรรมสินค้าคงคลัง* โปรดทราบว่าคุณลักษณะนี้ไม่สามารถปิดใช้งานได้หลังจากที่เปิดใช้งานแล้ว

## <a name="things-to-consider-before-you-archive-inventory-transactions"></a>สิ่งที่ต้องพิจารณาก่อนที่คุณจะเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง

ก่อนที่คุณจะเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง คุณควรพิจารณาสถานการณ์ทางธุรกิจต่อไปนี้ เนื่องจากจะได้รับผลกระทบจากการดําเนินงาน:

- เมื่อคุณตรวจสอบธุรกรรมของสินค้าคงคลังจากเอกสารที่เกี่ยวข้อง เช่น รายการใบสั่งซื้อ รายการเหล่านั้นจะถูกแสดงเป็นเก็บถาวร หากต้องการทบทวนธุรกรรมที่เก็บถาวร คุณต้องไปที่งานล้างข้อมูลธุรกรรม **การบริหารสินค้าคงคลัง \> งานประจำงวด \> การล้างข้อมูล \> การเก็บถาวรของธุรกรรมสินค้าคงคลัง**
- ไม่สามารถยกเลิกการปิดบัญชีสินค้าคงคลังสำหรับรอบระยะเวลาที่เก็บถาวรไว้ได้ ก่อนที่คุณจะสามารถยกเลิกการปิดบัญชีสินค้าคงคลังได้ คุณต้องกลับรายการการเก็บถาวรของธุรกรรมสินค้าคงคลังสำหรับรอบระยะเวลาที่เกี่ยวข้องก่อน
- ไม่สามารถทำการแปลงต้นทุนมาตรฐานสำหรับรอบระยะเวลาที่เก็บถาวร ก่อนที่คุณจะสามารถทำการแปลงต้นทุนมาตรฐานได้ คุณต้องกลับรายการการเก็บถาวรของธุรกรรมสินค้าคงคลังสำหรับรอบระยะเวลาที่เกี่ยวข้องก่อน
- รายงานสินค้าคงคลังที่มีต้นทางมาจากธุรกรรมสินค้าคงคลังจะได้รับผลกระทบ เมื่อคุณเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง รายงานเหล่านี้รวมรายงานอายุหนี้ของสินค้าคงคลังและรายงานมูลค่าสินค้าคงคลัง
- การคาดการณ์สินค้าคงคลังอาจได้รับผลกระทบ หากมีการรันในระหว่างระยะเวลาในการลงทุนของระยะเวลาที่เก็บถาวร

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

สามารถเก็บถาวรธุรกรรมสินค้าคงคลังได้เฉพาะในระหว่างรอบระยะเวลาที่เป็นไปตามเงื่อนไขต่อไปนี้เท่านั้น:

- ต้องปิดรอบระยะเวลาบัญชีแยกประเภท
- ต้องรันการปิดบัญชีสินค้าคงคลังในวันที่หรือหลังจากวันที่ถึงรอบระยะเวลาของที่เก็บถาวร
- รอบระยะเวลาต้องเป็นอย่างน้อยหนึ่งปี ก่อนหน้าวันที่เริ่มต้นรอบระยะเวลาของที่เก็บถาวร
- ต้องไม่มีการคำนวณซ้ำสินค้าคงคลังที่มีอยู่ใดๆ

## <a name="archive-inventory-transactions"></a>เก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง

หากต้องการเก็บถาวรธุรกรรมสินค้าคงคลัง ให้ดำเนินการตามขั้นตอนต่อไปนี้

1. ไปที่ **การบริหารสินค้าคงคลัง** \> **งานประจำงวด** \> **ล้างข้อมูล** \> **การเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง**

    หน้า **การเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง** จะปรากฏขึ้นและแสดงรายการของเรกคอร์ดกระบวนการที่เก็บถาวร

    ![หน้าการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง](media/archive-inventory-empty.png "หน้าการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง")

1. บนบานหน้าต่างการดำเนินการ เลือก **การเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง** เพื่อสร้างการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง
1. ในกล่องโต้ตอบ **การเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง** บน FastTab **พารามิเตอร์** ให้ตั้งค่าฟิลด์ต่อไปนี้:

    - **วันที่เริ่มต้นในรอบระยะเวลาบัญชีแยกประเภทที่ปิด** – เลือกวันที่ธุรกรรมแรกสุดที่จะรวมไว้ในที่เก็บถาวร
    - **วันที่สิ้นสุดในรอบระยะเวลาบัญชีแยกประเภทที่ปิด** – เลือกวันที่ธุรกรรมสุดท้ายที่จะรวมไว้ในที่เก็บถาวร

    ![กล่องโต้ตอบการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง](media/archive-inventory-dates.png "กล่องโต้ตอบการเก็บถาวรข้อมูลธุรกรรมของสินค้าคงคลัง")

    > [!NOTE]
    > เฉพาะรอบระยะเวลาที่ตรงตาม [เงื่อนไขเบื้องต้น](#prerequisites) เท่านั้นที่จะพร้อมใช้งานในการเลือก

1. บน FastTab **รันในแบบเบื้องหลัง** ให้ตั้งค่ารายละเอียดการประมวลผลชุดงานตามที่คุณต้องการ ปฏิบัติตามขั้นตอนปกติสำหรับงานของชุดงานใน Microsoft Dynamics 365 Supply Chain Management
1. เลือก **ตกลง**
1. คุณจะได้รับข้อความเตือนให้คุณยืนยันว่าคุณต้องการดำเนินการต่อหรือไม่ อ่านข้อความอย่างรอบคอบ แล้วจากนั้น เลือก **ใช่** ถ้าคุณต้องการดำเนินการต่อ

    คุณจะได้รับข้อความที่ระบุว่างานในการเก็บถาวรของธุรกรรมสินค้าคงคลังของคุณ ได้ถูกเพิ่มเข้าในคิวชุดงานแล้ว ขณะนี้งานจะเริ่มต้นเก็บถาวรรายการธุรกรรมของสินค้าคงคลังจากรอบระยะเวลาที่เลือก

## <a name="view-archived-inventory-transactions"></a>ดูธุรกรรมสินค้าคงคลังที่เก็บถาวร

หน้า **การเก็บถาวรข้อมูลของธุรกรรมสินค้าคงคลัง** แสดงประวัติการเก็บถาวรทั้งหมดของคุณ แถวแต่ละแถวในกริดแสดงข้อมูล เช่น วันที่ที่มีการสร้างที่เก็บถาวร ผู้ใช้ที่สร้าง และสถานะ

![ประวัติการเก็บถาวรในหน้าการเก็บถาวรข้อมูลของธุรกรรมสินค้าคงคลัง](media/archive-inventory-full.png "ประวัติการเก็บถาวรในหน้าการเก็บถาวรข้อมูลของธุรกรรมสินค้าคงคลัง")

ในรายการแบบหล่นลงที่ด้านบนของหน้า เลือกค่าใดค่าหนึ่งต่อไปนี้เพื่อกรองข้อมูลที่เก็บถาวรซึ่งแสดงในกริด:

- **ใช้งานอยู่** – แสดงเฉพาะที่เก็บถาวรที่ใช้งานอยู่ ไม่ใช่ที่เก็บถาวรที่กลับรายการ
- **ทั้งหมด** – แสดงที่เก็บถาวรทั้งหมด ทั้งแบบที่ใช้งานอยู่และกลับรายการแล้ว

สำหรับการเก็บถาวรแต่ละรายการในกริด มีการระบุข้อมูลต่อไปนี้:

- **ใช้งานอยู่** – เครื่องหมายถูกบ่งชี้ว่าที่เก็บถาวรใช้งานอยู่
- **วันที่เริ่มต้น** – วันที่ของธุรกรรมที่เก่าที่สุดที่สามารถรวมไว้ในที่เก็บถาวรได้
- **วันที่สิ้นสุด** – วันที่ของธุรกรรมล่าสุดที่สามารถรวมไว้ในที่เก็บถาวรได้
- **จัดกำหนดการตาม** – บัญชีผู้ใช้ที่สร้างที่เก็บถาวร
- **ดำเนินการแล้ว** – วันที่ที่สร้างที่เก็บถาวร
- **กลับรายการ** – เครื่องหมายถูกระบุว่ามีการกลับรายการที่เก็บถาวร
- **หยุดการอัพเดตปัจจุบัน** – เครื่องหมายถูกบ่งชี้ว่าที่เก็บถาวรอยู่ระหว่างกระบวนการ แต่ถูกหยุดไว้ชั่วคราว
- **สถานะ** – สถานะการประมวลผลของที่เก็บถาวร ค่าที่เป็นไปได้คือ *กำลังรอ* *อยู่ระหว่างดำเนินการ* และ *เสร็จสิ้นแล้ว*

แถบเครื่องมือเหนือกริดจะมีปุ่มต่อไปนี้ที่คุณสามารถใช้เพื่อทำงานกับที่เก็บถาวรที่เลือก:

- **ธุรกรรมที่เก็บถาวร** – ดูรายละเอียดทั้งหมดเกี่ยวกับที่เก็บถาวรที่เลือก หน้า **ธุรกรรมที่เก็บถาวร** ซึ่งปรากฏขึ้น แสดงธุรกรรมทั้งหมดในที่เก็บถาวร

    ![หน้าธุรกรรมที่เก็บถาวร](media/archive-inventory-transactions.png "หน้าธุรกรรมที่เก็บถาวร")

    เมื่อต้องการดูข้อมูลเพิ่มเติมเกี่ยวกับธุรกรรมเฉพาะบนหน้า **ธุรกรรมที่เก็บถาวร** ให้เลือกธุรกรรมนั้นในกริด แล้วจากนั้น ในบานหน้าต่างการดำเนินการ ให้เลือก **รายละเอียดธุรกรรมที่เก็บถาวร** หน้า **รายละเอียดธุรกรรมที่เก็บถาวร** ซึ่งปรากฏขึ้น จะแสดงข้อมูล เช่น การลงรายการบัญชีแยกประเภท ข้อมูลอ้างอิงของบัญชีแยกประเภทย่อยที่เกี่ยวข้อง และมิติทางการเงิน

- **หยุดการเก็บถาวรชั่วคราว** – หยุดที่เก็บถาวรที่เลือกที่กำลังถูกประมวลผลอยู่ในขณะนี้ การหยุดชั่วคราวจะมีผลเฉพาะหลังจากที่มีการสร้างงานการเก็บถาวรแล้วเท่านั้น ดังนั้น อาจมีความล่าช้าสั้นๆ ก่อนที่การหยุดชั่วคราวจะมีผล ถ้าที่เก็บถาวรถูกหยุดชั่วคราว เครื่องหมายถูกจะปรากฏขึ้นในฟิลด์ **หยุดการอัพเดตปัจจุบัน**
- **ดำเนินการเก็บถาวรต่อ** – ดำเนินการประมวลผลต่อสำหรับที่เก็บถาวรที่เลือกที่ถูกหยุดชั่วคราวอยู่ในขณะนี้
- **กลับรายการ** – กลับรายการที่เก็บถาวรที่เลือก คุณสามารถกลับรายการที่เก็บถาวรได้เฉพาะเมื่อฟิลด์ **สถานะ** ถูกตั้งค่าเป็น *เสร็จสิ้นแล้ว* เท่านั้น ถ้าที่เก็บถาวรถูกกลับรายการ เครื่องหมายถูกจะปรากฏขึ้นในฟิลด์ **กลับรายการ**
