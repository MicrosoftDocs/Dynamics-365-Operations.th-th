---
title: แก้ไขปัญหาการดําเนินงานสินค้าคงคลัง
description: หัวข้อนี้จะอธิบายวิธีการแก้ไขปัญหาที่คุณอาจพบขณะทำงานกับการดําเนินงานสินค้าคงคลัง
author: sherry-zheng
ms.date: 12/03/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2020-12-03
ms.dyn365.ops.version: Release 10.0.16
ms.openlocfilehash: 1198bc12830afa2ae2c5eb8e77413a9d8ef70c625823f676ab1965ff250c2443
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/05/2021
ms.locfileid: "6730404"
---
# <a name="troubleshoot-inventory-operations"></a>แก้ไขปัญหาการดําเนินงานสินค้าคงคลัง

[!include [banner](../includes/banner.md)]

หัวข้อนี้จะอธิบายวิธีการแก้ไขปัญหาที่คุณอาจพบขณะทำงานกับการดําเนินงานสินค้าคงคลัง

## <a name="i-cant-find-the-workflow-drop-down-dialog-box-for-inventory-journals"></a>ฉันไม่พบกล่องโต้ตอบแบบหล่นลง "ลำดับงาน" ของสมุดรายวันสินค้าคงคลัง

### <a name="issue-description"></a>คำอธิบายปัญหา

คุณไม่พบกล่องโต้ตอบแบบหล่นลง **ลำดับงาน** บนหน้าสมุดรายวัน หรือการดําเนินงานที่เกี่ยวข้องไม่พร้อมใช้งาน

ปัญหานี้อาจเกิดขึ้นได้สามเหตุผล ตามที่อธิบายไว้ในส่วนย่อยต่อไปนี้

### <a name="issue-resolution-1"></a>การแก้ไขปัญหา 1

หากปัญหามีผลกับผู้ใช้ทั้งหมด ระบบอาจเกิดปัญหาขึ้นเนื่องจากลำดับงานของการอนุมัติไม่ได้ถูกมอบหมายให้กับชื่อสมุดรายวัน เพื่อแก้ไขปัญหา ให้ทำตามขั้นตอนเหล่านี้

1. ไปที่ **การจัดการสินค้าคงคลัง &gt; การตั้งค่า &gt; รายชื่อสมุดรายวัน &gt; สินค้าคงคลัง**
1. ในบานหน้าต่างรายการ เลือกชื่อสมุดรายวันเพื่อเปิดการตั้งค่า
1. บนแท็บด่วน **ทั่วไป** ให้ตั้งค่าตัวเลือก **ลำดับงานการอนุมัติ** เป็น *ใช่* ยืนยันหากคุณได้รับพร้อมท์ให้ยืนยันการเปลี่ยนแปลง ให้เลือก **ใช่**
1. ในฟิลด์ **ลำดับงาน** เลือกลำดับงานที่คุณต้องการใช้สำหรับชื่อสมุดรายวันที่เลือก

### <a name="issue-resolution-2"></a>การแก้ไขปัญหา 2

ถ้าลำดับงานของคุณใช้รหัสที่เลือกเอง ปัญหาอาจเกิดขึ้นหลังจากที่คุณอัปเกรดระบบ ตัวอย่างเช่น ในลำดับงานในสมุดรายวัน ปุ่ม **ส่ง** อาจเป็นสีเทา ดังนั้นคุณจึงไม่สามารถเลือกเพื่ออนุมัติการส่งได้

ถ้าปุ่ม **ส่ง** เป็นสีเทา ลำดับงานของคุณอาจมีการปรับแต่งเอง ซึ่งหมายความว่าวิธีการของลำดับงาน `canSubmitToWorkflow()` ใน `FormDataUtil` ถูกขยายออกไป เมื่อต้องการแก้ไขปัญหานี้ ให้เปลี่ยนวิธีการที่คุณขยายวิธีการ `canSubmitToWorkflow()` เพื่อใช้โครงสร้างในตัวอย่างต่อไปนี้

```xpp
[ExtensionOf(formStr(InventJournalMovement))]
public final class InventJournalMovement_extension
{
    public boolean canSubmitToWorkflow()
    {
        boolean ret = YourLogicOfCanSubmitToWorkflow();

        return ret;
    }
}
```

### <a name="issue-resolution-3"></a>การแก้ไขปัญหา 3

หากปัญหามีผลกับผู้ใช้บางรายเท่านั้น ผู้ใช้ดังกล่าวอาจไม่มีสิทธิ์ความปลอดภัยที่ต้องใช้ในการรันการดําเนินงานของลำดับงานในสมุดรายวันสินค้าคงคลัง ตรวจสอบว่าผู้ใช้ที่ได้รับผลแต่ละรายมีสิทธิ์ความปลอดภัยของ *การรักษาลำดับงานของสมุดรายวันสินค้าคงคลัง* หรือไม่ โดยค่าเริ่มต้น สิทธิ์นี้จะได้รับมอบหมายเป็นหน้าที่ที่มีชื่อเดียวกัน และภาษีจะถูกใช้กับบทบาท *ผู้ปฏิบัติงานคลังสินค้า* และ *ผู้จัดการคลังสินค้า*

## <a name="my-inventory-journal-remains-in-system-locked-status-and-the-workflow-batch-job-doesnt-work"></a>สมุดรายวันสินค้าคงคลังของฉันยังคงอยู่ในสถานะที่ล็อคโดยระบบ และชุดงานของลำดับงานไม่ทำงาน

### <a name="issue-description"></a>คำอธิบายปัญหา

หนึ่งในสมุดรายวันสินค้าคงคลังของคุณถูกล็อคไว้โดยการดําเนินงานบางอย่างและยังไม่ถูกปล่อยออกใช้ ตัวอย่างเช่น ถ้าเกิดข้อผิดพลาดที่ไม่รู้จักระหว่างการลงรายการบัญชี (ซึ่งเป็นการดําเนินการล็อคระบบ) สมุดรายวันอาจยังคงอยู่ในสถานะที่ระบบล็อค ในกรณีนี้ ตัวจัดการรายการงานของลำดับงานจะส่งข้อผิดพลาดขณะตรวจสอบความถูกต้องของการล็อค

### <a name="issue-resolution"></a>การแก้ไขปัญหา

เข้าสู่ระบบอินสแตนซ์ SQL Server ของ Supply Chain Management และตรวจสอบว่า **InventJournalTable.SystemBlocked** ถูกตั้งค่าเป็น *1* หรือไม่ ถ้าใช่ ให้ตรวจสอบให้แน่ใจว่าสมุดรายวันไม่ควรอยู่ในสถานะล็อค แล้วรีเซ็ต **InventJournalTable.SystemBlocked** เป็น *0*

## <a name="my-inventory-journal-workflow-is-never-completed-and-the-journal-cant-be-edited-or-posted"></a>ลำดับงานของสมุดรายวันสินค้าคงคลังของฉันจะไม่มีวันเสร็จสมบูรณ์ และสมุดรายวันไม่สามารถแก้ไขหรือลงรายการบัญชีได้

### <a name="issue-description"></a>คำอธิบายปัญหา

หลังจากที่คุณส่งลำดับงานการอนุมัติสมุดรายวัน ลำดับงานจะหยุดตอบสนอง และคุณไม่สามารถแก้ไขหรือประมวลผลสมุดรายวันของคุณ

### <a name="issue-resolution"></a>การแก้ไขปัญหา

มีหลายเหตุผลว่าเพราะเหตุใดการประมวลผลลำดับงานจึงอาจไม่สามารถเสร็จสมบูรณ์ได้ ตรวจสอบปัญหาต่อไปนี้

- ไปที่ **การบริหารสินค้าคงคลัง &gt; การตั้งค่า &gt; ลำดับงานการบริหารสินค้าคงคลัง** และตรวจทานการตั้งค่าคอนฟิกของลำดับงานที่ได้รับผลกระทบ สำหรับข้อมูลเพิ่มเติม ให้ดู [ลำดับงานการอนุมัติสมุดรายวันสินค้าคงคลัง](inventory-journal-workflow.md)
- ลำดับงานอาจพบข้อยกเว้นหรือข้อผิดพลาด ทบทวนประวัติรายการงานของลำดับงานที่มีผลต่อการดูว่ารายการงานนั้นรวมข้อผิดพลาดของแอปพลิเคชันที่ยกเลิกหรือไม่
- สามารถอัพเดตหรือแก้ไขสมุดรายวันสินค้าคงคลังได้เฉพาะถ้าสมุดรายวันได้รับอนุมัติแล้วเท่านั้น ถ้าการเรียกคืนเปิดใช้งานอยู่ คุณสามารถลองเรียกคืนสมุดรายวันได้ การรันชุดงานลำดับงานอาจถูกระงับด้วยเหตุผลหลายประการ เหตุผลบางเหตุผลเหล่านี้อาจเกิดจากปัญหากรอบงานลำดับงาน

## <a name="inventory-journal-workflow-conditions-apply-only-at-the-journal-level-not-at-the-line-level"></a>เงื่อนไขลำดับงานของสมุดรายวันสินค้าคงคลังใช้เฉพาะที่ระดับสมุดรายวันเท่านั้น ไม่ใช่ในระดับรายการ

### <a name="issue-description"></a>คำอธิบายปัญหา

คุณอาจประสบกับปัญหานี้ตัวอย่างเช่น ถ้าคุณพยายามตั้งค่าเงื่อนไขลำดับงานของสมุดรายวันสินค้าคงคลังในยอดเงินต้นทุน คุณตั้งค่าเงื่อนไขเพื่อให้รันขั้นตอนที่ 1 เฉพาะเมื่อยอดต้นทุนน้อยกว่า 100 เท่านั้น จากนั้นคุณตั้งค่าเงื่อนไขอื่นเพื่อให้รันขั้นตอนที่ 2 เฉพาะเมื่อยอดต้นทุนมากกว่าหรือเท่ากับ 100 เท่านั้น จากนั้นเมื่อรันลำดับงาน ประวัติลำดับงานบรรทัดจะแสดงเพียงรายการเดียว และเงื่อนไขแรกจะมีการประเมินเป็น *จริง* เสมอ ไม่ว่าค่าที่ถูกส่งจะเป็นอย่างไรก็ตาม

### <a name="issue-workaround"></a>วิธีการแก้ปัญหา

ในรุ่นปัจจุบัน เงื่อนไขลำดับงานของสมุดรายวันสินค้าคงคลังใช้เฉพาะที่ระดับสมุดรายวันเท่านั้น ไม่ใช่ในระดับรายการ ลักษณะการทำงานนี้เกิดจากการออกแบบ ขอแนะนาว่าคุณควรตั้งค่าเงื่อนไขของคุณบนแอททริบิวต์ระดับสมุดรายวันเท่านั้น

## <a name="the-filter-pane-on-the-on-hand-list-page-doesnt-filter-results-as-i-expect"></a>บานหน้าต่างตัวกรองในหน้ารายการคงเหลือไม่ได้กรองข้อมูลผลลัพธ์ตามที่คาดไว้

### <a name="issue-description"></a>คำอธิบายปัญหา

ตัวกรองในบานหน้าต่างตัวกรองในหน้า **รายการคงเหลือ** ไม่ได้กรองข้อมูลผลลัพธ์ตามที่คุณคาดไว้

### <a name="issue-resolution"></a>การแก้ไขปัญหา

ลักษณะการทำงานนี้เกิดจากการออกแบบ

หน้า **รายการปริมาณคงคลังคงเหลือ** ประกอบด้วยตารางปริมาณคงคลังคงเหลือที่มีรายละเอียด ซึ่งรวมมิติที่มีอยู่ทั้งหมด อย่างไรก็ตาม รายการบนหน้านี้เป็นข้อมูลสรุป ดังนั้น จึงอาจรวมแถวจากตารางต้นทางตามค่ารวมตามมิติที่แสดง

ตัวกรองที่ตั้งค่าบานหน้าต่างตัวกรองจะนำไปใช้กับตารางต้นทาง ไม่ใช่รายการที่รวม ในบางครั้ง ลักษณะการดําเนินการนี้สามารถให้ผลลัพธ์ที่ไม่คาดคิดได้ ดังที่แสดงใน [ตัวอย่างเหล่านี้](inventory-on-hand-list.md#examples)

อย่างไรก็ตาม [ตัวกรองที่ระบุไว้ในกริด](inventory-on-hand-list.md#grid-filters) *จะถูก* ใช้กับรายการแบบรวม ตัวกรองเหล่านี้รวมทั้ง QuickFilter ที่ด้านบนของกริด และตัวกรองสำหรับแต่ละส่วนหัวของคอลัมน์

## <a name="the-unit-and-unit-quantity-arent-working-correctly-in-the-inventory-journal"></a>หน่วยและปริมาณหน่วยไม่ถูกต้องในสมุดรายวันสินค้าคงคลัง

### <a name="issue-description"></a>คำอธิบายปัญหา

คุณอาจพบปัญหาอย่างใดอย่างหนึ่งหรือทั้งสองอย่างต่อไปนี้ เมื่อคุณใช้งานหน่วยและปริมาณในสมุดรายวันสินค้าคงคลัง

- คุณไม่เห็นหน่วยหรือปริมาณต่อหน่วยในสมุดรายวันสินค้าคงคลังขณะที่ตั้งค่าหน่วยของการแปลงไว้เกี่ยวกับผลิตภัณฑ์ที่ปล่อยแล้ว และคุณไม่สามารถเปลี่ยนหน่วยในสมุดรายวันสินค้าคงคลังได้
- คุณจะเห็นฟิลด์ **ปริมาณ** และ **หน่วย** ในสมุดรายวันสินค้าคงคลัง แต่คุณไม่เห็นฟิลด์ **ปริมาณหน่วย** ถ้าคุณเปลี่ยนหน่วย ป้อนปริมาณ และลงรายการบัญชีสมุดรายวัน สมุดรายวันจะยังคงแสดงหน่วยวัดเดิมของปริมาณนั้น

### <a name="issue-resolution"></a>การแก้ไขปัญหา

เพื่อแก้ไขปัญหานี้ ให้ทำตามขั้นตอนเหล่านี้

1. ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** โปรดตรวจสอบให้แน่ใจว่าคุณลักษณะ *การใช้หน่วยวัดและปริมาณหน่วยในสมุดรายวันสินค้าคงคลัง* เปิดอยู่ ลักษณะการเช่นนี้จะเพิ่มฟิลด์ **หน่วย** และ **ปริมาณหน่วย** ลงในสมุดรายวัน
1. หลังจากที่เปิดคุณลักษณะ แล้ว ให้ใช้ฟิลด์ **ปริมาณ** **ปริมาณหน่วย** และ **หน่วย** ในลักษณะต่อไปนี้

    - **ปริมาณ** – ระบุปริมาณโดยใช้หน่วยเริ่มต้นที่กําหนดไว้เกี่ยวกับผลิตภัณฑ์ที่ปล่อย อย่างไรก็ตาม ตัวหน่วยเริ่มต้นเองไม่ได้แสดงไว้ที่นี่ ถ้ามีการตั้งค่าการแปลงระหว่างหน่วยเริ่มต้นและหน่วยที่เลือกในฟิลด์ **หน่วย** ฟิลด์ **ปริมาณ** จะถูกอัปเดตโดยอัตโนมัติ ตามการเลือกในฟิลด์ **ปริมาณหน่วย** และ **หน่วย**
    - **ปริมาณหน่วย** – ระบุปริมาณโดยใช้หน่วยที่เลือกไว้ในฟิลด์ **หน่วย**
    - **หน่วย** – เลือกหน่วยที่จะใช้กับค่าในฟิลด์ **ปริมาณหน่วย**

## <a name="i-receive-the-following-error-message-maximum-number-of-decimals-for-the-stock-keeping-unit-is-0"></a>ฉันได้รับข้อความแสดงข้อผิดพลาดต่อไปนี้: "จํานวนทศนิยมสูงสุดที่หน่วยการเก็บสินค้าคงคลังเป็น 0"

### <a name="issue-description"></a>คำอธิบายปัญหา

เมื่อคุณพยายามลงรายการบัญชีรายการความเคลื่อนไหวของสินค้าคงคลังหรือการจองสินค้าคงคลัง คุณจะได้รับข้อความแสดงข้อผิดพลาดต่อไปนี้: "จํานวนทศนิยมสูงสุดในหน่วยการเก็บสต็อกคือ 0"

ปัญหานี้จะเกิดขึ้นเมื่อปริมาณรายการความเคลื่อนไหวของสินค้าคงคลังถูกระบุเป็นค่าทศนิยมที่ตด้านล่างระดับความแน่นอนที่ฟิลด์นี้สนับสนุน ตัวอย่างเช่น มีการระบุปริมาณเป็น *0.5* สำหรับธุรกรรมสินค้าคงคลัง แต่มีการสนับสนุนเฉพาะปริมาณจํานวนเต็มเท่านั้น ดังนั้น ค่าควรเป็น *1* แทน *0.5*

### <a name="issue-resolution"></a>การแก้ไขปัญหา

1. รันสคริปต์ต่อไปนี้บนอินสแตนซ์ SQL Server ของคุณเพื่อปัดเศษปริมาณในธุรกรรมสินค้าคงคลัง สคริปต์นี้จะแก้ไขค่าในตาราง **inventTrans**

    ```sql
    update it set it.QTY = round(it.qty, decimalPrecisionValue) from inventtrans it where it.DATAAREAID='XXXX' and it.PARTITION=XXXXXX and it.qty <> round(it.qty, decimalPrecisionValue) and exists (select 'x' from INVENTTABLEMODULE a, unitofmeasure b where  a.unitid =b.SYMBOL and a.partition=it.partition and a.PARTITION=b.PARTITION and  MODULETYPE =0 and  b.DECIMALPRECISION=decimalPrecisionValue and a.DATAAREAID='XXXX' and a.ITEMID =it.ITEMID and it.DATAAREAID=a.DATAAREAID)
    ```

1. รันการตรวจสอบความสอดคล้องกันของปริมาณคงเหลือเมื่อตัวเลือก **แก้ไขข้อผิดพลาด** เปิดอยู่ การตรวจสอบนี้จะแก้ไขค่าในตาราง **inventSum**

> [!IMPORTANT]
> เราขอแนะนาเป็นอย่างยิ่งให้คุณแก้ไขสคริปต์อย่างถี่ถ้วนตามความต้องการของสภาพแวดล้อมของคุณ ทดสอบสคริปต์ในสภาพแวดล้อมการทดสอบ แล้วตรวจสอบข้อมูลที่เป็นผลลัพธ์ก่อนที่คุณจะรันสคริปต์ในสภาพแวดล้อมการผลิต


[!INCLUDE[footer-include](../../includes/footer-banner.md)]