---
title: การจองการแสดงผลสินค้าคงคลัง
description: หัวข้อนี้จะอธิบายวิธีการตั้งค่าคุณลักษณะการจองเพื่อสร้างการจอง ใช้การจอง และ/หรือยกเลิกการจองปริมาณสินค้าคงคลังที่ระบุโดยใช้การแสดงผลสินค้าคงคลัง
author: yufeihuang
ms.date: 08/02/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: yufeihuang
ms.search.validFrom: 2021-08-02
ms.dyn365.ops.version: 10.0.21
ms.openlocfilehash: 6c87018cbfbe22fbbc441a1a23aee0ac44af9ddc
ms.sourcegitcommit: b9c2798aa994e1526d1c50726f807e6335885e1a
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/13/2021
ms.locfileid: "7345160"
---
# <a name="inventory-visibility-reservations"></a>การจองการแสดงผลสินค้าคงคลัง

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]
[!INCLUDE [cc-data-platform-banner](../../includes/cc-data-platform-banner.md)]

หัวข้อนี้จะอธิบายวิธีการตั้งค่าคุณลักษณะการจองเพื่อสร้างการจอง ใช้การจอง และ/หรือยกเลิกการจองปริมาณสินค้าคงคลังที่ระบุโดยใช้การแสดงผลสินค้าคงคลัง

การจองจะเลือกปริมาณของสินค้าคงคลังที่จะใช้ในอนาคต เมื่อคุณสร้างการจองสินค้า ระบบจะป้องกันใบสั่งอื่นๆ ไม่ให้จองหรือใช้สินค้าที่จองไว้จนกว่าการจองจะถูกใช้หรือไม่ได้จองสินค้าไว้ การจองถูกสร้างขึ้น ใช้ และยกเลิกโดยใช้การเรียก API ไปยังบริการการแสดงผลสินค้าคงคลัง

คุณสามารถเลือกที่จะตั้งค่า Microsoft Dynamics 365 Supply Chain Management (และระบบอื่นๆ ของบุคคลที่สาม) เพื่อออฟเซ็ตปริมาณที่จองไว้โดยอัตโนมัติโดยใช้การแสดงผลสินค้าคงคลัง ปริมาณออฟเซ็ตจะถูกลบออกจากเรกคอร์ดการจองในการแสดงผลสินค้าคงคลัง

เมื่อคุณเปิดคุณลักษณะการจอง Supply Chain Management จะพร้อมที่จะออฟเซ็ตการจองสินค้าโดยอัตโนมัติซึ่งสร้างขึ้นโดยใช้การแสดงผลสินค้าคงคลัง

> [!NOTE]
> ฟังก์ชันออฟเซ็ตต้องการ Supply Chain Management รุ่น 10.0.22 หรือใหม่กว่า หากคุณต้องการใช้การจองการจองการแสดงผลสินค้าคงคลัง เราขอแนะนาให้คุณรอจนกว่าคุณได้อัปเกรด Supply Chain Management เป็นรุ่น 10.0.22 หรือใหม่กว่า

## <a name="turn-on-the-reservation-feature"></a>เปิดคุณลักษณะการจอง

หากต้องการเปิดคุณลักษณะการจอง ให้ทำตามขั้นตอนเหล่านี้

1. ใน Power Apps เปิด **การแสดงผลสินค้าคงคลัง**
1. เปิดหน้า **การตั้งค่าคอนฟิก**
1. บนแท็บ **การจัดการคุณลักษณะ** ให้เปิดคุณลักษณะ *OnHandReservation*
1. ลงชื่อเข้าใช้ Supply Chain Management
1. ไปที่ **การจัดการสินค้าคงคลัง \> การตั้งค่า \> พารามิเตอร์การรวมการแสดงผลสินค้าคงคลัง**
1. ภายใต้ **ออฟเซ็ตการจอง** ให้ตั้งค่าตัวเลือก **เปิดใช้งานออฟเซ็ตการจอง** เป็น *ใช่*

## <a name="use-the-reservation-feature-in-inventory-visibility"></a>ใช้คุณลักษณะการจองในการแสดงผลสินค้าคงคลัง

เมื่อคุณเรียก API การจอง ระบบจะบันทึกการจองสินค้าและปริมาณที่ระบุ คุณต้องกําหนดลำดับชั้นการจองและลงรายการบัญชีคำขอที่ตรงกับลำดับชั้นของการจอง การจองสามารถทำได้โดยการเรียกใช้ API การจองโดยตรง

### <a name="configure-the-reservation-hierarchy"></a>ตั้งค่าคอนฟิกลำดับชั้นการจอง

ลำดับชั้นการจองจะอธิบายถึงลำดับของมิติที่ต้องระบุเมื่อจอง โดยจะทำงานในลักษณะเดียวกับที่ลำดับชั้นของดัชนีจะทำงานสำหรับการสอบถามปริมาณคงคลังคงเหลือ

ลำดับชั้นการจองอาจแตกต่างจากลำดับชั้นของดัชนี ความเป็นอิสระนี้จะช่วยให้คุณสามารถดําเนินการจัดการประเภท โดยที่ผู้ใช้สามารถแบ่งมิติออกเป็นรายละเอียด เพื่อระบุความต้องการในการใช้การจองที่ละเอียดมากขึ้น

เมื่อต้องการตั้งค่าคอนฟิกลำดับชั้นการจองแบบชั่วคราวใน Power Apps ให้เปิดหน้า **การตั้งค่าคอนฟิก** แล้วบนแท็บ **การแม็ปการจองแบบชั่วคราว** ให้ตั้งค่าลำดับชั้นการจองด้วยการเพิ่มและ/หรือปรับเปลี่ยนมิติและระดับลำดับชั้นของมิติ

### <a name="call-the-reservation-api"></a>เรียก API การจอง

มีการจองในบริการการแสดงผลสินค้าคงคลังโดยส่งคำขอ POST ไปยัง URL ของบริการ เช่น `/api/environment/{environment-ID}/onhand/reserve`

สำหรับการจอง เนื้อหาของคำขอต้องมีรหัสองค์กร รหัสผลิตภัณฑ์ ปริมาณที่จองไว้ และมิติ เมื่อสร้างรหัสการจองเฉพาะให้กับเรกคอร์ดการจองแต่ละเรกคอร์ด เรกคอร์ดการจองมีชุดเฉพาะของรหัสผลิตภัณฑ์และมิติ

ต่อไปนี้เป็นตัวอย่างเนื้อหาของคำขอ

```json
# Url
# replace {RegionShortName} and {EnvironmentId} with your value
https://inventoryservice.{RegionShortName}-il301.gateway.prod.island.powerapps.com/api/environment/{EnvironmentId}/onhand/reserve

# Method
Post

# Header
# replace {access_token} with the one get from security service
Api-version: "1.0"
Content-Type: "application/json"
Authorization: "Bearer {access_token}"

# Body
{
    "id": "id-bike-0001",
    "organizationId": "usmf",
    "productId": "Bike",
    "dimensions": {
        "SiteId": "1",
        "LocationId": "11",
        "ColorId": "Red",
        "SizeId": "small"
    },
    "quantityDataSource": "iv",
    "modifier": "SoftReservOrdered",
    "quantity": 1,
    "ifCheckAvailForReserv": true
}
```

## <a name="offset-reservations-in-supply-chain-management"></a>ออฟเซ็ตการจองใน Supply Chain Management

สำหรับสถานะรายการความเคลื่อนไหวของสินค้าคงคลังที่มีตัวปรับเปลี่ยนออฟเซ็ตส่วนสํารองที่ระบุ การอัปเดตธุรกรรมจะหักลบเรกคอร์ดการจองที่สัมพันธ์กันเมื่อเป็นไปตามเงื่อนไขต่อไปนี้ทั้งหมด

- รหัสการจองบนรายการความเคลื่อนไหวของสินค้าคงคลังตรงกับรหัสการจองของเรกคอร์ดการจองในบริการการแสดงผลสินค้าคงคลัง
- มิติของรายการความเคลื่อนไหวของสินค้าคงคลังตรงกับมิติของเรกคอร์ดการจองในบริการการแสดงผลสินค้าคงคลัง
- การเปลี่ยนแปลงในสถานะรายการความเคลื่อนไหวของสินค้าคงคลังจะทริกเกอร์ออฟเซ็ตของการจองเมื่อสถานะรายการความเคลื่อนไหวของสินค้าคงคลังสะท้อนถึงข้อเท็จจริงที่ว่ากระบวนการใบสั่งเสร็จสมบูรณ์แล้วหรือข้ามไป

ปริมาณออฟเซ็ตจะเป็นไปตามปริมาณสินค้าคงคลังที่ระบุไว้ในรายการความเคลื่อนไหวของสินค้าคงคลัง ออฟเซ็ตจะไม่มีผลหากไม่มีปริมาณที่จองไว้เหลืออยู่ในบริการการแสดงผลสินค้าคงคลัง

> [!NOTE]
> ฟังก์ชันออฟเซ็ตมีให้ใช้งาน ณ รุ่น 10.0.22

### <a name="set-up-the-reserve-offset-modifier"></a>ตั้งค่าตัวปรับเปลี่ยนออฟเซ็ตส่วนสํารอง

ตัวปรับเปลี่ยนออฟเซ็ตของการสํารองจะระบุระยะการประมวลผลใบสั่งที่ทริกเกอร์ออฟเซ็ต ขั้นจะติดตามโดยสถานะรายการความเคลื่อนไหวของสินค้าคงคลังของใบสั่ง หากต้องการตั้งค่าตัวปรับเปลี่ยนออฟเซ็ตส่วนสํารอง ให้ปฏิบัติตามขั้นตอนเหล่านี้

1. ไปที่ **การจัดการสินค้าคงคลัง \> การตั้งค่า \> พารามิเตอร์การรวมการแสดงผลสินค้าคงคลัง \> ออฟเซ็ตการจอง**
1. ตั้งค่าฟิลด์ **ตัวปรับเปลี่ยนออฟเซ็ตการจอง** เป็นค่าอย่างใดอย่างหนึ่งต่อไปนี้:

    - *ในใบสั่ง* – ในสถานะ *ธุรกรรม* ใบสั่งจะส่งคำขอออฟเซ็ตเมื่อสร้างใบสั่ง
    - *จอง* - สำหรับสถานะ *จองธุรกรรมที่สั่งไว้* ใบสั่งจะส่งคำขอออฟเซ็ตเมื่อจอง เบิกสินค้า ลงรายการบัญชีบันทึกการจัดส่ง แล้วหรือออกใบแจ้งหนี้แล้ว คำขอจะถูกทริกเกอร์เพียงครั้งเดียว และในขั้นตอนแรกเมื่อกระบวนการดังกล่าวเกิดขึ้น

### <a name="set-up-reservation-ids"></a>ตั้งค่ารหัสการจอง

รหัสการจองจะระบุเรกคอร์ดการจองในการแสดงผลสินค้าคงคลังโดยไม่ซ้ำ ใน Supply Chain Management ผู้ใช้จะวางการจองสินค้าในบรรทัดใบสั่งเพื่อเลือกออฟเซ็ตของเรกคอร์ดการจองที่ตรงกัน

เมื่อต้องการตั้งค่ารหัสการจองใน Supply Chain Management ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. เปิดใบสั่งขาย (ตัวอย่างเช่น จากหน้า **ใบสั่งขายทั้งหมด**)
1. บนแท็บด่วน **รายการใบสั่งขาย** เลือก เพิ่มรายการใบสั่ง
1. บนแท็บด่วน **รายการใบสั่งขาย** บนแถบเครื่องมือ ให้เลือก **อัปเดตรายการ \> สินค้าคงคลัง \> การรวมการแสดงผลสินค้าคงคลัง**
1. ป้อนรหัสการจองที่เกี่ยวข้อง

การเปลี่ยนแปลงสถานะสินค้าคงคลังตรงกับการตั้งค่าตัวปรับเปลี่ยนออฟเซ็ต
