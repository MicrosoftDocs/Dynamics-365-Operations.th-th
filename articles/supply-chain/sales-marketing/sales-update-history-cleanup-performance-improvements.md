---
title: กำหนดการล้างข้อมูลประวัติการขาย
description: บทความนี้อธิบายวิธีที่คุณสามารถช่วยปรับปรุงประสิทธิภาพของระบบโดยการจัดกำหนดการงานการล้างข้อมูลประวัติการอัปเดตการขายเป็นระยะเพื่อเรียกใช้อย่างสม่ำเสมอ
author: myvakalo
ms.date: 08/09/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: myvakalo
ms.search.validFrom: 2021-09-29
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: e9a4dd5372afa8a0452449d1cb9121107e6e1610
ms.sourcegitcommit: 203c8bc263f4ab238cc7534d4dd902fd996d2b0f
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/23/2022
ms.locfileid: "9335517"
---
# <a name="schedule-sales-history-data-cleanup"></a>กำหนดการล้างข้อมูลประวัติการขาย

[!include [banner](../includes/banner.md)]

ในฐานะส่วนหนึ่งของการดําเนินงานมาตรฐาน Microsoft Dynamics 365 Supply Chain Management จะสร้างและจัดเก็บข้อมูลการอัปเดตประวัติการขายอย่างต่อเนื่อง เมื่อเวลาผ่านไป ข้อมูลประวัติการขายจํานวนมากที่ล้าสมัยอาจสะสมอยู่ในระบบของคุณ ข้อมูลสะสมนี้อาจก่อให้เกิดปัญหาด้านประสิทธิภาพและการทำงาน เมื่อลงรายการบัญชีเอกสารที่เกี่ยวข้องกับใบสั่งขาย (เอกสารเหล่านี้รวมถึงการยืนยันใบสั่งขาย บันทึกการจัดส่งของการขาย รายการเบิกสินค้าในการขาย และใบแจ้งหนี้) ดังนั้นคุณจึงควรตั้งค่าและจัดกำหนดการงาน *การล้างข้อมูลประวัติการอัปเดตการขาย* เป็นระยะเพื่อเรียกใช้อย่างสม่ำเสมอ งานนี้จะลบข้อมูลการอัปเดตประวัติการขายทั้งหมดที่ไม่ต้องการใช้อีกต่อไป

หากคุณใช้งาน *การล้างข้อมูลประวัติการอัปเดตการขาย* เป็นระยะ ขอแนะนำให้คุณเปิดใช้งานคุณลักษณะ *การปรับปรุงประสิทธิภาพด้วยการล้างข้อมูลประวัติการขาย* ซึ่งช่วยให้เรียกใช้งานได้มีประสิทธิภาพมากขึ้น (คุณยังสามารถเรียกใช้งานนี้ได้โดยไม่ต้องเปิดใช้งานคุณลักษณะนี้ด้วย)

## <a name="turn-on-the-sales-history-cleanup-features"></a>เปิดคุณลักษณะการล้างข้อมูลประวัติการขาย

หากต้องการตั้งค่าและใช้งาน *การล้างข้อมูลประวัติการอัปเดตการขาย* เป็นระยะพร้อมกับคุณลักษณะทั้งหมดที่อธิบายไว้ในบทความนี้ คุณต้องเปิดใช้งานคุณลักษณะ *การปรับปรุงประสิทธิภาพด้วยการล้างข้อมูลประวัติการขาย* และ *ล้างข้อมูลประวัติการอัปเดตการขายตามอายุ* ในการจัดการคุณลักษณะตามที่อธิบายในส่วนย่อยต่อไปนี้

### <a name="sales-history-cleanup-performance-improvements"></a>การปรับปรุงประสิทธิภาพการล้างประวัติการขาย

ชุดงานประจำงวด **การล้างข้อมูลประวัติการขาย** อาจใช้เวลานาน ถ้ารันในสภาพแวดล้อมที่มีปริมาณการอัปเดตการขายสูง ในสถานการณ์เหล่านี้ คุณลักษณะ *การปรับปรุงประสิทธิภาพการล้างข้อมูลประวัติการขาย* สามารถช่วยลดระยะเวลาการรันและปรับปรุงความน่าเชื่อถือได้

คุณลักษณะจะช่วยปรับปรุงงานล้างข้อมูลที่มีอยู่ในลักษณะต่างๆ ดังต่อไปนี้:

- โดยจะแบ่งการล้างข้อมูลออกเป็นชุดงาน (คุณสามารถเปลี่ยนขนาดชุดงานได้ผ่านการกำหนดเอง)
- โดยจะรันเป็นเวลาสูงสุด 2 ชั่วโมง (คุณสามารถเปลี่ยนระยะเวลาผ่านการกำหนดเองได้)
- หากเป็นไปได้ สิ่งนี้จะขยายความสามารถด้านฐานข้อมูลเวลาเพื่อลดการขัดแย้งของการล็อค และหลีกเลี่ยงการรวมตารางธุรกรรมระหว่างการล้างข้อมูล

หลังจากเปิดใช้งานคุณลักษณะ ชุดงาน **การล้างข้อมูลประวัติการอัปเดตการขาย** (**การขายและการตลาด \> งานรอบระยะเวลา \> การล้างข้อมูล \> การล้างข้อมูลประวัติการอัปเดตการขาย**) จะรันเหมือนกับก่อนหน้านั้น แต่ด้วยประสิทธิภาพที่ดีขึ้น และสูงสุด 2 ชั่วโมง ซึ่งหมายความว่าอาจต้องรันหลายครั้งเพื่อล้างข้อมูลทั้งหมดให้กับกรอบเวลาการคงไว้เฉพาะ

ก่อนที่คุณจะสามารถใช้คุณลักษณะนี้ได้ คุณต้องเปิดคุณลักษณะนี้ในระบบของคุณก่อน ผู้ดูแลระบบสามารถใช้การตั้งค่า [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) เพื่อตรวจสอบสถานะของคุณลักษณะและเปิดใช้งาน ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** มีการแสดงรายการคุณลักษณะในวิธีต่อไปนี้:

- **โมดูล:** *การขายและการตลาด*
- **ชื่อคุณลักษณะ:** *การปรับปรุงประสิทธิภาพการล้างข้อมูลประวัติการขาย*

### <a name="clean-up-sales-update-history-based-on-age"></a>ล้างข้อมูลประวัติการอัปเดตการขายตามอายุ

คุณลักษณะ *ล้างข้อมูลประวัติการอัปเดตการขายตามอายุ* ช่วยให้คุณสามารถตั้งค่าอายุสูงสุดของเรกคอร์ดที่จะเก็บเมื่อเรียกใช้งานประจำวงด *การล้างข้อมูลประวัติการอัปเดตการขาย* เรกคอร์ดที่เก่ากว่าจะถูกลบ คุณลักษณะนี้มีประโยชน์เมื่อคุณตั้งค่าให้เรียกใช้งานเป็นระยะๆ เนื่องจากอายุจะถูกคํานวณโดยสัมพันธ์กับวันที่เรียกใช้งานเสมอ ถ้าคุณไม่ได้ใช้คุณลักษณะนี้ คุณสามารถตั้งได้เฉพาะวันที่เฉพาะของเรกคอร์ดที่เก่าที่สุดที่จะเก็บไว้เท่านั้น

การใช้คุณลักษณะนี้ ต้องเปิดคุณลักษณะนี้ในระบบของคุณก่อน เริ่มจาก Supply Chain Management เวอร์ชัน 10.0.29 คุณลักษณะนี้เป็นแบบบังคับ และไม่สามารถปิดได้ ถ้าคุณเรียกใช้รุ่นที่เก่ากว่า 10.0.29 ผู้ดูแลระบบสามารถเปิดหรือปิดฟังก์ชันนี้ได้โดยค้นหาคุณลักษณะ *ล้างข้อมูลประวัติการอัปเดตการขายตามอายุ* ในพื้นที่ทำงาน [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)

## <a name="set-up-and-schedule-the-sales-history-cleanup-periodic-task"></a>ตั้งค่าและจัดกำหนดการงานประจำงวดการล้างข้อมูลประวัติการขาย

หากต้องการตั้งค่าและจัดกำหนดการงานประจำงวด *การล้างข้อมูลประวัติการขาย* ให้ทำตามขั้นตอนเหล่านี้

1. วิเคราะห์ความต้องการทางธุรกิจของคุณ เพื่อพิจารณาว่าคุณต้องเก็บรักษาข้อมูลการลงรายการบัญชีใบสั่งขายแบบประวัติกี่วัน โดยปกติ ขอแนะนาว่าคุณควรเรียกใช้งานการล้างข้อมูลทุกสามเดือน และสูงสุดทุกหกเดือน
1. ไปที่ **การขายและการตลาด \> งานประจำงวด \> การล้างข้อมูล \> การล้างข้อมูลประวัติการอัปเดตการขาย**
1. ในกล่องโต้ตอบ **ล้างข้อมูลประวัติการอัปเดตการขาย** บนแท็บด่วน **พารามิเตอร์** ให้ตั้งค่าฟิลด์ต่อไปนี้:

    - **ล้างข้อมูล** – เลือกค่าใดค่าหนึ่งต่อไปนี้เพื่อระบุชนิดของเรกคอร์ดที่จะล้างข้อมูล

        - **ดำเนินการแล้ว** – ลบเฉพาะเรกคอร์ดที่ประมวลผลโดยสมบูรณ์แล้วเท่านั้น เนื่องจากคุณไม่น่าจะใช้งานเรกคอร์ดเหล่านี้อีก ตัวเลือกนี้จึงปลอดภัยที่สุด
        - **ดำเนินการแล้วและมีข้อผิดพลาด** – ลบทั้งเรกคอร์ดและเรกคอร์ดที่ประมวลผลโดยสมบูรณ์ซึ่งเกิดข้อผิดพลาด ตัวเลือกนี้จะใช้บ่อยที่สุด คุณอาจต้องการตรวจสอบและแก้ไขเรกคอร์ดที่ผิดพลาดแทนที่จะล้างข้อมูลโดยอัตโนมัติ อย่างไรก็ตาม หลายบริษัทเลือกที่จะล้างข้อมูลเรกคอร์ดเหล่านี้ด้วยหลังจากผ่านไปประมาณหนึ่งเดือน เนื่องจากอาจไม่มีความเกี่ยวข้องอีกต่อไปในขณะนั้น
        - **ทั้งหมด** – ลบเรกคอร์ดที่ดำเนินการแล้ว มีข้อผิดพลาด และเรกคอร์ดที่กำลังรอ เรกคอร์ดที่กำลังรอใช้ได้ แต่ยังไม่ได้ประมวลผลอย่างครบถ้วน ในกรณีส่วนใหญ่ คุณอาจไม่ต้องการให้ลบออกโดยอัตโนมัติ อย่างไรก็ตาม ในบางสถานการณ์ คุณอาจเลือกที่จะลบเรกคอร์ดนั้นโดยอัตโนมัติหลังจากจํานวนเวลาที่ระบุผ่านไป

    - **รักษาเรกคอร์ดตามอายุ** – ระบุว่าคุณต้องการล้างข้อมูลเรกคอร์ดตามอายุของเรกคอร์ดในวันที่เรียกใช้งานหรือลบเรกคอร์ดที่สร้างขึ้นก่อนหน้าวันที่กำหนดตายตัวหรือไม่ ถ้าคุณจัดกำหดนการล้างข้อมูลอีกครั้งเป็นงานที่เกิดซ้ำ คุณควรตั้งค่าตัวเลือกนี้เป็น *ใช่* เนื่องจากอายุจะถูกคํานวณโดยสัมพันธ์กับวันที่เมื่อเรียกใช้งานเสมอ

        - ตั้งค่าตัวเลือกนี้เป็น *ใช่* เพื่อเปิดใช้งานฟิลด์ **อายุสูงสุด** คุณใช้ฟิลด์นี้เพื่อระบุอายุสูงสุดของเรกคอร์ดที่จะเก็บทุกครั้งที่เรียกใช้งาน ฟิลด์ **สร้างจนถึง** จะถูกละเว้น
        - ตั้งค่าตัวเลือกนี้เป็น *ไม่* เพื่อเปิดใช้งานฟิลด์ **สร้างจนถึง** คุณใช้ฟิลด์นี้เพื่อระบุอายุการสร้างที่เก่าที่สุดของเรกคอร์ดที่จะเก็บเมื่อเรียกใช้งาน ฟิลด์ **อายุสูงสุด** จะถูกละเว้น

    - **สร้างจนถึง** – การตั้งค่านี้จะใช้เฉพาะเมื่อตัวเลือก **เก็บเรกคอร์ดตามอายุ** ตั้งค่าเป็น *ไม่* ระบุอายุการสร้างที่เก่าที่สุดของเรกคอร์ดที่จะเก็บเมื่อเรียกใช้งาน เรกคอร์ดที่สร้างก่อนวันที่นี้จะถูกลบ
    - **อายุสูงสุด** – การตั้งค่านี้จะใช้เฉพาะเมื่อตัวเลือก **เก็บเรกคอร์ดตามอายุ** ตั้งค่าเป็น *ใช่* ระบุอายุสูงสุด (เป็นวัน) ของเรกคอร์ดที่จะเก็บทุกครั้งที่เรียกใช้งาน เรกคอร์ดที่เก่ากว่าจะถูกลบ

1. บนแท็บด่วน **รันในเบื้องหลัง** ให้ระบุว่าจะเรียกใช้งานนอย่างไร เมื่อใด และบ่อยครั้งเพียงใด ใช้การตั้งค่าเหล่านี้เพื่อดําเนินการจัดกําหนดการที่คุณกําหนดไว้ในขั้นตอนที่ 1 ฟิลด์นี้จะทำงานเช่นเดียวกับ [ชุดงาน](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) ชนิดอื่นๆ ใน Supply Chain Management
1. เลือก **ตกลง** เพื่อใช้การตั้งค่าของคุณ และปิดกล่องโต้ตอบ
