---
title: คำนวณยอดเงินสุทธิต่อรายการอีกครั้งเมื่อนําเข้าใบสั่งขาย ใบเสนอราคา และการส่งคืน
description: บทความนี้จะอธิบายว่าระบบจะคำนวณค่ายอดเงินสุทธิต่อรายการอีกครั้งอย่างไร เมื่อนําเข้าใบสั่งขาย ใบเสนอราคา และการส่งคืน และยังอธิบายวิธีการควบคุมลักษณะการทำงานใน Microsoft Dynamics 365 Supply Chain Management รุ่นต่างๆ ด้วย
author: Henrikan
ms.date: 06/08/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: henrikan
ms.search.validFrom: 2022-06-08
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: ce34a6be7bc3d14e23bdd8769aa71dc035b983b3
ms.sourcegitcommit: c98d55a4a6e27239ae6b317872332f01cbe8b875
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/02/2022
ms.locfileid: "9220620"
---
# <a name="recalculate-line-net-amounts-when-importing-sales-orders-quotations-and-returns"></a>คำนวณยอดเงินสุทธิต่อรายการอีกครั้งเมื่อนําเข้าใบสั่งขาย ใบเสนอราคา และการส่งคืน

[!include [banner](../includes/banner.md)]

บทความนี้จะอธิบายว่าระบบจะคำนวณค่ายอดเงินสุทธิต่อรายการอีกครั้งอย่างไร เมื่อนําเข้าใบสั่งขาย ใบเสนอราคา และการส่งคืน และยังอธิบายวิธีการควบคุมลักษณะการทำงานใน Microsoft Dynamics 365 Supply Chain Management รุ่นต่างๆ ด้วย

## <a name="how-updates-to-net-line-amounts-are-calculated-on-import"></a>วิธีการคํานวณการอัปเดตยอดเงินสุทธิต่อรายการเมื่อนําเข้า

Supply Chain Management รุ่น 10.0.23 นำ [bugfix 604418](https://fix.lcs.dynamics.com/issue/results/?q=604418) มาใช้ bugfix นี้เปลี่ยนแปลงเงื่อนไขที่ฟิลด์ **จํานวนเงินสุทธิ** ในบรรทัดสามารถอัปเดตหรือคํานวณได้ใหม่เมื่ออัปเดตใบสั่งขาย การส่งคืน และใบเสนอราคาที่มีอยู่จะถูกนําเข้า ในรุ่น 10.0.29 คุณสามารถแทนที่ bugfix นี้ได้โดยการเปิดใช้คุณลักษณะ *คํานวณยอดเงินสุทธิต่อรายการเมื่อนําเข้า* คุณลักษณะนี้ยังมีผลคล้ายกัน แต่จะมีการตั้งค่าแบบสากลที่ช่วยให้คุณสามารถย้อนกลับไปที่ลักษณะการทำงานเก่าได้ถ้าคุณต้องการ แม้ว่าลักษณะการทำงานใหม่ช่วยให้ระบบต้องทำงานอย่างถูกต้องขึ้น แต่ลักษณะดังกล่าวอาจก่อให้เกิดผลลัพธ์ที่ไม่คาดคิดในสถานการณ์เฉพาะที่ตรงตามเงื่อนไขต่อไปนี้ทั้งหมด:

- ข้อมูลที่อัปเดตเรกคอร์ดที่มีอยู่จะถูกนําเข้าผ่านทาง *บรรทัดใบสั่งขาย V2* *บรรทัดใบเสนอราคาขาย V2* หรือเอนทิตี *บรรทัดใบสั่งส่งคืนสินค้า* โดยใช้ Open Data Protocol (OData) รวมถึงสถานการณ์ที่คุณใช้การรวมแบบสองทิศทาง นําเข้า/ส่งออกผ่าน Excel และการรวมของบุคคลที่สามบางอย่าง
- [นโยบายการประเมินข้อตกลงทางการค้า](/dynamicsax-2012/appuser-itpro/trade-agreement-evaluation-policies-white-paper) ที่ใช้สร้างนโยบายการเปลี่ยนแปลงที่จํากัดการอัปเดตฟิลด์ **ยอดเงินสุทธิ** บนรายการใบสั่งขาย บรรทัดใบเสนอราคาขาย และ/หรือรายการใบสั่งส่งคืนสินค้า
- ข้อมูลที่นําเข้าจะรวมถึงการเปลี่ยนแปลงที่ฟิลด์ **จํานวนเงินสุทธิ** บนบรรทัด หรือการเปลี่ยนแปลง (เช่น ราคาต่อหน่วย ปริมาณ หรือส่วนลด) ซึ่งจะทําให้ค่าของฟิลด์ **จํานวนเงินสุทธิ** ในบรรทัดถูกควบยอดใหม่ให้กับเรกคอร์ดบรรทัดที่มีอยู่อย่างน้อยหนึ่งเรกคอร์ด

ในสถานการณ์ดังกล่าว ผลของนโยบายการประเมินข้อตกลงทางการค้าคือ เพื่อจํากัดการอัพเดตฟิลด์ **ยอดเงินสุทธิ** ในบรรทัด ข้อจํากัดนี้เรียกว่า *นโยบายการเปลี่ยนแปลง* เนื่องจากนโยบายนี้ เมื่อคุณใช้อินเทอร์เฟสผู้ใช้เพื่อแก้ไขหรือคำนวณฟิลด์นี้ใหม่ ระบบจะขอให้คุณยืนยันว่าคุณต้องการเป็นผู้เปลี่ยนแปลงหรือไม่ อย่างไรก็ตาม เมื่อคุณนําเข้าเรกคอร์ด ระบบต้องเลือกให้คุณ ก่อนรุ่น 10.0.23 ระบบจะไม่เปลี่ยนยอดเงินสุทธิต่อรายการเสมอ ยกเว้นว่ายอดเงินสุทธิของบรรทัดขาเข้าคือ 0 (ศูนย์) อย่างไรก็ตาม ในรุ่นที่ใหม่กว่า ระบบจะอัปเดตหรือกรองยอดเงินสุทธิใหม่ตามความต้องการเสมอ เว้นแต่ระบบจะสั่งไว้อย่างชัดแจ้งว่าไม่อนุญาต แม้ว่าลักษณะการทำงานใหม่จะมีตรรกะมากขึ้น แต่อาจทําให้เกิดปัญหาแก่คุณถ้าคุณรันกระบวนการหรือการรวมซึ่งสันนิษฐานลักษณะการทำงานที่เก่ากว่าอยู่ หัวข้อนี้จะอธิบายวิธีการแปลงกลับเป็นลักษณะการทำงานเก่าถ้าคุณต้องการ

## <a name="control-calculations-of-line-net-amounts-in-versions-10029-and-later"></a>ควบคุมการคํานวณยอดเงินสุทธิต่อรายการในรุ่น 10.0.29 และรุ่นที่ใหม่กว่า

Supply Chain Management 10.0.29 นําคุณลักษณะที่ชื่อ *คํานวณยอดเงินสุทธิต่อรายการเมื่อนําเข้า* มาใช้ คุณลักษณะนี้จะเพิ่มตัวเลือกที่มีชื่อว่า **คํานวณจํานวนเงินสุทธิต่อรายการ** ในหน้า **พารามิเตอร์บัญชีลูกหนี้** ตัวเลือกนี้ช่วยให้คุณสามารถเลือกระหว่างลักษณะการทำงานใหม่และลักษณะการทำงานเดิมเพื่อคํานวณยอดเงินสุทธิต่อรายการเมื่อนําเข้า

### <a name="turn-the-calculate-line-net-amount-on-import-feature-on-or-off"></a>เปิดหรือปิดคุณลักษณะคํานวณยอดเงินสุทธิต่อรายการเมื่อนําเข้า

เมื่อคุณอัปเดตเป็นรุ่น 10.0.29 คุณลักษณะ *คำนวณยอดเงินสุทธิต่อรายการเมื่อนําเข้า* จะเปิดตามค่าเริ่มต้น และตัวเลือก **คํานวณยอดเงินสุทธิต่อรายการใหม่** จะถูกตั้งค่าเป็น *ใช่* ในตอนเริ่มต้น การตั้งค่า *ใช่* จะสอดคล้องกับลักษณะการทำงานมาตรฐานใหม่ ซึ่งจะตรงกับลักษณะการทำงานของระบบเมื่อปิดคุณลักษณะ ยกเว้นในกรณีของฟังก์ชันของ [พารามิเตอร์ CalculateLineAmount](#CalculateLineAmount) ตามที่อธิบายไว้ในภายหลังในส่วนนี้ การตั้งค่า *ไม่* สอดคล้องกับลักษณะการทำงานของระบบก่อนรุ่น 10.0.23 และโดยส่วนใหญ่แล้ว จะสนับสนุนสถานการณ์การรวมเดิม

ผู้ดูแลระบบสามารถเปิดหรือปิดคุณลักษณะ *คำนวณยอดเงินสุทธิในรายการเมื่อนำเข้า* เมื่อเปิดหรือปิดคุณลักษณะโดยใช้ [พื้นที่ทำงานการจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)

### <a name="set-the-calculate-line-net-amount-option"></a>ตั้งค่าตัวเลือกคำนวณยอดเงินสุทธิในรายการเมื่อนำเข้า

เมื่อเปิดคุณลักษณะ *คำนวณยอดเงินสุทธิในรายการเมื่อนำเข้า* คุณสามารถตั้งค่าตัวเลือก **คํานวณยอดเงินสุทธิต่อรายการ** ตามขั้นตอนต่อไปนี้

1. ไปที่ **บัญชีลูกหนี้ \> การตั้งค่า \> พารามิเตอร์บัญชีลูกหนี้**
1. บนแท็บ **ราคา** บนแท็บด่วน **การคํานวณยอดเงินสุทธิต่อรายการผ่านการรวม** ให้ตั้งค่าตัวเลือก **คํานวณยอดเงินสุทธิต่อรายการ** เป็นค่าอย่างใดอย่างหนึ่งต่อไปนี้

    - *ใช่* – ระบบจะคำนวณเวลาและอัปเดตจํานวนเงินในบรรทัดอีกครั้งเสมอเมื่อต้องการ (ดังนั้น จะละเว้นนโยบายการประเมินข้อตกลงทางการค้า)
    - *ไม่* – ถ้ายอดเงินสุทธิที่มีอยู่หรือขาเข้าของบรรทัดใดๆ คือ 0 (ศูนย์) ค่าของบรรทัดนั้นจะถูกคำนวณใหม่ตามค่าอื่นๆ (เช่น ราคาต่อหน่วย ปริมาณ และส่วนลด) ถ้ายอดเงินสุทธิที่มีอยู่หรือขาเข้าแตกต่างจาก 0 (ศูนย์) และนโยบายการเปลี่ยนแปลงจะถูกตั้งค่าบนฟิลด์ **ยอดเงินสุทธิ** ในบรรทัด ฟิลด์นี้จะไม่ได้รับการคำนวณหรืออัปเดตใหม่ แม้ว่าการเปลี่ยนแปลงที่เข้ามาที่ราคาบรรทัด ปริมาณ และ/หรือส่วนลดจะหมายความว่าผลรวมต่อรายการควรได้รับการคำนวณใหม่ ลักษณะการทำงานนี้จะตรงกับรุ่น 10.0.22

### <a name="how-the-calculate-line-net-amount-on-import-feature-affects-the-calculatelineamount-parameter"></a><a name="CalculateLineAmount"></a>การคํานวณยอดเงินสุทธิต่อรายการเมื่อนําเข้ามีผลกระทบต่อพารามิเตอร์ CalculateLineAmount อย่างไร

เมื่อเปิดคุณลักษณะ *คำนวณยอดเงินสุทธิในรายการเมื่อนำเข้า* ค่าของพารามิเตอร์นั้น `CalculateLineAmount` สำหรับตาราง `SalesLine`และ `SalesQuotationLine` จะไม่มีผล ลักษณะการทำงานจะถูกควบคุมแบบสากลโดยตัวเลือก **คํานวณยอดเงินสุทธิต่อรายการ** ซึ่งอธิบายไว้ในส่วนก่อนหน้านี้ ดังนั้น เมื่อเปิดคุณลักษณะ คุณต้องไม่ขึ้นต่อกันกับค่าใดๆ บน `CalculateLineAmount`

เมื่อปิดคุณลักษณะ *คำนวณยอดเงินสุทธิในรายการเมื่อนำเข้า* พารามิเตอร์`CalculateLineAmount` ของตาราง `SalesLine` และ `SalesQuotationLine` จะทำงานเหมือนกับใน Supply Chain Management รุ่น 10.0.23 ถึง 10.0.28 ตามที่อธิบายไว้ในส่วนถัดไป

## <a name="control-line-net-amount-calculations-in-versions-10028-and-earlier"></a>ควบคุมการคํานวณยอดเงินสุทธิต่อรายการในรุ่น 10.0.28 และรุ่นก่อนหน้า

เมื่อ [bugfix 604418](https://fix.lcs.dynamics.com/issue/results/?q=604418) นำมาใช้ในรุ่น 10.0.23 ก็จะเริ่มสามารถเลือกวิธีการที่แต่ละเอนทิตี้ข้อมูลที่เกี่ยวข้องควรควรใช้เมื่อแก้ไขยอดเงินสุทธิต่อรายการหรือต้องได้รับการคำนวณใหม่เนื่องจากการเปลี่ยนแปลงอื่นๆ (เช่น ราคาสินค้าที่อัปเดต) คุณสามารถควบคุมลักษณะการทำงานเช่นนี้ด้วยการตั้งค่าพารามิเตอร์ `CalculateLineAmount` ใหม่ให้กับแต่ละบรรทัดเป็นค่าใดค่าหนึ่งต่อไปนี้ในไฟล์ที่นําเข้า

- **`CalculateLineAmount` = *1*** – ฟิลด์ **จํานวนเงินสุทธิ** ในบรรทัดจะถูกคำนวณและอัปเดตใหม่เสมอ ไม่ว่านโยบายการเปลี่ยนแปลงจะมีการตั้งค่าไว้หรือไม่และค่าของยอดเงินสุทธิในบรรทัดที่เข้ามาหรือที่มีอยู่จะเป็นอย่างไรก็ตาม
- **`CalculateLineAmount` = *0*** – ถ้ายอดเงินสุทธิที่มีอยู่หรือขาเข้าของบรรทัดใดๆ คือ 0 (ศูนย์) ค่าของบรรทัดนั้นจะถูกคำนวณใหม่ตามค่าอื่นๆ (เช่น ราคาต่อหน่วย ปริมาณ และส่วนลด) ถ้ายอดเงินสุทธิที่มีอยู่หรือขาเข้าแตกต่างจาก 0 (ศูนย์) และนโยบายการเปลี่ยนแปลงมีการตั้งค่าอยู่บนฟิลด์ **ยอดเงินสุทธิ** ในบรรทัด ฟิลด์นี้จะไม่ถูกคำนวณใหม่หรืออัปเดต  

ลักษณะการทำงานของระบบจะขึ้นอยู่กับรุ่นของ Supply Chain Management ของคุณ

- ในรุ่น 10.0.22 และก่อนหน้านั้น ระบบจะตั้งค่า `CalculateLineAmount` เป็น *0* เสมอ และไม่มีวิธีใดที่จะสามารถตั้งค่าเป็น `CalculateLineAmount` *1* ได้
- ในรุ่น 10.0.23 ถึง 10.0.28 ระบบจะตั้งค่า `CalculateLineAmount` เป็น *1* ให้กับรายการทั้งหมดที่มีการตั้งค่าเป็น *0* ในไฟล์นําเข้าอย่างชัดแจ้ง
