---
title: "ซิงโครไนส์ส่วนหัวและรายการของใบสั่งขายโดยตรงจาก Finance and Operations ไปยัง Sales"
description: "หัวข้อนี้กล่าวถึงเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์ส่วนหัวและรายการของใบสั่งขายโดยตรงจาก Microsoft Dynamics 365 for Finance and Operations, Enterprise edition ไปยัง Microsoft Dynamics 365 for Sales"
author: ChristianRytt
manager: AnnBe
ms.date: 10/25/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: 
audience: Application User, IT Pro
ms.reviewer: yuyus
ms.search.scope: Core, Operations
ms.custom: 
ms.assetid: 
ms.search.region: global
ms.search.industry: 
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.translationtype: HT
ms.sourcegitcommit: 2771a31b5a4d418a27de0ebe1945d1fed2d8d6d6
ms.openlocfilehash: cc0be50552ae680ba5291e72b7c482ee67e1e70e
ms.contentlocale: th-th
ms.lasthandoff: 11/03/2017

---

# <a name="synchronize-sales-order-headers-and-lines-directly-from-finance-and-operations-to-sales"></a>ซิงโครไนส์ส่วนหัวและรายการของใบสั่งขายโดยตรงจาก Finance and Operations ไปยัง Sales

[!include[banner](../includes/banner.md)]

หัวข้อนี้กล่าวถึงเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์ส่วนหัวและรายการของใบสั่งขายโดยตรงจาก Microsoft Dynamics 365 for Finance and Operations, Enterprise edition ไปยัง Microsoft Dynamics 365 for Sales

## <a name="data-flow-in-prospect-to-cash"></a>โฟลว์ข้อมูลทในผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสด

โซลูชันผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสด ใช้คุณลักษณะการรวมข้อมูลเพื่อซิงโครไนส์ข้อมูลระหว่างอินสแตนซ์ของ Finance and Operations และ Sales เท็มเพลตผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสดที่พร้อมใช้งานกับคุณลักษณะการรวมข้อมูล จะเปิดใช้งานขั้นตอนของข้อมูลเกี่ยวกับบัญชี ผู้ติดต่อ ผลิตภัณฑ์ ใบเสนอราคาขาย ใบสั่งขาย และใบแจ้งหนี้การขายระหว่าง Finance and Operations และ Sales ภาพประกอบต่อไปนี้แสดงวิธีการซิงโครไนส์ข้อมูลระหว่าง Finance and Operations และ Sales

[![โฟลว์ข้อมูลทในผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสด](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)

## <a name="templates-and-tasks"></a>เท็มเพลตและงาน

เมื่อต้องการเข้าถึงเท็มเพลตที่พร้อมใช้งาน เปิด [ศูนย์การจัดการ PowerApps](https://preview.admin.powerapps.com/dataintegration) เลือก **โครงการ** จากนั้น ในมุมบนด้านขวา เลือก **โครงการใหม่** เพื่อเลือกเท็มเพลตสาธารณะ

เท็มเพลตและงานพื้นฐานต่อไปนี้จะถูกใช้ในการซิงโครไนส์ส่วนหัวและรายการของใบสั่งขายจาก Finance and Operations ไปยัง Sales

- **ชื่อของเท็มเพลตในการรวมข้อมูล:** ใบสั่งขาย (Fin and Ops ไปยัง Sales) - ตรง
- **ชื่อของงานในโครงการการรวมข้อมูล:**

    - OrderHeader
    - OrderLine

จำเป็นต้องทำงานการซิงโครไนส์ต่อไปนี้ก่อน จึงจะสามารถดำเนินการซิงโครไนส์ของส่วนหัวและรายการของใบแจ้งหนี้การขายได้:

- ผลิตภัณฑ์ (Fin and Ops ไปยัง Sales) - ตรง
- บัญชี (Sales ไปยัง Fin and Ops) - ตรง (ถ้าใช้)
- ผู้ติดต่อไปยังลูกค้า (Sales ไปยัง Fin and Ops) - ตรง (ถ้าใช้)

## <a name="entity-set"></a>การตั้งค่าเอนทิตี้

| Finance and Operations  | ใบสั่งขาย             |
|-------------------------|-------------------|
| ส่วนหัวของใบสั่งขาย CDS | SalesOrders       |
| รายการในใบสั่งขาย CDS   | SalesOrderDetails |

## <a name="entity-flow"></a>ขั้นตอนเอนทิตี้

ใบสั่งขายจะถูกสร้างขึ้นใน Finance and Operations และซิงโครไนส์ไปยัง Sales

ตัวกรองในเท็มเพลตช่วยให้รับรองว่ามีเฉพาะใบสั่งขายที่เกี่ยวข้องเท่านั้นที่รวมอยู่ในการซิงโครไนส์:

- ในใบสั่งขาย ทั้งลูกค้าที่สั่งซื้อและที่ออกใบแจ้งหนี้ที่มีต้นกำเนิดมาจาก Sales เท่านั้น จะรวมอยู่ในการซิงโครไนส์ ใน Finance and Operations ฟิลด์ **OrderingCustomerIsExternallyMaintained** และ **InvoiceCustomerIsExternallyMaintained** ถูกใช้ในการติดตามการซิงโครไนส์ในเอนทิตีข้อมูล
- ใบสั่งขายใน Finance and Operations ต้องได้รับการยืนยัน เฉพาะใบสั่งขายที่ยืนยันแล้วหรือใบสั่งขายที่มีสถานะการประมวลผลสูง เช่น **จัดส่งแล้ว** หรือ **ออกใบแจ้งหนี้แล้ว** จะถูกซิงค์ไปยัง Sales
- หลังจากสร้างหรือปรับเปลี่ยนใบสั่งขาย ชุดงาน **คำนวณยอดขายรวม** ใน Finance and Operations จะต้องถูกดำเนินการ ใบสั่งขายที่ซึ่งยอดขายรวมถูกคำนวณเท่านั้น จะถูกซิงโครไนส์กับ Sales

> [!NOTE]
> ในขณะนี้ ภาษีที่เกี่ยวข้องกับค่าธรรมเนียมบนส่วนหัวของใบสั่งขาย ไม่ได้รวมอยู่ในการซิงโครไนส์จาก Finance and Operations ไปยัง Sales Sales ไม่ได้สนับสนุนข้อมูลภาษีที่ระดับส่วนหัว อย่างไรก็ตาม ภาษีที่เกี่ยวข้องกับค่าธรรมเนียมในระดับรายการจะรวมอยู่ในการซิงโครไนส์

## <a name="prospect-to-cash-solution-for-sales"></a>โซลูชันผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสดสำหรับ Sales

ฟิลด์ใหม่ได้ถูกเพิ่มลงในเอนทิตี้ **ใบสั่ง** และแสดงขึ้นบนหน้า:

- **ถูกรักษาไว้ภายนอก** – ตั้งค่าตัวเลือกนี้เป็น **ใช่** เมื่อใบสั่งมาจาก Finance and Operations
- **สถานะการประมวลผล** – ฟิลด์นี้แสดงสถานะการประมวลผลใบสั่งใน Finance and Operations ค่าที่พร้อมใช้งานมีดังต่อไปนี้

    - ใช้งาน
    - วันที่ยืนยัน
    - บันทึกการจัดส่ง
    - ออกใบแจ้งหนี้แล้ว
    - เบิกสินค้าแล้ว
    - เบิกสินค้าแล้วบางส่วน
    - บรรจุแล้วบางส่วน
    - จัดส่งสินค้าแล้ว
    - จัดส่งแล้วบางส่วน
    - ออกใบแจ้งหนี้แล้วบางส่วน
    - ยกเลิก

การตั้งค่า **มีเฉพาะผลิตภัณฑ์ที่รักษาไว้ภายนอก** ถูกใช้ในสถานการณ์จำลองใบสั่งขายอื่น (ตัวอย่างเช่นการซิงโครไนส์จาก Sales ไปยัง Finance and Operation) เพื่อติดตามว่าใบสั่งขายประกอบด้วยผลิตภัณฑ์รักษาไว้ภายนอกทั้งหมดอย่างต่อเนื่องหรือไม่ ถ้าใบสั่งขายประกอบด้วยผลิตภัณฑ์ที่รักษาไว้ภายนอกทั้งหมด ผลิตภัณฑ์จะมีการจัดเก็บอยู่ใน Finance and Operations การตั้งค่านี้ช่วยรับประกันว่า คุณจะไม่พยายามซิงโครไนส์รายการใบสั่งขายที่มีผลิตภัณฑ์ที่ไม่รู้จักใน Finance and Operations

ปุ่ม **สร้างใบแจ้งหนี้** **ยกเลิกใบสั่ง** **คำนวณใหม่** **เรียกดูผลิตภัณฑ์** และ **ค้นหาที่อยู่** บนหน้า **ใบสั่งขาย** ถูกซ่อนไว้สำหรับใบสั่งที่รักษาไว้ภายนอก เนื่องจากใบแจ้งหนี้จะถูกสร้างขึ้นใน Finance and Operations และซิงค์ไปยัง Sales หน้าใบสั่งจะไม่สามารถถูกแก้ไขได้ เนื่องจากข้อมูลในใบสั่งขายจะถูกซิงโครไนส์จาก Finance and Operations

สถานะของใบสั่งขายจะยังคง **ใช้งานอยู่** เพื่อช่วยรับประกันว่า การเปลี่ยนแปลงจาก Finance and Operations สามารถดำเนินไปยังใบสั่งขายใน Sales ได้ เพื่อควบคุมลักษณะการทำงานนี้ ตั้งค่าค่า **Statecode \[สถานะ\]** เริ่มต้น เป็น **ใช้งานอยู่** ในโครงการการรวมข้อมูล

## <a name="preconditions-and-mapping-setup"></a>การตั้งค่าเงื่อนไขเบื้องต้นและการแม็ป

ก่อนที่คุณจะซิงโครไนส์ใบสั่งขาย จำเป็นที่คุณต้องปรับปรุงการตั้งค่าต่อไปนี้ในระบบ:

### <a name="setup-in-sales"></a>การตั้งค่าใน Sales

- ต้องแน่ใจว่ามีการตั้งค่าสิทธิ์สำหรับทีมงานที่ผู้ใช้จากชุดการเชื่อมต่อของคุณใน Sales ถูกกำหนดให้ ถ้าคุณกำลังใช้ข้อมูลสาธิต โดยปกติผู้ใช้จะมีการเข้าถึงของผู้ดูแลระบบ แต่ทีมงานจะไม่มีการเข้าถึงของผู้ดูแลระบบ ถ้าทีมงานไม่มีการเข้าถึงของผู้ดูแลระบบด้วย เมื่อคุณรันโครงการจากการรวมข้อมูล คุณจะได้รับข้อความแสดงข้อผิดพลาดที่แจ้งว่า หลักทีมงานขาดหายไป

    ไปที่ **การตั้งค่า** > **ความปลอดภัย** > **ทีมงาน** เลือกทีมที่เกี่ยวข้อง เลือก  **จัดการบทบาท** และเลือกบทบาทที่มีสิทธิ์ที่เหมาะสม เช่น **ผู้ดูแลระบบ**

- ไปยัง **การตั้งค่า** > **การดูแล** > **การตั้งค่าระบบ** > **การขาย** และต้องมั่นใจว่ามีใช้การตั้งค่าต่อไปนี้:

    - ตัวเลือก **ใช้ระบบคำนวณการให้รางวัล** ถูกตั้งค่าเป็น **ใช่**
    - ฟิลด์ **วิธีการคำนวณส่วนลด** ถูกกำหนดเป็น **สินค้าในรายการ**

### <a name="setup-in-finance-and-operations"></a>ตั้งค่าใน Finance and Operations

ไปยัง **การขายและการตลาด** > **งานประจำงวด** > **คำนวณยอดขายรวม** และตั้งค่างานที่จะรันเป็นชุดงาน ตั้งค่าตัวเลือก **คำนวณผลรวมสำหรับใบสั่งขาย** เป็น **ใช่** ขั้นตอนนี้สำคัญ เนื่องจากเฉพาะใบสั่งขายที่ซึ่งยอดขายรวมถูกคำนวณ จะถูกซิงโครไนส์กับ Sales ความถี่ของชุดงานควรถูกปรับให้เข้ากับความถี่ของการซิงโครไนส์ใบสั่งขาย

### <a name="setup-in-the-data-integration-project"></a>การตั้งค่าในโครงการการรวมข้อมูล

#### <a name="salesheader-task"></a>งาน SalesHeader

- ต้องแน่ใจว่าการแม็ปที่จำเป็นที่ต้องการมีอยู่สำหรับ **InvoiceCountryRegionId** ไปยัง **BillingAddress\_Country** และสำหรับ **DeliveryCountryRegionId** ไปยัง **DeliveryAddress\_Country**

    ค่าของเท็มเพลตคือ แผนผังค่าที่แม็ปหลายประเทศหรือภูมิภาค

- จำเป็นต้องใช้รายการราคาเพื่อสร้างใบสั่งใน Sales อัพเดตแผนผังค่าสำหรับ **pricelevelid.name \[ชื่อรายการราคา\]** ไปยังรายการราคาที่ใช้ใน Sales สำหรับแต่ละสกุลเงิน คุณสามารถใช้รายการราคาเริ่มต้นสำหรับสกุลเงินเดียวกัน อีกทางหนึ่งคือ ถ้าคุณมีรายการราคาในหลายสกุลเงิน คุณสามารถใช้แผนผังค่าได้

    ค่าเท็มเพลตเริ่มต้นสำหรับ **pricelevelid.name \[ชื่อรายการราคา\]** คือ **CRM Service USA (ตัวอย่าง)**

#### <a name="salesline-task"></a>งาน SalesLine

- ต้องแน่ใจว่าการแม็ปที่จำเป็นต้องมีอยู่สำหรับ **DeliveryCountryRegionId** ไปยัง **DeliveryAddress\_Country**

    ค่าของเท็มเพลตคือ แผนผังค่าที่แม็ปหลายประเทศหรือภูมิภาค

- ตรวจสอบให้แน่ใจว่าแผนผังค่าที่ต้องการสำหรับ **SalesUnitSymbol** ใน Finance and Operations มีอยู่

    ค่าเท็มเพลตที่มีแผนผังค่าถูกกำหนดสำหรับ **SalesUnitSymbol** ไปยัง **Quantity\_UOM**

## <a name="template-mapping-in-data-integration"></a>การแม็ปเท็มเพลตในการรวมข้อมูล

> [!NOTE]
> ฟิลด์ **เงื่อนไขการชำระเงิน**, **เงื่อนไขการขนส่ง**, **เงื่อนไขการจัดส่ง**, **วิธีการจัดส่ง** และ **วิธีการจัดส่ง** ไม่ได้รวมอยู่ในการแม็ปเริ่มต้น หากต้องการแม็ปฟิลด์เหล่านี้ คุณต้องตั้งค่าการแม็ปค่าที่เกี่ยวข้องกับข้อมูลในองค์กรที่เอนทิตี้ซิงโครไนส์ระหว่าง

ภาพประกอบต่อไปนี้แสดงตัวอย่างของการแม็ปเท็มเพลตในการรวมข้อมูล 

> [!NOTE]
> การแม็ปแสดงข้อมูลฟิลด์ที่จะถูกซิงโครไนส์จาก Sales ไปยัง Finance and Operations

### <a name="orderheader"></a>OrderHeader

![การแม็ปเท็มเพลตในตัวรวมข้อมูล](./media/sales-order-direct-template-mapping-data-integrator-1.png)

### <a name="orderline"></a>OrderLine

![การแม็ปเท็มเพลตในตัวรวมข้อมูล](./media/sales-order-direct-template-mapping-data-integrator-2.png)



## <a name="related-topics"></a>หัวข้อที่เกี่ยวข้อง

[ผู้ที่มีแนวโน้มจะเป็นลูกค้าเป็นเงินสด](prospect-to-cash.md)

[ซิงโครไนส์บัญชีโดยตรงจาก Sales ไปยังลูกค้าใน Finance and Operations](accounts-template-mapping-direct.md)

[ซิงโครไนส์ผลิตภัณฑ์โดยตรงจาก Finance and Operations ไปยังผลิตภัณฑ์ใน Sales](products-template-mapping-direct.md)

[ซิงโครไนส์ผู้ติดต่อโดยตรงจาก Sales ไปยังผู้ติดต่อหรือลูกค้าใน Finance and Operations](contacts-template-mapping-direct.md)

[ซิงโครไนส์ส่วนหัวและรายการของใบแจ้งหนี้การขายโดยตรงจาก Finance and Operations ไปยัง Sales](sales-invoice-template-mapping-direct.md)




