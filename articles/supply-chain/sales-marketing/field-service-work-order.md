---
title: ซิงโครไนส์ใบสั่งงานใน Field Service ไปยังใบสั่งขายใน Finance and Operations
description: หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์ใบสั่งงานใน Field Service ไปยังใบสั่งขายใน Finance and Operations
author: ChristianRytt
manager: AnnBe
ms.date: 04/09/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 49cb5942532e4feab64aa271ebfecf5cb60b1c61
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/15/2019
ms.locfileid: "1562729"
---
# <a name="synchronize-work-orders-in-field-service-to-sales-orders-in-finance-and-operations"></a>ซิงโครไนส์ใบสั่งงานใน Field Service ไปยังใบสั่งขายใน Finance and Operations

[!include[banner](../includes/banner.md)]

หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่ใช้ในการทำให้ข้อมูลใบสั่งงานใน Microsoft Dynamics 365 for Field Service ไปยังใบสั่งขายใน Microsoft Dynamics 365 for Finance and Operations ตรงกัน

[![การซิงโครไนส์ของกระบวนการทางธุรกิจระหว่าง Finance and Operations และ Field Service](./media/field-service-integration.png)](./media/field-service-integration.png)

หัวข้อนี้อธิบายเท็มเพลตและงานพื้นฐานที่จะใช้ในการซิงโครไนส์ใบสั่งงานใน Field Service ไปยังใบสั่งขายใน Finance and Operations

## <a name="templates-and-tasks"></a>เท็มเพลตและงาน

เท็มเพลตและงานพื้นฐานต่อไปนี้จะถูกใช้ในการรันการซิงโครไนส์ของใบสั่งงานใน Field Service ไปยังใบสั่งขายใน Finance and Operations

### <a name="names-of-the-templates-in-data-integration"></a>ชื่อของเท็มเพลตในการรวมข้อมูล

เท็มเพลต **ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops)** ถูกใช้ในการรันการซิงโครไนส์

### <a name="names-of-the-tasks-in-the-data-integration-project"></a>ชื่อของงานในโครงการการรวมข้อมูล

- WorkOrderHeader
- WorkOrderServiceLineEstimate
- WorkOrderServiceLineUsed
- WorkOrderProductLineEstimate
- WorkOrderProductLineUsed

จำเป็นต้องทำงานการซิงโครไนส์ต่อไปนี้ก่อน จึงจะสามารถดำเนินการซิงโครไนส์ของส่วนหัวและรายการของใบสั่งขายได้:

- ผลิตภัณฑ์ Field Service (Fin และ Ops ไปยัง Field Service)
- บัญชี (Sales ไปยัง Fin and Ops) – โดยตรง

## <a name="entity-set"></a>การตั้งค่าเอนทิตี้

| **Field Service** | **Finance and Operations** |
|-------------------------|-------------------------|
| msdyn_workorders        | ส่วนหัวของใบสั่งขาย CDS |
| msdyn_workorderservices | รายการในใบสั่งขาย CDS   |
| msdyn_workorderproducts | รายการในใบสั่งขาย CDS   |

## <a name="entity-flow"></a>ขั้นตอนเอนทิตี้

มีการสร้างใบสั่งงานใน Field Service ถ้าใบสั่งงานรวมเฉพาะผลิตภัณฑ์ที่ถูกเก็บรักษาโดยภายนอก และถ้าค่า **สถานะใบสั่งงาน** แตกต่างจาก **ไม่ได้จัดกำหนดการแบบเปิด** และ **ปิด – ยกเลิก** ใบสั่งงานสามารถถูกซิงโครไนส์ไปยัง Finance and Operations ได้ ผ่านทางโครงการรวมข้อมูล CDS การอัพเดตในใบสั่งงานจะถูกซิงโครไนส์เป็นใบสั่งขายใน Finance and Operations การอัพเดตเหล่านี้ประกอบด้วย ข้อมูลเกี่ยวกับชนิดจุดเริ่มต้นและสถานะ

## <a name="estimated-versus-used"></a>ที่ประเมิน เทียบกับ ที่ใช้

ใน Field Service ผลิตภัณฑ์และบริการในใบสั่งงานมีทั้งค่า **โดยประมาณ** และค่า **ที่ใช้** สำหรับปริมาณและจำนวน อย่างไรก็ตาม ใน Finance and Operations ใบสั่งขายไม่มีแนวคิดเดียวกันของค่า **โดยประมาณ** และ **ที่ใช้** เพื่อสนับสนุนการปันส่วนสินค้าที่ใช้ปริมาณคาดไว้ในใบสั่งขายใน Finance and Operations แต่เพื่อรักษาปริมาณที่ใช้ที่ควรถูกใช้และออกใบแจ้งหนี้ ชุดงานสองชุดจะซิงโครไนส์ผลิตภัณฑ์และบริการในใบสั่งงาน ชุดงานหนึ่งชุดใช้สำหรับค่า **โดยประมาณ** และชุดงานอื่นใช้สำหรับค่า **ที่ใช้**

ลักษณะการทำงานนี้เปิดใช้งานสถานการณ์จำลองที่จะใช้ค่าโดยประมาณสำหรับการปันส่วนหรือการจองใน Finance and Operations ขณะที่ค่าที่ใช้จะถูกใช้สำหรับปริมาณการใช้และการออกใบแจ้งหนี้

### <a name="estimated"></a>ประเมิน

สำหรับการซิงโครไนส์ของรายการผลิตภัณฑ์ ค่า **โดยประมาณ** ถูกใช้เมื่อค่า **สถานะของรายการ** เป็น **โดยประมาณ** ตัวเลือก **ที่ปันส่วน** ถูกตั้งค่าเป็น **ใช่** และค่า **สถานะของระบบ** ไม่ใช่ **ปิดแล้ว – ลงรายการบัญชีแล้ว**

สำหรับการซิงโครไนส์ของรายการบริการ ค่า **โดยประมาณ** ถูกใช้เมื่อค่า **สถานะของรายการ** เป็น **โดยประมาณ** และค่า **สถานะของระบบ** ไม่ใช่ **ปิดแล้ว – ลงรายการบัญชีแล้ว**

### <a name="used"></a>ใช้แล้ว

ค่า **ที่ใช้** จะใช้สำหรับปริมาณการใช้และการออกใบแจ้งหนี้ ในกรณีดังกล่าว ค่า **ที่ใช้** จะถูกซิงโครไนส์

ตารางต่อไปนี้แสดงภาพรวมของชุดต่างๆ สำหรับรายการผลิตภัณฑ์

| สถานะของระบบ <br>(Field Service) | สถานะของรายการ <br>(Field Service) | ที่ปันส่วน <br>(Field Service) |ค่าที่ซิงโครไนส์ <br>(Finance and Operations) |
|--------------------|-------------|-----------|---------------------------------|
| เปิด - จัดกำหนดการแล้ว   | ประเมิน   | ใช่       | ประเมิน                       |
| เปิด - จัดกำหนดการแล้ว   | ประเมิน   | หมายเลข        | ใช้แล้ว                            |
| เปิด - จัดกำหนดการแล้ว   | ใช้แล้ว        | ใช่       | ใช้แล้ว                            |
| เปิด - จัดกำหนดการแล้ว   | ใช้แล้ว        | หมายเลข        | ใช้แล้ว                            |
| เปิด - กำลังดำเนินการ | ประเมิน   | ใช่       | ประเมิน                       |
| เปิด - กำลังดำเนินการ | ประเมิน   | หมายเลข        | ใช้แล้ว                            |
| เปิด - กำลังดำเนินการ | ใช้แล้ว        | ใช่       | ใช้แล้ว                            |
| เปิด - กำลังดำเนินการ | ใช้แล้ว        | หมายเลข        | ใช้แล้ว                            |
| เปิด - เสร็จสมบูรณ์   | ประเมิน   | ใช่       | ประเมิน                       |
| เปิด - เสร็จสมบูรณ์   | ประเมิน   | หมายเลข        | ใช้แล้ว                            |
| เปิด - เสร็จสมบูรณ์   | ใช้แล้ว        | ใช่       | ใช้แล้ว                            |
| เปิด - เสร็จสมบูรณ์   | ใช้แล้ว        | หมายเลข        | ใช้แล้ว                            |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ประเมิน   | ใช่       | ใช้แล้ว                            |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ประเมิน   | หมายเลข        | ใช้แล้ว                            |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ใช้แล้ว        | ใช่       | ใช้แล้ว                            |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ใช้แล้ว        | หมายเลข        | ใช้แล้ว                            |

ตารางต่อไปนี้แสดงภาพรวมของชุดต่างๆ สำหรับรายการบริการ

| สถานะของระบบ <br>(Field Service) | สถานะของรายการ <br>(Field Service) | ค่าที่ซิงโครไนส์ <br>(Finance and Operations) |
|--------------------|-------------|-----------|
| เปิด - จัดกำหนดการแล้ว   | ประเมิน   | ประเมิน |
| เปิด - จัดกำหนดการแล้ว   | ใช้แล้ว        | ใช้แล้ว      |
| เปิด - กำลังดำเนินการ | ประเมิน   | ประเมิน |
| เปิด - กำลังดำเนินการ | ใช้แล้ว        | ใช้แล้ว      |
| เปิด - เสร็จสมบูรณ์   | ประเมิน   | ประเมิน |
| เปิด - เสร็จสมบูรณ์   | ใช้แล้ว        | ใช้แล้ว      |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ประเมิน   | ใช้แล้ว      |
| ปิดแล้ว - ลงรายการบัญชีแล้ว    | ใช้แล้ว        | ใช้แล้ว      |

การซิงโครไนส์ของค่า **โดยประมาณ** เทียบกับค่า **ที่ใช้** ถูกจัดการโดยชุดงานสองชุดสำหรับรายการผลิตภัณฑ์และรายการบริการ ตัวกรองที่กำหนดไว้ล่วงหน้าทริกเกอร์งานที่ถูกต้อง และการแม็ปพื้นฐานช่วยรับประกันว่าค่าที่ถูกต้องสำหรับ **ที่คาดไว้** เทียบกับ **ที่ใช้** จะถูกซิงโครไนส์

### <a name="example"></a>ตัวอย่าง

1. ใบสั่งงานถูกสร้างขึ้น และถูกจัดกำหนดการใน Field Service

    ค่า **สถานะของระบบ** เป็น **เปิด – จัดกำหนดการแล้ว**

    - **รายการผลิตภัณฑ์:** ปริมาณที่ประเมินไว้ = 5ea ปริมาณที่ใช้ = 0ea สถานะรายการ =โดยประมาณ ที่ปันส่วน = ไม่
    - **รายการบริการ:** ปริมาณที่ประเมินไว้ = 2h ปริมาณที่ใช้ = 0h สถานะรายการ =โดยประมาณ

    ในตัวอย่างนี้ ค่า **ปริมาณที่ใช้** ของผลิตภัณฑ์เป็น **0** (ศูนย์) และค่า **ปริมาณที่ประเมิน** ของบริการเป็น **2h** จะถูกซิงโครไนส์กับ Finance and Operations

2. ผลิตภัณฑ์ถูกปันส่วนใน Field Service

    ค่า **สถานะของระบบ** เป็น **เปิด – จัดกำหนดการแล้ว**

    - **รายการผลิตภัณฑ์:** ปริมาณที่ประเมินไว้ = 5ea ปริมาณที่ใช้ = 0ea สถานะรายการ =โดยประมาณ ที่ปันส่วน = ใช่
    - **รายการบริการ:** ปริมาณที่ประเมินไว้ = 2h ปริมาณที่ใช้ = 0h สถานะรายการ =โดยประมาณ

    ในตัวอย่างนี้ ค่า **ปริมาณโดยประมาณ** ของผลิตภัณฑ์เป็น **5ea** (ศูนย์) และค่า **ปริมาณที่ประเมิน** ของบริการเป็น **2h** จะถูกซิงโครไนส์กับ Finance and Operations

3. ช่างเทคนิคฝ่ายบริการเริ่มต้นการทำงานบนใบสั่งงาน และลงทะเบียนการใช้วัสดุเป็น 6

    ค่า **สถานะของระบบ** เป็น **เปิด – อยู่ระหว่างดำเนินการ**

    - **รายการผลิตภัณฑ์:** ปริมาณที่ประเมินไว้ = 5ea ปริมาณที่ใช้ = 6ea สถานะรายการ = ที่ใช้ ที่ปันส่วน = ใช่
    - **รายการบริการ:** ปริมาณที่ประเมินไว้ = 2h ปริมาณที่ใช้ = 0h สถานะรายการ =โดยประมาณ

    ในตัวอย่างนี้ ค่า **ปริมาณที่ใช้** ของผลิตภัณฑ์เป็น **6** และค่า **ปริมาณที่ประเมิน** ของบริการเป็น **2h** จะถูกซิงโครไนส์กับ Finance and Operations

4. ช่างเทคนิคฝ่ายบริการดำเนินการใบสั่งผลิตโดยเสร็จสมบูรณ์ และลงทะเบียนเวลาที่ใช้เป็น 1.5 ชั่วโมง

    ค่า **สถานะของระบบ** เป็น **เปิด – เสร็จสมบูรณ์แล้ว**

    - **รายการผลิตภัณฑ์:** ปริมาณที่ประเมินไว้ = 5ea ปริมาณที่ใช้ = 6ea สถานะรายการ = ที่ใช้ ที่ปันส่วน = ใช่
    - **รายการบริการ:** ปริมาณที่ประเมินไว้ = 2h ปริมาณที่ใช้ = 1.5h สถานะรายการ = ที่ใช้

    ในตัวอย่างนี้ ค่า **ปริมาณที่ใช้** ของผลิตภัณฑ์เป็น **6** และ **ปริมาณที่ใช้** ของบริการเป็น **1.5h** จะถูกซิงโครไนส์กับ Finance and Operations

## <a name="sales-order-origin-and-status"></a>จุดเริ่มต้นและสถานะของใบสั่งขาย

### <a name="sales-origin"></a>จุดเริ่มต้นของการขาย

ในการติดตามใบสั่งขายใน Finance and Operations ที่มีต้นกำเนิดมาจากใบสั่งงาน คุณสามารถสร้างจุดเริ่มต้นการขายที่ซึ่งตัวเลือก **การกำหนดชนิดจุดเริ่มต้น** ถูกตั้งค่าเป็น **ใช่** และฟิลด์ **ชนิดจุดเริ่มต้นการขาย** จะถูกตั้งค่าเป็น **การรวมใบสั่งงาน**

โดยค่าเริ่มต้น การแม็ปเลือกจุดเริ่มต้นการขายสำหรับชนิดจุดเริ่มต้นการขาย **การรวมใบสั่งงาน** สำหรับใบสั่งขายทั้งหมดที่สร้างขึ้นจากใบสั่งงาน ลักษณะการทำงานนี้อาจมีประโยชน์ เมื่อคุณทำงานกับใบสั่งขายใน Finance and Operations คุณต้องแน่ใจว่า ใบสั่งขายที่มีต้นกำเนิดมาจากใบสั่งงานไม่ได้ถูกซิงโครไนส์กลับไปยัง Field Service เป็นใบสั่งงาน

สำหรับรายละเอียดเกี่ยวกับวิธีการสร้างการตั้งค่าจุดเริ่มต้นการขายที่ถูกต้องใน Finance and Operations ดูส่วน "เงื่อนไขเบื้องต้นและการตั้งค่าการแม็ป" ของหัวข้อนี้

### <a name="status"></a>สถานะ

เมื่อใบสั่งขายมีจุดเริ่มต้นมาจากใบสั่งงาน ฟิลด์ **สถานะใบสั่งงานภายนอก** จะปรากฏขึ้นบนแท็บ **การตั้งค่า** ในส่วนหัวของใบสั่งขาย ฟิลด์นี้แสดงสถานะของระบบจากใบสั่งงานใน Field Service เพื่อช่วยติดตามสถานะของใบสั่งงานที่ซิงโครไนส์ของใบสั่งขายใน Finance and Operations ฟิลด์นี้ยังสามารถช่วยให้ผู้ใช้ Finance and Operations สามารถกำหนดได้ว่า เมื่อใดที่ใบสั่งขายควรจัดถูกส่งสินค้าหรือออกใบแจ้งหนี้

ฟิลด์ **สถานะของใบสั่งงานภายนอก** สามารถมีค่าดังต่อไปนี้:

- เปิด - จัดกำหนดการแล้ว
- เปิด - กำลังดำเนินการ
- เปิด - เสร็จสมบูรณ์
- ปิดแล้ว - ลงรายการบัญชีแล้ว

## <a name="field-service-crm-solution"></a>โซลูชัน CRM ของ Field Service

เพื่อสนับสนุนการรวมระหว่าง Field Service และ Finance and Operations ต้องมีฟังก์ชันเพิ่มเติมจากโซลูชัน CRM ของ Field Service โซลูชันมีการเปลี่ยนแปลงต่อไปนี้

### <a name="work-order-entity"></a>เอนทิตีใบสั่งงาน

ฟิลด์ **ได้รักษาผลิตภัณฑ์โดยภายนอกเท่านั้น** ได้ถูกเพิ่มไปยังเอนทิตี **ใบสั่งงาน** และปรากฏบนหน้า มีการใช้เพื่อติดตามว่า ใบสั่งงานประกอบด้วยผลิตภัณฑ์ที่มีการรักษาโดยภายนอกทั้งหมดอย่างสม่ำเสมอหรือไม่ ใบสั่งงานประกอบด้วย ผลิตภัณฑ์ที่มีการรักษาโดยภายนอกทั้งหมด เมื่อผลิตภัณฑ์ที่เกี่ยวข้องจะมีการจัดเก็บอยู่ใน Finance and Operations ฟิลด์นี้ช่วยรับรองว่า ผู้ใช้ไม่ซิงโครไนส์ใบสั่งงานที่มีผลิตภัณฑ์ที่ไม่รู้จักกับ Finance and Operations

### <a name="work-order-product-entity"></a>เอนทิตีผลิตภัณฑ์ในใบสั่งงาน

- ฟิลด์ **ใบสั่งได้รักษาผลิตภัณฑ์โดยภายนอกเท่านั้น** ได้ถูกเพิ่มไปยังเอนทิตี **ผลิตภัณฑ์ในใบสั่งงาน** และปรากฏบนหน้า มีการใช้เพื่อติดตามว่าผลิตภัณฑ์ในใบสั่งงานจะถูกรักษาไว้ใน Finance and Operations อย่างสม่ำเสมอหรือไม่ ฟิลด์นี้ช่วยรับรองว่า ผู้ใช้ไม่ซิงโครไนส์ผลิตภัณฑ์ในใบสั่งงานที่ไม่รู้จักกับ Finance and Operations
- ฟิลด์ **สถานะระบบส่วนหัว** ได้ถูกเพิ่มไปยังเอนทิตี **บผลิตภัณฑ์ในใบสั่งงาน** และปรากฏขึ้นในหน้า มีการใช้เพื่อติดตามสถานะของระบบของใบสั่งงานอย่างสม่ำเสมอ และช่วยรับประกันว่าการกรองถูกต้อง เมื่อผลิตภัณฑ์ในใบสั่งงานจะซิงโครไนส์กับ Finance and Operations เมื่อมีการตั้งค่าตัวกรองบนงานรวม ข้อมูล **สถานะของระบบหัว** ยังใช้เพื่อกำหนดว่า ควรซิงโครไนส์ค่าที่ประเมินหรือที่ใช้
- ฟิลด์ **จำนวนหน่วยที่ออกใบแจ้งหนี้** แสดงยอดเงินที่ออกใบแจ้งหนี้สำหรับแต่ละหน่วยที่แท้จริงที่ถูกใช้ มีการคำนวณค่าเป็น **ยอดรวม** ซึ่งหารด้วยค่า **ปริมาณจริง** ฟิลด์จะใช้สำหรับการรวมกับระบบที่ไม่สนับสนุนค่าที่แตกต่างกัน สำหรับปริมาณที่ใช้และปริมาณที่เรียกเก็บเงิน ฟิลด์นี้ไม่ปรากฏในอินเทอร์เฟสผู้ใช้ UI 
- ฟิลด์ **ยอดเงินส่วนลดที่ออกใบแจ้งหนี้** จะคำนวณเป็นค่า **ยอดส่วนลด** บวกการปัดเศษจากการคำนวณของค่า **จำนวนหน่วยที่ออกใบแจ้งหนี้** ฟิลด์นี้จะใช้สำหรับการรวม และไม่ปรากฏใน UI
- ฟิลด์ **ปริมาณทศนิยม** จัดเก็บค่าจากฟิลด์ **ปริมาณ** เป็นตัวเลขทศนิยม ฟิลด์นี้จะใช้สำหรับการรวม และไม่ปรากฏใน UI 
- ค่าในฟิลด์ **ที่ใช้** ถูกรีเซ็ตเป็น **0** (ศูนย์) ถ้าค่า **สถานะของรายการ** ของผลิตภัณฑ์ในใบสั่งงานจาก **ที่ใช้** เป็น **โดยประมาณ** การเปลี่ยนแปลงนี้ช่วยป้องกันไม่ให้สถานการณ์ที่ซึ่งปริมาณที่ใช้ที่ถูกป้อนโดยไม่ได้ตั้งใจ ถูกใช้สำหรับการซิงโครไนส์ เมื่อค่า **สถานะของรายการ** คือ **โดยประมาณ** และตัวเลือก **ปันส่วนแล้ว** ถูกตั้งค่าเป็น **ไม่**

### <a name="work-order-service-entity"></a>เอนทิตีบริการใบสั่งงาน

- ฟิลด์ **ใบสั่งได้รักษาผลิตภัณฑ์โดยภายนอกเท่านั้น** ได้ถูกเพิ่มไปยังเอนทิตี **บริการใบสั่งงาน** และปรากฏขึ้นในหน้า ใช้เพื่อติดตามว่าบริการในใบสั่งงานจะถูกรักษาไว้ใน Finance and Operations อย่างสม่ำเสมอหรือไม่ ฟิลด์นี้ช่วยรับรองว่า ผู้ใช้ไม่ซิงโครไนส์บริการใบสั่งงานที่ไม่รู้จักกับ Finance and Operations
- ฟิลด์ **สถานะระบบส่วนหัว** ได้ถูกเพิ่มไปยังเอนทิตี **บริการใบสั่งงาน** และปรากฏขึ้นในหน้า มีการใช้เพื่อติดตามสถานะของระบบของใบสั่งงานอย่างสม่ำเสมอ และช่วยรับประกันว่าการกรองถูกต้อง เมื่อบริการในใบสั่งงานจะซิงโครไนส์กับ Finance and Operations เมื่อมีการตั้งค่าตัวกรองบนงานรวม ข้อมูล **สถานะของระบบหัว** ยังใช้เพื่อกำหนดว่า ควรซิงโครไนส์ค่าที่ประเมินหรือที่ใช้
- ฟิลด์ **ระยะเวลาในหน่วยชั่วโมง** จัดเก็บค่าจากฟิลด์ **ระยะเวลา** หลังจากมีการแปลงค่าจากนาทีเป็นชั่วโมง ฟิลด์นี้จะใช้สำหรับการรวม และไม่ปรากฏใน UI
- ฟิลด์ **ระยะเวลาในหน่วยชั่วโมงโดยประมาณ** จัดเก็บค่าจากฟิลด์ **ระยะเวลาโดยประมาณ** หลังจากมีการแปลงค่าจากนาทีเป็นชั่วโมง ฟิลด์นี้จะใช้สำหรับการรวม และไม่ปรากฏใน UI
- ฟิลด์ **จำนวนหน่วยที่ออกใบแจ้งหนี้** จัดเก็บยอดเงินที่ออกใบแจ้งหนี้สำหรับแต่ละหน่วยที่แท้จริงที่ใช้ มีการคำนวณค่าเป็น **ยอดรวม** ซึ่งหารด้วยค่า **ปริมาณจริง** ฟิลด์นี้จะใช้สำหรับการรวมกับระบบที่ไม่สนับสนุนค่าที่แตกต่างกัน สำหรับปริมาณที่ใช้และปริมาณที่เรียกเก็บเงิน ฟิลด์ไม่ปรากฏใน UI
- ฟิลด์ **ยอดเงินส่วนลดที่ออกใบแจ้งหนี้** จะคำนวณเป็นค่า **ยอดส่วนลด** บวกการปัดเศษจากการคำนวณของค่า **จำนวนหน่วยที่ออกใบแจ้งหนี้** ฟิลด์นี้จะใช้สำหรับการรวม และไม่ปรากฏใน UI
- ฟิลด์ **ใบสั่งรายการภายนอก** คือ หมายเลขใบสั่งรายการค่าลบที่คำนวณได้ซึ่งสามารถใช้ในระบบภายนอก ที่ซึ่งรวมผลิตภัณฑ์ในใบสั่งงานและรายการบริการ ฟิลด์นี้เปิดใช้งานผลิตภัณฑ์ในใบสั่งงานที่ถูกแทรก เพื่อให้มีหมายเลขของรายการค่าบวก และบริการใบสั่งงานให้มีหมายเลขรายการเป็นค่าลบ ค่าของฟิลด์นี้ถูกคำนวณเป็นค่า **ใบสั่งรายการ** คูณค่าด้วย -1 ฟิลด์นี้ไม่ปรากฏใน UI
- ค่าในฟิลด์ **ที่ใช้** ถูกรีเซ็ตเป็น **0** (ศูนย์) ถ้าค่า **สถานะของรายการ** ของบริการใบสั่งงานถูกเปลี่ยนจาก **ที่ใช้** เป็น **โดยประมาณ** ด้วยเหตุผลบางประการ การเปลี่ยนแปลงนี้ช่วยป้องกันไม่ให้สถานการณ์ที่ซึ่งปริมาณที่ใช้ที่ถูกป้อนโดยไม่ได้ตั้งใจ ถูกใช้สำหรับการซิงโครไนส์ เมื่อค่า **สถานะของรายการ** คือ **โดยประมาณ** และค่า **สถานะระบบส่วนหัว** เป็น **ปิดแล้ว – ลงรายการบัญชีแล้ว**

## <a name="preconditions-and-mapping-setup"></a>การตั้งค่าเงื่อนไขเบื้องต้นและการแม็ป

ก่อนที่คุณจะซิงโครไนส์ใบสั่งงาน คุณจำเป็นต้องปรับปรุงการตั้งค่าต่อไปนี้ในระบบ

### <a name="setup-in-field-service"></a>การตั้งค่าใน Field Service

- ตรวจสอบให้แน่ใจว่า ชุดหมายเลขที่ใช้สำหรับใบสั่งงานใน Field Service ไม่ทับซ้อนลำดับหมายเลขที่ใช้สำหรับใบสั่งขายใน Finance and Operations มิฉะนั้น ใบสั่งขายที่มีอยู่อาจได้รับการอัพเดตอย่างไม่ถูกต้องใน Field Service หรือ Finance and Operations
- ฟิลด์ **การสร้างใบแจ้งหนี้ของใบสั่งงาน** ต้องตั้งค่าเป็น **ไม่เคย** เนื่องจากจะดำเนินการออกใบแจ้งหนี้จาก Finance and Operations ไปยัง **Field Service** \> **การตั้งค่า** \> **การจัดการ** \> **การตั้งค่า Field Service** และตรวจสอบให้แน่ใจว่าฟิลด์ **การสร้างใบแจ้งหนี้ของใบสั่งงาน** ถูกตั้งค่าเป็น **ไม่เคย**

### <a name="setup-in-finance-and-operations"></a>ตั้งค่าใน Finance and Operations

การรวมใบสั่งผลิตต้องการให้คุณตั้งค่าจุดเริ่มต้นการขาย จุดเริ่มต้นการขายจะใช้ในการแยกแยะความแตกต่างของใบสั่งขายใน Finance and Operations ที่ถูกสร้างขึ้นจากใบสั่งงานใน Field Service เมื่อใบสั่งขายมีจุดเริ่มต้นการขายของชนิด **การรวมใบสั่งงาน** ฟิลด์ **สถานะใบสั่งงานภายนอก** จะปรากฏขึ้นบนส่วนหัวของใบสั่งขาย นอกจากนี้ จุดเริ่มต้นการขายช่วยรับประกันว่า ใบสั่งขายที่ถูกสร้างขึ้นจากใบสั่งงานใน Field Service ถูกกรองออกไปในระหว่างการซิงโครไนส์ใบสั่งขายจาก Finance and Operations ไปยัง Field Service

1. ไปที่ **การขายและการตลาด** \> **การตั้งค่า** \> **ใบสั่งขาย** \> **จุดเริ่มต้นการขาย**
2. เลือก **สร้าง** เพื่อสร้างจุดเริ่มต้นการขายใหม่
3. ในฟิลด์ **จุดเริ่มต้นการขาย** ป้อนชื่อสำหรับจุดเริ่มต้นการขาย เช่น **WorkOrder**
4. ในฟิลด์ **คำอธิบาย** ป้อนคำอธิบาย เช่น **ใบสั่งงานของ Field Service**
5. เลือกกล่องกาเครื่องหมาย **การกำหนดชนิดของจุดเริ่มต้น**
6. ตั้งค่าฟิลด์ **ชนิดจุดเริ่มต้นการขาย** เป็น **การรวมใบสั่งงาน**
7. เลือก **บันทึก**


### <a name="setup-in-data-integration"></a>ตั้งค่าในการรวมข้อมูล

ให้แน่ใจว่ามี **คีย์การรวม** อยู่สำหรับ **msdyn_workorders**
1. ไปยังการรวมข้อมูล
2. เลือกแท็บ **การตั้งค่าการเชื่อมต่อ**
3. เลือกชุดของการเชื่อมต่อที่ใช้สำหรับการซิงโครไนส์ใบสั่งผลิต
4. เลือกแท็บ **คีย์การรวม**
5. ค้นหา msdyn_workorders และตรวจสอบว่าคีย์ **msdyn_name (หมายเลขใบสั่งผลิต)** ถูกเพิ่ม ถ้าไม่แสดงขึ้น ให้เพิ่มโดยการคลิก **เพิ่มคีย์** และคลิก **บันทึก** ที่ด้านบนของหน้า

## <a name="template-mapping-in-data-integration"></a>การแม็ปเท็มเพลตในการรวมข้อมูล

ภาพประกอบต่อไปนี้แสดงการแม็ปเท็มเพลตในการรวมข้อมูล

### <a name="work-orders-to-sales-orders-field-service-to-fin-and-ops-workorderheader"></a>ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops): WorkOrderHeader

ตัวกรองข้อมูล: (msdyn_systemstatus ne 690970005) และ (msdyn_systemstatus ne 690970000) และ (msdynce_hasexternallymaintainedproductsonly eq true)

[![การแม็ปเท็มเพลตในการรวมข้อมูล](./media/FSWorkOrder1.png )](./media/FSWorkOrder1.png)

### <a name="work-orders-to-sales-orders-field-service-to-fin-and-ops-workorderservicelineestimate"></a>ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops): WorkOrderServiceLineEstimate

ตัวกรองข้อมูล: (msdynce_headersystemstatus ne 690970005) และ (msdynce_headersystemstatus ne 690970000) และ (msdynce_orderhasexternalmaintainedproductsonly eq true) และ (msdyn_linestatus eq 690970000) และ (msdynce_headersystemstatus ne 690970004)

[![การแม็ปเท็มเพลตในการรวมข้อมูล](./media/FSWorkOrder2.png )](./media/FSWorkOrder2.png)

### <a name="work-orders-to-sales-orders-field-service-to-fin-and-ops-workorderservicelineused"></a>ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops): WorkOrderServiceLineUsed

ตัวกรองข้อมูล: (msdynce_headersystemstatus ne 690970005) และ (msdynce_headersystemstatus ne 690970000) และ (msdynce_orderhasexternalmaintainedproductsonly eq true) และ ((msdyn_linestatus eq 690970001) หรือ (msdynce_headersystemstatus eq 690970004))

[![การแม็ปเท็มเพลตในการรวมข้อมูล](./media/FSWorkOrder3.png )](./media/FSWorkOrder3.png)

### <a name="work-orders-to-sales-orders-field-service-to-fin-and-ops-workorderproductlineestimate"></a>ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops): WorkOrderProductLineEstimate

ตัวกรองข้อมูล: (msdynce_headersystemstatus ne 690970005) และ (msdynce_headersystemstatus ne 690970000) และ (msdynce_orderhasexternalmaintainedproductsonly eq true) และ (msdyn_linestatus eq 690970000) และ (msdynce_headersystemstatus ne 690970004) และ (msdyn_allocated eq true)

[![การแม็ปเท็มเพลตในการรวมข้อมูล](./media/FSWorkOrder4.png )](./media/FSWorkOrder4.png)

### <a name="work-orders-to-sales-orders-field-service-to-fin-and-ops-workorderproductlineused"></a>ใบสั่งงานไปยังใบสั่งขาย (Field Service ไปยัง Fin และ Ops): WorkOrderProductLineUsed

ตัวกรองข้อมูล: (msdynce_headersystemstatus ne 690970005) และ (msdynce_headersystemstatus ne 690970000) และ (msdynce_orderhasexternalmaintainedproductsonly eq true) และ ((msdyn_linestatus eq 690970001) หรือ (msdynce_headersystemstatus eq 690970004) หรือ (msdyn_allocated ne true))

[![การแม็ปเท็มเพลตในการรวมข้อมูล](./media/FSWorkOrder5.png )](./media/FSWorkOrder5.png)
