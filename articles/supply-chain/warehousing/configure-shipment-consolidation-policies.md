---
title: ตั้งค่าคอนฟิกนโยบายการรวมบัญชีการจัดส่ง
description: หัวข้อนี้อธิบายวิธีการตั้งค่านโยบายการรวมบัญชีการจัดส่งเริ่มต้นและแบบกำหนดเอง
author: GarmMSFT
manager: tfehr
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench, WHSFilterGroupTable, TMSMode, WHSShipmentConsolidation, WHSFilterGenerallyAvail
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: adb88bbd29a89a1d18d7fd4781c2541ffb4e721f
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/16/2020
ms.locfileid: "4438827"
---
# <a name="configure-shipment-consolidation-policies"></a><span data-ttu-id="ab66f-103">ตั้งค่าคอนฟิกนโยบายการรวมบัญชีการจัดส่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-103">Configure shipment consolidation policies</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="ab66f-104">กระบวนการรวมบัญชีการจัดส่งที่ใช้นโยบายการรวมบัญชีการจัดส่ง อนุญาตให้มีการรวมบัญชีการจัดส่งแบบอัตโนมัติในระหว่างการนำออกใช้แบบอัตโนมัติและแบบด้วยตนเองไปยังคลังสินค้า</span><span class="sxs-lookup"><span data-stu-id="ab66f-104">The shipment consolidation process that uses shipment consolidation policies allows for automated shipment consolidation during automated and manual release to the warehouse.</span></span> <span data-ttu-id="ab66f-105">หลังจากที่คุณเปิดใช้งานคุณลักษณะนี้แล้ว คุณต้องตั้งค่าคอนฟิกนโยบายเริ่มต้นของคุณ</span><span class="sxs-lookup"><span data-stu-id="ab66f-105">After you turn on this feature, you must configure your initial policies.</span></span> <span data-ttu-id="ab66f-106">ถ้าไม่มีการตั้งค่าคอนฟิกนโยบาย รายการขายแต่ละรายการจะสร้างการจัดส่งแยกต่างหากที่มีรายการจำนวนงานในศูนย์การผลิตเดียว</span><span class="sxs-lookup"><span data-stu-id="ab66f-106">If no policies are configured, each sales line will generate a separate shipment that has a single load line.</span></span>

<span data-ttu-id="ab66f-107">สถานการณ์ที่แสดงในหัวข้อนี้แสดงวิธีการตั้งค่านโยบายการรวมบัญชีการจัดส่งเริ่มต้นและแบบกำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="ab66f-107">The scenarios that are presented in this topic show how to set up default and custom shipment consolidation policies.</span></span>

## <a name="turn-on-the-shipment-consolidation-policies-feature"></a><span data-ttu-id="ab66f-108">เปิดคุณลักษณะนโยบายการรวมบัญชีการจัดส่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-108">Turn on the Shipment consolidation policies feature</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ab66f-109">ใน [สถานการณ์แรก](#scenario-1) ที่อธิบายไว้ในหัวข้อนี้ คุณจะตั้งค่าคลังสินค้าก่อน จึงจะใช้คุณลักษณะการรวมบัญชีการจัดส่งก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-109">In the [first scenario](#scenario-1) that is described in this topic, you will first set up a warehouse so that it uses the earlier shipment consolidation feature.</span></span> <span data-ttu-id="ab66f-110">จากนั้น คุณจะจัดทำให้นโยบายการรวมบัญชีการจัดส่งพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="ab66f-110">You will then make shipment consolidation policies available.</span></span> <span data-ttu-id="ab66f-111">ด้วยวิธีนี้ คุณสามารถพบวิธีการทำงานของสถานการณ์จำลองการอัพเกรด</span><span class="sxs-lookup"><span data-stu-id="ab66f-111">In this way, you can experience how the upgrade scenario works.</span></span> <span data-ttu-id="ab66f-112">ถ้าคุณวางแผนที่จะใช้สภาพแวดล้อมข้อมูลสาธิตเพื่อไปยังสถานการณ์แรก ไม่ต้องเปิดคุณลักษณะก่อนที่คุณจะทำสถานการณ์จำลองดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="ab66f-112">If you plan to use a demo data environment to go through the first scenario, don't turn on the feature before you do the scenario.</span></span>

<span data-ttu-id="ab66f-113">ก่อนที่คุณจะสามารถใช้คุณลักษณะ *นโยบายการรวมบัญชีการจัดส่ง* คุณต้องเปิดใช้งานในระบบของคุณ</span><span class="sxs-lookup"><span data-stu-id="ab66f-113">Before you can use the *Shipment consolidation policies* feature, you must turn it on in your system.</span></span> <span data-ttu-id="ab66f-114">ผู้ดูแลระบบสามารถใช้การตั้งค่า [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) เพื่อตรวจสอบสถานะของคุณลักษณะและเปิดใช้งาน</span><span class="sxs-lookup"><span data-stu-id="ab66f-114">Admins can use the [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) settings to check the status of the feature and turn it on.</span></span> <span data-ttu-id="ab66f-115">ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** มีการแสดงรายการคุณลักษณะในวิธีต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-115">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="ab66f-116">**โมดูล:** *การจัดการคลังสินค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-116">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="ab66f-117">**ชื่อคุณลักษณะ:** *รวมบัญชีการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-117">**Feature name:** *Consolidate shipment*</span></span>

## <a name="make-demo-data-available"></a><span data-ttu-id="ab66f-118">ทำให้ข้อมูลสาธิตพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="ab66f-118">Make demo data available</span></span>

<span data-ttu-id="ab66f-119">สถานการณ์จำลองแต่ละสถานการณ์ในหัวข้อนี้จะอ้างอิงค่าและเรกคอร์ดที่รวมอยู่ในข้อมูลสาธิตมาตรฐานที่ให้ไว้สำหรับ Microsoft Dynamics 365 Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="ab66f-119">Each scenario in this topic references values and records that are included in the standard demo data that is provided for Microsoft Dynamics 365 Supply Chain Management.</span></span> <span data-ttu-id="ab66f-120">ถ้าคุณต้องการใช้ค่าที่ระบุไว้ที่นี่เมื่อคุณทำแบบฝึกหัด ควรตรวจสอบให้แน่ใจว่าได้ทำงานในสภาพแวดล้อมที่มีการติดตั้งข้อมูลสาธิต และตั้งค่านิติบุคคลเป็น **USMF** ก่อนที่คุณจะเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-120">If you want to use the values that are provided here as you do the exercises, be sure to work in an environment where the demo data is installed, and set the legal entity to **USMF** before you begin.</span></span>

## <a name="scenario-1-configure-default-shipment-consolidation-policies"></a><a name="scenario-1"></a><span data-ttu-id="ab66f-121">สถานการณ์จำลอง1: ตั้งค่าคอนฟิกนโยบายการรวมบัญชีการจัดส่งเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-121">Scenario 1: Configure default shipment consolidation policies</span></span>

<span data-ttu-id="ab66f-122">มีสถานการณ์สองสถานการณ์ที่คุณต้องตั้งค่าคอนฟิกจำนวนขั้นต่ำของนโยบายเริ่มต้น หลังจากที่คุณเปิดใช้งานคุณลักษณะ *นโยบายการรวมบัญชีการจัดส่ง*:</span><span class="sxs-lookup"><span data-stu-id="ab66f-122">There are two situations where you must configure the minimum number of default policies after you turn on the *Shipment consolidation policies* feature:</span></span>

- <span data-ttu-id="ab66f-123">คุณกำลังอัพเกรดสภาพแวดล้อมที่มีข้อมูลอยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-123">You're upgrading an environment that already contains data.</span></span>
- <span data-ttu-id="ab66f-124">คุณกำลังตั้งค่าสภาพแวดล้อมใหม่ทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="ab66f-124">You're setting up a completely new environment.</span></span>

### <a name="upgrade-an-environment-where-warehouses-are-already-configured-for-cross-order-consolidation"></a><span data-ttu-id="ab66f-125">อัพเกรดสภาพแวดล้อมที่มีการตั้งค่าคอนฟิกคลังสินค้าสำหรับการรวมบัญชีข้ามใบสั่งอยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-125">Upgrade an environment where warehouses are already configured for cross-order consolidation</span></span>

<span data-ttu-id="ab66f-126">เมื่อคุณเริ่มต้นกระบวนงานนี้ ควรปิดคุณลักษณะ *นโยบายการรวมบัญชีการจัดส่ง* เพื่อจำลองสภาพแวดล้อมที่มีการใช้คุณลักษณะการรวมบัญชีข้ามใบสั่งขั้นพื้นฐานอยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-126">When you start this procedure, the *Shipment consolidation policies* feature should be turned off, to simulate an environment where the basic cross-order consolidation feature was already used.</span></span> <span data-ttu-id="ab66f-127">จากนั้น คุณจะใช้การจัดการคุณลักษณะเพื่อเปิดใช้งานคุณลักษณะ เพื่อให้คุณสามารถเรียนรู้วิธีการตั้งค่านโยบายการรวมบัญชีการจัดส่งหลังจากการอัพเกรด</span><span class="sxs-lookup"><span data-stu-id="ab66f-127">You will then use feature management to turn on the feature, so that you can learn how to set up shipment consolidation policies after the upgrade.</span></span>

<span data-ttu-id="ab66f-128">ทำตามขั้นตอนต่อไปนี้เพื่อตั้งค่านโยบายการรวมบัญชีการจัดส่งเริ่มต้นในสภาพแวดล้อมที่มีการตั้งค่าคอนฟิกคลังสินค้าสำหรับการรวมบัญชีข้ามใบสั่งอยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-128">Follow these steps to set up default shipment consolidation policies in an environment where warehouses have already been configured for cross-order consolidation.</span></span>

1. <span data-ttu-id="ab66f-129">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> คลังสินค้า \> คลังสินค้า**</span><span class="sxs-lookup"><span data-stu-id="ab66f-129">Go to **Warehouse management \> Setup \> Warehouse \> Warehouses**.</span></span>
1. <span data-ttu-id="ab66f-130">ในรายการ ให้ค้นหาและเปิดเรกคอร์ดของคลังสินค้าที่ต้องการ (ตัวอย่างเช่น คลังสินค้า *24* ในข้อมูลสาธิต **USMF**)</span><span class="sxs-lookup"><span data-stu-id="ab66f-130">In the list, find and open the desired warehouse record (for example, warehouse *24* in the **USMF** demo data).</span></span>
1. <span data-ttu-id="ab66f-131">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไข**</span><span class="sxs-lookup"><span data-stu-id="ab66f-131">On the Action Pane, select **Edit**.</span></span>
1. <span data-ttu-id="ab66f-132">บน FastTab **คลังสินค้า** ให้ตั้งค่าตัวเลือก **รวมบัญชีการจัดส่งเมื่อนำออกใช้ไปยังคลังสินค้า** เป็น *ใช่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-132">On the **Warehouse** FastTab, set the **Consolidate shipment at release to warehouse** option to *Yes*.</span></span>
1. <span data-ttu-id="ab66f-133">ทำซ้ำขั้นตอนที่ 2 ถึง 4 สำหรับคลังสินค้าอื่นๆ ทั้งหมดที่จำเป็นต้องมีการรวมบัญชี</span><span class="sxs-lookup"><span data-stu-id="ab66f-133">Repeat steps 2 through 4 for all other warehouses where consolidation is required.</span></span>
1. <span data-ttu-id="ab66f-134">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="ab66f-134">Close the page.</span></span>
1. <span data-ttu-id="ab66f-135">ใช้ [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) เพื่อเปิดใช้งานคุณลักษณะ *นโยบายการรวมบัญชีการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-135">Use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the *Shipment consolidation policies* feature.</span></span> <span data-ttu-id="ab66f-136">ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** คุณลักษณะจะถูกตั้งชื่อเป็น *รวมบัญชีการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-136">In the **Feature management** workspace, the feature is named *Consolidate shipment*.</span></span>
1. <span data-ttu-id="ab66f-137">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-137">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span> <span data-ttu-id="ab66f-138">คุณอาจต้องรีเฟรชเบราว์เซอร์ของคุณเพื่อดูรายการเมนู **นโยบายการรวมบัญชีการจัดส่ง** ใหม่ หลังจากที่คุณเปิดใช้งานคุณลักษณะ</span><span class="sxs-lookup"><span data-stu-id="ab66f-138">You might have to refresh your browser to see the new **Shipment consolidation policies** menu item after you turn on the feature.</span></span>
1. <span data-ttu-id="ab66f-139">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้างการตั้งค่าเริ่มต้น** เพื่อสร้างนโยบายต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-139">On the Action Pane, select **Create default setup** to create the following policies:</span></span>

    - <span data-ttu-id="ab66f-140">นโยบาย **CrossOrder** สำหรับชนิดนโยบาย *ใบสั่งขาย* (ซึ่งระบุว่าคุณมีคลังสินค้าอย่างน้อยหนึ่งรายการที่มีการตั้งค่าให้ใช้คุณลักษณะการรวมบัญชีก่อนหน้านี้)</span><span class="sxs-lookup"><span data-stu-id="ab66f-140">A **CrossOrder** policy for the *Sales orders* policy type (provided that you have at least one warehouse that is set up to use the earlier consolidation feature)</span></span>
    - <span data-ttu-id="ab66f-141">นโยบาย **เริ่มต้น** สำหรับชนิดนโยบาย *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-141">A **Default** policy for the *Sales orders* policy type</span></span>
    - <span data-ttu-id="ab66f-142">นโยบาย **เริ่มต้น** สำหรับชนิดนโยบาย *การออกใช้การโอนย้าย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-142">A **Default** policy for the *Transfer issue* policy type</span></span>
    - <span data-ttu-id="ab66f-143">นโยบาย **CrossOrder** สำหรับชนิดนโยบาย *การออกใช้การโอนย้าย* (ซึ่งระบุว่าคุณมีคลังสินค้าอย่างน้อยหนึ่งรายการที่มีการตั้งค่าให้ใช้คุณลักษณะการรวมบัญชีก่อนหน้านี้)</span><span class="sxs-lookup"><span data-stu-id="ab66f-143">A **CrossOrder** policy for the *Transfer issue* policy type (provided you have at least one warehouse that is set up to use the earlier consolidation feature)</span></span>

    > [!NOTE]
    > - <span data-ttu-id="ab66f-144">นโยบาย **CrossOrder** ทั้งสองนโยบายจะพิจารณาถึงชุดของฟิลด์เดียวกันกับตรรกะก่อนหน้านี้ ยกเว้นสำหรับฟิลด์สำหรับหมายเลขใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-144">Both **CrossOrder** policies consider the same set of fields as the earlier logic, except for the field for the order number.</span></span> <span data-ttu-id="ab66f-145">(ฟิลด์ดังกล่าวจะใช้เพื่อรวมบัญชีรายการไว้ในการจัดส่ง โดยยึดตามปัจจัยต่างๆ เช่น คลังสินค้า โหมดการขนส่งของการจัดส่ง และที่อยู่)</span><span class="sxs-lookup"><span data-stu-id="ab66f-145">(That field is used to consolidate lines into shipments, based on factors such as the warehouse, transportation mode of delivery, and address.)</span></span>
    > - <span data-ttu-id="ab66f-146">นโยบาย **เริ่มต้น** ทั้งสองนโยบายจะพิจารณาถึงชุดของฟิลด์เดียวกันกับตรรกะก่อนหน้านี้ ซึ่งรวมถึงฟิลด์สำหรับหมายเลขใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-146">Both **Default** policies consider the same set of fields as the earlier logic, including the field for the order number.</span></span> <span data-ttu-id="ab66f-147">(ฟิลด์ดังกล่าวจะใช้เพื่อรวมบัญชีรายการไว้ในการจัดส่ง โดยยึดตามปัจจัยต่างๆ เช่น หมายเลขใบสั่ง คลังสินค้า โหมดการขนส่งของการจัดส่ง และที่อยู่)</span><span class="sxs-lookup"><span data-stu-id="ab66f-147">(That field is used to consolidate lines into shipments, based on factors such as the order number, warehouse, transportation mode of delivery, and address.)</span></span>

1. <span data-ttu-id="ab66f-148">เลือกนโยบาย **CrossOrder** สำหรับชนิดนโยบาย *ใบสั่งขาย* และจากนั้น บนบานหน้าต่างการดำเนินการ ให้เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-148">Select the **CrossOrder** policy for the *Sales orders* policy type, and then, on the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-149">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม โปรดทราบว่าคลังสินค้าที่มีการตั้งค่าตัวเลือก **รวมบัญชีการจัดส่งเมื่อนำออกใช้ไปยังคลังสินค้า** เป็น *ใช่* ถูกแสดงรายการ</span><span class="sxs-lookup"><span data-stu-id="ab66f-149">In the query editor dialog box, notice that warehouses where the **Consolidate shipment at release to warehouse** option is set to *Yes* are listed.</span></span> <span data-ttu-id="ab66f-150">ดังนั้น จึงรวมอยู่ในการสอบถาม</span><span class="sxs-lookup"><span data-stu-id="ab66f-150">Therefore, they are included in the query.</span></span>

### <a name="create-default-policies-for-a-new-environment"></a><span data-ttu-id="ab66f-151">สร้างนโยบายเริ่มต้นสำหรับสภาพแวดล้อมใหม่</span><span class="sxs-lookup"><span data-stu-id="ab66f-151">Create default policies for a new environment</span></span>

<span data-ttu-id="ab66f-152">ทำตามขั้นตอนต่อไปนี้เพื่อตั้งค่านโยบายการรวมบัญชีการจัดส่งเริ่มต้นในสภาพแวดล้อมใหม่</span><span class="sxs-lookup"><span data-stu-id="ab66f-152">Follow these steps to set up default shipment consolidation policies in a brand-new environment.</span></span>

1. <span data-ttu-id="ab66f-153">ใช้ [การจัดการคุณลักษณะ](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) เพื่อเปิดใช้งานคุณลักษณะ *นโยบายการรวมบัญชีการจัดส่ง* ถ้าคุณไม่ได้เปิดใช้งานไว้อยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-153">Use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the *Shipment consolidation policies* feature, if you haven't already turned it on.</span></span> <span data-ttu-id="ab66f-154">ในพื้นที่ทำงาน **การจัดการคุณลักษณะ** คุณลักษณะจะถูกตั้งชื่อเป็น *รวมบัญชีการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-154">In the **Feature management** workspace, the feature is named *Consolidate shipment*.</span></span>
1. <span data-ttu-id="ab66f-155">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-155">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-156">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้างการตั้งค่าเริ่มต้น** เพื่อสร้างนโยบายต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-156">On the Action Pane, select **Create default setup** to create the following policies:</span></span>

    - <span data-ttu-id="ab66f-157">นโยบาย **เริ่มต้น** สำหรับชนิดนโยบาย *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-157">A **Default** policy for the *Sales orders* policy type</span></span>
    - <span data-ttu-id="ab66f-158">นโยบาย **เริ่มต้น** สำหรับชนิดนโยบาย *การออกใช้การโอนย้าย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-158">A **Default** policy for the *Transfer issue* policy type</span></span>

    > [!NOTE]
    > <span data-ttu-id="ab66f-159">นโยบาย **เริ่มต้น** ทั้งสองนโยบายจะพิจารณาถึงชุดของฟิลด์เดียวกันกับตรรกะก่อนหน้านี้ ซึ่งรวมถึงฟิลด์สำหรับหมายเลขใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-159">Both **Default** policies consider the same set of fields as the earlier logic, including the field for the order number.</span></span> <span data-ttu-id="ab66f-160">(ฟิลด์ดังกล่าวจะใช้เพื่อรวมบัญชีรายการไว้ในการจัดส่ง โดยยึดตามปัจจัยต่างๆ เช่น หมายเลขใบสั่ง คลังสินค้า โหมดการขนส่งของการจัดส่ง และที่อยู่)</span><span class="sxs-lookup"><span data-stu-id="ab66f-160">(That field is used to consolidate lines into shipments, based on factors such as the order number, warehouse, transportation mode of delivery, and address.)</span></span>

## <a name="scenario-2-configure-custom-shipment-consolidation-policies"></a><span data-ttu-id="ab66f-161">สถานการณ์จำลอง2: ตั้งค่าคอนฟิกนโยบายการรวมบัญชีการจัดส่งแบบกำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="ab66f-161">Scenario 2: Configure custom shipment consolidation policies</span></span>

<span data-ttu-id="ab66f-162">สถานการณ์นี้แสดงวิธีการตั้งค่านโยบายการรวมบัญชีการจัดส่งแบบกำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="ab66f-162">This scenario shows how to set up custom shipment consolidation policies.</span></span> <span data-ttu-id="ab66f-163">นโยบายที่กำหนดเองสามารถสนับสนุนความต้องการทางธุรกิจที่ซับซ้อน ที่ซึ่งการรวมบัญชีการจัดส่งจะขึ้นอยู่กับเงื่อนไขหลายอย่าง</span><span class="sxs-lookup"><span data-stu-id="ab66f-163">Custom policies can support complex business requirements where shipment consolidation depends on several conditions.</span></span> <span data-ttu-id="ab66f-164">สำหรับนโยบายตัวอย่างแต่ละนโยบายในภายหลังในสถานการณ์นี้ คำอธิบายย่อของกรณีธุรกิจจะรวมอยู่ด้วย</span><span class="sxs-lookup"><span data-stu-id="ab66f-164">For each example policy later in this scenario, a short description of the business case is included.</span></span> <span data-ttu-id="ab66f-165">ควรตั้งค่านโยบายตัวอย่างเหล่านี้ในลำดับที่ช่วยให้มั่นใจในการประเมินผลแบบพีระมิดของการสอบถาม</span><span class="sxs-lookup"><span data-stu-id="ab66f-165">These example policies should be set up in a sequence that ensures a pyramid-like evaluation of the queries.</span></span> <span data-ttu-id="ab66f-166">(กล่าวคือ นโยบายที่มีเงื่อนไขมากที่สุดควรได้รับการประเมินว่ามีระดับความสำคัญสูงสุด)</span><span class="sxs-lookup"><span data-stu-id="ab66f-166">(In other words, the policies that have the most conditions should be evaluated as having the highest priority.)</span></span>

### <a name="turn-on-the-feature-and-prepare-master-data-for-this-scenario"></a><span data-ttu-id="ab66f-167">เปิดใช้งานคุณลักษณะและจัดเตรียมข้อมูลหลักสำหรับสถานการณ์นี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-167">Turn on the feature and prepare master data for this scenario</span></span>

<span data-ttu-id="ab66f-168">ก่อนที่คุณจะสามารถไปยังแบบฝึกหัดในสถานการณ์นี้ คุณต้องเปิดใช้งานคุณลักษณะและจัดเตรียมข้อมูลหลักที่จำเป็นสำหรับการกรอง ตามที่อธิบายไว้ในส่วนย่อยต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-168">Before you can go through the exercises in this scenario, you must turn on the feature and prepare the master data that is required to do the filtering, as described in the following subsections.</span></span> <span data-ttu-id="ab66f-169">(ข้อกำหนดเบื้องต้นเหล่านี้นำไปใช้กับสถานการณ์ที่แสดงรายการอยู่ใน [สถานการณ์ตัวอย่างของวิธีการใช้นโยบายการรวมบัญชีการจัดส่ง](#example-scenarios))</span><span class="sxs-lookup"><span data-stu-id="ab66f-169">(These prerequisites also apply to the scenarios listed in [Example scenarios of how to use shipment consolidation policies](#example-scenarios).)</span></span>

#### <a name="turn-on-the-feature-and-create-the-default-policies"></a><span data-ttu-id="ab66f-170">เปิดใช้งานคุณลักษณะและสร้างนโยบายเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-170">Turn on the feature and create the default policies</span></span>

<span data-ttu-id="ab66f-171">ใช้การจัดการคุณลักษณะเพื่อเปิดใช้งานคุณลักษณะนี้ ถ้าคุณไม่ได้เปิดใช้งานอยู่แล้ว และสร้างนโยบายการรวมบัญชีเริ่มต้นที่อธิบายไว้ใน [สถานการณ์จำลอง 1](#scenario-1)</span><span class="sxs-lookup"><span data-stu-id="ab66f-171">Use feature management to turn on the feature, if you haven't already turned it on, and create the default consolidation polices that are described in [scenario 1](#scenario-1).</span></span>

#### <a name="create-two-new-product-filter-codes"></a><span data-ttu-id="ab66f-172">สร้างรหัสตัวกรองผลิตภัณฑ์ใหม่สองรหัส</span><span class="sxs-lookup"><span data-stu-id="ab66f-172">Create two new product filter codes</span></span>

1. <span data-ttu-id="ab66f-173">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> ตัวกรองผลิตภัณฑ์ \> ตัวกรองผลิตภัณฑ์** และเพิ่มตัวกรองผลิตภัณฑ์สองรายการ:</span><span class="sxs-lookup"><span data-stu-id="ab66f-173">Go to **Warehouse management \> Setup \> Product filters \> Product filters**, and add two product filters:</span></span>

    - <span data-ttu-id="ab66f-174">ตัวกรองผลิตภัณฑ์ 1:</span><span class="sxs-lookup"><span data-stu-id="ab66f-174">Product filter 1:</span></span>

        - <span data-ttu-id="ab66f-175">**รหัสตัวกรอง:** *ไวไฟ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-175">**Filter code:** *Flammable*</span></span>
        - <span data-ttu-id="ab66f-176">**ชื่อตัวกรอง:** *รหัส 4*</span><span class="sxs-lookup"><span data-stu-id="ab66f-176">**Filter title:** *Code 4*</span></span>

    - <span data-ttu-id="ab66f-177">ตัวกรองผลิตภัณฑ์ 2:</span><span class="sxs-lookup"><span data-stu-id="ab66f-177">Product filter 2:</span></span>

        - <span data-ttu-id="ab66f-178">**รหัสตัวกรอง:** *ระเบิด*</span><span class="sxs-lookup"><span data-stu-id="ab66f-178">**Filter code:** *Explosive*</span></span>
        - <span data-ttu-id="ab66f-179">**ชื่อตัวกรอง:** *รหัส 4*</span><span class="sxs-lookup"><span data-stu-id="ab66f-179">**Filter title:** *Code 4*</span></span>

1. <span data-ttu-id="ab66f-180">ไปยัง **การจัดการข้อมูลผลิตภัณฑ์ \> ผลิตภัณฑ์ \> ผลิตภัณฑ์ที่นำออกใช้**</span><span class="sxs-lookup"><span data-stu-id="ab66f-180">Go to **Product information management \> Products \> Released products**.</span></span>
1. <span data-ttu-id="ab66f-181">เปิดผลิตภัณฑ์ที่มีหมายเลขสินค้า *M9200*</span><span class="sxs-lookup"><span data-stu-id="ab66f-181">Open the product that has item number *M9200*.</span></span> <span data-ttu-id="ab66f-182">(ผลิตภัณฑ์ที่คุณเลือกต้องถูกเปิดใช้งานสำหรับกระบวนการ \[WMS\] ของคลังสินค้าขั้นสูง และผลิตภัณฑ์นี้ถูกเปิดใช้งานไว้ล่วงหน้าสำหรับกระบวนการ WMS ในข้อมูลสาธิต **USMF**)</span><span class="sxs-lookup"><span data-stu-id="ab66f-182">(The product that you select must be enabled for advanced warehouse \[WMS\] processes, and this product is pre-enabled for WMS processes in the **USMF** demo data.)</span></span>
1. <span data-ttu-id="ab66f-183">บน FastTab **คลังสินค้า** ให้ตั้งค่าฟิลด์ **รหัส 4** เป็น *ไวไฟ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-183">On the **Warehouse** FastTab, set the **Code 4** field to *Flammable*.</span></span>
1. <span data-ttu-id="ab66f-184">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="ab66f-184">Close the page.</span></span>
1. <span data-ttu-id="ab66f-185">เปิดผลิตภัณฑ์ที่มีหมายเลขสินค้า *M9201*</span><span class="sxs-lookup"><span data-stu-id="ab66f-185">Open the product that has item number *M9201*.</span></span> <span data-ttu-id="ab66f-186">(นอกจากนี้ ผลิตภัณฑ์นี้ยังถูกเปิดใช้งานไว้ล่วงหน้าสำหรับกระบวนการ WMS ในข้อมูลสาธิต **USMF**)</span><span class="sxs-lookup"><span data-stu-id="ab66f-186">(This product is also pre-enabled for WMS processes in the in the **USMF** demo data.)</span></span>
1. <span data-ttu-id="ab66f-187">บน FastTab **คลังสินค้า** ให้ตั้งค่าฟิลด์ **รหัส 4** เป็น *ระเบิด*</span><span class="sxs-lookup"><span data-stu-id="ab66f-187">On the **Warehouse** FastTab, set the **Code 4** field to *Explosive*.</span></span>
1. <span data-ttu-id="ab66f-188">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="ab66f-188">Close the page.</span></span>

#### <a name="create-a-new-transportation-mode-of-delivery"></a><span data-ttu-id="ab66f-189">สร้างโหมดการขนส่งของการจัดส่งใหม่</span><span class="sxs-lookup"><span data-stu-id="ab66f-189">Create a new transportation mode of delivery</span></span>

1. <span data-ttu-id="ab66f-190">ไปที่ **การจัดการการขนส่ง \> การตั้งค่า \> ผู้ขนส่ง > \> โหมด**</span><span class="sxs-lookup"><span data-stu-id="ab66f-190">Go to **Transportation management \> Setup \> Carriers \> Mode**.</span></span>
1. <span data-ttu-id="ab66f-191">สร้างโหมดการขนส่งที่จะใช้ในการสอบถามการรวมบัญชี และตั้งชื่อว่า *สายการบิน*</span><span class="sxs-lookup"><span data-stu-id="ab66f-191">Create a transportation mode that will be used in consolidation queries, and name it *Airways*.</span></span>
1. <span data-ttu-id="ab66f-192">ไปที่ **การจัดการการขนส่ง \> การตั้งค่า \> ผู้ขนส่ง \> ผู้ขนส่งสินค้า**</span><span class="sxs-lookup"><span data-stu-id="ab66f-192">Go to **Transportation management \> Setup \> Carriers \> Shipping carriers**.</span></span>
1. <span data-ttu-id="ab66f-193">สร้างผู้ขนส่งที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-193">Create a carrier that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-194">**ผู้ขนส่งสินค้า:** *สายการบิน*</span><span class="sxs-lookup"><span data-stu-id="ab66f-194">**Shipping carrier:** *Airways*</span></span>
    - <span data-ttu-id="ab66f-195">**ชื่อ:** *สายการบิน*</span><span class="sxs-lookup"><span data-stu-id="ab66f-195">**Name:** *Airways*</span></span>
    - <span data-ttu-id="ab66f-196">**โหมด:** *สายการบิน*</span><span class="sxs-lookup"><span data-stu-id="ab66f-196">**Mode:** *Airways*</span></span>

1. <span data-ttu-id="ab66f-197">บน FastTab **บริการ** สำหรับผู้ขนส่งใหม่ ให้เพิ่มแถวที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-197">On the **Services** FastTab for the new carrier, add a row that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-198">**บริการขนส่ง:** *อากาศ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-198">**Carrier service:** *Air*</span></span>
    - <span data-ttu-id="ab66f-199">**วิธีการขนส่ง:** *อากาศ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-199">**Transportation method:** *Air*</span></span>

1. <span data-ttu-id="ab66f-200">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-200">On the Action Pane, select **Save**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ab66f-201">เมื่อคุณบันทึกผู้ขนส่งใหม่จะมีการตั้งค่าฟิลด์ **โหมดการจัดส่ง** สำหรับแถวใหม่ในกริด **บริการ** เป็น *Airwa-Air* โดยอัตโนมัติ</span><span class="sxs-lookup"><span data-stu-id="ab66f-201">When you save the new carrier, the **Mode of delivery** field for the new row in the **Services** grid is automatically set to *Airwa-Air*.</span></span> <span data-ttu-id="ab66f-202">เมื่อคุณใช้โหมดการจัดส่ง *Airwa-Air* สำหรับใบสั่งขาย โหมดการขนส่ง *สายการบิน* จะถูกใช้สำหรับการจัดส่งที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="ab66f-202">When you use the *Airwa-Air* mode of delivery for a sales order, the *Airways* transportation mode will be used for related shipments.</span></span>

#### <a name="create-an-order-pool"></a><span data-ttu-id="ab66f-203">สร้างกลุ่มใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-203">Create an order pool</span></span>

1. <span data-ttu-id="ab66f-204">ไปที่ **การขายและการตลาด \> การตั้งค่า \> ใบสั่งขาย \> กลุ่มใบสั่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-204">Go to **Sales and marketing \> Setup \> Sales orders \> Order pools**.</span></span>
1. <span data-ttu-id="ab66f-205">สร้างกลุ่มใบสั่งที่จะใช้สำหรับการสอบถามการรวมบัญชี</span><span class="sxs-lookup"><span data-stu-id="ab66f-205">Create an order pool that will be used for the consolidation query.</span></span> <span data-ttu-id="ab66f-206">กลุ่มใบสั่งนี้ควรมีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-206">This order pool should have the following settings:</span></span>

    - <span data-ttu-id="ab66f-207">**กลุ่ม:** ให้ป้อนจำนวนเต็มที่ไม่ได้ถูกใช้โดยกลุ่มอื่นๆ อยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ab66f-207">**Pool:** Enter an integer that isn't already used by any other pool.</span></span>
    - <span data-ttu-id="ab66f-208">**ชื่อ:** *ShipCons*</span><span class="sxs-lookup"><span data-stu-id="ab66f-208">**Name:** *ShipCons*</span></span>

1. <span data-ttu-id="ab66f-209">ไปที่ **การขายและการตลาด \> ลูกค้า \> ลูกค้าทั้งหมด**</span><span class="sxs-lookup"><span data-stu-id="ab66f-209">Go to **Sales and marketing \> Customers \> All customers**.</span></span>
1. <span data-ttu-id="ab66f-210">เปิดลูกค้าที่มีหมายเลขบัญชี *US-003*</span><span class="sxs-lookup"><span data-stu-id="ab66f-210">Open the customer that has account number *US-003*.</span></span>
1. <span data-ttu-id="ab66f-211">บน FastTab **ค่าเริ่มต้นของใบสั่งขาย** ให้ตั้งค่าฟิลด์ **กลุ่มใบสั่งขาย** เป็นกลุ่มใบสั่งที่คุณเพิ่งสร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-211">On the **Sales order defaults** FastTab, set the **Sales order pool** field to the order pool that you just created.</span></span>
1. <span data-ttu-id="ab66f-212">ปิดหน้า แล้วจากนั้น ทำซ้ำขั้นตอนที่ 4 และ 5 สำหรับลูกค้าที่มีหมายเลขบัญชี *US-004*</span><span class="sxs-lookup"><span data-stu-id="ab66f-212">Close the page, and then repeat the steps 4 and 5 for the customer that has account number *US-004*.</span></span>

### <a name="create-example-policy-1"></a><span data-ttu-id="ab66f-213">สร้างนโยบายตัวอย่าง 1</span><span class="sxs-lookup"><span data-stu-id="ab66f-213">Create example policy 1</span></span>

<span data-ttu-id="ab66f-214">ในตัวอย่างนี้ คุณจะสร้างนโยบาย *ลูกค้า + โหมด* ที่สามารถใช้สำหรับกรณีทางธุรกิจต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-214">In this example, you will create a *Customer+Mode* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="ab66f-215">นโยบายนี้จะสอบถามเกี่ยวกับบัญชีลูกค้าเฉพาะ (*US-001*) และโหมดการจัดส่งเฉพาะ (*Airwa-Air*)</span><span class="sxs-lookup"><span data-stu-id="ab66f-215">The policy will query for a specific customer account (*US-001*) and a specific mode of delivery (*Airwa-Air*).</span></span>
- <span data-ttu-id="ab66f-216">การรวมบัญชีที่มีการจัดส่งที่เปิดค้างไว้ถูกปิดอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-216">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="ab66f-217">มีการดำเนินการการรวมบัญชีสำหรับรหัสใบสั่งแต่ละรหัส</span><span class="sxs-lookup"><span data-stu-id="ab66f-217">Consolidation is done per order ID.</span></span> <span data-ttu-id="ab66f-218">(กล่าวคือ จะมีการจัดส่งแยกต่างหากสำหรับแต่ละใบสั่ง คลังสินค้า ฯลฯ)</span><span class="sxs-lookup"><span data-stu-id="ab66f-218">(In other words, there will be separate shipments per order, warehouse, and so on.)</span></span>

<span data-ttu-id="ab66f-219">ทำตามขั้นตอนต่อไปนี้เพื่อสร้างนโยบายการรวมบัญชีการจัดส่งสำหรับกรณีทางธุรกิจนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-219">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="ab66f-220">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-220">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-221">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-221">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-222">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้าง** เพื่อสร้างนโยบายที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-222">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-223">**ชื่อนโยบาย:** *CustomerMode*</span><span class="sxs-lookup"><span data-stu-id="ab66f-223">**Policy name:** *CustomerMode*</span></span>
    - <span data-ttu-id="ab66f-224">**คำอธิบายนโยบาย:** *บัญชีลูกค้าและโหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-224">**Policy description:** *Customer account and mode of delivery*</span></span>

1. <span data-ttu-id="ab66f-225">ปล่อยให้ตัวเลือก **รวมบัญชีกับการจัดส่งที่เปิดอยู่** ถูกตั้งค่าเป็น *ไม่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-225">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="ab66f-226">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-226">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="ab66f-227">บน FastTab **ฟิลด์การรวมบัญชี** ในรายการ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-227">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="ab66f-228">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-228">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-229">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-229">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-230">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม บนแท็บ **ช่วง** ในกริด ให้ค้นหาแถวที่มีการตั้งค่าฟิลด์ของ **ฟิลด์** เป็น *บัญชีลูกค้า* และตั้งค่าฟิลด์ **เงื่อนไข** สำหรับแถวนั้นเป็น *US-001*</span><span class="sxs-lookup"><span data-stu-id="ab66f-230">In the query editor dialog box, on the **Range** tab, in the grid, find the row where the **Field** field is set to *Customer account*, and set the **Criteria** field for that row to *US-001*.</span></span>
1. <span data-ttu-id="ab66f-231">เลือก **เพิ่ม** เพื่อเพิ่มแถวที่มีการตั้งค่าต่อไปนี้ไปยังกริด:</span><span class="sxs-lookup"><span data-stu-id="ab66f-231">Select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="ab66f-232">**ตาราง:** *รายการใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-232">**Table:** *Order lines*</span></span>
    - <span data-ttu-id="ab66f-233">**ตารางสืบทอด:** *รายการใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-233">**Derived table:** *Order lines*</span></span>
    - <span data-ttu-id="ab66f-234">**ฟิลด์:** *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-234">**Field:** *Mode of delivery*</span></span>
    - <span data-ttu-id="ab66f-235">**เงื่อนไข:** *Airwa-Air*</span><span class="sxs-lookup"><span data-stu-id="ab66f-235">**Criteria:** *Airwa-Air*</span></span>

1. <span data-ttu-id="ab66f-236">เลือก **ตกลง** เพื่อปิดกล่องโต้ตอบ</span><span class="sxs-lookup"><span data-stu-id="ab66f-236">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="ab66f-237">สำหรับกรณีทางธุรกิจนี้ รายการใบสั่งสำหรับลูกค้าของ *US-001* ที่ใช้โหมดการจัดส่ง *Airwa-Air* จะไม่มีการรวมบัญชีระหว่างใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-237">For this business case, order lines for customer *US-001* that use the *Airwa-Air* mode of delivery won't be consolidated across orders.</span></span> <span data-ttu-id="ab66f-238">นโยบายนี้มีไว้สำหรับใช้เป็นอันดับแรกในลำดับ ในกรณีที่การจัดส่งสำหรับโหมดการจัดส่งอื่นๆ ทั้งหมดถูกรวมบัญชีสำหรับลูกค้านี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-238">This policy is intended to be used first in a sequence, in cases where shipments for all other modes of delivery are consolidated for this customer.</span></span>

### <a name="create-example-policy-2"></a><span data-ttu-id="ab66f-239">สร้างนโยบายตัวอย่าง 2</span><span class="sxs-lookup"><span data-stu-id="ab66f-239">Create example policy 2</span></span>

<span data-ttu-id="ab66f-240">ในตัวอย่างนี้ คุณจะสร้างนโยบาย *วัตถุอันตราย* ที่สามารถใช้สำหรับกรณีทางธุรกิจต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-240">In this example, you will create a *Hazardous goods* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="ab66f-241">นโยบายนี้จะสอบถามเกี่ยวกับรหัสตัวกรองเฉพาะ (*อันตราย*) และโหมดการจัดส่งเฉพาะ (*Airwa-Air*)</span><span class="sxs-lookup"><span data-stu-id="ab66f-241">The policy will query for a specific filter code (*hazardous*) and a specific mode of delivery (*Airwa-Air*).</span></span>
- <span data-ttu-id="ab66f-242">การรวมบัญชีที่มีการจัดส่งที่เปิดค้างไว้ถูกเปิดอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-242">Consolidation with open shipments is turned on.</span></span>
- <span data-ttu-id="ab66f-243">มีการดำเนินการการรวมบัญชีระหว่างใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-243">Consolidation is done across orders.</span></span> <span data-ttu-id="ab66f-244">(กล่าวคือ จะมีการจัดส่งแยกต่างหากสำหรับแต่ละบัญชี คลังสินค้า และอื่นๆ แต่เฉพาะภายในกลุ่มสินค้าที่ระบุไว้ในการสอบถามเท่านั้น)</span><span class="sxs-lookup"><span data-stu-id="ab66f-244">(In other words, there will be separate shipments per account, warehouse, and so on, but only within the item group that is specified in the query.)</span></span>

<span data-ttu-id="ab66f-245">ทำตามขั้นตอนต่อไปนี้เพื่อสร้างนโยบายการรวมบัญชีการจัดส่งสำหรับกรณีทางธุรกิจนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-245">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="ab66f-246">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-246">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-247">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-247">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-248">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้าง** เพื่อสร้างนโยบายที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-248">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-249">**ชื่อนโยบาย:** *ชนิดสินค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-249">**Policy name:** *Item type*</span></span>
    - <span data-ttu-id="ab66f-250">**คำอธิบายนโยบาย:** *รวมบัญชีสินค้าชนิดเดียวกันระหว่างใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-250">**Policy description:** *Consolidate the same type of item across orders*</span></span>

1. <span data-ttu-id="ab66f-251">ตั้งค่าตัวเลือก **รวมบัญชีกับการจัดส่งที่เปิดอยู่** เป็น *ใช่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-251">Set the **Consolidate with open shipments** option to *Yes*.</span></span>
1. <span data-ttu-id="ab66f-252">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-252">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="ab66f-253">บน FastTab **ฟิลด์การรวมบัญชี** ในรายการ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-253">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="ab66f-254">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-254">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-255">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-255">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-256">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม บนแท็บ **รวม** ขยายและเลือก **ตาราง \> รายละเอียดจำนวนงานในศูนย์การผลิต** ในแผนภูมิ</span><span class="sxs-lookup"><span data-stu-id="ab66f-256">In the query editor dialog box, on the **Joins** tab, expand and select **Tables \> Load details** in the tree.</span></span>
1. <span data-ttu-id="ab66f-257">เลือก **เพิ่มการรวมตาราง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-257">Select **Add table join**.</span></span>
1. <span data-ttu-id="ab66f-258">ในกริดของความสัมพันธ์ที่ปรากฏขึ้น ให้ค้นหาและเลือกแถวที่มีการตั้งค่าฟิลด์ **ความสัมพันธ์** เป็น *หมายเลขสินค้าในคลังสินค้า (หมายเลขสินค้า)* และจากนั้น เลือก **เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-258">In the grid of relations that appears, find and select the row where the **Relation** field is set to *Warehouse item number (Item number)*, and then select **Select**.</span></span> 
1. <span data-ttu-id="ab66f-259">บนแท็บ **ช่วง** เลือก **เพิ่ม** เพื่อเพิ่มแถวที่มีการตั้งค่าต่อไปนี้ไปยังกริด:</span><span class="sxs-lookup"><span data-stu-id="ab66f-259">On the **Range** tab, select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="ab66f-260">**ตาราง:** *หมายเลขสินค้าในคลังสินค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-260">**Table:** *Warehouse item number*</span></span>
    - <span data-ttu-id="ab66f-261">**ตารางสืบทอด:** *หมายเลขสินค้าในคลังสินค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-261">**Derived table:** *Warehouse item number*</span></span>
    - <span data-ttu-id="ab66f-262">**ฟิลด์:** *รหัส 4*</span><span class="sxs-lookup"><span data-stu-id="ab66f-262">**Field:** *Code 4*</span></span>
    - <span data-ttu-id="ab66f-263">**เงื่อนไข:** *ไวไฟ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-263">**Criteria:** *Flammable*</span></span>

1. <span data-ttu-id="ab66f-264">เลือก **ตกลง** เพื่อปิดกล่องโต้ตอบ</span><span class="sxs-lookup"><span data-stu-id="ab66f-264">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="ab66f-265">สำหรับกรณีทางธุรกิจนี้ รายการใบสั่งทั้งหมดที่ซึ่งสินค้ามีรหัสตัวกรองเฉพาะ (นั่นคือ รหัสตัวกรองที่มีการตั้งค่าฟิลด์ **รหัส 4** เป็น *ไวไฟ*) จะถูกรวมบัญชีเข้ากับสินค้าอื่นๆ ของชนิดเดียวกันระหว่างใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-265">For this business case, all order lines where items have a specific filter code (that is, the filter code where the **Code 4** field is set to *Flammable*) will be consolidated with other items of the same type across orders.</span></span> <span data-ttu-id="ab66f-266">ถ้ามีการจัดส่งที่เปิดค้างไว้สำหรับบัญชี คลังสินค้า และกลุ่มสินค้าเดียวกัน รายการใหม่จะถูกแนบอยู่กับสินค้านั้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-266">If there is an open shipment for the same account, warehouse, and group of items, the new lines will be attached to it.</span></span>

### <a name="create-example-policy-3"></a><span data-ttu-id="ab66f-267">สร้างนโยบายตัวอย่าง 3</span><span class="sxs-lookup"><span data-stu-id="ab66f-267">Create example policy 3</span></span>

<span data-ttu-id="ab66f-268">ในตัวอย่างนี้ คุณจะสร้างนโยบาย *ความต้องการของลูกค้า* ที่สามารถใช้สำหรับกรณีทางธุรกิจต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-268">In this example, you will create a *Customers' requirements* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="ab66f-269">นโยบายจะสอบถามสำหรับบัญชีลูกค้าที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="ab66f-269">The policy will query for a specific customer account.</span></span>
- <span data-ttu-id="ab66f-270">การรวมบัญชีที่มีการจัดส่งที่เปิดค้างไว้ถูกเปิดอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-270">Consolidation with open shipments is turned on.</span></span>
- <span data-ttu-id="ab66f-271">มีการดำเนินการรวมบัญชีระหว่างใบสั่ง แต่จะขึ้นอยู่กับการจัดหาวัตถุดิบของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="ab66f-271">Consolidation is done across orders but is based on customer requisitions.</span></span> <span data-ttu-id="ab66f-272">(กล่าวคือ ใบสั่งหลายใบจะถูกจัดกลุ่มเป็นการจัดส่ง โดยยึดตามหมายเลขการจัดหาวัตถุดิบของลูกค้าและคลังสินค้าเดียวกัน)</span><span class="sxs-lookup"><span data-stu-id="ab66f-272">(In other words, multiple orders will be grouped into shipments, based on the same customer requisition number and warehouse.)</span></span>

<span data-ttu-id="ab66f-273">ทำตามขั้นตอนต่อไปนี้เพื่อสร้างนโยบายการรวมบัญชีการจัดส่งสำหรับกรณีทางธุรกิจนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-273">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="ab66f-274">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-274">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-275">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-275">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-276">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้าง** เพื่อสร้างนโยบายที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-276">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-277">**ชื่อนโยบาย:** *CustomerOrderNo*</span><span class="sxs-lookup"><span data-stu-id="ab66f-277">**Policy name:** *CustomerOrderNo*</span></span>
    - <span data-ttu-id="ab66f-278">**คำอธิบายนโยบาย:** *รวมบัญชีรายการโดยยึดตาม PO ของลูกค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-278">**Policy description:** *Consolidate lines based on customer PO*</span></span>

1. <span data-ttu-id="ab66f-279">ตั้งค่าตัวเลือก **รวมบัญชีกับการจัดส่งที่เปิดอยู่** เป็น *ใช่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-279">Set the **Consolidate with open shipments** option to *Yes*.</span></span>
1. <span data-ttu-id="ab66f-280">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-280">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="ab66f-281">บน FastTab **ฟิลด์การรวมบัญชี** ในรายการ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *การจัดหาวัตถุดิบของลูกค้า*</span><span class="sxs-lookup"><span data-stu-id="ab66f-281">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Customer requisition*.</span></span>
1. <span data-ttu-id="ab66f-282">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-282">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-283">ในรายการ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-283">In the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="ab66f-284">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-284">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-285">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-285">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-286">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม บนแท็บ **ช่วง** ให้ค้นหาแถวที่มีการตั้งค่าฟิลด์ของ **ฟิลด์** เป็น *บัญชีลูกค้า* และตั้งค่าฟิลด์ **เงื่อนไข** สำหรับแถวนั้นเป็น *US-001*</span><span class="sxs-lookup"><span data-stu-id="ab66f-286">In the query editor dialog box, on the **Range** tab, find the row where the **Field** field is set to *Customer account*, and set the **Criteria** field for that row to *US-001*.</span></span>
1. <span data-ttu-id="ab66f-287">เลือก **ตกลง** เพื่อปิดกล่องโต้ตอบ</span><span class="sxs-lookup"><span data-stu-id="ab66f-287">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="ab66f-288">สำหรับกรณีทางธุรกิจนี้ รายการใบสั่งทั้งหมดที่ซึ่งใบสั่งขายมีหมายเลขการจัดหาวัตถุดิบของลูกค้าเดียวกันจะถูกรวมบัญชีอยู่ในการจัดส่งหนึ่งรายการ โดยไม่คำนึงถึงหมายเลขใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="ab66f-288">For this business case, all order lines where sales orders have the same customer requisition number will be consolidated into one shipment, regardless of the sales order number.</span></span> <span data-ttu-id="ab66f-289">(หมายเลขการจัดหาวัตถุดิบของลูกค้าถูกใช้เป็นหมายเลข \[PO\] ใบสั่งซื้อของลูกค้า) ถ้ามีการจัดส่งที่เปิดค้างไว้สำหรับบัญชี คลังสินค้า และการจัดหาวัตถุดิบของลูกค้าเดียวกัน รายการใหม่จะถูกแนบอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-289">(The customer requisition number is used as the customer's purchase order \[PO\] number.) If there is an open shipment for the same account, warehouse, and customer requisition, the new lines will be attached to it.</span></span> <span data-ttu-id="ab66f-290">คุณสามารถใช้นโยบายนี้ได้ ถ้าลูกค้าส่งรายการใบสั่งเพิ่มเติมที่มีหมายเลข PO เดียวกันหลายครั้งในระหว่างวัน และต้องการให้มีการจัดกลุ่มรายการทั้งหมดเป็นการจัดส่งเดียว</span><span class="sxs-lookup"><span data-stu-id="ab66f-290">This policy can be used if the customer sends additional order lines that have the same PO number several times during a day and wants all the lines to be grouped into one shipment.</span></span> <span data-ttu-id="ab66f-291">(กล่าวคือ จะมีใบตราส่งหนึ่งใบและบันทึกการจัดส่งหนึ่งฉบับ)</span><span class="sxs-lookup"><span data-stu-id="ab66f-291">(In other words, there will be one bill of lading and one packing slip.)</span></span>

### <a name="create-example-policy-4"></a><span data-ttu-id="ab66f-292">สร้างนโยบายตัวอย่าง 4</span><span class="sxs-lookup"><span data-stu-id="ab66f-292">Create example policy 4</span></span>

<span data-ttu-id="ab66f-293">ในตัวอย่างนี้ คุณจะสร้างนโยบาย *ลูกค้าที่อนุญาตการรวมบัญชี* ที่สามารถใช้สำหรับกรณีทางธุรกิจต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-293">In this example, you will create a *Customers allowing consolidation* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="ab66f-294">นโยบายจะสอบถามสำหรับกลุ่มใบสั่งเฉพาะเพื่อระบุลูกค้าที่ยอมรับการจัดส่งที่รวมบัญชี</span><span class="sxs-lookup"><span data-stu-id="ab66f-294">The policy will query for a specific order pool to identify customers who accept consolidated shipments.</span></span>
- <span data-ttu-id="ab66f-295">การรวมบัญชีที่มีการจัดส่งที่เปิดค้างไว้ถูกปิดอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-295">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="ab66f-296">มีการดำเนินการรวมบัญชีระหว่างใบสั่งโดยใช้ฟิลด์ที่เลือกโดยนโยบาย CrossOrder เริ่มต้น (เพื่อจำลองกล่องกาเครื่องหมาย **รวมบัญชีการจัดส่งเมื่อนำออกใช้ไปยังคลังสินค้า** ก่อนหน้านี้)</span><span class="sxs-lookup"><span data-stu-id="ab66f-296">Consolidation is done across orders using the fields selected by default CrossOrder policy (to replicate the previous **Consolidate shipment at release to warehouse** check box).</span></span>

- <span data-ttu-id="ab66f-297">คุณสามารถแทนที่กฎในใบสั่งขายได้โดยการเลือกกลุ่มใบสั่งที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="ab66f-297">You can override the rule on a sales order by selecting a different order pool.</span></span>

<span data-ttu-id="ab66f-298">ทำตามขั้นตอนต่อไปนี้เพื่อสร้างนโยบายการรวมบัญชีการจัดส่งสำหรับกรณีทางธุรกิจนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-298">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="ab66f-299">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-299">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-300">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-300">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-301">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้าง** เพื่อสร้างนโยบายที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-301">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-302">**ชื่อนโยบาย:** *กลุ่มใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-302">**Policy name:** *Order pool*</span></span>
    - <span data-ttu-id="ab66f-303">**คำอธิบายนโยบาย:** *รวมบัญชีระหว่างใบสั่งโดยยึดตามกลุ่มใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-303">**Policy description:** *Consolidate across orders based on order pool*</span></span>

1. <span data-ttu-id="ab66f-304">ปล่อยให้ตัวเลือก **รวมบัญชีกับการจัดส่งที่เปิดอยู่** ถูกตั้งค่าเป็น *ไม่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-304">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="ab66f-305">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-305">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="ab66f-306">บน FastTab **ฟิลด์การรวมบัญชี** ในรายการ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-306">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="ab66f-307">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-307">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-308">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-308">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-309">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม บนแท็บ **ช่วง** ให้เลือก **เพิ่ม** เพื่อเพิ่มแถวที่มีการตั้งค่าต่อไปนี้ไปยังกริด:</span><span class="sxs-lookup"><span data-stu-id="ab66f-309">In the query editor dialog box, on the **Range** tab, select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="ab66f-310">**ตาราง:** *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-310">**Table:** *Sales orders*</span></span>
    - <span data-ttu-id="ab66f-311">**ตารางสืบทอด:** *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-311">**Derived table:** *Sales orders*</span></span>
    - <span data-ttu-id="ab66f-312">**ฟิลด์:** *กลุ่ม*</span><span class="sxs-lookup"><span data-stu-id="ab66f-312">**Field:** *Pool*</span></span>
    - <span data-ttu-id="ab66f-313">**เงื่อนไข:** *ShipCons*</span><span class="sxs-lookup"><span data-stu-id="ab66f-313">**Criteria:** *ShipCons*</span></span>

1. <span data-ttu-id="ab66f-314">เลือก **ตกลง** เพื่อปิดกล่องโต้ตอบ</span><span class="sxs-lookup"><span data-stu-id="ab66f-314">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="ab66f-315">สำหรับกรณีทางธุรกิจนี้ รายการใบสั่งทั้งหมดที่ซึ่งใบสั่งขายเป็นของกลุ่มใบสั่งเดียวกันจะถูกรวมเข้ากับการจัดส่งหนึ่งรายการทั่วทั้งใบสั่งขายสำหรับโหมดการจัดส่งของบัญชี คลังสินค้า และการขนส่งเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="ab66f-315">For this business case, all order lines where sales orders belong to the same order pool will be consolidated into one shipment across sales orders for the same account, warehouse, and transportation mode of delivery.</span></span> <span data-ttu-id="ab66f-316">แทนที่จะเป็นกลุ่มใบสั่ง คุณสามารถใช้ฟิลด์อื่นเพื่อแยกความแตกต่างของกลุ่มลูกค้าและใช้ส่วนหัวของใบสั่งขายตามค่าเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-316">Instead of the order pool, you can use any other field to distinguish a group of customers and use the sales order header by default.</span></span> <span data-ttu-id="ab66f-317">คุณสามารถใช้วิธีการนี้ได้ ถ้าลูกค้า ไม่ใช่คลังสินค้า กำลังสนับสนุนความต้องการสำหรับการรวมบัญชี</span><span class="sxs-lookup"><span data-stu-id="ab66f-317">You can use this approach if the customer, not the warehouse, is driving the need for consolidation.</span></span> <span data-ttu-id="ab66f-318">(ในตรรกะการรวมบัญชีก่อนหน้านี้ คลังสินค้าสนับสนุนความต้องการสำหรับการรวมบัญชี)</span><span class="sxs-lookup"><span data-stu-id="ab66f-318">(In the earlier consolidation logic, the warehouse drove the need for consolidation.)</span></span>

### <a name="create-example-policy-5"></a><span data-ttu-id="ab66f-319">สร้างนโยบายตัวอย่าง 5</span><span class="sxs-lookup"><span data-stu-id="ab66f-319">Create example policy 5</span></span>

<span data-ttu-id="ab66f-320">ในตัวอย่างนี้ คุณจะสร้างนโยบาย *คลังสินค้าที่อนุญาตการรวมบัญชี* ที่สามารถใช้สำหรับกรณีทางธุรกิจต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-320">In this example, you will create a *Warehouses allowing consolidation* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="ab66f-321">นโยบายจะสอบถามสำหรับกลุ่มใบสั่งเฉพาะเพื่อระบุคลังสินค้าที่สามารถรวมบัญชีการจัดส่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-321">The policy will query for a specific order pool to identify warehouses that can consolidate shipments.</span></span>
- <span data-ttu-id="ab66f-322">การรวมบัญชีที่มีการจัดส่งที่เปิดค้างไว้ถูกปิดอยู่</span><span class="sxs-lookup"><span data-stu-id="ab66f-322">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="ab66f-323">มีการดำเนินการรวมบัญชีระหว่างใบสั่งโดยใช้ฟิลด์ที่เลือกโดยนโยบาย CrossOrder เริ่มต้น (เพื่อจำลองกล่องกาเครื่องหมาย **รวมบัญชีการจัดส่งเมื่อนำออกใช้ไปยังคลังสินค้า** ก่อนหน้านี้)</span><span class="sxs-lookup"><span data-stu-id="ab66f-323">Consolidation is done across orders using the fields selected by default CrossOrder policy (to replicate the previous **Consolidate shipment at release to warehouse** check box).</span></span>

<span data-ttu-id="ab66f-324">โดยทั่วไป กรณีทางธุรกิจนี้สามารถแก้ไขได้โดยใช้นโยบายเริ่มต้นที่คุณสร้างขึ้นใน [สถานการณ์จำลอง 1](#scenario-1)</span><span class="sxs-lookup"><span data-stu-id="ab66f-324">Typically, this business case can be addressed by using the default policies that you created in [scenario 1](#scenario-1).</span></span> <span data-ttu-id="ab66f-325">อย่างไรก็ตาม คุณยังสามารถสร้างนโยบายที่คล้ายกันด้วยตนเองได้โดยปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-325">However, you can also manually create similar policies by following these steps.</span></span>

1. <span data-ttu-id="ab66f-326">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-326">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-327">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-327">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-328">บนบานหน้าต่างการดำเนินการ ให้เลือก **สร้าง** เพื่อสร้างนโยบายที่มีการตั้งค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-328">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="ab66f-329">**ชื่อนโยบาย:** *ข้ามใบสั่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-329">**Policy name:** *Cross-order*</span></span>
    - <span data-ttu-id="ab66f-330">**คำอธิบายนโยบาย:** *การรวมบัญชีข้ามใบสั่งสำหรับคลังสินค้าที่ระบุ*</span><span class="sxs-lookup"><span data-stu-id="ab66f-330">**Policy description:** *Cross-order consolidation for specific warehouses*</span></span>

1. <span data-ttu-id="ab66f-331">ปล่อยให้ตัวเลือก **รวมบัญชีกับการจัดส่งที่เปิดอยู่** ถูกตั้งค่าเป็น *ไม่*</span><span class="sxs-lookup"><span data-stu-id="ab66f-331">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="ab66f-332">บนบานหน้าต่างการดำเนินการ เลือก **บันทึก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-332">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="ab66f-333">บน FastTab **ฟิลด์การรวมบัญชี** ในฟิลด์ **ฟิลด์คงเหลือ** ให้เลือกแถวที่ซึ่งฟิลด์ของ **ฟิลด์ชื่อ** ถูกตั้งค่าเป็น *โหมดการจัดส่ง*</span><span class="sxs-lookup"><span data-stu-id="ab66f-333">On the **Consolidation fields** FastTab, in the **Remaining fields** field, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="ab66f-334">เลือกปุ่ม **เพิ่ม** ![ลูกศรขวา](media/forward-button.png) เพื่อย้ายฟิลด์ไปยังรายการ **ฟิลด์ที่เลือก**</span><span class="sxs-lookup"><span data-stu-id="ab66f-334">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="ab66f-335">บนบานหน้าต่างการดำเนินการ เลือก **แก้ไขการสอบถาม**</span><span class="sxs-lookup"><span data-stu-id="ab66f-335">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="ab66f-336">ในกล่องโต้ตอบตัวแก้ไขการสอบถาม บนแท็บ **ช่วง** ให้ค้นหาแถวที่ซึ่งมีการตั้งค่าฟิลด์ของ **ฟิลด์** เป็น *คลังสินค้า* และตั้งค่าฟิลด์ **เงื่อนไข** สำหรับแถวนั้นเป็น *61, 63*</span><span class="sxs-lookup"><span data-stu-id="ab66f-336">In the query editor dialog box, on the **Range** tab, find the row where the **Field** field is set to *Warehouse*, and set the **Criteria** field for that row to *61, 63*.</span></span>
1. <span data-ttu-id="ab66f-337">เลือก **ตกลง** เพื่อปิดกล่องโต้ตอบ</span><span class="sxs-lookup"><span data-stu-id="ab66f-337">Select **OK** to close the dialog box.</span></span>

### <a name="set-the-order"></a><span data-ttu-id="ab66f-338">ตั้งค่าใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-338">Set the order</span></span>

<span data-ttu-id="ab66f-339">หลังจากที่คุณได้สร้างนโยบายทั้งหมดแล้ว คุณต้องสร้างใบสั่งที่จะนำไปใช้</span><span class="sxs-lookup"><span data-stu-id="ab66f-339">Now that you've created all your policies, you must establish the order that they will be applied in.</span></span> <span data-ttu-id="ab66f-340">เมื่อต้องการใช้วิธีการแบบพีระมิด ที่ซึ่งนโยบายที่มีเงื่อนไขมากที่สุดถูกประเมินเป็นมีระดับความสำคัญสูงสุด ให้ทำตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-340">To use a pyramid-like approach, where the policies that have the most conditions are evaluated as having the highest priority, follow these steps.</span></span>

1. <span data-ttu-id="ab66f-341">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> การนำออกใช้ไปยังคลังสินค้า \> นโยบายการรวมบัญชีการจัดส่ง**</span><span class="sxs-lookup"><span data-stu-id="ab66f-341">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="ab66f-342">ตั้งค่าฟิลด์ **ชนิดนโยบาย** เป็น *ใบสั่งขาย*</span><span class="sxs-lookup"><span data-stu-id="ab66f-342">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="ab66f-343">เลือกนโยบายแต่ละนโยบายที่แสดงรายการอยู่ในคอลัมน์ด้านซ้าย และจากนั้นใช้ปุ่ม **เลื่อนขึ้น** และ **เลื่อนลง** บนบานหน้าต่างการดำเนินการ เพื่อจัดเรียงนโยบายตามลำดับต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ab66f-343">Select each policy that is listed in the left column, and then use the **Move up** and **Move down** buttons on the Action Pane to arrange the policies in the following order:</span></span>

    1. <span data-ttu-id="ab66f-344">CustomerMode</span><span class="sxs-lookup"><span data-stu-id="ab66f-344">CustomerMode</span></span>
    1. <span data-ttu-id="ab66f-345">ชนิดรายการ</span><span class="sxs-lookup"><span data-stu-id="ab66f-345">Item type</span></span>
    1. <span data-ttu-id="ab66f-346">CustomerOrderNo</span><span class="sxs-lookup"><span data-stu-id="ab66f-346">CustomerOrderNo</span></span>
    1. <span data-ttu-id="ab66f-347">กลุ่มใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-347">Order pool</span></span>
    1. <span data-ttu-id="ab66f-348">ข้ามใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-348">Cross-order</span></span>
    1. <span data-ttu-id="ab66f-349">ค่าเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="ab66f-349">Default</span></span>

## <a name="example-scenarios-of-how-to-use-shipment-consolidation-policies"></a><a name="example-scenarios"></a> <span data-ttu-id="ab66f-350">สถานการณ์ตัวอย่างของวิธีการใช้นโยบายการรวมบัญชีการจัดส่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-350">Example scenarios of how to use shipment consolidation policies</span></span>

<span data-ttu-id="ab66f-351">สถานการณ์สมมติต่อไปนี้แสดงวิธีการที่คุณสามารถใช้นโยบายการรวมบัญชีการจัดส่งที่คุณสร้างขึ้นในขณะที่อ่านหัวข้อนี้</span><span class="sxs-lookup"><span data-stu-id="ab66f-351">The following scenarios illustrate how you could use the shipment consolidation policies that you created while reading this topic.</span></span> <span data-ttu-id="ab66f-352">สถานการณ์แต่ละสถานการณ์จะนำคุณผ่านกระบวนการรวมบัญชีการจัดส่งที่ใช้นโยบายการรวมบัญชีการจัดส่ง ในระหว่างการนำออกใช้แบบอัตโนมัติหรือแบบด้วยตนเองไปยังคลังสินค้า:</span><span class="sxs-lookup"><span data-stu-id="ab66f-352">Each scenario walks you through a shipment consolidation process that uses shipment consolidation policies during automated or manual release to the warehouse:</span></span>

- <span data-ttu-id="ab66f-353">สถานการณ์จำลอง 1: [รวมบัญชีการจัดส่ง เมื่อนำออกใช้ไปยังคลังสินค้าโดยใช้การนำใบสั่งขายออกใช้โดยอัตโนมัติ](../warehousing/consolidate-shipments-automatic.md)</span><span class="sxs-lookup"><span data-stu-id="ab66f-353">Scenario 1: [Consolidate shipments when they are released to the warehouse by using Automatic release of sales orders](../warehousing/consolidate-shipments-automatic.md)</span></span>
- <span data-ttu-id="ab66f-354">สถานการณ์จำลอง 2: [รวมบัญชีการจัดส่ง เมื่อนโยบายการรวมบัญชีการจัดส่งถูกแทนที่จากหน้านำออกใช้ไปยังคลังสินค้า](../warehousing/consolidate-shipments-release-to-warehouse-override.md)</span><span class="sxs-lookup"><span data-stu-id="ab66f-354">Scenario 2: [Consolidate shipments when the shipment consolidation policy is overridden from the Release to warehouse page](../warehousing/consolidate-shipments-release-to-warehouse-override.md)</span></span>
- <span data-ttu-id="ab66f-355">สถานการณ์จำลอง 3: [รวมบัญชีการจัดส่งโดยใช้การนำออกใช้ไปยังคลังสินค้าจากเวิร์กเบนช์การวางแผนการบรรทุก](../warehousing/consolidate-shipments-load-planning-workbench.md)</span><span class="sxs-lookup"><span data-stu-id="ab66f-355">Scenario 3: [Consolidate shipments by using Release to warehouse from the load planning workbench](../warehousing/consolidate-shipments-load-planning-workbench.md)</span></span>
- <span data-ttu-id="ab66f-356">สถานการณ์จำลอง 4: [รวมบัญชีการจัดส่งโดยใช้เวิร์กเบนช์การรวมบัญชีการจัดส่ง](../warehousing/consolidate-shipments-manual-workbench.md)</span><span class="sxs-lookup"><span data-stu-id="ab66f-356">Scenario 4: [Consolidate shipments by using the shipment consolidation workbench](../warehousing/consolidate-shipments-manual-workbench.md)</span></span>
- <span data-ttu-id="ab66f-357">สถานการณ์จำลอง 5: [รวมบัญชีการจัดส่งด้วยตนเองโดยใช้หน้ารวมบัญชีการจัดส่ง](../warehousing/consolidate-shipments-manual-form.md)</span><span class="sxs-lookup"><span data-stu-id="ab66f-357">Scenario 5: [Consolidate shipments manually by using the Consolidate shipments page](../warehousing/consolidate-shipments-manual-form.md)</span></span>


## <a name="additional-resources"></a><span data-ttu-id="ab66f-358">ทรัพยากรเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="ab66f-358">Additional resources</span></span>

- [<span data-ttu-id="ab66f-359">นโยบายการรวมบัญชีการจัดส่ง</span><span class="sxs-lookup"><span data-stu-id="ab66f-359">Shipment consolidation policies</span></span>](about-shipment-consolidation-policies.md)
