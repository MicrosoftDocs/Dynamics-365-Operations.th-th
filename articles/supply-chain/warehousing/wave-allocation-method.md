---
title: การปันส่วนเวฟ
description: หัวข้อนี้จะอธิบายวิธีการตั้งค่าขั้นตอนการปันส่วนเวฟ รวมถึงวิธีการเปิดใช้งานการประมวลผลแบบขนาน
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: b01de3c9f1cbcb24abc2b5a0c91db7f0791020bf
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/11/2021
ms.locfileid: "6019014"
---
# <a name="wave-allocation"></a>การปันส่วนเวฟ

[!include [banner](../includes/banner.md)]

การประมวลผลเวฟอาจใช้เวลานาน และเวลาการประมวลผลส่วนใหญ่ถูกใช้ไปในขั้นตอนการปันส่วนและในขั้นตอนการสร้างงาน

ขณะนี้สามารถรันแต่ละขั้นตอนเหล่านี้พร้อมกันได้ ซึ่งสามารถปรับปรุงประสิทธิภาพของการประมวลผลเวฟได้ และอนุญาตให้มีการประมวลผลเวฟที่มีขนาดใหญ่กว่าในคลังสินค้าเดียวกันได้ หัวข้อนี้อธิบายวิธีการตั้งค่าวิธีการปันส่วนเวฟให้รันพร้อมกัน หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับวิธีตั้งค่าการสร้างงานให้รันพร้อมกัน โปรดดูที่ [จัดกำหนดการสร้างงานระหว่างเวฟ](configure-wave-schedule-work-creation.md)

สามารถปันส่วนเวฟได้ครั้งละหนึ่งเวฟที่คลังสินค้าในคราวเดียวกัน ข้อจำกัดเฉพาะนี้ถูกลบและแทนที่ด้วยข้อจำกัดใหม่ซึ่งล็อคเฉพาะสินค้าและมิติที่อยู่เหนือที่ตั้งในลำดับชั้นการจองเท่านั้น มิติเหนือสถานที่จะรวมมิติของผลิตภัณฑ์เสมอ ตัวอย่างเช่น ถ้าสินค้ามีการตั้งค่าคอนฟิกโดยใช้ *สี* ผลิตภัณฑ์ย่อยต่างๆ *สีแดง* *สีฟ้า* และ *สีเหลือง* สามารถประมวลผลพร้อมกันได้

ซึ่งหมายความว่าถ้าสินค้าเดียวกันที่มีมิติเหมือนกันสูงกว่าสถานที่จะถูกปันส่วนโดยเวฟหนึ่ง เวฟอื่นจะต้องรอเพื่อรับล็อคของสินค้าและมิติเดียวกัน ถ้าไม่สามารถใช้ล็อคได้ภายในเวลาที่เหมาะสม ข้อผิดพลาดจะเกิดขึ้นและการประมวลผลเวฟจะล้มเหลว

เมื่อต้องการใช้การประมวลผลแบบขนาน เวฟต้องรันในชุดงาน

## <a name="performance-improvements"></a>การปรับปรุงประสิทธิภาพ

ประโยชน์ของประสิทธิภาพการประมวลผลพร้อมกันจะอยู่ในสองประเภท:

- **ปริมาณที่สามารถประมวลผลได้ดีขึ้น** - ปริมาณที่สามารถประมวลผลได้ของเวฟจะปรับปรุงได้แม้ว่าจะไม่ได้ตั้งค่าคอนฟิกการประมวลผลคู่ขนานไว้ โดยเฉพาะกับสถานการณ์ที่ไม่มีรายการทับซ้อนกันภายในเวฟ
- **การปรับปรุงการปันส่วนคลื่นเดียว** - การทดสอบกับข้อมูลลูกค้ามีการปรับปรุงประสิทธิภาพใกล้กับ 50% หลังจากเปลี่ยนเป็นการปันส่วนพร้อมกัน การประมวลผลแบบขนานจะเสร็จสิ้นต่อสินค้าและมิติเหนือสถานที่ ดังนั้นการปรับปรุงจะขึ้นอยู่กับสินค้าต่างๆ ที่เวฟประกอบด้วย โครงสร้างพื้นฐานที่พร้อมใช้งาน และระยะเวลาของการปันส่วนเทียบกับช่วงเวลาของการสร้างงาน

## <a name="configure-parallel-allocation"></a>ตั้งค่าคอนฟิกการปันส่วนคู่ขนาน

### <a name="warehouse-management-parameters"></a>พารามิเตอร์การจัดการคลังสินค้า

เมื่อต้องการใช้การประมวลผลการปันส่วนแบบขนาน ให้ไปที่ **การจัดการคลังสินค้า > การตั้งค่า > พารามิเตอร์การจัดการคลังสินค้า** เปิดแท็บ **การประมวลผลเวฟ** และตั้งค่าต่อไปนี้

- **กลุ่มชุดงานการประมวลผลเวฟ** - เลือกกลุ่มชุดงานที่การประมวลผลเริ่มต้นของเวฟควรใช้ การประมวลผลการปันส่วนในเวลาต่อมาสามารถจะเสร็จสิ้นได้โดยใช้กลุ่มชุดงานต่างๆ
- **ประมวลผลเวฟในชุดงาน** - ตั้งค่านี้เป็น *ใช่* เพื่อใช้การประมวลผลแบบขนาน
- **คอยการล็อค (มิลลิวินาที)** - ป้อนเวลา ในหน่วยมิลลิวินาที ที่มีขั้นตอนการปันส่วนจะรอทรัพยากรระบบที่ถูกล็อค โดยขั้นตอนอื่นที่ปันส่วน เมื่อเกินเวลานี้ ไม่มีการประมวลผลคลื่น และข้อผิดพลาดจะแสดงขึ้น ขอแนะนาว่าคุณควรอนุญาตให้ปันส่วนหน่วยตรรกะหนึ่งหน่วยให้เสร็จสิ้นอย่างน้อย 2-3 วินาที

หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับตัวเลือกการประมวลผลเวฟเหล่านี้และอื่นๆ ในหน้า **พารามิเตอร์การจัดการคลังสินค้า** โปรดดูที่ [พารามิเตอร์คลังสินค้าเพื่อการประมวลผลเวฟ](wave-warehouse-parameters.md)

## <a name="wave-process-methods"></a>วิธีการกระบวนการเวฟ

เมื่อต้องการตั้งค่าการประมวลผลแบบขนาน:

1. ไปที่ **การจัดการคลังสินค้า > การตั้งค่า > เวฟ > วิธีการประมวลผลเวฟ**
1. เลือกวิธีการ `allocateWave` ในกริด
1. ในบานหน้าต่างการดำเนินการ ให้เลือก **การตั้งค่าคอนฟิกงาน**
1. หน้า **การตั้งค่าคอนฟิกงานวิธีการลงรายการบัญชีเวฟ** จะเปิดขึ้น กริดนี้จะแสดงรายการคลังสินค้าแต่ละแห่งที่คุณได้ตั้งค่าคอนฟิกวิธีการ `allocateWave` ไว้ การประมวลผลแบบคู่ขนานจะใช้กับคลังสินค้าที่แสดงรายการเท่านั้น ใช้ปุ่มบานหน้าต่างการกระบวนการเพื่อเพิ่มหรือลบคลังสินค้าออกจากกริดตามต้องการ 
1. ตั้งค่าต่อไปนี้ให้กับคลังสินค้าแต่ละแห่ง
    - **จํานวนสูงสุดของงานในชุดงาน** - ระบุจํานวนของงานในชุดงานที่ควรจะใช้กับการปันส่วนของคลังสินค้าที่เลือก จํานวนสูงสุดของงานในชุดงานจะขึ้นอยู่กับโครงสร้างพื้นฐานที่พร้อมใช้งาน และชุดงานอื่นๆ ที่จะประมวลผลบนเซิร์ฟเวอร์ การทดสอบที่ดําเนินการในสภาพแวดล้อมหลักสี่ประเภทที่จัดสรรให้กับการประมวลผลเวฟซึ่งแสดงให้เห็นถึงการใช้งานแปดงานที่ผลิตผลลัพธ์ที่ดี
    - **กลุ่มชุดงานการประมวลผลเวฟ** - กลุ่มชุดงานเฉพาะสามารถใช้กับคลังสินค้าที่แตกต่างกันเพื่อให้การประมวลผลการปันส่วนสามารถปรับขนาดออกต่อคลังสินค้าได้

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a>เปิดใช้งานหรือปิดใช้งานการขนานระหว่างนิติบุคคลทั้งหมด

ขอแนะนำว่า คุณควรตั้งค่าวิธีการ `allocateWave` ให้รันพร้อมกันระหว่างนิติบุคคลทั้งหมด เนื่องจากจะช่วยปรับปรุงประสิทธิภาพของการประมวลผลเวฟให้ดีขึ้น การเริ่มใช้งานใน Supply Chain Management รุ่น 10.0.17 คุณลักษณะ *ความขนานของเวฟสำหรับวิธีปันส่วนเวฟ* จะเปิดใช้งานโดยค่าเริ่มต้นสำหรับการติดตั้งใหม่และการอัพเดตทั้งหมด และไม่สามารถปิดได้อีก หลังจากเปิดใช้งานคุณลักษณะนี้แล้ว สิ่งต่อไปนี้จะเกิดขึ้น:

- วิธี `allocateWave` นี้จะอัพเดตเพื่อรวมการตั้งค่าคอนฟิกงานซึ่งช่วยให้คุณสามารถใช้หน้า **วิธีการกระบวนการเวฟ** เพื่อกําหนดจํานวนของงานที่จะรันพร้อมกันเทียบเท่า กับจํานวนของกระบวนการคู่ขนาน ดังนั้น เวลาที่ใช้ในขั้นตอนการปันส่วนเวฟ (โดยปกติคือ 30% ถึง 60% ของเวลาการประมวลผลรวม) จะลดลงโดยตัวคูณที่มีจํานวนเทียบเท่ากับจํานวนงานทั้งหมด คุณสามารถเลือกชุดงานที่จะมอบหมายเพื่อประมวลผลงานเหล่านี้ได้ ควรโปรดทราบว่านิติบุคคลทั้งหมดของคุณจะได้รับการตั้งค่าคอนฟิกให้ประมวลผลเวฟในชุดงาน เพื่อให้คลังสินค้าที่มีการตั้งค่าคอนฟิกให้ประมวลผลเวฟเป็นชุดงานและคลังสินค้าที่มีการตั้งค่าคอนฟิกให้ใช้วิธีการ `allocateWave` แบบขนานแล้ว การตั้งค่าคอนฟิกที่มีอยู่จะถูกเก็บรักษาไว้
- ตามค่าเริ่มต้น นิติบุคคลใหม่ทั้งหมดจะถูกตั้งค่าคอนฟิกให้ประมวลผลเวฟในชุดงาน คลังสินค้าใหม่ทั้งหมดที่มีการเปิดใช้งานตัวเลือก **กระบวนการจัดการคลังสินค้า** จะมีการตั้งค่าคอนฟิกวิธีการ `allocateWave` ให้รันพร้อมกันโดยค่าเริ่มต้น
- บนหน้า **พารามิเตอร์การจัดการคลังสินค้า** **กระบวนการบันทึกในชุดงาน** ถูกตั้งค่าเป็น *ใช่* และ **คอยการล็อค (มิลลิวินาที)** ถูกตั้งค่าเป็นค่าเริ่มต้น 15 วินาที ซึ่งหมายความว่าเวฟทั้งหมดจะถูกรันในชุดงาน เมื่อเวฟกำลังรันอยู่ จะต้องมีล็อคอยู่บนรายการและมิติที่เหนือสถานที่ในระหว่างขั้นตอนการปันส่วน เมื่องานการประมวลผลเวฟอื่นพยายามที่จะมีล็อคเดียวกันสำหรับเรกคอร์ดที่เหมือนกัน จะถูกบล็อคจนกว่ากระบวนการปัจจุบันจะเสร็จ การตั้งค่า **คอยการล็อค (มิลลิวินาที)** จะสร้างเวลาสูงสุดที่ระบบจะรอก่อนที่จะปลดล็อค

การประมวลผลการปันส่วนแบบขนานต้องการการประมวลผลเวฟรันในชุดงาน ดังนั้นคุณจึงจะลดประสิทธิภาพการประมวลผลเวฟของคุณ ถ้าคุณปิดการตั้งค่า **กระบวนการจะบันทึกในชุดงาน** โดยเฉพาะถ้าการประมวลผลเวฟใช้กระบวนการคู่ขนานตามที่กําหนดไว้โดยการตั้งค่าคอนฟิกงาน

ถ้าจําเป็น คุณสามารถยกเลิกการตั้งค่าแต่ละค่าที่ทําไว้ตามค่าเริ่มต้นเมื่อคุณลักษณะ *ความขนานของเวฟสำหรับวิธีปันส่วนเวฟ* เปิดใช้งานโดยอัตโนมัติเป็นอินสแตนซ์ของคุณ หากต้องการดำเนินการนี้:

- ไปที่ **การจัดการคลังสินค้า  \> การตั้งค่า \> พารามิเตอร์การจัดการคลังสินค้า** บนแท็บ **การประมวลผลเวฟ** ให้ใช้ค่าที่ต้องการของคุณสำหรับ **การประมวลผลเวฟในชุดงาน** และ **คอยการล็อค (มิลลิวินาที)**
- ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> เวฟ \> วิธีการประมวลผลเวฟ** เลือกวิธีการ `allocateWave` ในบานหน้าต่างการดำเนินการ ให้เลือก **การตั้งค่าคอนฟิกงาน** เพื่อเปิดหน้าที่แสดงรายการคลังสินค้าแต่ละแห่ง ที่มีการตั้งค่าวิธีการให้รันพร้อมกัน แก้ไขหรือลบจํานวนของงานในชุดงานและกลุ่มเวฟที่มอบหมายให้กับคลังสินค้าแต่ละแห่งที่แสดงรายการตามความต้องการ

## <a name="troubleshooting"></a>การแก้ไขปัญหา

### <a name="troubleshoot-using-the-infolog"></a>การแก้ไขปัญหาเกี่ยวกับการใช้ Infolog

เนื่องจากมีการใช้กรอบงานชุดงาน ข้อผิดพลาดที่เกิดขึ้นในระหว่างการประมวลผลเวฟจะถูกรวบรวมเป็นส่วนหนึ่งของ Infolog ของชุดงาน เมื่อต้องการอ่านชุดงานที่เกี่ยวข้องกับเวฟ:

1. ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**
1. เลือกเวฟที่คุณต้องการตรวจ
1. ในบานหน้าต่างการดำเนินการ ให้เปิดแท็บ **เวฟ** และ จากกลุ่ม **เวฟ** ให้เลือก **ชุดงาน**

การประมวลผลเวฟได้รับการแก้ไขเอง ดังนั้นควรรายงานข้อผิดพลาดใด ๆ ในระหว่างการประมวลผลโดยใช้ Infolog

ข้อผิดพลาดทั่วไปที่เกี่ยวข้องกับการประมวลผลแบบขนานอาจเป็นเพราะคลื่นสองเวฟพยายามปันส่วนรายการเดียวกันในเวลาเดียวกัน และเวฟไม่เสร็จสมบูรณ์เพื่อให้เวฟอื่นๆ ไม่สามารถได้รับล็อคภายในเวลาที่ระบุ ถ้าสถานการณ์นี้เกิดขึ้น ล็อกชุดงานจะมีข้อมูลระบุว่าไม่สามารถใช้ล็อคของสินค้าได้ ในกรณีดังกล่าว เวฟที่ล้มเหลวต้องมีการประมวลผลอีกครั้ง

เนื่องจากการประมวลผลเกิดขึ้นพร้อมกัน ต้องรักษาข้อมูลในตารางต่างๆ เพื่อติดตามสถานะของการประมวลผล ซึ่งหมายความว่าล็อกของชุดงานอาจมีข้อผิดพลาด เช่น ข้อผิดพลาดของคีย์ที่คัดลอก

ข้อผิดพลาดจากงานในชุดงานจะเป็นส่วนหนึ่งของล็อกชุดงานด้วย โดยทั่วไปข้อมูลที่สําคัญที่สุดจะเป็นข้อมูลด้านล่าง

ในบางกรณี ตัวอย่างเช่น ถ้าการเชื่อมต่อ SQL สิ้นสุด แล้ว อาจเป็นไปได้เพื่อให้การประมวลผลเวฟสิ้นสุดลงในสถานะที่ไม่สอดคล้องกัน ซึ่งชุดงานปรากฏว่าต้องการรันอยู่ แต่การประมวลผลหยุดลงแล้ว เวฟไม่สามารถจัดการข้อผิดพลาดเช่นเดียวกับนี้ ดังนั้นความพยายามในการล้างข้อมูลเวฟที่ล้มเหลวจะเสร็จสิ้นเมื่อเวฟถัดไปรัน หรือถ้าเวฟปัจจุบันอยู่ในสถานะที่ไม่สอดคล้องกัน ให้ปฏิบัติตามขั้นตอนต่อไปนี้

1. ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**
1. เลือกเวฟที่คุณต้องการล้างข้อมูล
1. ในบานหน้าต่างการดำเนินการ ให้เปิดแท็บ **เวฟ** และ ในกลุ่ม **เวฟ** ให้เลือก **ล้างข้อมูลเวฟ**

### <a name="troubleshoot-using-the-wave-progress-log"></a>การแก้ไขปัญหาแก้ไขโดยใช้ล็อกความคืบหน้าของเวฟ

หากตัวเลือก **สร้างล็อกความคืบหน้าของเวฟ** เปิดใช้งานบนหน้า **พารามิเตอร์การจัดการคลังสินค้า** เรกคอร์ดล็อกจะถูกสร้างขึ้นทุกครั้งที่การปันส่วนสินค้า และมิติเริ่มต้นและสิ้นสุด คุณควรเปิดใช้งานล็อกนี้เฉพาะเมื่อคุณต้องการตัวอย่างเช่น ในระหว่างการทดสอบเริ่มใช้งานหรือการแก้ไขปัญหา เมื่อเปิดใช้งานตัวเลือกนี้ คุณสามารถดูล็อกได้โดยปฏิบัติตามขั้นตอนต่อไปนี้

1. ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**
1. เลือกเวฟที่คุณต้องการตรวจ
1. ในบานหน้าต่างการดำเนินการ เปิดแท็บ **เวฟ** และในกลุ่ม **เวฟ** ให้เลือก **ความก้าวหน้า**
