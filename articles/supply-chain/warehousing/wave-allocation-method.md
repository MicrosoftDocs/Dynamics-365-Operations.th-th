---
title: การปันส่วนเวฟ
description: หัวข้อนี้จะอธิบายวิธีการตั้งค่าขั้นตอนการปันส่วนเวฟ รวมถึงวิธีการเปิดใช้งานการประมวลผลแบบขนาน
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: b01de3c9f1cbcb24abc2b5a0c91db7f0791020bf
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/11/2021
ms.locfileid: "6019014"
---
# <a name="wave-allocation"></a><span data-ttu-id="e46d9-103">การปันส่วนเวฟ</span><span class="sxs-lookup"><span data-stu-id="e46d9-103">Wave allocation</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e46d9-104">การประมวลผลเวฟอาจใช้เวลานาน และเวลาการประมวลผลส่วนใหญ่ถูกใช้ไปในขั้นตอนการปันส่วนและในขั้นตอนการสร้างงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-104">Wave processing can be time consuming, and most of the processing time is spent in the allocation step and in the work creation step.</span></span>

<span data-ttu-id="e46d9-105">ขณะนี้สามารถรันแต่ละขั้นตอนเหล่านี้พร้อมกันได้ ซึ่งสามารถปรับปรุงประสิทธิภาพของการประมวลผลเวฟได้ และอนุญาตให้มีการประมวลผลเวฟที่มีขนาดใหญ่กว่าในคลังสินค้าเดียวกันได้</span><span class="sxs-lookup"><span data-stu-id="e46d9-105">It is now possible to run each of these steps in parallel, which can improve the performance of the wave processing, and allow for a larger throughput of waves in the same warehouse.</span></span> <span data-ttu-id="e46d9-106">หัวข้อนี้อธิบายวิธีการตั้งค่าวิธีการปันส่วนเวฟให้รันพร้อมกัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-106">This topic explains how to set up the wave allocation method to run in parallel.</span></span> <span data-ttu-id="e46d9-107">หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับวิธีตั้งค่าการสร้างงานให้รันพร้อมกัน โปรดดูที่ [จัดกำหนดการสร้างงานระหว่างเวฟ](configure-wave-schedule-work-creation.md)</span><span class="sxs-lookup"><span data-stu-id="e46d9-107">For more information about how to set up work creation to run in parallel, see [Schedule work creation during wave](configure-wave-schedule-work-creation.md).</span></span>

<span data-ttu-id="e46d9-108">สามารถปันส่วนเวฟได้ครั้งละหนึ่งเวฟที่คลังสินค้าในคราวเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-108">Previously it was only possible to allocate one wave at a warehouse at a time.</span></span> <span data-ttu-id="e46d9-109">ข้อจำกัดเฉพาะนี้ถูกลบและแทนที่ด้วยข้อจำกัดใหม่ซึ่งล็อคเฉพาะสินค้าและมิติที่อยู่เหนือที่ตั้งในลำดับชั้นการจองเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-109">This constraint has been removed and replaced by a new constraint that only locks the item and dimensions that are above location in the reservation hierarchy.</span></span> <span data-ttu-id="e46d9-110">มิติเหนือสถานที่จะรวมมิติของผลิตภัณฑ์เสมอ</span><span class="sxs-lookup"><span data-stu-id="e46d9-110">Dimensions above the location always include product dimensions.</span></span> <span data-ttu-id="e46d9-111">ตัวอย่างเช่น ถ้าสินค้ามีการตั้งค่าคอนฟิกโดยใช้ *สี* ผลิตภัณฑ์ย่อยต่างๆ *สีแดง* *สีฟ้า* และ *สีเหลือง* สามารถประมวลผลพร้อมกันได้</span><span class="sxs-lookup"><span data-stu-id="e46d9-111">For example, if an item is configured using *Color*, then variants for *Red*, *Blue*, and *Yellow* could each be processed in parallel.</span></span>

<span data-ttu-id="e46d9-112">ซึ่งหมายความว่าถ้าสินค้าเดียวกันที่มีมิติเหมือนกันสูงกว่าสถานที่จะถูกปันส่วนโดยเวฟหนึ่ง เวฟอื่นจะต้องรอเพื่อรับล็อคของสินค้าและมิติเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-112">This means that if the same item with the same dimensions above the location is being allocated by one wave, other waves will have to wait to acquire a lock on the same item and dimensions.</span></span> <span data-ttu-id="e46d9-113">ถ้าไม่สามารถใช้ล็อคได้ภายในเวลาที่เหมาะสม ข้อผิดพลาดจะเกิดขึ้นและการประมวลผลเวฟจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e46d9-113">If the lock can't be acquired in a timely manner, an error will occur and the wave processing will fail.</span></span>

<span data-ttu-id="e46d9-114">เมื่อต้องการใช้การประมวลผลแบบขนาน เวฟต้องรันในชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-114">In order to utilize parallel processing, the wave must run in batch.</span></span>

## <a name="performance-improvements"></a><span data-ttu-id="e46d9-115">การปรับปรุงประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="e46d9-115">Performance improvements</span></span>

<span data-ttu-id="e46d9-116">ประโยชน์ของประสิทธิภาพการประมวลผลพร้อมกันจะอยู่ในสองประเภท:</span><span class="sxs-lookup"><span data-stu-id="e46d9-116">Performance benefits of parallel processing fall in two categories:</span></span>

- <span data-ttu-id="e46d9-117">**ปริมาณที่สามารถประมวลผลได้ดีขึ้น** - ปริมาณที่สามารถประมวลผลได้ของเวฟจะปรับปรุงได้แม้ว่าจะไม่ได้ตั้งค่าคอนฟิกการประมวลผลคู่ขนานไว้ โดยเฉพาะกับสถานการณ์ที่ไม่มีรายการทับซ้อนกันภายในเวฟ</span><span class="sxs-lookup"><span data-stu-id="e46d9-117">**Improved throughput** - The throughput of waves will typically improve even if parallel processing isn't configured, especially for scenarios where there is no overlap of items within the waves.</span></span>
- <span data-ttu-id="e46d9-118">**การปรับปรุงการปันส่วนคลื่นเดียว** - การทดสอบกับข้อมูลลูกค้ามีการปรับปรุงประสิทธิภาพใกล้กับ 50% หลังจากเปลี่ยนเป็นการปันส่วนพร้อมกัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-118">**Improvement of the allocation for a single wave** - Testing on customer data has shown a near 50% performance improvement after switching to parallel allocation.</span></span> <span data-ttu-id="e46d9-119">การประมวลผลแบบขนานจะเสร็จสิ้นต่อสินค้าและมิติเหนือสถานที่ ดังนั้นการปรับปรุงจะขึ้นอยู่กับสินค้าต่างๆ ที่เวฟประกอบด้วย โครงสร้างพื้นฐานที่พร้อมใช้งาน และระยะเวลาของการปันส่วนเทียบกับช่วงเวลาของการสร้างงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-119">The parallel processing is done per items and dimensions above the location, so the improvements depend on how many different items a wave contains, the infrastructure available, and the duration of the allocation versus the duration of the work creation.</span></span>

## <a name="configure-parallel-allocation"></a><span data-ttu-id="e46d9-120">ตั้งค่าคอนฟิกการปันส่วนคู่ขนาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-120">Configure parallel allocation</span></span>

### <a name="warehouse-management-parameters"></a><span data-ttu-id="e46d9-121">พารามิเตอร์การจัดการคลังสินค้า</span><span class="sxs-lookup"><span data-stu-id="e46d9-121">Warehouse management parameters</span></span>

<span data-ttu-id="e46d9-122">เมื่อต้องการใช้การประมวลผลการปันส่วนแบบขนาน ให้ไปที่ **การจัดการคลังสินค้า > การตั้งค่า > พารามิเตอร์การจัดการคลังสินค้า** เปิดแท็บ **การประมวลผลเวฟ** และตั้งค่าต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="e46d9-122">To use parallel allocation processing, go to **Warehouse management > Setup > Warehouse management parameters**, open the **Wave processing** tab, and make the following settings:</span></span>

- <span data-ttu-id="e46d9-123">**กลุ่มชุดงานการประมวลผลเวฟ** - เลือกกลุ่มชุดงานที่การประมวลผลเริ่มต้นของเวฟควรใช้</span><span class="sxs-lookup"><span data-stu-id="e46d9-123">**Wave processing batch group** - Select the batch group that the initial processing of the waves should use.</span></span> <span data-ttu-id="e46d9-124">การประมวลผลการปันส่วนในเวลาต่อมาสามารถจะเสร็จสิ้นได้โดยใช้กลุ่มชุดงานต่างๆ</span><span class="sxs-lookup"><span data-stu-id="e46d9-124">The subsequent processing of allocation can be done using different batch groups.</span></span>
- <span data-ttu-id="e46d9-125">**ประมวลผลเวฟในชุดงาน** - ตั้งค่านี้เป็น *ใช่* เพื่อใช้การประมวลผลแบบขนาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-125">**Process waves in batch** - Set this to *Yes* to use parallel processing.</span></span>
- <span data-ttu-id="e46d9-126">**คอยการล็อค (มิลลิวินาที)** - ป้อนเวลา ในหน่วยมิลลิวินาที ที่มีขั้นตอนการปันส่วนจะรอทรัพยากรระบบที่ถูกล็อค โดยขั้นตอนอื่นที่ปันส่วน</span><span class="sxs-lookup"><span data-stu-id="e46d9-126">**Wait for lock (ms)** - Enter the time, in milliseconds, that an allocation step will wait for a system resource that is locked by another allocation step.</span></span> <span data-ttu-id="e46d9-127">เมื่อเกินเวลานี้ ไม่มีการประมวลผลคลื่น และข้อผิดพลาดจะแสดงขึ้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-127">When this time is exceeded, the wave is not processed and an error message is displayed.</span></span> <span data-ttu-id="e46d9-128">ขอแนะนาว่าคุณควรอนุญาตให้ปันส่วนหน่วยตรรกะหนึ่งหน่วยให้เสร็จสิ้นอย่างน้อย 2-3 วินาที</span><span class="sxs-lookup"><span data-stu-id="e46d9-128">We recommend that you allow at least a few seconds to allow for allocation of one logical unit to finish.</span></span>

<span data-ttu-id="e46d9-129">หากต้องการทราบข้อมูลเพิ่มเติมเกี่ยวกับตัวเลือกการประมวลผลเวฟเหล่านี้และอื่นๆ ในหน้า **พารามิเตอร์การจัดการคลังสินค้า** โปรดดูที่ [พารามิเตอร์คลังสินค้าเพื่อการประมวลผลเวฟ](wave-warehouse-parameters.md)</span><span class="sxs-lookup"><span data-stu-id="e46d9-129">For information about these and other wave processing options on the **Warehouse management parameters** page, see [Warehouse parameters for wave processing](wave-warehouse-parameters.md).</span></span>

## <a name="wave-process-methods"></a><span data-ttu-id="e46d9-130">วิธีการกระบวนการเวฟ</span><span class="sxs-lookup"><span data-stu-id="e46d9-130">Wave process methods</span></span>

<span data-ttu-id="e46d9-131">เมื่อต้องการตั้งค่าการประมวลผลแบบขนาน:</span><span class="sxs-lookup"><span data-stu-id="e46d9-131">To set up parallel processing:</span></span>

1. <span data-ttu-id="e46d9-132">ไปที่ **การจัดการคลังสินค้า > การตั้งค่า > เวฟ > วิธีการประมวลผลเวฟ**</span><span class="sxs-lookup"><span data-stu-id="e46d9-132">Go to **Warehouse Management > Setup > Waves > Wave process methods**.</span></span>
1. <span data-ttu-id="e46d9-133">เลือกวิธีการ `allocateWave` ในกริด</span><span class="sxs-lookup"><span data-stu-id="e46d9-133">Select the `allocateWave` method in the grid.</span></span>
1. <span data-ttu-id="e46d9-134">ในบานหน้าต่างการดำเนินการ ให้เลือก **การตั้งค่าคอนฟิกงาน**</span><span class="sxs-lookup"><span data-stu-id="e46d9-134">On the Action Pane, select **Task configuration**.</span></span>
1. <span data-ttu-id="e46d9-135">หน้า **การตั้งค่าคอนฟิกงานวิธีการลงรายการบัญชีเวฟ** จะเปิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-135">The **Wave post method task configuration** page opens.</span></span> <span data-ttu-id="e46d9-136">กริดนี้จะแสดงรายการคลังสินค้าแต่ละแห่งที่คุณได้ตั้งค่าคอนฟิกวิธีการ `allocateWave` ไว้</span><span class="sxs-lookup"><span data-stu-id="e46d9-136">This grid lists each warehouse where you have configured the `allocateWave` method.</span></span> <span data-ttu-id="e46d9-137">การประมวลผลแบบคู่ขนานจะใช้กับคลังสินค้าที่แสดงรายการเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-137">Parallel processing will only be used for warehouses that are listed.</span></span> <span data-ttu-id="e46d9-138">ใช้ปุ่มบานหน้าต่างการกระบวนการเพื่อเพิ่มหรือลบคลังสินค้าออกจากกริดตามต้องการ</span><span class="sxs-lookup"><span data-stu-id="e46d9-138">Use the Action Pane buttons to add or remove warehouses from the grid as needed.</span></span> 
1. <span data-ttu-id="e46d9-139">ตั้งค่าต่อไปนี้ให้กับคลังสินค้าแต่ละแห่ง</span><span class="sxs-lookup"><span data-stu-id="e46d9-139">For each warehouse, make the following settings:</span></span>
    - <span data-ttu-id="e46d9-140">**จํานวนสูงสุดของงานในชุดงาน** - ระบุจํานวนของงานในชุดงานที่ควรจะใช้กับการปันส่วนของคลังสินค้าที่เลือก</span><span class="sxs-lookup"><span data-stu-id="e46d9-140">**Maximum number of batch tasks** - Specify the number of batch tasks that should be used for the allocation for the selected warehouse.</span></span> <span data-ttu-id="e46d9-141">จํานวนสูงสุดของงานในชุดงานจะขึ้นอยู่กับโครงสร้างพื้นฐานที่พร้อมใช้งาน และชุดงานอื่นๆ ที่จะประมวลผลบนเซิร์ฟเวอร์</span><span class="sxs-lookup"><span data-stu-id="e46d9-141">The optimal number of batch tasks depends on the infrastructure available and what other batch jobs are being processed on the server.</span></span> <span data-ttu-id="e46d9-142">การทดสอบที่ดําเนินการในสภาพแวดล้อมหลักสี่ประเภทที่จัดสรรให้กับการประมวลผลเวฟซึ่งแสดงให้เห็นถึงการใช้งานแปดงานที่ผลิตผลลัพธ์ที่ดี</span><span class="sxs-lookup"><span data-stu-id="e46d9-142">Tests done on a four core environment that was dedicated to wave processing showed that using eight tasks produced good results.</span></span>
    - <span data-ttu-id="e46d9-143">**กลุ่มชุดงานการประมวลผลเวฟ** - กลุ่มชุดงานเฉพาะสามารถใช้กับคลังสินค้าที่แตกต่างกันเพื่อให้การประมวลผลการปันส่วนสามารถปรับขนาดออกต่อคลังสินค้าได้</span><span class="sxs-lookup"><span data-stu-id="e46d9-143">**Wave processing batch group** - Specific batch groups can be used for different warehouses to allow the allocation processing to scale out per warehouse.</span></span>

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a><span data-ttu-id="e46d9-144">เปิดใช้งานหรือปิดใช้งานการขนานระหว่างนิติบุคคลทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="e46d9-144">Enable or disable parallelization across all legal entities</span></span>

<span data-ttu-id="e46d9-145">ขอแนะนำว่า คุณควรตั้งค่าวิธีการ `allocateWave` ให้รันพร้อมกันระหว่างนิติบุคคลทั้งหมด เนื่องจากจะช่วยปรับปรุงประสิทธิภาพของการประมวลผลเวฟให้ดีขึ้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-145">We recommend that you set the `allocateWave` method to run in parallel across all legal entities because this helps to improve the performance of the wave processing.</span></span> <span data-ttu-id="e46d9-146">การเริ่มใช้งานใน Supply Chain Management รุ่น 10.0.17 คุณลักษณะ *ความขนานของเวฟสำหรับวิธีปันส่วนเวฟ* จะเปิดใช้งานโดยค่าเริ่มต้นสำหรับการติดตั้งใหม่และการอัพเดตทั้งหมด และไม่สามารถปิดได้อีก</span><span class="sxs-lookup"><span data-stu-id="e46d9-146">Starting in Supply Chain Management version 10.0.17, the *Wave parallelization for Allocate Wave method* feature is enabled by default for all new and updated installations, and can't be turned off again.</span></span> <span data-ttu-id="e46d9-147">หลังจากเปิดใช้งานคุณลักษณะนี้แล้ว สิ่งต่อไปนี้จะเกิดขึ้น:</span><span class="sxs-lookup"><span data-stu-id="e46d9-147">After enabling this feature, the following occurs:</span></span>

- <span data-ttu-id="e46d9-148">วิธี `allocateWave` นี้จะอัพเดตเพื่อรวมการตั้งค่าคอนฟิกงานซึ่งช่วยให้คุณสามารถใช้หน้า **วิธีการกระบวนการเวฟ** เพื่อกําหนดจํานวนของงานที่จะรันพร้อมกันเทียบเท่า กับจํานวนของกระบวนการคู่ขนาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-148">The `allocateWave` method is updated to include a task configuration setting that lets you use the **Wave process methods** page to define the number of tasks that will run simultaneously, equivalent to the number of parallel processes.</span></span> <span data-ttu-id="e46d9-149">ดังนั้น เวลาที่ใช้ในขั้นตอนการปันส่วนเวฟ (โดยปกติคือ 30% ถึง 60% ของเวลาการประมวลผลรวม) จะลดลงโดยตัวคูณที่มีจํานวนเทียบเท่ากับจํานวนงานทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="e46d9-149">As a result, the time used on the allocate-wave step (which is typically 30% to 60% of the total processing time) is reduced by a factor roughly equivalent to the number of tasks.</span></span> <span data-ttu-id="e46d9-150">คุณสามารถเลือกชุดงานที่จะมอบหมายเพื่อประมวลผลงานเหล่านี้ได้</span><span class="sxs-lookup"><span data-stu-id="e46d9-150">It's also possible to select which batch will be assigned to process these tasks.</span></span> <span data-ttu-id="e46d9-151">ควรโปรดทราบว่านิติบุคคลทั้งหมดของคุณจะได้รับการตั้งค่าคอนฟิกให้ประมวลผลเวฟในชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-151">It's important to note that all of your legal entities will be configured to process waves in batch.</span></span> <span data-ttu-id="e46d9-152">เพื่อให้คลังสินค้าที่มีการตั้งค่าคอนฟิกให้ประมวลผลเวฟเป็นชุดงานและคลังสินค้าที่มีการตั้งค่าคอนฟิกให้ใช้วิธีการ `allocateWave` แบบขนานแล้ว การตั้งค่าคอนฟิกที่มีอยู่จะถูกเก็บรักษาไว้</span><span class="sxs-lookup"><span data-stu-id="e46d9-152">For the warehouses that are already configured to process waves in batch, and for the warehouses that are already configured to use the `allocateWave` method in parallel, the existing configuration will be kept.</span></span>
- <span data-ttu-id="e46d9-153">ตามค่าเริ่มต้น นิติบุคคลใหม่ทั้งหมดจะถูกตั้งค่าคอนฟิกให้ประมวลผลเวฟในชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-153">By default, all the new legal entities are configured to process waves in batch.</span></span> <span data-ttu-id="e46d9-154">คลังสินค้าใหม่ทั้งหมดที่มีการเปิดใช้งานตัวเลือก **กระบวนการจัดการคลังสินค้า** จะมีการตั้งค่าคอนฟิกวิธีการ `allocateWave` ให้รันพร้อมกันโดยค่าเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="e46d9-154">All new warehouses with the **Warehouse management processes** option enabled will have the `allocateWave` method configured to run in parallel by default.</span></span>
- <span data-ttu-id="e46d9-155">บนหน้า **พารามิเตอร์การจัดการคลังสินค้า** **กระบวนการบันทึกในชุดงาน** ถูกตั้งค่าเป็น *ใช่* และ **คอยการล็อค (มิลลิวินาที)** ถูกตั้งค่าเป็นค่าเริ่มต้น 15 วินาที</span><span class="sxs-lookup"><span data-stu-id="e46d9-155">On the **Warehouse management parameters** page, **Process saves in batch** is set to *Yes* and  **Wait for lock (ms)** set to a default 15 seconds.</span></span> <span data-ttu-id="e46d9-156">ซึ่งหมายความว่าเวฟทั้งหมดจะถูกรันในชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-156">This means that all waves will be executed in batch.</span></span> <span data-ttu-id="e46d9-157">เมื่อเวฟกำลังรันอยู่ จะต้องมีล็อคอยู่บนรายการและมิติที่เหนือสถานที่ในระหว่างขั้นตอนการปันส่วน</span><span class="sxs-lookup"><span data-stu-id="e46d9-157">When a wave is running, it acquires a lock on the item and dimensions above location during the allocation step.</span></span> <span data-ttu-id="e46d9-158">เมื่องานการประมวลผลเวฟอื่นพยายามที่จะมีล็อคเดียวกันสำหรับเรกคอร์ดที่เหมือนกัน จะถูกบล็อคจนกว่ากระบวนการปัจจุบันจะเสร็จ</span><span class="sxs-lookup"><span data-stu-id="e46d9-158">When another wave processing task tries to acquire the same lock for the identical record, it is blocked until the current process is finished.</span></span> <span data-ttu-id="e46d9-159">การตั้งค่า **คอยการล็อค (มิลลิวินาที)** จะสร้างเวลาสูงสุดที่ระบบจะรอก่อนที่จะปลดล็อค</span><span class="sxs-lookup"><span data-stu-id="e46d9-159">The **Wait for lock (ms)** settings establishes the maximum time the system will wait before the lock is released.</span></span>

<span data-ttu-id="e46d9-160">การประมวลผลการปันส่วนแบบขนานต้องการการประมวลผลเวฟรันในชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-160">Parallel allocation processing requires wave processing to run in batch.</span></span> <span data-ttu-id="e46d9-161">ดังนั้นคุณจึงจะลดประสิทธิภาพการประมวลผลเวฟของคุณ ถ้าคุณปิดการตั้งค่า **กระบวนการจะบันทึกในชุดงาน** โดยเฉพาะถ้าการประมวลผลเวฟใช้กระบวนการคู่ขนานตามที่กําหนดไว้โดยการตั้งค่าคอนฟิกงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-161">Therefore, you will reduce your wave processing performance if you turn off the **Process saves in batch** setting, especially if wave processing is using a parallel process as defined by the task configuration for the relevant wave methods.</span></span>

<span data-ttu-id="e46d9-162">ถ้าจําเป็น คุณสามารถยกเลิกการตั้งค่าแต่ละค่าที่ทําไว้ตามค่าเริ่มต้นเมื่อคุณลักษณะ *ความขนานของเวฟสำหรับวิธีปันส่วนเวฟ* เปิดใช้งานโดยอัตโนมัติเป็นอินสแตนซ์ของคุณ</span><span class="sxs-lookup"><span data-stu-id="e46d9-162">If necessary, you can undo each of the settings made by default when the *Wave parallelization for Allocate Wave method* feature is automatically enabled for your instance.</span></span> <span data-ttu-id="e46d9-163">หากต้องการดำเนินการนี้:</span><span class="sxs-lookup"><span data-stu-id="e46d9-163">To do this:</span></span>

- <span data-ttu-id="e46d9-164">ไปที่ **การจัดการคลังสินค้า  \> การตั้งค่า \> พารามิเตอร์การจัดการคลังสินค้า**</span><span class="sxs-lookup"><span data-stu-id="e46d9-164">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="e46d9-165">บนแท็บ **การประมวลผลเวฟ** ให้ใช้ค่าที่ต้องการของคุณสำหรับ **การประมวลผลเวฟในชุดงาน** และ **คอยการล็อค (มิลลิวินาที)**</span><span class="sxs-lookup"><span data-stu-id="e46d9-165">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="e46d9-166">ไปที่ **การจัดการคลังสินค้า \> การตั้งค่า \> เวฟ \> วิธีการประมวลผลเวฟ**</span><span class="sxs-lookup"><span data-stu-id="e46d9-166">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="e46d9-167">เลือกวิธีการ `allocateWave`</span><span class="sxs-lookup"><span data-stu-id="e46d9-167">Select the `allocateWave` method.</span></span> <span data-ttu-id="e46d9-168">ในบานหน้าต่างการดำเนินการ ให้เลือก **การตั้งค่าคอนฟิกงาน** เพื่อเปิดหน้าที่แสดงรายการคลังสินค้าแต่ละแห่ง ที่มีการตั้งค่าวิธีการให้รันพร้อมกัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-168">On the Action Pane, select **Task configuration** to open a page that lists each warehouse where the method is set to run in parallel.</span></span> <span data-ttu-id="e46d9-169">แก้ไขหรือลบจํานวนของงานในชุดงานและกลุ่มเวฟที่มอบหมายให้กับคลังสินค้าแต่ละแห่งที่แสดงรายการตามความต้องการ</span><span class="sxs-lookup"><span data-stu-id="e46d9-169">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e46d9-170">การแก้ไขปัญหา</span><span class="sxs-lookup"><span data-stu-id="e46d9-170">Troubleshooting</span></span>

### <a name="troubleshoot-using-the-infolog"></a><span data-ttu-id="e46d9-171">การแก้ไขปัญหาเกี่ยวกับการใช้ Infolog</span><span class="sxs-lookup"><span data-stu-id="e46d9-171">Troubleshoot using the Infolog</span></span>

<span data-ttu-id="e46d9-172">เนื่องจากมีการใช้กรอบงานชุดงาน ข้อผิดพลาดที่เกิดขึ้นในระหว่างการประมวลผลเวฟจะถูกรวบรวมเป็นส่วนหนึ่งของ Infolog ของชุดงาน</span><span class="sxs-lookup"><span data-stu-id="e46d9-172">Because the batch framework is used, errors that occur during wave processing will be captured as part of the batch jobs Infologs.</span></span> <span data-ttu-id="e46d9-173">เมื่อต้องการอ่านชุดงานที่เกี่ยวข้องกับเวฟ:</span><span class="sxs-lookup"><span data-stu-id="e46d9-173">To read the batch jobs related to a wave:</span></span>

1. <span data-ttu-id="e46d9-174">ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**</span><span class="sxs-lookup"><span data-stu-id="e46d9-174">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e46d9-175">เลือกเวฟที่คุณต้องการตรวจ</span><span class="sxs-lookup"><span data-stu-id="e46d9-175">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="e46d9-176">ในบานหน้าต่างการดำเนินการ ให้เปิดแท็บ **เวฟ** และ จากกลุ่ม **เวฟ** ให้เลือก **ชุดงาน**</span><span class="sxs-lookup"><span data-stu-id="e46d9-176">On the Action Pane, open the **Wave** tab and, from the **Wave** group, select **Batch jobs**.</span></span>

<span data-ttu-id="e46d9-177">การประมวลผลเวฟได้รับการแก้ไขเอง ดังนั้นควรรายงานข้อผิดพลาดใด ๆ ในระหว่างการประมวลผลโดยใช้ Infolog</span><span class="sxs-lookup"><span data-stu-id="e46d9-177">Wave processing is self-correcting, so any error detected during processing should be reported using the Infolog.</span></span>

<span data-ttu-id="e46d9-178">ข้อผิดพลาดทั่วไปที่เกี่ยวข้องกับการประมวลผลแบบขนานอาจเป็นเพราะคลื่นสองเวฟพยายามปันส่วนรายการเดียวกันในเวลาเดียวกัน และเวฟไม่เสร็จสมบูรณ์เพื่อให้เวฟอื่นๆ ไม่สามารถได้รับล็อคภายในเวลาที่ระบุ</span><span class="sxs-lookup"><span data-stu-id="e46d9-178">A typical error related to parallel processing could be that two waves try to allocate the same item at the same time and one does not complete so that the other wave is unable to acquire a lock within the specified time.</span></span> <span data-ttu-id="e46d9-179">ถ้าสถานการณ์นี้เกิดขึ้น ล็อกชุดงานจะมีข้อมูลระบุว่าไม่สามารถใช้ล็อคของสินค้าได้ ในกรณีดังกล่าว เวฟที่ล้มเหลวต้องมีการประมวลผลอีกครั้ง</span><span class="sxs-lookup"><span data-stu-id="e46d9-179">If this situation occurs, the batch jobs log will contain information stating that the lock for the item could not be acquired, in which case the wave that failed must be processed again.</span></span>

<span data-ttu-id="e46d9-180">เนื่องจากการประมวลผลเกิดขึ้นพร้อมกัน ต้องรักษาข้อมูลในตารางต่างๆ เพื่อติดตามสถานะของการประมวลผล</span><span class="sxs-lookup"><span data-stu-id="e46d9-180">Because the processing is happening in parallel, data must be maintained in different tables to track the state of the processing.</span></span> <span data-ttu-id="e46d9-181">ซึ่งหมายความว่าล็อกของชุดงานอาจมีข้อผิดพลาด เช่น ข้อผิดพลาดของคีย์ที่คัดลอก</span><span class="sxs-lookup"><span data-stu-id="e46d9-181">This means that the logs for the batch jobs might contain errors such as duplicate key errors.</span></span>

<span data-ttu-id="e46d9-182">ข้อผิดพลาดจากงานในชุดงานจะเป็นส่วนหนึ่งของล็อกชุดงานด้วย</span><span class="sxs-lookup"><span data-stu-id="e46d9-182">The errors from the batch tasks are also part of the batch jobs log.</span></span> <span data-ttu-id="e46d9-183">โดยทั่วไปข้อมูลที่สําคัญที่สุดจะเป็นข้อมูลด้านล่าง</span><span class="sxs-lookup"><span data-stu-id="e46d9-183">The most important information is typically at the bottom.</span></span>

<span data-ttu-id="e46d9-184">ในบางกรณี ตัวอย่างเช่น ถ้าการเชื่อมต่อ SQL สิ้นสุด แล้ว อาจเป็นไปได้เพื่อให้การประมวลผลเวฟสิ้นสุดลงในสถานะที่ไม่สอดคล้องกัน ซึ่งชุดงานปรากฏว่าต้องการรันอยู่ แต่การประมวลผลหยุดลงแล้ว</span><span class="sxs-lookup"><span data-stu-id="e46d9-184">In rare cases, for example if the SQL connection ended, it is possible for the wave processing to end in an inconsistent state where the batch job appears to be running but the processing is stopped.</span></span> <span data-ttu-id="e46d9-185">เวฟไม่สามารถจัดการข้อผิดพลาดเช่นเดียวกับนี้ ดังนั้นความพยายามในการล้างข้อมูลเวฟที่ล้มเหลวจะเสร็จสิ้นเมื่อเวฟถัดไปรัน</span><span class="sxs-lookup"><span data-stu-id="e46d9-185">The wave can't handle errors like this, so an attempt to clean up failed waves is done when the next wave runs.</span></span> <span data-ttu-id="e46d9-186">หรือถ้าเวฟปัจจุบันอยู่ในสถานะที่ไม่สอดคล้องกัน ให้ปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="e46d9-186">Alternatively, if the current wave is in an inconsistent state, perform the following steps:</span></span>

1. <span data-ttu-id="e46d9-187">ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**</span><span class="sxs-lookup"><span data-stu-id="e46d9-187">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e46d9-188">เลือกเวฟที่คุณต้องการล้างข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e46d9-188">Select the wave you need to clean up.</span></span>
1. <span data-ttu-id="e46d9-189">ในบานหน้าต่างการดำเนินการ ให้เปิดแท็บ **เวฟ** และ ในกลุ่ม **เวฟ** ให้เลือก **ล้างข้อมูลเวฟ**</span><span class="sxs-lookup"><span data-stu-id="e46d9-189">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Cleanup wave data**.</span></span>

### <a name="troubleshoot-using-the-wave-progress-log"></a><span data-ttu-id="e46d9-190">การแก้ไขปัญหาแก้ไขโดยใช้ล็อกความคืบหน้าของเวฟ</span><span class="sxs-lookup"><span data-stu-id="e46d9-190">Troubleshoot using the wave progress log</span></span>

<span data-ttu-id="e46d9-191">หากตัวเลือก **สร้างล็อกความคืบหน้าของเวฟ** เปิดใช้งานบนหน้า **พารามิเตอร์การจัดการคลังสินค้า** เรกคอร์ดล็อกจะถูกสร้างขึ้นทุกครั้งที่การปันส่วนสินค้า และมิติเริ่มต้นและสิ้นสุด</span><span class="sxs-lookup"><span data-stu-id="e46d9-191">If the **Create wave progress log** option is enabled on the **Warehouse management parameters** page, then a log record is created every time allocation for an item and its dimensions begins and ends.</span></span> <span data-ttu-id="e46d9-192">คุณควรเปิดใช้งานล็อกนี้เฉพาะเมื่อคุณต้องการตัวอย่างเช่น ในระหว่างการทดสอบเริ่มใช้งานหรือการแก้ไขปัญหา</span><span class="sxs-lookup"><span data-stu-id="e46d9-192">You should only enable this log when you need it, for example, during initial testing or for troubleshooting.</span></span> <span data-ttu-id="e46d9-193">เมื่อเปิดใช้งานตัวเลือกนี้ คุณสามารถดูล็อกได้โดยปฏิบัติตามขั้นตอนต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="e46d9-193">When this option is enabled, you can view the log by taking the following steps:</span></span>

1. <span data-ttu-id="e46d9-194">ไปที่ **การจัดการคลังสินค้า \> เวฟขาออก \> เวฟการจัดส่ง \> เวฟทั้งหมด**</span><span class="sxs-lookup"><span data-stu-id="e46d9-194">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e46d9-195">เลือกเวฟที่คุณต้องการตรวจ</span><span class="sxs-lookup"><span data-stu-id="e46d9-195">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="e46d9-196">ในบานหน้าต่างการดำเนินการ เปิดแท็บ **เวฟ** และในกลุ่ม **เวฟ** ให้เลือก **ความก้าวหน้า**</span><span class="sxs-lookup"><span data-stu-id="e46d9-196">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Progress**.</span></span>
