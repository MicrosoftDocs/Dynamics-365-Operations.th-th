--- 
title: "ใช้การตั้งค่าคอนฟิกการแม็ปแบบจำลองสำหรับการคำนวณรวมที่ระดับฐานข้อมูล (ER)"
description: "กระบวนงานนี้แสดงข้อมูลเกี่ยวกับวิธีการออกแบบการตั้งค่าคอนฟิกการแม็ปแบบจำลอง (ER) ของการรายงานทางอิเล็กทรอนิกส์ใหม่ และใช้ฟังก์ชัน ER ภายในสำหรับการคำนวณรวมที่มีประสิทธิภาพ"
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 7be3e9970e2599c159e7c9d414b54876d0116350
ms.openlocfilehash: 869a23b992f1d6dccf9327b66b3e4d611728efce
ms.contentlocale: th-th
ms.lasthandoff: 03/09/2018

---
# <a name="use-a-model-mapping-configuration-for-aggregate-calculations-at-the-database-leveler"></a>ใช้การตั้งค่าคอนฟิกการแม็ปแบบจำลองสำหรับการคำนวณรวมที่ระดับฐานข้อมูล (ER) 

[!include [task guide banner](../../includes/task-guide-banner.md)]

กระบวนงานนี้แสดงข้อมูลเกี่ยวกับวิธีการออกแบบการตั้งค่าคอนฟิกการแม็ปแบบจำลอง (ER) ของการรายงานทางอิเล็กทรอนิกส์ใหม่ และใช้ฟังก์ชัน ER ภายในสำหรับการคำนวณรวมที่มีประสิทธิภาพ ในกระบวนงานนี้ คุณจะสร้างการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง Litware, Inc. 

กระบวนงานนี้ถูกสร้างขึ้นสำหรับผู้ใช้ที่มีบทบาทผู้ดูแลระบบหรือนักพัฒนาการรายงานทางอิเล็กทรอนิกส์ที่ได้รับมอบหมาย ขั้นตอนเหล่านี้สามารถเสร็จสมบูรณ์ได้โดยใช้ชุดข้อมูลใดๆ

 เพื่อทำขั้นตอนเหล่านี้ให้เสร็จสมบูรณ์ ลำดับแรกคุณต้องทำขั้นตอนในกระบวนงานให้เสร็จสมบูรณ์ " ER ช่วยเพิ่มประสิทธิภาพในการคำนวณการรวม ด้วยการดำเนินการเหล่านั้นที่ระดับฐานข้อมูล (ส่วนที่ 1: เตรียมการตั้งค่าคอนฟิก) "

1. ไปที่ การจัดการองค์กร > การรายงานทางอิเล็กทรอนิกส์ > การตั้งค่าคอนฟิก
2. ในแผนภูมิ ขยาย 'Intrastat model'
3. ในแผนภูมิ เลือก 'แบบจำลองอินทราสแทต\การแม็ปตัวอย่างอินทราสแทต'
4. คลิก ตัวออกแบบ
5. คลิก ตัวออกแบบ
6. ในแผนภูมิ เลือก 'Dynamics 365 for Operations\Table records'
7. คลิก เพิ่มราก
    * เพิ่มแหล่งข้อมูลใหม่ซึ่งแสดงเรกคอร์ดที่คุณต้องการจัดกลุ่ม  
8. ในฟิลด์ชื่อ พิมพ์ 'ธุรกรรม'
    * ธุรกรรม  
9. ในฟิลด์ตาราง พิมพ์ 'อินทราสแทต'
    * อินทราสแทต  
10. คลิก ตกลง
11. ในแผนภูมิ ให้เลือก 'ฟังก์ชัน\จัดกลุ่มโดย'
    * ชนิดแหล่งข้อมูลนี้ใช้ในการแนะนำแหล่งข้อมูลใหม่ขณะทำงานกับเรกคอร์ดกลุ่ม และในการคำนวณการรวมที่จำเป็น  
12. คลิก เพิ่มราก
13. ในฟิลด์ชื่อ พิมพ์ 'TransactionsGroups'
    * TransactionsGroups  
14. คลิกแก้ไขกลุ่มโดย
15. ในแผนภูมิ เลือก 'ธุรกรรม'
    * เลือกแหล่งข้อมูลเพิ่มเติมเกี่ยวกับชนิด 'รายการเรกคอร์ด' ที่แสดงถึงเรกคอร์ดที่คุณต้องการจัดกลุ่ม  
16. คลิกเพิ่มฟิลด์ไปยัง
17. คลิกสิ่งที่จะจัดกลุ่ม
18. ในแผนภูมิ ขยาย 'ธุรกรรม'
19. ในแผนภูมิ เลือก 'ธุรกรรม\ทิศทาง'
20. คลิกเพิ่มฟิลด์ไปยัง
21. คลิกฟิลด์ที่ถูกจัดกลุ่ม
    * เลือกฟิลด์เพื่อระบุระดับการจัดกลุ่ม ตามการเลือกนี้ แหล่งข้อมูลจะส่งคืนเมื่อรันไทม์ที่จำนวนกลุ่มของธุรกรรมมากเท่ากับที่มีรหัสคำสั่งที่จะตรงตามความต้องการในตารางอินทราสแทต  
22. ในแผนภูมิ เลือก ' ธุรกรรม\จำนวนเงินในใบแจ้งหนี้(AmountMST)'
    * เลือกฟิลด์นี้เพื่อระบุแหล่งที่มาสำหรับการคำนวณการรวม  
23. คลิกเพิ่มฟิลด์ไปยัง
24. คลิกฟิลด์การรวม
25. ในรายการนี้ ให้ทำเครื่องหมายแถวที่เลือก
26. ในฟิลด์ วิธีการ ให้เลือก 'รวม'
    * เลือกชนิดการรวม  
27. ในฟิลด์ชื่อ พิมพ์ 'SumOfAmountMST'
    * ระบุชื่อของการรวมนี้ในแหล่งข้อมูลที่ตั้งค่าคอนฟิก  
28. คลิก บันทึก
    * หมายเหตุ ฟิลด์ 'ดำเนินการเมื่อ' บ่งชี้ว่า จะมีการดำเนินการจัดกลุ่มที่รันไทม์ในฐานข้อมูล SQL  
29. ปิดหน้า
30. คลิก ตกลง
31. ในแผนภูมิ ให้ขยาย 'รวม'
32. ในแผนภูมิ ขยาย 'TransactionsGroups'
33. ในแผนภูมิ ขยาย 'TransactionsGroups\รวม'
34. ในแผนภูมิ เลือก 'TransactionsGroups\รวม\SumOfAmountMST'
35. ในแผนภูมิ เลือก ' ยอดรวม\Total invoice value(TotalInvoiceValue) = IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded')'
36. คลิก ผูก
    * โดยขึ้นอยู่กับการตั้งค่านี้ แหล่งข้อมูลนี้จะคำนวณผลรวมของค่าฟิลด์ 'AmountMST' สำหรับแต่ละกลุ่มของธุรกรรม การคำนวณการรวมนี้จะพร้อมใช้งานเป็นสินค้า TransactionsGroups.aggregated.TotalAmount  
37. ในแผนภูมิ ขยาย 'TransactionsGroups'
38. ในแผนภูมิ ให้เลือก 'TransactionsGroups'
39. คลิก แก้ไข
40. คลิกแก้ไขกลุ่มโดย
41. ในแผนภูมิ ขยาย 'ธุรกรรม'
42. ในแผนภูมิ เลือก ' ธุรกรรม\จำนวนเงินในใบแจ้งหนี้(AmountMST)'
43. คลิกเพิ่มฟิลด์ไปยัง
44. คลิกฟิลด์การรวม
45. ในรายการนี้ ให้ทำเครื่องหมายแถวที่เลือก
46. ในฟิลด์ วิธีการ ให้เลือก 'สูงสุด'
47. ในฟิลด์ชื่อ พิมพ์ 'MaxOfAmountMST'
48. คลิก บันทึก
    * ในปัจจุบัน การดำเนินการของแหล่งข้อมูลของ GROUPBY สามารถแปลเป็นระดับฐานข้อมูล SQL พร้อมกับข้อจำกัดบางประการ สามารถทำการแปลสำหรับแหล่งข้อมูลอย่างใดอย่างหนึ่งได้ในชนิด 'รายการเรกคอร์ด' หรือแหล่งข้อมูลที่แสดงเป็นนิพจน์ซึ่งใช้ฟังก์ชันตัวกรอง นอกจากนี้ ยังสามารถทำได้เมื่อมีการตั้งค่าคอนฟิกการรวมเดียวเท่านั้นสำหรับฟิลด์เดียวของเรกคอร์ดที่จัดกลุ่ม  
    * โปรดทราบว่า ถึงแม้ว่าจะมีการตั้งค่าคอนฟิกการรวมมากกว่าหนึ่งรายการสำหรับฟิลด์ AmountMST ฟิลด์ 'ดำเนินการเมื่อ' ยังคงบ่งชี้ว่า จะมีดำเนินการจัดกลุ่มที่รันไทม์ในฐานข้อมูล SQL ทั้งนี้เนื่องจากมีการผูกการรวมหนึ่งรายการเท่านั้นกับสินค้าแบบจำลองข้อมูล และจะถูกใช้เมื่อรันไทม์เพื่อดึงข้อมูลจากแหล่งข้อมูลนี้  
49. ปิดหน้า
50. คลิก ตกลง
51. ในแผนภูมิ ขยาย 'TransactionsGroups'
52. ในแผนภูมิ ขยาย 'TransactionsGroups\รวม'
53. ในแผนภูมิ เลือก 'TransactionsGroups\รวม\MaxOfAmountMST'
54. ในแผนภูมิ เลือก 'ยอดรวม\มูลค่าทางสถิติรวม(TotalStatisticalValue) = IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$StatisticalValueRounded')'
55. คลิก ผูก
56. ในแผนภูมิ ขยาย 'TransactionsGroups'
57. ในแผนภูมิ ให้เลือก 'TransactionsGroups'
58. คลิก แก้ไข
59. คลิกแก้ไขกลุ่มโดย
    * หมายเหตุว่า ฟิลด์ 'ดำเนินการเมื่อ' บ่งชี้ว่า การจัดกลุ่มจะสามารถทำได้ในรันไทม์ในหน่วยความจำได้ เนื่องจากการรวมทั้งสองของฟิลด์เดียวกันจะผูกอยู่กับข้อมูลแบบจำลองสินค้า   
60. ในรายการนี้ ทำเครื่องหมายหรือยกเลิกการทำเครื่องหมายทุกแถว
61. คลิก ลบ
62. คลิก ใช่
63. คลิก ลบ
64. คลิก ใช่
65. คลิกเพิ่มฟิลด์ไปยัง
66. คลิกสิ่งที่จะจัดกลุ่ม
67. ในแผนภูมิ ขยาย 'เรกคอร์ดสินค้าที่ซื้อขายกัน(Iอินทราสแทต)'
68. คลิก บันทึก
    * หมายเหตุว่า ฟิลด์ 'ดำเนินการเมื่อ' บ่งชี้ว่า การจัดกลุ่มนี้จะสามารถทำได้ในขณะทำงานในหน่วยความจำ แม้ว่าจะไม่มีการรวมที่กำหนดและแหล่งข้อมูลที่เลือกของชนิด 'เรกคอร์ดตาราง' อ้างอิงถึงตาราง 'อินทราสแทต' เดียวกัน ทั้งนี้เนื่องจากแหล่งข้อมูลประกอบด้วยฟิลด์ที่คำนวณบางฟิลด์ซึ่งไม่สามารถแปลเป็นระดับฐานข้อมูล SQL ได้  


