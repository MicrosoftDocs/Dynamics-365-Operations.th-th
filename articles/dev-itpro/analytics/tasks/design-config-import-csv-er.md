--- 
title: "ออกแบบการตั้งค่าคอนฟิกเพื่อนำเข้าข้อมูลจากไฟล์ภายนอกในรูปแบบ CSV (ER)"
description: "ใช้กระบวนงานนี้เพื่อออกแบบการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) ในการนำเข้าข้อมูลไปยังแอพลิเคชัน Dynamics 365 for Finance and Operations จากไฟล์ภายนอกในรูปแบบ CSV"
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: a0739304723d19b910388893d08e8c36a1f49d13
ms.openlocfilehash: f6bfa9f7c0638b0eaacf1a49bcd7d84ffab3acbf
ms.contentlocale: th-th
ms.lasthandoff: 03/26/2018

---
# <a name="design-a-configuration-to-import-data-from-an-external-file-in-csv-format-er"></a>ออกแบบการตั้งค่าคอนฟิกเพื่อนำเข้าข้อมูลจากไฟล์ภายนอกในรูปแบบ CSV (ER)

[!include[task guide banner](../../includes/task-guide-banner.md)]

ใช้กระบวนงานนี้เพื่อออกแบบการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) ในการนำเข้าข้อมูลไปยังแอพลิเคชัน Dynamics 365 for Finance and Operations จากไฟล์ภายนอกในรูปแบบ CSV ในกระบวนงานนี้ คุณจะสร้างการตั้งค่าคอนฟิก ER ที่จำเป็นสำหรับบริษัทตัวอย่าง Litware, Inc. เพื่อทำขั้นตอนเหล่านี้ให้เสร็จสมบูรณ์ อันดับแรกคุณต้องทำขั้นตอนในคู่มืองานให้เสร็จสมบูรณ์ "ER สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายว่า ใช้งานอยู่" 

กระบวนงานนี้ถูกสร้างขึ้นสำหรับผู้ใช้ที่มีบทบาทผู้ดูแลระบบหรือนักพัฒนาการรายงานทางอิเล็กทรอนิกส์ที่ได้รับมอบหมาย ขั้นตอนเหล่านี้สามารถเสร็จสมบูรณ์ได้โดยใช้ชุดข้อมูล USMF 

นอกจากนี้ คุณต้องดาวน์โหลดและบันทึกไฟล์ต่อไปนี้ไว้ภายในเครื่อง: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.

1. ไปที่การจัดการองค์กร > พื้นที่ทำงาน > การรายงานทางอิเล็กทรอนิกส์
    * คุณสามารถตั้งค่าคอนฟิกกระบวนการเพื่อนำเข้าไฟล์ภายนอกในรูปแบบ XML TXT หรือ CSV ลงในตารางในแอพลิเคชัน Dynamics 365 for Finance and Operations ก่อนอื่น คุณต้องสร้างแบบจำลองข้อมูลนามธรรมเพื่อแสดงถึงข้อมูลที่นำเข้าจากจุดยืนทางธุรกิจ – การตั้งค่าคอนฟิกแบบจำลองแบบข้อมูล ER ถูกสร้างขึ้นสำหรับรายการนั้น จากนั้น กำหนดโครงสร้างของไฟล์ที่นำเข้าซึ่งแม็ปกับแบบจำลองข้อมูลที่ออกแบบ ตามวิธีการพอร์ตข้อมูลจากไฟล์ไปยังแบบจำลองข้อมูลนามธรรม – การตั้งค่าคอนฟิกรูปแบบ ER ถูกสร้างขึ้นสำหรับรายการนั้น จากนั้น ต้องขยายการตั้งค่าคอนฟิกแบบจำลองข้อมูล ER ด้วยการแม็ปแบบจำลองใหม่ที่อธิบายวิธีการที่ข้อมูลจากไฟล์ที่นำเข้าและข้อมูลที่รักษาไว้จากแบบจำลองข้อมูลนามธรรมถูกใช้ เพื่ออัพเดตตารางแอพลิเคชันหรือเอนทิตี้ข้อมูล  
    * ขั้นตอนต่อไปนี้แสดงวิธีที่ธุรกรรมของผู้จัดจำหน่ายซึ่งถูกติดตามภายนอกถูกนำเข้าจากไฟล์ CSV ภายนอกสำหรับการใช้ในภายหลังในการชำระเงินของผู้จัดจำหน่ายสำหรับแบบฟอร์มของ 1099   
    * ตรวจสอบว่าผู้ให้บริการการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง 'Litware, Inc.' พร้อมใช้งาน และทำเครื่องหมายเป็น ใช้งานอยู่ ถ้าคุณไม่เห็นผู้ให้บริการการตั้งค่าคอนฟิกนี้ ก่อนอื่นคุณต้องดำเนินขั้นตอนต่างๆ ในกระบวนงานให้สำเร็จ "สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายเป็น ใช้งานอยู่"  
2. คลิก การตั้งค่าคอนฟิกการรายงาน
3. ใช้ตัวกรอง '1099 แบบจำลองการชำระเงิน' ถ้าคุณดำเนินการกระบวนงานเสร็จสมบูรณ์แล้ว ” ER สร้างการตั้งค่าคอนฟิกที่ต้องการในการนำเข้าข้อมูลจากไฟล์ภายนอกสำหรับการรายงานทางอิเล็กทรอนิกส์" และการตั้งค่าคอนฟิก '1099 แบบจำลองการชำระเงิน' จะพร้อมใช้งานในแผนภูมิการตั้งค่าคอนฟิก ข้ามขั้นตอนทั้งหมดในงานย่อยถัดไป   

## <a name="add-a-new-er-model-configuration"></a>เพิ่มการตั้งค่าคอนฟิกแบบจำลองของ ER ใหม่
1. แทนที่จะสร้างแบบจำลองใหม่เพื่อสนับสนุนการนำเข้าข้อมูล ให้โหลดไฟล์ 1099model.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้ ไฟล์นี้ประกอบด้วยแบบจำลองข้อมูลที่กำหนดเองของธุรกรรมของผู้จัดจำหน่าย รูปแบบข้อมูลนี้ถูกแม็ปกับส่วนประกอบของข้อมูลที่จำเป็นเรียบร้อยแล้ว  
2. คลิก แลกเปลี่ยน
3. คลิก โหลดจากไฟล์ XML
4. คลิก เรียกดู และนำทางไปยังไฟล์ 1099model.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้  
5. คลิก ตกลง

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a>เพิ่มการตั้งค่าคอนฟิกรูปแบบของ ER ใหม่ที่สนับสนุนการนำเข้าข้อมูล
1. ในแผนภูมิ ให้เลือก 'แบบจำลองการชำระเงิน 1099'
2. คลิก สร้างการตั้งค่าคอนฟิก เพื่อเปิดกล่องโต้ตอบการวาง
3. ในฟิลด์ใหม่ ป้อน 'จัดรูปแบบตามแบบจำลองข้อมูล แบบจำลองการชำระเงิน 1099'
4. เลือก ใช่ ในฟิลด์สนับสนุนการนำเข้าข้อมูล
5. กดแป้น ESC เพื่อปิดหน้านี้
    * แทนที่จะสร้างรูปแบบ ER ใหม่เพื่อสนับสนุนการนำเข้าข้อมูล ให้โหลดไฟล์ 1099formatcsv.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้ ไฟล์นี้ประกอบด้วยรูปแบบ ER ที่ต้องการ ซึ่งกำหนดโครงสร้างของไฟล์ CSV ขาเข้าและการแม็ปของโครงสร้างนี้ ให้กับแบบจำลองข้อมูลของธุรกรรมของผู้จัดจำหน่าย   
6. คลิก แลกเปลี่ยน
7. คลิก โหลดจากไฟล์ XML
    * คลิก เรียกดู และนำทางไปยังไฟล์ 1099formatcsv.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้  
8. คลิก ตกลง
9. ในแผนภูมิ ขยาย 'แบบจำลองการชำระเงิน 1099'
10. ในแผนภูมิ ให้เลือก 'แบบจำลองการชำระเงิน 1099\สำหรับการนำเข้าธุรกรรมของผู้จัดจำหน่าย (CSV)'

## <a name="review-format-settings"></a>ตรวจทานการตั้งค่ารูปแบบ
1. คลิก ตัวออกแบบ
2. คลิก ขยาย/ยุบ
3. เปิด 'แสดงรายละเอียด'
    * รูปแบบที่ได้รับการออกแบบแสดงถึงโครงสร้างของไฟล์ภายนอกที่คาดไว้ในรูปแบบ CSV  
4. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ'
    * สำหรับองค์ประกอบรากของชนิด ลำดับ ได้มีการเลือกตัวเลือก 'รายการใหม่ - Windows (CR LF)' ในฟิลด์ 'อักขระพิเศษ' โดยขึ้นอยู่กับการตั้งค่านี้ แต่ละรายการในไฟล์แยกวิเคราะห์ต้องถือว่าเป็นเรกคอร์ดแยกต่างหาก   
5. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1..* '
    * สำหรับองค์ประกอบราก\รายการของชนิด ลำดับ ได้มีการเลือกตัวเลือก 'หนึ่งต่อหลายรายการ' ในฟิลด์ 'ความหลากหลาย' โดยขึ้นอยู่กับการตั้งค่านี้ รายการอย่างน้อยหนึ่งรายการจะปรากฏในไฟล์แยกวิเคราะห์   
6. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก:ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี'
    * โปรดทราบว่า มีการเพิ่มองค์ประกอบ ราก\รายการ\ชนิด ของชนิด กรณี เป็นองค์ประกอบที่ซ้อนกันของลำดับ ราก\รายการ เนื่องจากองค์ประกอบ กรณี นี้ประกอบด้วยองค์ประกอบลำดับที่ซ้อนกัน 3 รายการ การตั้งค่านี้ถือว่า เราคาดว่าจะพบกับชนิดที่แตกต่างกันของรายการในไฟล์แยกวิเคราะห์ 3 ชนิด   
7. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\ส่วนหัว: ลำดับ 1..1 '
    * ราก\รายการ\ชนิด\องค์ประกอบส่วนหัวของชนิด ลำดับ ประกอบด้วย ค่าองค์ประกอบ สตริง ที่ซ้อนกันของสิ่งซึ่งได้ถูกกำหนดเป็นค่าสตริงแบบตายตัว ลำดับนี้จะแยกวิเคราะห์รายการส่วนหัวของไฟล์แยกวิเคราะห์   
8. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)'
    * องค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเพื่อแยกวิเคราะห์รายการธุรกรรม โปรดสังเกตว่า อักขระ 'ตัวแบ่งแบบกำหนดเอง' ถูกตั้งค่าคอนฟิกเป็นเครื่องหมายจุลภาค ซึ่งหมายความว่า เครื่องหมายจุลภาคจะถูกใช้เป็นตัวแบ่งของฟิลด์สำหรับชนิดของรายการนี้ในไฟล์แยกวิเคราะห์   
    * หมายเหตุว่า ได้มีการเพิ่มองค์ประกอบที่ซ้อนกันหลายชนิดข้อมูลที่แตกต่างกันสำหรับองค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด สำหรับการแยกวิเคราะห์รายการของธุรกรรมเป็นฟิลด์แยกต่างหาก โปรดสังเกตว่า ตัวเลือก 'แอพลิเคชันใบเสนอราคา' ถูกตั้งค่าคอนฟิกเป็น 'ไม่มี' ซึ่งหมายความว่า ในไฟล์แยกวิเคราะห์ ฟิลด์ทั้งหมดของชนิดนี้จะถือว่าไม่มีอักขระที่แนบอยู่   
9. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\TransactionDate: DateTime'
    * ตัวอย่างเช่น ราก\รายการ\ชนิด\เรกคอร์ด\องค์ประกอบ TransactionDate ของชนิด DATETIME ได้มีการตั้งค่าคอนฟิก เพื่อเรียกค่าวันและเวลาของธุรกรรมจากไฟล์แยกวิเคราะห์ในรูปแบบ ‘M/d/yyyy’   
10. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\CountryCode: สตริง 0..1 '
    * โปรดสังเกตว่า มีการตั้งค่าคอนฟิกองค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด\CountryCode ของชนิด สตริง เป็นมีตัวเลือก 'ศูนย์ต่อหนึ่ง' ในฟิลด์ 'ความหลากหลาย' การตั้งค่านี้พิจารณาค่าของฟิลด์ CountryCode ในรายการแยกวิเคราะห์เป็น ไม่จำเป็น   
11. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\หมายเหตุ: ลำดับ 1..1 (,)'
    * โปรดทราบว่า องค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด\หมายเหตุ ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเป็น มีตัวเลือก 'ทั้งหมด' ในฟิลด์ 'แอพลิเคชันใบเสนอราคา' และมีอักขระเครื่องหมายอัญประกาศคู่ในฟิลด์ 'เครื่องหมายคำพูด' ซึ่งหมายความว่า ฟิลด์ทั้งหมดของรายการชนิดนี้ในการแยกวิเคราะห์แฟ้ม (ซึ่งอธิบายโดยองค์ประกอบที่ซ้อนกัน: ข้อความของชนิด สตริง) จะมีการพิจารณาตามที่อยู่ในอักขระเครื่องหมายอัญประกาศคู่  
12. ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...* \ชนิด: กรณี\ไม่ได้แยกวิเคราะห์: ลำดับ 1..1 '
    * ราก\รายการ\ชนิด\องค์ประกอบที่ไม่ได้แยกวิเคราะห์ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเพื่อแยกวิเคราะห์รายการธุรกรรม สำหรับโครงสร้างที่ไม่ตรงกับโครงสร้างอธิบายไว้ข้างต้นในองค์ประกอบกรณีหลัก   

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a>ตรวจทานการตั้งค่าการแม็ปรูปแบบไปยังแบบจำลองข้อมูล
1. คลิก แม็ปรูปแบบไปยังแบบจำลอง
    * การแม็ปแบบจำลอง 'การแม็ปไปยังแบบจำลองจากรูปแบบ CSV' อธิบายลำดับข้อมูลของการโอนย้ายข้อมูลจากไฟล์ CSV ขาเข้าไปยังแบบจำลองข้อมูล   
2. คลิก ตัวออกแบบ
3. ในแผนภูมิ ให้ขยาย 'รูปแบบ'
    * โปรดทราบว่ารูปแบบที่ได้รับการออกแบบมาจะแสดงอยู่ที่นี่โดยเป็นส่วนประกอบของแหล่งข้อมูล  
4. ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)'
5. ในแผนภูมิ ขยาย ' รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)'
6. ในแผนภูมิ ขยาย ' รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)'
7. ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)\ชนิด: กรณี(ชนิด)'
8. ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)'
9. ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล'
10. ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล\CountryCode: สตริง 0..1 (CountryCode)'
11. ในแผนภูมิ เลือก 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล\วันที่ทำธุรกรรม: วันที่และเวลา(วันที่ทำธุรกรรม)'
    * โปรดทราบว่า องค์ประกอบรูปแบบที่จำเป็นและที่ไม่จำเป็น เช่น TransactionDate และ CountryCode ดูแตกต่างในส่วนประกอบแหล่งข้อมูล 'รูปแบบ' ที่กำหนดไว้ล่วงหน้า   
12. ในแผนภูมิ ขยาย 'ธุรกรรม= '$ทั้งคู่''
    * โปรดทราบว่า องค์ประกอบของรูปแบบที่กำหนดโครงสร้างของไฟล์นำเข้าจะถูกเชื่อมโยงข้อมูลกับองค์ประกอบของแบบจำลองข้อมูล เนื้อหาของไฟล์ CSV ที่นำเข้าจะถูกจัดเก็บขณะรันไทม์ในแบบจำลองข้อมูลที่มีอยู่โดยขึ้นอยู่กับการเชื่อมโยงข้อมูลเหล่านี้ ให้ความสำคัญกับการเชื่อมโยงข้อมูลขององค์ประกอบ CountryRegion สำหรับองค์ประกอบของธุรกรรมใดๆ ในไฟล์ขาเข้าที่ไม่มีค่ารหัสประเทศที่ระบุ ระบบจะเติมข้อมูลรหัสประเทศเริ่มต้น 'USA' ในแบบจำลองข้อมูล   
13. เปิด 'แสดงรายละเอียด'
14. คลิกแท็บ การตรวจสอบความถูกต้อง
15. คลิกค้นหา
16. ในฟิลด์ค้นหา ให้พิมพ์ 'ผู้จัดจำหน่าย'
17. คลิก ค้นหาถัดไป
    * การแม็ปรูปแบบนี้อาจประกอบด้วยตรรกะที่ผู้ใช้กำหนดเพื่อตรวจสอบความถูกต้องของข้อมูลที่นำเข้าจากจุดยืนทางธุรกิจ ตัวอย่างเช่น โดยขึ้นอยู่กับการตั้งค่า สำหรับรายการใดๆ ในไฟล์ที่นำเข้า โครงสร้างซึ่งไม่ตรงกับโครงสร้างของรายการส่วนหัวและรายการธุรกรรมเลย ข้อความเตือนจะถูกสร้างขึ้นใน Infolog ที่แจ้งผู้ใช้เกี่ยวกับกรณีนี้ ซึ่งบ่งชี้หมายเลขลำดับของธุรกรรมในไฟล์   
18. ปิดหน้า

## <a name="run-the-format-mapping"></a>รันการแม็ปรูปแบบ
เพื่อวัตถุประสงค์ในการทดสอบ ดำเนินการแม็ปรูปแบบโดยใช้แฟ้ม 1099entriescsv.csv ซึ่งคุณดาวน์โหลดไว้ก่อนหน้านี้ เอาท์พุทที่สร้างขึ้นจะแสดงข้อมูลที่จะถูกนำเข้าจากไฟล์ CSV ที่เลือก และจะถูกเติมข้อมูลไปยังแบบจำลองข้อมูลที่กำหนดเองในขณะที่นำเข้าจริง   
1. คลิก เรียกใช้
    * คลิก เรียกดู และนำทางไปยังไฟล์ 1099entriescsv.csv ที่คุณดาวน์โหลดไว้ก่อนหน้านี้  
2. คลิก ตกลง
    * หมายเหตุ ข้อความเตือนเกี่ยวกับรายการที่ไม่ได้รับการยอมรับ รายการที่ 4 ประกอบด้วยค่าขาเข้าที่ถูกนำเสนอในรูปแบบที่ไม่สามารถยอมรับได้ ในขณะที่รายการที่ 7 ไม่ได้ประกอบด้วยข้อความหมายเหตุธุรกรรมในใบเสนอราคาคู่   
    * ตรวจสอบเอาท์พุทในรูปแบบ XML ซึ่งแสดงข้อมูลที่ได้ถูกนำเข้าจากไฟล์ที่เลือก และถูกนำไปยังแบบจำลองข้อมูล โปรดทราบว่า มีการประมวลผลรายการทั้ง 7 รายการของไฟล์ CSV ที่นำเข้า ชื่อของฟิลด์บรรจุ รายการที่ 1 ถูกข้าม ธุรกรรม 4 รายการถูกแยกวิเคราะห์อย่างถูกต้อง และมีการรับรู้ธุรกรรม 2 รายการว่าไม่ถูกต้อง   
3. ปิดหน้า
4. ปิดหน้า


