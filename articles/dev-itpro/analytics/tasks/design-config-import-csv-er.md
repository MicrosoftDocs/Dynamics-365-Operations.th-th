--- 
title: "ออกแบบการตั้งค่าคอนฟิกเพื่อนำเข้าข้อมูลจากไฟล์ภายนอกในรูปแบบ CSV (ER)"
description: "ใช้กระบวนงานนี้เพื่อออกแบบการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) ในการนำเข้าข้อมูลไปยังแอพลิเคชัน Dynamics 365 for Finance and Operations จากไฟล์ภายนอกในรูปแบบ CSV"
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: efcb77ff883b29a4bbaba27551e02311742afbbd
ms.openlocfilehash: f80b9824e005ccca5beb8577576781d00a43d7b3
ms.contentlocale: th-th
ms.lasthandoff: 05/08/2018

---
# <a name="design-a-configuration-to-import-data-from-an-external-file-in-csv-format-er"></a><span data-ttu-id="86af3-103">ออกแบบการตั้งค่าคอนฟิกเพื่อนำเข้าข้อมูลจากไฟล์ภายนอกในรูปแบบ CSV (ER)</span><span class="sxs-lookup"><span data-stu-id="86af3-103">Design a configuration to import data from an external file in CSV format (ER)</span></span>

[!include [task guide banner](../../includes/task-guide-banner.md)]

<span data-ttu-id="86af3-104">ใช้กระบวนงานนี้เพื่อออกแบบการตั้งค่าคอนฟิกการรายงานทางอิเล็กทรอนิกส์ (ER) ในการนำเข้าข้อมูลไปยังแอพลิเคชัน Dynamics 365 for Finance and Operations จากไฟล์ภายนอกในรูปแบบ CSV</span><span class="sxs-lookup"><span data-stu-id="86af3-104">Use this procedure to design Electronic reporting (ER) configurations to import data in to the Dynamics 365 for Finance and Operations application from an external file in CSV format.</span></span> <span data-ttu-id="86af3-105">ในกระบวนงานนี้ คุณจะสร้างการตั้งค่าคอนฟิก ER ที่จำเป็นสำหรับบริษัทตัวอย่าง Litware, Inc. เพื่อทำขั้นตอนเหล่านี้ให้เสร็จสมบูรณ์ อันดับแรกคุณต้องทำขั้นตอนในคู่มืองานให้เสร็จสมบูรณ์ "ER สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายว่า ใช้งานอยู่"</span><span class="sxs-lookup"><span data-stu-id="86af3-105">In this procedure, you will create the required ER configurations for the sample company, Litware, Inc. To complete these steps, you must first complete the steps in the procedure, “ER Create a configuration provider and mark it as active.”</span></span> 

<span data-ttu-id="86af3-106">กระบวนงานนี้ถูกสร้างขึ้นสำหรับผู้ใช้ที่มีบทบาทผู้ดูแลระบบหรือนักพัฒนาการรายงานทางอิเล็กทรอนิกส์ที่ได้รับมอบหมาย</span><span class="sxs-lookup"><span data-stu-id="86af3-106">This procedure is created for users with the assigned role of System administrator or Electronic reporting developer.</span></span> <span data-ttu-id="86af3-107">ขั้นตอนเหล่านี้สามารถเสร็จสมบูรณ์ได้โดยใช้ชุดข้อมูล USMF</span><span class="sxs-lookup"><span data-stu-id="86af3-107">These steps can be completed using the USMF data set.</span></span> 

<span data-ttu-id="86af3-108">นอกจากนี้ คุณต้องดาวน์โหลดและบันทึกไฟล์ต่อไปนี้ไว้ภายในเครื่อง: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span><span class="sxs-lookup"><span data-stu-id="86af3-108">You must also download and save the following files locally: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span></span>

1. <span data-ttu-id="86af3-109">ไปที่การจัดการองค์กร > พื้นที่ทำงาน > การรายงานทางอิเล็กทรอนิกส์</span><span class="sxs-lookup"><span data-stu-id="86af3-109">Go to Organization administration > Workspaces > Electronic reporting.</span></span>
    * <span data-ttu-id="86af3-110">คุณสามารถตั้งค่าคอนฟิกกระบวนการเพื่อนำเข้าไฟล์ภายนอกในรูปแบบ XML TXT หรือ CSV ลงในตารางในแอพลิเคชัน Dynamics 365 for Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="86af3-110">You can configure a process to import external files in XML, TXT, or CSV format to tables in the Dynamics 365 for Finance and Operations application.</span></span> <span data-ttu-id="86af3-111">ก่อนอื่น คุณต้องสร้างแบบจำลองข้อมูลนามธรรมเพื่อแสดงถึงข้อมูลที่นำเข้าจากจุดยืนทางธุรกิจ – การตั้งค่าคอนฟิกแบบจำลองแบบข้อมูล ER ถูกสร้างขึ้นสำหรับรายการนั้น</span><span class="sxs-lookup"><span data-stu-id="86af3-111">First, you must create an abstract data model to represent the imported data, from a business standpoint – an ER data model configuration is created for that.</span></span> <span data-ttu-id="86af3-112">จากนั้น กำหนดโครงสร้างของไฟล์ที่นำเข้าซึ่งแม็ปกับแบบจำลองข้อมูลที่ออกแบบ ตามวิธีการพอร์ตข้อมูลจากไฟล์ไปยังแบบจำลองข้อมูลนามธรรม – การตั้งค่าคอนฟิกรูปแบบ ER ถูกสร้างขึ้นสำหรับรายการนั้น</span><span class="sxs-lookup"><span data-stu-id="86af3-112">Next, define a structure of the imported file that maps to the designed data model as the way to port data from the file to the abstract data model – an ER format configuration is created for that.</span></span> <span data-ttu-id="86af3-113">จากนั้น ต้องขยายการตั้งค่าคอนฟิกแบบจำลองข้อมูล ER ด้วยการแม็ปแบบจำลองใหม่ที่อธิบายวิธีการที่ข้อมูลจากไฟล์ที่นำเข้าและข้อมูลที่รักษาไว้จากแบบจำลองข้อมูลนามธรรมถูกใช้ เพื่ออัพเดตตารางแอพลิเคชันหรือเอนทิตี้ข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-113">Then, the ER data model configuration must be extended with a new model mapping that describes how the data from the imported file and the persisted data from the abstract data model is used to update the application tables or data entities.</span></span>  
    * <span data-ttu-id="86af3-114">ขั้นตอนต่อไปนี้แสดงวิธีที่ธุรกรรมของผู้จัดจำหน่ายซึ่งถูกติดตามภายนอกถูกนำเข้าจากไฟล์ CSV ภายนอกสำหรับการใช้ในภายหลังในการชำระเงินของผู้จัดจำหน่ายสำหรับแบบฟอร์มของ 1099</span><span class="sxs-lookup"><span data-stu-id="86af3-114">The following steps show how externally tracked vendors’ transactions are imported from the external CSV file for later use in the vendor’s settlement for 1099’s forms.</span></span>   
    * <span data-ttu-id="86af3-115">ตรวจสอบว่าผู้ให้บริการการตั้งค่าคอนฟิกสำหรับบริษัทตัวอย่าง 'Litware, Inc.' พร้อมใช้งาน และทำเครื่องหมายเป็น ใช้งานอยู่</span><span class="sxs-lookup"><span data-stu-id="86af3-115">Verify that the configuration provider for sample company, Litware, Inc. is available and marked as active.</span></span> <span data-ttu-id="86af3-116">ถ้าคุณไม่เห็นผู้ให้บริการการตั้งค่าคอนฟิกนี้ ก่อนอื่นคุณต้องดำเนินขั้นตอนต่างๆ ในกระบวนงานให้สำเร็จ "สร้างผู้ให้บริการการตั้งค่าคอนฟิก และทำเครื่องหมายเป็น ใช้งานอยู่"</span><span class="sxs-lookup"><span data-stu-id="86af3-116">If you don’t see this configuration provider, you must first complete the steps in the procedure, “Create a configuration provider and mark it as active”.</span></span>  
2. <span data-ttu-id="86af3-117">คลิก การตั้งค่าคอนฟิกการรายงาน</span><span class="sxs-lookup"><span data-stu-id="86af3-117">Click Reporting configurations.</span></span>
3. <span data-ttu-id="86af3-118">ใช้ตัวกรอง '1099 แบบจำลองการชำระเงิน'</span><span class="sxs-lookup"><span data-stu-id="86af3-118">Apply the '1099 Payments model' filter.</span></span> <span data-ttu-id="86af3-119">ถ้าคุณดำเนินการกระบวนงานเสร็จสมบูรณ์แล้ว ” ER สร้างการตั้งค่าคอนฟิกที่ต้องการในการนำเข้าข้อมูลจากไฟล์ภายนอกสำหรับการรายงานทางอิเล็กทรอนิกส์" และการตั้งค่าคอนฟิก '1099 แบบจำลองการชำระเงิน' จะพร้อมใช้งานในแผนภูมิการตั้งค่าคอนฟิก ข้ามขั้นตอนทั้งหมดในงานย่อยถัดไป</span><span class="sxs-lookup"><span data-stu-id="86af3-119">If you already completed the procedure,” ER Create required configurations to import data from an external file for electronic reporting”, and the ‘1099 Payments model’ configuration is available in the configuration tree, skip all of the steps in the next sub-task.</span></span>   

## <a name="add-a-new-er-model-configuration"></a><span data-ttu-id="86af3-120">เพิ่มการตั้งค่าคอนฟิกแบบจำลองของ ER ใหม่</span><span class="sxs-lookup"><span data-stu-id="86af3-120">Add a new ER model configuration</span></span>
1. <span data-ttu-id="86af3-121">แทนที่จะสร้างแบบจำลองใหม่เพื่อสนับสนุนการนำเข้าข้อมูล ให้โหลดไฟล์ 1099model.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-121">Instead of creating a new model to support data import, load the 1099model.xml file that you previously downloaded.</span></span> <span data-ttu-id="86af3-122">ไฟล์นี้ประกอบด้วยแบบจำลองข้อมูลที่กำหนดเองของธุรกรรมของผู้จัดจำหน่าย</span><span class="sxs-lookup"><span data-stu-id="86af3-122">This file contains the custom data model of vendors’ transactions.</span></span> <span data-ttu-id="86af3-123">รูปแบบข้อมูลนี้ถูกแม็ปกับส่วนประกอบของข้อมูลที่จำเป็นเรียบร้อยแล้ว</span><span class="sxs-lookup"><span data-stu-id="86af3-123">This data model is already mapped to the necessary data components.</span></span>  
2. <span data-ttu-id="86af3-124">คลิก แลกเปลี่ยน</span><span class="sxs-lookup"><span data-stu-id="86af3-124">Click Exchange.</span></span>
3. <span data-ttu-id="86af3-125">คลิก โหลดจากไฟล์ XML</span><span class="sxs-lookup"><span data-stu-id="86af3-125">Click Load from XML file.</span></span>
4. <span data-ttu-id="86af3-126">คลิก เรียกดู และนำทางไปยังไฟล์ 1099model.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-126">Click Browse and navigate to the 1099model.xml file that you previously downloaded.</span></span>  
5. <span data-ttu-id="86af3-127">คลิก ตกลง</span><span class="sxs-lookup"><span data-stu-id="86af3-127">Click OK.</span></span>

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a><span data-ttu-id="86af3-128">เพิ่มการตั้งค่าคอนฟิกรูปแบบของ ER ใหม่ที่สนับสนุนการนำเข้าข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-128">Add a new ER format configuration that supports data import</span></span>
1. <span data-ttu-id="86af3-129">ในแผนภูมิ ให้เลือก 'แบบจำลองการชำระเงิน 1099'</span><span class="sxs-lookup"><span data-stu-id="86af3-129">In the tree, select '1099 Payments model'.</span></span>
2. <span data-ttu-id="86af3-130">คลิก สร้างการตั้งค่าคอนฟิก เพื่อเปิดกล่องโต้ตอบการวาง</span><span class="sxs-lookup"><span data-stu-id="86af3-130">Click Create configuration to open the drop dialog.</span></span>
3. <span data-ttu-id="86af3-131">ในฟิลด์ใหม่ ป้อน 'จัดรูปแบบตามแบบจำลองข้อมูล แบบจำลองการชำระเงิน 1099'</span><span class="sxs-lookup"><span data-stu-id="86af3-131">In the New field, enter 'Format based on data model 1099 Payments model'.</span></span>
4. <span data-ttu-id="86af3-132">เลือก ใช่ ในฟิลด์สนับสนุนการนำเข้าข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-132">Select Yes in the Supports data import field.</span></span>
5. <span data-ttu-id="86af3-133">กดแป้น ESC เพื่อปิดหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-133">Press ESC key to close this page.</span></span>
    * <span data-ttu-id="86af3-134">แทนที่จะสร้างรูปแบบ ER ใหม่เพื่อสนับสนุนการนำเข้าข้อมูล ให้โหลดไฟล์ 1099formatcsv.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-134">Instead of creating a new ER format to support data import, load the 1099formatcsv.xml file that you previously downloaded.</span></span> <span data-ttu-id="86af3-135">ไฟล์นี้ประกอบด้วยรูปแบบ ER ที่ต้องการ ซึ่งกำหนดโครงสร้างของไฟล์ CSV ขาเข้าและการแม็ปของโครงสร้างนี้ ให้กับแบบจำลองข้อมูลของธุรกรรมของผู้จัดจำหน่าย</span><span class="sxs-lookup"><span data-stu-id="86af3-135">This file contains the required ER format that defines the structure of the incoming CSV file and the mapping of this structure to the data model of the vendors’ transactions.</span></span>   
6. <span data-ttu-id="86af3-136">คลิก แลกเปลี่ยน</span><span class="sxs-lookup"><span data-stu-id="86af3-136">Click Exchange.</span></span>
7. <span data-ttu-id="86af3-137">คลิก โหลดจากไฟล์ XML</span><span class="sxs-lookup"><span data-stu-id="86af3-137">Click Load from XML file.</span></span>
    * <span data-ttu-id="86af3-138">คลิก เรียกดู และนำทางไปยังไฟล์ 1099formatcsv.xml ที่คุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-138">Click Browse and navigate to the 1099formatcsv.xml file that you previously downloaded.</span></span>  
8. <span data-ttu-id="86af3-139">คลิก ตกลง</span><span class="sxs-lookup"><span data-stu-id="86af3-139">Click OK.</span></span>
9. <span data-ttu-id="86af3-140">ในแผนภูมิ ขยาย 'แบบจำลองการชำระเงิน 1099'</span><span class="sxs-lookup"><span data-stu-id="86af3-140">In the tree, expand '1099 Payments model'.</span></span>
10. <span data-ttu-id="86af3-141">ในแผนภูมิ ให้เลือก 'แบบจำลองการชำระเงิน 1099\สำหรับการนำเข้าธุรกรรมของผู้จัดจำหน่าย (CSV)'</span><span class="sxs-lookup"><span data-stu-id="86af3-141">In the tree, select '1099 Payments model\For importing vendors' transactions (CSV)'.</span></span>

## <a name="review-format-settings"></a><span data-ttu-id="86af3-142">ตรวจทานการตั้งค่ารูปแบบ</span><span class="sxs-lookup"><span data-stu-id="86af3-142">Review format settings</span></span>
1. <span data-ttu-id="86af3-143">คลิก ตัวออกแบบ</span><span class="sxs-lookup"><span data-stu-id="86af3-143">Click Designer.</span></span>
2. <span data-ttu-id="86af3-144">คลิก ขยาย/ยุบ</span><span class="sxs-lookup"><span data-stu-id="86af3-144">Click Expand/collapse.</span></span>
3. <span data-ttu-id="86af3-145">เปิด 'แสดงรายละเอียด'</span><span class="sxs-lookup"><span data-stu-id="86af3-145">Toggle ‘Show details’ on.</span></span>
    * <span data-ttu-id="86af3-146">รูปแบบที่ได้รับการออกแบบแสดงถึงโครงสร้างของไฟล์ภายนอกที่คาดไว้ในรูปแบบ CSV</span><span class="sxs-lookup"><span data-stu-id="86af3-146">The designed format represents the expected structure of the external file in CSV format.</span></span>  
4. <span data-ttu-id="86af3-147">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ'</span><span class="sxs-lookup"><span data-stu-id="86af3-147">In the tree, select 'Incoming: File\Root: Sequence'.</span></span>
    * <span data-ttu-id="86af3-148">สำหรับองค์ประกอบรากของชนิด ลำดับ ได้มีการเลือกตัวเลือก 'รายการใหม่ - Windows (CR LF)' ในฟิลด์ 'อักขระพิเศษ'</span><span class="sxs-lookup"><span data-stu-id="86af3-148">For the Root element of the type SEQUENCE, the option ‘New line - Windows (CR LF)’ has been selected in the ‘Special characters’ field.</span></span> <span data-ttu-id="86af3-149">โดยขึ้นอยู่กับการตั้งค่านี้ แต่ละรายการในไฟล์แยกวิเคราะห์ต้องถือว่าเป็นเรกคอร์ดแยกต่างหาก</span><span class="sxs-lookup"><span data-stu-id="86af3-149">Based on this setting, each line in the parsing file must be considered as a separate record.</span></span>   
5. <span data-ttu-id="86af3-150">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1..\* '</span><span class="sxs-lookup"><span data-stu-id="86af3-150">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* '.</span></span>
    * <span data-ttu-id="86af3-151">สำหรับองค์ประกอบราก\รายการของชนิด ลำดับ ได้มีการเลือกตัวเลือก 'หนึ่งต่อหลายรายการ' ในฟิลด์ 'ความหลากหลาย'</span><span class="sxs-lookup"><span data-stu-id="86af3-151">For the Root\Line element of the type SEQUENCE, the option ‘One many’ has been selected in the ‘Multiplicity’ field.</span></span> <span data-ttu-id="86af3-152">โดยขึ้นอยู่กับการตั้งค่านี้ รายการอย่างน้อยหนึ่งรายการจะปรากฏในไฟล์แยกวิเคราะห์</span><span class="sxs-lookup"><span data-stu-id="86af3-152">Based on this setting, at least one line will be presented in the parsing file.</span></span>   
6. <span data-ttu-id="86af3-153">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก:ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี'</span><span class="sxs-lookup"><span data-stu-id="86af3-153">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case'.</span></span>
    * <span data-ttu-id="86af3-154">โปรดทราบว่า มีการเพิ่มองค์ประกอบ ราก\รายการ\ชนิด ของชนิด กรณี เป็นองค์ประกอบที่ซ้อนกันของลำดับ ราก\รายการ</span><span class="sxs-lookup"><span data-stu-id="86af3-154">Note that the Root\Line\Types element of the type CASE has been added as the nested element of the Root\Line sequence.</span></span> <span data-ttu-id="86af3-155">เนื่องจากองค์ประกอบ กรณี นี้ประกอบด้วยองค์ประกอบลำดับที่ซ้อนกัน 3 รายการ การตั้งค่านี้ถือว่า เราคาดว่าจะพบกับชนิดที่แตกต่างกันของรายการในไฟล์แยกวิเคราะห์ 3 ชนิด</span><span class="sxs-lookup"><span data-stu-id="86af3-155">Because this CASE element contains 3 nested sequence elements, this setting assumes that we expect to meet 3 different types of line in the parsing file.</span></span>   
7. <span data-ttu-id="86af3-156">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\ส่วนหัว: ลำดับ 1..1 '</span><span class="sxs-lookup"><span data-stu-id="86af3-156">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Header: Sequence 1..1 '.</span></span>
    * <span data-ttu-id="86af3-157">ราก\รายการ\ชนิด\องค์ประกอบส่วนหัวของชนิด ลำดับ ประกอบด้วย ค่าองค์ประกอบ สตริง ที่ซ้อนกันของสิ่งซึ่งได้ถูกกำหนดเป็นค่าสตริงแบบตายตัว</span><span class="sxs-lookup"><span data-stu-id="86af3-157">The Root\Line\Types\Header element of the type SEQUENCE contains the nested STRING element the value of which has been defined as the fixed string value.</span></span> <span data-ttu-id="86af3-158">ลำดับนี้จะแยกวิเคราะห์รายการส่วนหัวของไฟล์แยกวิเคราะห์</span><span class="sxs-lookup"><span data-stu-id="86af3-158">This sequence will parse the header line of the parsing file.</span></span>   
8. <span data-ttu-id="86af3-159">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)'</span><span class="sxs-lookup"><span data-stu-id="86af3-159">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)'.</span></span>
    * <span data-ttu-id="86af3-160">องค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเพื่อแยกวิเคราะห์รายการธุรกรรม</span><span class="sxs-lookup"><span data-stu-id="86af3-160">The Root\Line\Types\Record element of the type SEQUENCE, has been configured to parse the transaction lines.</span></span> <span data-ttu-id="86af3-161">โปรดสังเกตว่า อักขระ 'ตัวแบ่งแบบกำหนดเอง' ถูกตั้งค่าคอนฟิกเป็นเครื่องหมายจุลภาค</span><span class="sxs-lookup"><span data-stu-id="86af3-161">Note that the ‘Custom delimiter’ character option has been configured as a comma.</span></span> <span data-ttu-id="86af3-162">ซึ่งหมายความว่า เครื่องหมายจุลภาคจะถูกใช้เป็นตัวแบ่งของฟิลด์สำหรับชนิดของรายการนี้ในไฟล์แยกวิเคราะห์</span><span class="sxs-lookup"><span data-stu-id="86af3-162">This means that the comma will be used as a fields’ separator for this type of line in the parsing file.</span></span>   
    * <span data-ttu-id="86af3-163">หมายเหตุว่า ได้มีการเพิ่มองค์ประกอบที่ซ้อนกันหลายชนิดข้อมูลที่แตกต่างกันสำหรับองค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด สำหรับการแยกวิเคราะห์รายการของธุรกรรมเป็นฟิลด์แยกต่างหาก</span><span class="sxs-lookup"><span data-stu-id="86af3-163">Note that several nested elements of different data types have been added for the Root\Line\Types\Record element for parsing the transaction’s lines as separated fields.</span></span> <span data-ttu-id="86af3-164">โปรดสังเกตว่า ตัวเลือก 'แอพลิเคชันใบเสนอราคา' ถูกตั้งค่าคอนฟิกเป็น 'ไม่มี'</span><span class="sxs-lookup"><span data-stu-id="86af3-164">Note that the ‘Quotation application’ option has been configured as ‘None’.</span></span> <span data-ttu-id="86af3-165">ซึ่งหมายความว่า ในไฟล์แยกวิเคราะห์ ฟิลด์ทั้งหมดของชนิดนี้จะถือว่าไม่มีอักขระที่แนบอยู่</span><span class="sxs-lookup"><span data-stu-id="86af3-165">This means that in the parsing file, all fields of this type will be considered as having no enclosed characters.</span></span>   
9. <span data-ttu-id="86af3-166">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\TransactionDate: DateTime'</span><span class="sxs-lookup"><span data-stu-id="86af3-166">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime'.</span></span>
    * <span data-ttu-id="86af3-167">ตัวอย่างเช่น ราก\รายการ\ชนิด\เรกคอร์ด\องค์ประกอบ TransactionDate ของชนิด DATETIME ได้มีการตั้งค่าคอนฟิก เพื่อเรียกค่าวันและเวลาของธุรกรรมจากไฟล์แยกวิเคราะห์ในรูปแบบ ‘M/d/yyyy’</span><span class="sxs-lookup"><span data-stu-id="86af3-167">For example, the Root\Line\Types\Record\TransactionDate element of the type DATETIME has been configured to get the transaction’s date and time value from the parsing file in the ‘M/d/yyyy’ format.</span></span>   
10. <span data-ttu-id="86af3-168">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\CountryCode: สตริง 0..1 '</span><span class="sxs-lookup"><span data-stu-id="86af3-168">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1 '.</span></span>
    * <span data-ttu-id="86af3-169">โปรดสังเกตว่า มีการตั้งค่าคอนฟิกองค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด\CountryCode ของชนิด สตริง เป็นมีตัวเลือก 'ศูนย์ต่อหนึ่ง' ในฟิลด์ 'ความหลากหลาย'</span><span class="sxs-lookup"><span data-stu-id="86af3-169">Note that Root\Line\Types\Record\CountryCode element of the type STRING has been configured as having the option ‘Zero one’ in the ‘Multiplicity’ field.</span></span> <span data-ttu-id="86af3-170">การตั้งค่านี้พิจารณาค่าของฟิลด์ CountryCode ในรายการแยกวิเคราะห์เป็น ไม่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="86af3-170">This setting considers the value of the CountryCode field in the parsing line as optional.</span></span>   
11. <span data-ttu-id="86af3-171">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\เรกคอร์ด: ลำดับ 1..1 (,)\หมายเหตุ: ลำดับ 1..1 (,)'</span><span class="sxs-lookup"><span data-stu-id="86af3-171">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)'.</span></span>
    * <span data-ttu-id="86af3-172">โปรดทราบว่า องค์ประกอบ ราก\รายการ\ชนิด\เรกคอร์ด\หมายเหตุ ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเป็น มีตัวเลือก 'ทั้งหมด' ในฟิลด์ 'แอพลิเคชันใบเสนอราคา' และมีอักขระเครื่องหมายอัญประกาศคู่ในฟิลด์ 'เครื่องหมายคำพูด'</span><span class="sxs-lookup"><span data-stu-id="86af3-172">Note that Root\Line\Types\Record\Remark element of the type SEQUENCE has been configured as having the option ‘All’ in the ‘Quotation application’ field and double quotes character in the ‘Quotation mark’ field.</span></span> <span data-ttu-id="86af3-173">ซึ่งหมายความว่า ฟิลด์ทั้งหมดของรายการชนิดนี้ในการแยกวิเคราะห์แฟ้ม (ซึ่งอธิบายโดยองค์ประกอบที่ซ้อนกัน: ข้อความของชนิด สตริง) จะมีการพิจารณาตามที่อยู่ในอักขระเครื่องหมายอัญประกาศคู่</span><span class="sxs-lookup"><span data-stu-id="86af3-173">It means that all fields of this type of lines in the parsing file (described by the nested elements: Text of the STRING type) will be considered as enclosed in double quotes characters.</span></span>  
12. <span data-ttu-id="86af3-174">ในแผนภูมิ ให้เลือก 'ขาเข้า: ไฟล์\ราก: ลำดับ\รายการ: ลำดับ 1...\* \ชนิด: กรณี\ไม่ได้แยกวิเคราะห์: ลำดับ 1..1 '</span><span class="sxs-lookup"><span data-stu-id="86af3-174">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Unparsed: Sequence 1..1 '.</span></span>
    * <span data-ttu-id="86af3-175">ราก\รายการ\ชนิด\องค์ประกอบที่ไม่ได้แยกวิเคราะห์ของชนิด ลำดับ ได้ถูกตั้งค่าคอนฟิกเพื่อแยกวิเคราะห์รายการธุรกรรม สำหรับโครงสร้างที่ไม่ตรงกับโครงสร้างอธิบายไว้ข้างต้นในองค์ประกอบกรณีหลัก</span><span class="sxs-lookup"><span data-stu-id="86af3-175">The Root\Line\Types\Unparsed element of the type SEQUENCE has been configured to parse the transaction lines for the structure which does not match the structure described above in the parent CASE element.</span></span>   

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a><span data-ttu-id="86af3-176">ตรวจทานการตั้งค่าการแม็ปรูปแบบไปยังแบบจำลองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-176">Review the setting of the format mapping to the data model</span></span>
1. <span data-ttu-id="86af3-177">คลิก แม็ปรูปแบบไปยังแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="86af3-177">Click Map format to model.</span></span>
    * <span data-ttu-id="86af3-178">การแม็ปแบบจำลอง 'การแม็ปไปยังแบบจำลองจากรูปแบบ CSV' อธิบายลำดับข้อมูลของการโอนย้ายข้อมูลจากไฟล์ CSV ขาเข้าไปยังแบบจำลองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-178">The model mapping ‘Mapping to model from CSV format’ describes the data flow of the data transfer from the incoming CSV file to the data model.</span></span>   
2. <span data-ttu-id="86af3-179">คลิก ตัวออกแบบ</span><span class="sxs-lookup"><span data-stu-id="86af3-179">Click Designer.</span></span>
3. <span data-ttu-id="86af3-180">ในแผนภูมิ ให้ขยาย 'รูปแบบ'</span><span class="sxs-lookup"><span data-stu-id="86af3-180">In the tree, expand 'format'.</span></span>
    * <span data-ttu-id="86af3-181">โปรดทราบว่ารูปแบบที่ได้รับการออกแบบมาจะแสดงอยู่ที่นี่โดยเป็นส่วนประกอบของแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-181">Note that the designed format is presented here as a data source component.</span></span>  
4. <span data-ttu-id="86af3-182">ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)'</span><span class="sxs-lookup"><span data-stu-id="86af3-182">In the tree, expand 'format\Incoming: File(Incoming)'.</span></span>
5. <span data-ttu-id="86af3-183">ในแผนภูมิ ขยาย ' รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)'</span><span class="sxs-lookup"><span data-stu-id="86af3-183">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)'.</span></span>
6. <span data-ttu-id="86af3-184">ในแผนภูมิ ขยาย ' รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)'</span><span class="sxs-lookup"><span data-stu-id="86af3-184">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)'.</span></span>
7. <span data-ttu-id="86af3-185">ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)\ชนิด: กรณี(ชนิด)'</span><span class="sxs-lookup"><span data-stu-id="86af3-185">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)'.</span></span>
8. <span data-ttu-id="86af3-186">ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)'</span><span class="sxs-lookup"><span data-stu-id="86af3-186">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)'.</span></span>
9. <span data-ttu-id="86af3-187">ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล'</span><span class="sxs-lookup"><span data-stu-id="86af3-187">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data'.</span></span>
10. <span data-ttu-id="86af3-188">ในแผนภูมิ ขยาย 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล\CountryCode: สตริง 0..1 (CountryCode)'</span><span class="sxs-lookup"><span data-stu-id="86af3-188">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)'.</span></span>
11. <span data-ttu-id="86af3-189">ในแผนภูมิ เลือก 'รูปแบบ\ขาเข้า: ไฟล์(ขาเข้า)\ราก: ลำดับ(ราก)\รายการ: ลำดับ 1..\* (รายการ)\ชนิด: กรณี(ชนิด)\เรกคอร์ด: ลำดับ 1..1 (,)(เรกคอร์ด)\ข้อมูล\วันที่ทำธุรกรรม: วันที่และเวลา(วันที่ทำธุรกรรม)'</span><span class="sxs-lookup"><span data-stu-id="86af3-189">In the tree, select 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)'.</span></span>
    * <span data-ttu-id="86af3-190">โปรดทราบว่า องค์ประกอบรูปแบบที่จำเป็นและที่ไม่จำเป็น เช่น TransactionDate และ CountryCode ดูแตกต่างในส่วนประกอบแหล่งข้อมูล 'รูปแบบ' ที่กำหนดไว้ล่วงหน้า</span><span class="sxs-lookup"><span data-stu-id="86af3-190">Note that the required and optional format elements, such as TransactionDate and CountryCode, look different in the predefined ‘format’ data source component.</span></span>   
12. <span data-ttu-id="86af3-191">ในแผนภูมิ ขยาย 'ธุรกรรม= '$ทั้งคู่''</span><span class="sxs-lookup"><span data-stu-id="86af3-191">In the tree, expand 'Transactions = '$both''.</span></span>
    * <span data-ttu-id="86af3-192">โปรดทราบว่า องค์ประกอบของรูปแบบที่กำหนดโครงสร้างของไฟล์นำเข้าจะถูกเชื่อมโยงข้อมูลกับองค์ประกอบของแบบจำลองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-192">Note that the elements of the format that defines the structure of the imported file are bound to the elements of the data model.</span></span> <span data-ttu-id="86af3-193">เนื้อหาของไฟล์ CSV ที่นำเข้าจะถูกจัดเก็บขณะรันไทม์ในแบบจำลองข้อมูลที่มีอยู่โดยขึ้นอยู่กับการเชื่อมโยงข้อมูลเหล่านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-193">Based on these bindings, the content of the imported CSV file will be stored at run-time in the existing data model.</span></span> <span data-ttu-id="86af3-194">ให้ความสำคัญกับการเชื่อมโยงข้อมูลขององค์ประกอบ CountryRegion</span><span class="sxs-lookup"><span data-stu-id="86af3-194">Pay attention to the binding of the CountryRegion element.</span></span> <span data-ttu-id="86af3-195">สำหรับองค์ประกอบของธุรกรรมใดๆ ในไฟล์ขาเข้าที่ไม่มีค่ารหัสประเทศที่ระบุ ระบบจะเติมข้อมูลรหัสประเทศเริ่มต้น 'USA' ในแบบจำลองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-195">For any transaction element in the incoming file that does not have a country code value specified, the default country code ‘USA’ will be populated in the data model.</span></span>   
13. <span data-ttu-id="86af3-196">เปิด 'แสดงรายละเอียด'</span><span class="sxs-lookup"><span data-stu-id="86af3-196">Toggle on ‘Show details’.</span></span>
14. <span data-ttu-id="86af3-197">คลิกแท็บ การตรวจสอบความถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="86af3-197">Click the Validations tab.</span></span>
15. <span data-ttu-id="86af3-198">คลิกค้นหา</span><span class="sxs-lookup"><span data-stu-id="86af3-198">Click Search.</span></span>
16. <span data-ttu-id="86af3-199">ในฟิลด์ค้นหา ให้พิมพ์ 'ผู้จัดจำหน่าย'</span><span class="sxs-lookup"><span data-stu-id="86af3-199">In the Find field, type 'vend'.</span></span>
17. <span data-ttu-id="86af3-200">คลิก ค้นหาถัดไป</span><span class="sxs-lookup"><span data-stu-id="86af3-200">Click Find next.</span></span>
    * <span data-ttu-id="86af3-201">การแม็ปรูปแบบนี้อาจประกอบด้วยตรรกะที่ผู้ใช้กำหนดเพื่อตรวจสอบความถูกต้องของข้อมูลที่นำเข้าจากจุดยืนทางธุรกิจ</span><span class="sxs-lookup"><span data-stu-id="86af3-201">This format mapping may contain user-defined logic to validate the accuracy of the imported data from a business standpoint.</span></span> <span data-ttu-id="86af3-202">ตัวอย่างเช่น โดยขึ้นอยู่กับการตั้งค่า สำหรับรายการใดๆ ในไฟล์ที่นำเข้า โครงสร้างซึ่งไม่ตรงกับโครงสร้างของรายการส่วนหัวและรายการธุรกรรมเลย ข้อความเตือนจะถูกสร้างขึ้นใน Infolog ที่แจ้งผู้ใช้เกี่ยวกับกรณีนี้ ซึ่งบ่งชี้หมายเลขลำดับของธุรกรรมในไฟล์</span><span class="sxs-lookup"><span data-stu-id="86af3-202">For example, based on the setting, for any line in the importing file the structure of which does not match neither the structure of the header line nor transaction line, a warning message will be generated in the Infolog informing the user about this case, indicating the transaction’s sequence number in the file.</span></span>   
18. <span data-ttu-id="86af3-203">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="86af3-203">Close the page.</span></span>

## <a name="run-the-format-mapping"></a><span data-ttu-id="86af3-204">รันการแม็ปรูปแบบ</span><span class="sxs-lookup"><span data-stu-id="86af3-204">Run the format mapping</span></span>
<span data-ttu-id="86af3-205">เพื่อวัตถุประสงค์ในการทดสอบ ดำเนินการแม็ปรูปแบบโดยใช้แฟ้ม 1099entriescsv.csv ซึ่งคุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-205">For testing purposes, execute the format mapping using the 1099entriescsv.csv file that you previously downloaded.</span></span> <span data-ttu-id="86af3-206">เอาท์พุทที่สร้างขึ้นจะแสดงข้อมูลที่จะถูกนำเข้าจากไฟล์ CSV ที่เลือก และจะถูกเติมข้อมูลไปยังแบบจำลองข้อมูลที่กำหนดเองในขณะที่นำเข้าจริง</span><span class="sxs-lookup"><span data-stu-id="86af3-206">The generated output will present data that will be imported from the selected CSV file and populated to the custom data model at real import.</span></span>   
1. <span data-ttu-id="86af3-207">คลิก เรียกใช้</span><span class="sxs-lookup"><span data-stu-id="86af3-207">Click Run.</span></span>
    * <span data-ttu-id="86af3-208">คลิก เรียกดู และนำทางไปยังไฟล์ 1099entriescsv.csv ที่คุณดาวน์โหลดไว้ก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="86af3-208">Click Browse and navigate to the 1099entriescsv.csv file that you previously downloaded.</span></span>  
2. <span data-ttu-id="86af3-209">คลิก ตกลง</span><span class="sxs-lookup"><span data-stu-id="86af3-209">Click OK.</span></span>
    * <span data-ttu-id="86af3-210">หมายเหตุ ข้อความเตือนเกี่ยวกับรายการที่ไม่ได้รับการยอมรับ</span><span class="sxs-lookup"><span data-stu-id="86af3-210">Note the warning messages about lines that are not accepted.</span></span> <span data-ttu-id="86af3-211">รายการที่ 4 ประกอบด้วยค่าขาเข้าที่ถูกนำเสนอในรูปแบบที่ไม่สามารถยอมรับได้ ในขณะที่รายการที่ 7 ไม่ได้ประกอบด้วยข้อความหมายเหตุธุรกรรมในใบเสนอราคาคู่</span><span class="sxs-lookup"><span data-stu-id="86af3-211">Line 4 contains the income value that is presented in the non-acceptable format while line 7 does not contain the transaction remark text in double quotes.</span></span>   
    * <span data-ttu-id="86af3-212">ตรวจสอบเอาท์พุทในรูปแบบ XML ซึ่งแสดงข้อมูลที่ได้ถูกนำเข้าจากไฟล์ที่เลือก และถูกนำไปยังแบบจำลองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="86af3-212">Review the output in XML format that represents the data that has been imported from the selected file and ported to the data model.</span></span> <span data-ttu-id="86af3-213">โปรดทราบว่า มีการประมวลผลรายการทั้ง 7 รายการของไฟล์ CSV ที่นำเข้า</span><span class="sxs-lookup"><span data-stu-id="86af3-213">Note that all 7 lines of the imported CSV file were processed.</span></span> <span data-ttu-id="86af3-214">ชื่อของฟิลด์บรรจุ รายการที่ 1 ถูกข้าม ธุรกรรม 4 รายการถูกแยกวิเคราะห์อย่างถูกต้อง และมีการรับรู้ธุรกรรม 2 รายการว่าไม่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="86af3-214">The containing fields’ titles line 1 were skipped, 4 transactions were properly parsed, and 2 transactions were recognized as not valid.</span></span>   
3. <span data-ttu-id="86af3-215">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="86af3-215">Close the page.</span></span>
4. <span data-ttu-id="86af3-216">ปิดหน้า</span><span class="sxs-lookup"><span data-stu-id="86af3-216">Close the page.</span></span>


