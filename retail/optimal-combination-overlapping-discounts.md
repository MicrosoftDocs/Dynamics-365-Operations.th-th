---
title: "กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด"
description: "เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะทำให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด เมื่อมียอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ ทั่วไปเช่น &quot;ซื้อ 1 เรียก X 1 เปอร์เซ็นต์เศษ&quot; ส่วนลดการขายปลีก (BOGO) การกระบวนการนี้กลายเป็น ประเด็นของ combinatorial การปรับให้เหมาะสม"
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>กำหนดชุดของส่วนลดที่ซ้อนทับกันที่ดีที่สุด

เมื่อมีการเหลื่อมกับส่วนลด คุณต้องกำหนดชุดของส่วนลดที่ซ้อนทับกันซึ่งจะทำให้ผลรวมของธุรกรรมต่ำสุดหรือส่วนลดรวมสูงสุด เมื่อมียอดเงินส่วนลดแตกต่างกันไปตามราคาของผลิตภัณฑ์ที่ซื้อ ทั่วไปเช่น "ซื้อ 1 เรียก X 1 เปอร์เซ็นต์เศษ" ส่วนลดการขายปลีก (BOGO) การกระบวนการนี้กลายเป็น ประเด็นของ combinatorial การปรับให้เหมาะสม

บทความนี้ใช้กับ R3 2012 AX Dynamics Microsoft ด้วย KB 3105973 (เปิดให้ใช้งานเมื่อวันที่ 2 พฤศจิกายน 2015) หรือรุ่นที่ใหม่กว่า และ 2016 กุมภาพันธ์นำออกใช้ของ Microsoft Dynamics AX เพื่อกำหนดชุดเหลื่อมส่วนลด เพื่อใช้ในเวลาเหมาะสม และดำเนินต่อเพื่อให้มีรูปแบบ rich ลดฟังก์ชันการทำงานที่มีอยู่ใน Microsoft Dynamics AX for Retail เราได้แนะนำวิธีการสำหรับการใช้ส่วนลดที่ซ้อนทับกันอยู่ เราเรียกวิธีการนี้ใหม่**การจัดอันดับค่ากำไร** การจัดอันดับค่ากำไรจะใช้เมื่อเวลาที่ต้องใช้เพื่อประเมินชุดที่เป็นไปได้ของส่วนลดที่ซ้อนทับกัน เกินขีดเริ่มเปลี่ยนที่สามารถกำหนดค่าในการ**พารามิเตอร์การขายปลีก**หน้าใน Dynamics AX มูลค่าส่วนเพิ่มวิธีการจัดอันดับ ค่าถูกคำนวณสำหรับแต่ละส่วนลดที่ซ้อนทับกัน โดยใช้ค่าของส่วนลดในผลิตภัณฑ์ที่ใช้ร่วมกัน ส่วนลดคาบเกี่ยวกันแล้วใช้จากค่าสูงสุดสัมพัทธ์กับค่าต่ำสุดสัมพัทธ์ สำหรับรายละเอียดเกี่ยวกับวิธีการใหม่ ดูส่วน "ค่ากำไรเบื้องต้น" ในบทความนี้ การจัดอันดับค่ากำไรเบื้องต้นไม่ได้ใช้เมื่อยอดเงินส่วนลดสำหรับผลิตภัณฑ์ไม่ได้รับผลกระทบจากผลิตภัณฑ์อื่นในธุรกรรม ตัวอย่างเช่น วิธีการนี้ไม่ได้ใช้ สำหรับส่วนลดง่าย ๆ สอง หรือส่วนลดปกติและส่วนลดปริมาณผลิตภัณฑ์เดียว

## <a name="discount-examples"></a>ตัวอย่างส่วนลด
ใน Dynamics AX คุณสามารถสร้างได้ไม่จำกัดจำนวนส่วนลดการขายปลีกบนชุดทั่วไปของผลิตภัณฑ์ อย่างไรก็ตาม เนื่องจากไม่มีข้อจำกัด ปัญหาด้านประสิทธิภาพอาจเกิดขึ้นเมื่อคุณพยายามที่จะคำนวณส่วนลดที่ควรจะใช้ได้กับผลิตภัณฑ์ต่าง ๆ ตัวอย่างต่อไปนี้แสดงให้เห็นถึงปัญหานี้ในรายละเอียดเพิ่มเติม ในตัวอย่างที่ 1 เราเริ่มต้น ด้วยสองผลิตภัณฑ์และส่วนลดทั้งสองที่ซ้อนทับกันอยู่ จาก นั้น ในตัวอย่างที่ 2 เราแสดงว่าปัญหา evolves เมื่อมีเพิ่มผลิตภัณฑ์เพิ่มเติม

### <a name="example-1-two-products-and-two-discounts"></a>ตัวอย่างที่ 1: สองผลิตภัณฑ์และส่วนลดทั้งสอง

ในตัวอย่างนี้ จำเป็นเพื่อให้มีสิทธิได้รับส่วนลดแต่ละผลิตภัณฑ์ที่สอง และไม่สามารถรวมส่วนลด ส่วนลดในตัวอย่างนี้คือ**ราคาที่ดีที่สุด**ส่วนลด ผลิตภัณฑ์ทั้งสองมีสิทธิได้รับส่วนลดทั้งสอง ต่อไปนี้เป็นส่วนลดทั้งสอง [![ทับซ้อนส่วนลดผสม 01](./media/overlapping-discount-combo-01.jpg)](./media/overlapping-discount-combo-01.jpg)สำหรับผลิตภัณฑ์ใด ๆ สอง ดีกว่าส่วนลดเหล่านี้ทั้งสองขึ้นอยู่กับราคาของผลิตภัณฑ์สอง เมื่อราคาของผลิตภัณฑ์ทั้งสองจะเท่ากับ หรือใกล้เคียง ส่วนลด 1 จะดีกว่า เมื่อราคาของผลิตภัณฑ์หนึ่งจะมากน้อยกว่าราคาของผลิตภัณฑ์อื่น ๆ ส่วนลด 2 จะดีกว่า นี่คือกฎทางคณิตศาสตร์สำหรับการประเมินส่วนลดเหล่านี้ทั้งสองระหว่างกัน: [![ผสมลด Overlapping 02](./media/overlapping-discount-combo-02.jpg)](./media/overlapping-discount-combo-02.jpg)หมายเหตุว่า เมื่อราคาของผลิตภัณฑ์ 1 จะเท่ากับ thirds สองราคาของผลิตภัณฑ์ 2 ส่วนลดทั้งสองเป็นเท่านั้น ในตัวอย่างนี้ เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 แตกต่างจากไม่กี่เปอร์เซ็นต์ (เมื่อราคาของผลิตภัณฑ์สองถูกแยกอยู่ไกล) สูงสุด 25 เปอร์เซ็นต์ (เมื่อสองผลิตภัณฑ์ได้ราคาเดียวกัน) เปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 2 ได้รับการแก้ไข เสมอคือ 20 เปอร์เซ็นต์ เนื่องจากเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับส่วนลด 1 มีช่วงที่สามารถเพิ่มเติม หรือน้อยกว่า 2 ส่วนลด ส่วนลดดีที่สุดขึ้นอยู่กับราคาของผลิตภัณฑ์สองที่ต้องเป็นส่วนลด ในตัวอย่างนี้ การคำนวณเสร็จสมบูรณ์ อย่างรวดเร็วเนื่องจากส่วนลดทั้งสองเท่านั้นจะนำไปใช้ในผลิตภัณฑ์สองเท่านั้น มีเพียงสองชุดที่เป็นไปได้: แอพลิเคชันหนึ่งของส่วนลดที่ 1 หรือหนึ่งในแอพลิเคชันของส่วนลดที่ 2 มีวิธีเรียงสับเปลี่ยนไม่มีอยู่ในการคำนวณ ค่าของแต่ละส่วนลดถูกคำนวณ โดยใช้ผลิตภัณฑ์ทั้งสอง และใช้ส่วนลดดีที่สุด

### <a name="example-2-four-products-and-two-discounts"></a>ตัวอย่างที่ 2: สี่ผลิตภัณฑ์และส่วนลดทั้งสอง

ถัดไป เราจะใช้สี่ผลิตภัณฑ์และส่วนลดทั้งสองเหมือนกัน ผลิตภัณฑ์สี่ทั้งหมดมีสิทธิได้รับส่วนลดทั้งสอง มีสิบสองชุดที่เป็นไปได้ ในตอนท้าย ส่วนลดทั้งสองจะใช้กับธุรกรรมในหนึ่งในสามชุด: โปรแกรมประยุกต์ทั้งสองส่วนลด 1 แอพลิเคชันที่สองของส่วนลด 2 หรือหนึ่งแอพลิเคชันของแอพลิเคชัน 1 และหนึ่งส่วนลดส่วนลด 2 เมื่อต้องการแสดงชุดที่เป็นไปได้ เราจะดูสี่ผลิตภัณฑ์ที่มีราคาแตกต่างกันสองชุดที่แตกต่างกัน:

-   ผลิตภัณฑ์ทั้งหมดที่สี่มีราคาเดียวกัน $15.00 ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ โปรแกรมประยุกต์สองส่วนลด 1 ผลิตภัณฑ์ที่สองจะเป็นราคาเต็ม ทั้งสองจะ 50 เปอร์เซ็นต์เศษ ผลรวมสำหรับธุรกรรมที่ลด $45 (15 + 15 + 7.50 + 7.50), ซึ่งก็คือ $15 (25 เปอร์เซ็นต์) ปิดอยู่เป็นจำนวน $60 undiscounted ส่วนลด 2 คือ $12 เท่านั้น (20 เปอร์เซ็นต์)
-   ผลิตภัณฑ์ที่สองคือ $20 แต่ละ ผลิตภัณฑ์หนึ่งคือ $15 และผลิตภัณฑ์หนึ่งเป็น $5 ในกรณีนี้ ชุดส่วนลดที่ดีที่สุดคือ แอพลิเคชันหนึ่งของแอพลิเคชัน 2 และหนึ่งส่วนลดส่วนลด 1 ตารางต่อไปนี้แสดงส่วนลด

เมื่อต้องการอ่านตาราง ใช้จากแถวหนึ่งผลิตภัณฑ์และผลิตภัณฑ์หนึ่งจากคอลัมน์ ตัวอย่างเช่น ในตารางส่วนลด 1 เมื่อคุณรวมสอง $20 ผลิตภัณฑ์ คุณได้ $10 ปิด ในตารางส่วนลด 2 เมื่อคุณรวมผลิตภัณฑ์ $15 และผลิตภัณฑ์ $5 คุณเห็น $4 ปิด [![ทับซ้อนส่วนลดผสม 03](./media/overlapping-discount-combo-03.jpg)](./media/overlapping-discount-combo-03.jpg)แรก เราค้นหาส่วนลดที่มากที่สุดที่พร้อมใช้งานจากสองผลิตภัณฑ์ใด ๆ โดยใช้ส่วนลดอย่างใดอย่างหนึ่ง ตารางสองแสดงยอดเงินส่วนลดสำหรับชุดทั้งหมดของผลิตภัณฑ์สอง ส่วนที่แรเงาของตารางหมายถึงกรณีใดที่ผลิตภัณฑ์จะจับคู่กับตัวมันเอง ซึ่งเราไม่สามารถดำเนินการ หรือการย้อนกลับการจับคู่ของสองผลิตภัณฑ์ที่เหมือนกันที่สร้างยอดส่วนลด และสามารถละเว้น ด้วยการดูที่ตาราง คุณสามารถดูได้ที่ลด 1 $20 สองรายการมีส่วนลดที่มากที่สุดที่พร้อมใช้งานสำหรับส่วนลดอย่างใดอย่างหนึ่งในผลิตภัณฑ์ทั้งหมดที่สี่ (ส่วนลดนี้จะถูกเน้นเป็นสีเขียวในตารางแรก) ที่ออกจากผลิตภัณฑ์ $15 และ $5 ผลิตภัณฑ์ ด้วยการดูที่สองตารางอีกครั้ง คุณสามารถดูว่า สำหรับผลิตภัณฑ์เหล่านี้สอง ส่วนลด 1 ให้ส่วนลด $2.50 ในขณะที่ส่วนลด 2 ให้ส่วนลด $4 ดังนั้น เราสามารถเลือกส่วนลด 2 ส่วนลดรวมเป็น $14 เพื่อให้ง่ายต่อการมองเห็นภาพสนทนานี้ ต่อไปนี้เป็นสองตารางเพิ่มเติมที่แสดงเปอร์เซ็นต์ส่วนลดที่มีผลบังคับใช้สำหรับผลิตภัณฑ์สองชุดที่เป็นไปได้ทั้งหมดสำหรับทั้งส่วนลด 1 และ 2 ส่วนลด รายการเฉพาะครึ่งหนึ่งของชุดจะรวม เนื่องจาก ไม่ว่าใบสั่งที่วางผลิตภัณฑ์สองลงในส่วนลดสำหรับส่วนลดเหล่านี้ทั้งสอง ส่วนลดมีผลบังคับใช้สูงสุด (25 เปอร์เซ็นต์) จะถูกเน้นเป็นสีเขียว และลดต่ำสุดมีผลบังคับใช้ (10 เปอร์เซ็นต์) จะถูกเน้น ด้วยสีแดง [![ทับซ้อนส่วนลดผสม 04](./media/overlapping-discount-combo-04.jpg)](./media/overlapping-discount-combo-04.jpg)**หมายเหตุ:**เมื่อราคาที่แตกต่างกัน และส่วนลดอย่าง น้อยสองแข่งขัน วิธีเดียวที่จะรับประกันชุดของส่วนลดที่ดีที่สุดคือการ ประเมินส่วนลดทั้งสอง และเปรียบเทียบ

## <a name="total-possible-combinations"></a>ชุดที่เป็นไปได้ทั้งหมด
ส่วนนี้ยังคงมีอยู่ตัวอย่างจากส่วนก่อนหน้า เราจะเพิ่มผลิตภัณฑ์เพิ่มเติมและส่วนลดอื่น และดูชุดจำนวนต้องคำนวณ และเปรียบเทียบ ตารางต่อไปนี้แสดงหมายเลขของชุดส่วนลดที่เป็นไปได้เป็นการเพิ่มปริมาณผลิตภัณฑ์ ตารางแสดงสิ่งที่เกิดขึ้นเมื่อมีการทับซ้อนกันส่วนลดทั้งสอง ดังในตัวอย่างก่อนหน้านี้ และ เมื่อมีส่วนลดที่ซ้อนทับกันสามทั้ง จำนวนของชุดส่วนลดที่เป็นไปได้ที่ต้องมีประเมินในไม่ช้าเกินอะไรแม้แต่คอมพิวเตอร์ที่รวดเร็วสามารถคำนวณ และเปรียบเทียบได้อย่างรวดเร็วเพียงพอที่จะยอมรับได้สำหรับธุรกรรมขายปลีก [![ทับซ้อนส่วนลดผสม 05](./media/overlapping-discount-combo-05.jpg)](./media/overlapping-discount-combo-05.jpg)เมื่อแม้แต่จำนวนมากกว่า หรือหักส่วนลดที่ซ้อนทับกันเพิ่มเติม จำนวนรวมของชุดส่วนลดที่เป็นไปได้อย่างรวดเร็วเข้าสู่โหมดไฮล้าน และเวลาที่ต้องใช้เพื่อประเมิน และเลือกชุดที่เป็นไปได้ดีที่สุดได้อย่างรวดเร็ว กลายเป็นอย่างเห็นได้ชัดขึ้น บางการปรับให้เหมาะสมได้ในโปรแกรมราคาขายปลีกเพื่อลดจำนวนชุดที่ต้องมีประเมินทั้งหมด อย่างไรก็ตาม เนื่องจากส่วนลดในการซ้อนทับกันของหมายเลขและปริมาณในธุรกรรมไม่ถูกจำกัด ชุดจำนวนมากจะเสมอได้ที่จะประเมินเมื่อใดก็ ตามที่มีส่วนลดที่ซ้อนทับกันอยู่ ปัญหานี้เป็นปัญหาที่ระบุถึงวิธีการจัดอันดับค่ากำไรเบื้องต้น

## <a name="marginal-value-method"></a>วิธีมูลค่ากำไรเบื้องต้น
เมื่อต้องการแก้ไขปัญหามีจำนวนชุดที่ต้องมีประเมินเพิ่มขึ้น exponentially การปรับให้เหมาะสมแล้วที่คำนวณค่าสำหรับแต่ละผลิตภัณฑ์ที่ใช้ร่วมกันของแต่ละส่วนลดบนชุดของผลิตภัณฑ์ที่สามารถใช้กับส่วนลดสอง หรือมากกว่านั้น เราอ้างอิงถึงค่านี้เป็นการ**ค่ากำไร**ส่วนลดสำหรับผลิตภัณฑ์ที่ใช้ร่วมกัน ค่ากำไรเบื้องต้นเป็นค่าเฉลี่ยสำหรับแต่ละผลิตภัณฑ์เพิ่มในยอดเงินส่วนลดรวมเมื่อผลิตภัณฑ์ที่ใช้ร่วมกันมีอยู่ในแต่ละส่วนลด ค่ากำไรถูกคำนวณ ด้วยการหักยอดเงินส่วนลดรวม (DTotal), หักยอดเงินส่วนลดที่ไม่ มีผลิตภัณฑ์ที่ใช้ร่วมกัน (DMinus\\ใช้ร่วมกัน), และหารผลต่างนั้น ด้วยจำนวนของผลิตภัณฑ์ที่ใช้ร่วมกัน (ProductsShared) [![ทับซ้อนส่วนลดผสม 06](./media/overlapping-discount-combo-06.jpg)](./media/overlapping-discount-combo-06.jpg)หลังจากที่มีคำนวณค่ากำไรเบื้องต้นของแต่ละส่วนลดบนชุดที่ใช้ร่วมกันของผลิตภัณฑ์ ส่วนลดที่ใช้กับผลิตภัณฑ์ที่ใช้ร่วมกันในใบสั่ง exhaustively จากค่ากำไรเบื้องต้นสูงสุดค่าต่ำสุดที่กำไรเบื้องต้น สำหรับวิธีการนี้ เป็นไปได้ส่วนลดทั้งหมดที่เหลือไม่ได้เปรียบเทียบทุกครั้งหลังจากที่มีใช้เพียงอินสแตนซ์เดียวของส่วนลด แทน ส่วนลดในการซ้อนทับกันจะเปรียบเทียบหนึ่งครั้ง และจึง นำมาใช้ในใบสั่ง ดำเนินการเปรียบเทียบไม่มีเพิ่มเติม คุณสามารถกำหนดค่าขีดจำกัดเมื่อต้องการสลับไปยังเมธอดค่ากำไรเบื้องต้นบน**ส่วนลด**แท็บของการ**พารามิเตอร์การขายปลีก**หน้าได้ เวลายอมรับได้ในการคำนวณส่วนลดรวมที่แตกต่างกันไปทั่วทั้งอุตสาหกรรมการขายปลีก อย่างไรก็ตาม เวลานี้โดยทั่วไปจะอยู่ในช่วงของหลักสิบมิลลิวินาทีถึงหนึ่งวินาที


